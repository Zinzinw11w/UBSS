/*! For license information please see main.ab4e6cb4.js.LICENSE.txt */
(()=>{var e={43:(e,t,n)=>{"use strict";e.exports=n(202)},45:(e,t,n)=>{var r=n(738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},98:(e,t,n)=>{"use strict";var r=n(897).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(858),i=n(887),o=n(679),a=n(799);class c{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const l="@firebase/app",u="0.14.4",h=new i.Logger("@firebase/app"),d="@firebase/app-compat",f="@firebase/analytics-compat",m="@firebase/analytics",p="@firebase/app-check-compat",g="@firebase/app-check",y="@firebase/auth",v="@firebase/auth-compat",w="@firebase/database",b="@firebase/data-connect",x="@firebase/database-compat",S="@firebase/functions",E="@firebase/functions-compat",A="@firebase/installations",N="@firebase/installations-compat",T="@firebase/messaging",k="@firebase/messaging-compat",C="@firebase/performance",I="@firebase/performance-compat",_="@firebase/remote-config",P="@firebase/remote-config-compat",j="@firebase/storage",D="@firebase/storage-compat",M="@firebase/firestore",R="@firebase/ai",O="@firebase/firestore-compat",L="firebase",F="[DEFAULT]",U={[l]:"fire-core",[d]:"fire-core-compat",[m]:"fire-analytics",[f]:"fire-analytics-compat",[g]:"fire-app-check",[p]:"fire-app-check-compat",[y]:"fire-auth",[v]:"fire-auth-compat",[w]:"fire-rtdb",[b]:"fire-data-connect",[x]:"fire-rtdb-compat",[S]:"fire-fn",[E]:"fire-fn-compat",[A]:"fire-iid",[N]:"fire-iid-compat",[T]:"fire-fcm",[k]:"fire-fcm-compat",[C]:"fire-perf",[I]:"fire-perf-compat",[_]:"fire-rc",[P]:"fire-rc-compat",[j]:"fire-gcs",[D]:"fire-gcs-compat",[M]:"fire-fst",[O]:"fire-fst-compat",[R]:"fire-vertex","fire-js":"fire-js",[L]:"fire-js-all"},B=new Map,V=new Map,z=new Map;function G(e,t){try{e.container.addComponent(t)}catch(n){h.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function H(e){const t=e.name;if(z.has(t))return h.debug("There were multiple attempts to register component ".concat(t,".")),!1;z.set(t,e);for(const n of B.values())G(n,e);for(const n of V.values())G(n,e);return!0}function q(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function W(e){return void 0!==e.options}function Q(e){return!W(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}const K={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},J=new o.ErrorFactory("app","Firebase",K);class Y{constructor(e,t,n){this._isDeleted=!1,this._options=r({},e),this._config=r({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new s.Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw J.create("app-deleted",{appName:this._name})}}function Z(e,t){const n=o.base64Decode(e.split(".")[1]);if(null===n)return void console.error("FirebaseServerApp ".concat(t," is invalid: second part could not be parsed."));if(void 0===JSON.parse(n).exp)return void console.error("FirebaseServerApp ".concat(t," is invalid: expiration claim could not be parsed"));1e3*JSON.parse(n).exp-(new Date).getTime()<=0&&console.error("FirebaseServerApp ".concat(t," is invalid: the token has expired."))}class X extends Y{constructor(e,t,n,s){const i=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,o={name:n,automaticDataCollectionEnabled:i};if(void 0!==e.apiKey)super(e,o,s);else{super(e.options,o,s)}this._serverConfig=r({automaticDataCollectionEnabled:i},t),this._serverConfig.authIdToken&&Z(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&Z(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"undefined"!==typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,te(l,u,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){ee(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw J.create("server-app-deleted")}}function $(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=r({name:F,automaticDataCollectionEnabled:!0},t),a=i.name;if("string"!==typeof a||!a)throw J.create("bad-app-name",{appName:String(a)});if(n||(n=o.getDefaultAppConfig()),!n)throw J.create("no-options");const c=B.get(a);if(c){if(o.deepEqual(n,c.options)&&o.deepEqual(i,c.config))return c;throw J.create("duplicate-app",{appName:a})}const l=new s.ComponentContainer(a);for(const r of z.values())l.addComponent(r);const u=new Y(n,i,l);return B.set(a,u),u}async function ee(e){let t=!1;const n=e.name;if(B.has(n))t=!0,B.delete(n);else if(V.has(n)){e.decRefCount()<=0&&(V.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function te(e,t,n){var r;let i=null!==(r=U[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void h.warn(e.join(" "))}H(new s.Component("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const ne="firebase-heartbeat-store";let re=null;function se(){return re||(re=a.openDB("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ne)}catch(n){console.warn(n)}}}).catch(e=>{throw J.create("idb-open",{originalErrorMessage:e.message})})),re}async function ie(e,t){try{const n=(await se()).transaction(ne,"readwrite"),r=n.objectStore(ne);await r.put(t,oe(e)),await n.done}catch(n){if(n instanceof o.FirebaseError)h.warn(n.message);else{const e=J.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});h.warn(e.message)}}}function oe(e){return"".concat(e.name,"!").concat(e.options.appId)}class ae{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new le(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ce();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){h.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ce(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),ue(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ue(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=o.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return h.warn(t),""}}}function ce(){return(new Date).toISOString().substring(0,10)}class le{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!o.isIndexedDBAvailable()&&o.validateIndexedDBOpenable().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await se()).transaction(ne),n=await t.objectStore(ne).get(oe(e));return await t.done,n}catch(t){if(t instanceof o.FirebaseError)h.warn(t.message);else{const e=J.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});h.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ie(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ie(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ue(e){return o.base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:e})).length}var he;he="node",H(new s.Component("platform-logger",e=>new c(e),"PRIVATE")),H(new s.Component("heartbeat",e=>new ae(e),"PRIVATE")),te(l,u,he),te(l,u,"cjs2020"),te("fire-js",""),Object.defineProperty(t,"FirebaseError",{enumerable:!0,get:function(){return o.FirebaseError}}),t.SDK_VERSION="12.4.0",t._DEFAULT_ENTRY_NAME=F,t._addComponent=G,t._addOrOverwriteComponent=function(e,t){e.container.addOrOverwriteComponent(t)},t._apps=B,t._clearComponents=function(){z.clear()},t._components=z,t._getProvider=q,t._isFirebaseApp=W,t._isFirebaseServerApp=function(e){return null!==e&&void 0!==e&&void 0!==e.settings},t._isFirebaseServerAppSettings=Q,t._registerComponent=H,t._removeServiceInstance=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F;q(e,t).clearInstance(n)},t._serverApps=V,t.deleteApp=ee,t.getApp=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;const t=B.get(e);if(!t&&e===F&&o.getDefaultAppConfig())return $();if(!t)throw J.create("no-app",{appName:e});return t},t.getApps=function(){return Array.from(B.values())},t.initializeApp=$,t.initializeServerApp=function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o.isBrowser()&&!o.isWebWorker())throw J.create("invalid-server-app-environment");let i=n||{};if(e&&(W(e)?t=e.options:Q(e)?i=e:t=e),void 0===i.automaticDataCollectionEnabled&&(i.automaticDataCollectionEnabled=!0),t||(t=o.getDefaultAppConfig()),!t)throw J.create("no-options");const a=r(r({},i),t);if(void 0!==a.releaseOnDeref&&delete a.releaseOnDeref,void 0!==i.releaseOnDeref&&"undefined"===typeof FinalizationRegistry)throw J.create("finalization-registry-not-supported",{});const c=""+(l=JSON.stringify(a),[...l].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0));var l;const u=V.get(c);if(u)return u.incRefCount(i.releaseOnDeref),u;const h=new s.ComponentContainer(c);for(const r of z.values())h.addComponent(r);const d=new X(t,i,c,h);return V.set(c,d),d},t.onLog=function(e,t){if(null!==e&&"function"!==typeof e)throw J.create("invalid-log-argument");i.setUserLogHandler(e,t)},t.registerVersion=te,t.setLogLevel=function(e){i.setLogLevel(e)}},150:(e,t,n)=>{"use strict";n.d(t,{KO:()=>$,MF:()=>Y,Sx:()=>X,Wp:()=>Z,j6:()=>q,om:()=>H,xZ:()=>W});var r=n(379),s=n(606),i=n(965),o=n(776),a=n(799);class c{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const l="@firebase/app",u="0.14.4",h=new i.Vy("@firebase/app"),d="@firebase/app-compat",f="@firebase/analytics-compat",m="@firebase/analytics",p="@firebase/app-check-compat",g="@firebase/app-check",y="@firebase/auth",v="@firebase/auth-compat",w="@firebase/database",b="@firebase/data-connect",x="@firebase/database-compat",S="@firebase/functions",E="@firebase/functions-compat",A="@firebase/installations",N="@firebase/installations-compat",T="@firebase/messaging",k="@firebase/messaging-compat",C="@firebase/performance",I="@firebase/performance-compat",_="@firebase/remote-config",P="@firebase/remote-config-compat",j="@firebase/storage",D="@firebase/storage-compat",M="@firebase/firestore",R="@firebase/ai",O="@firebase/firestore-compat",L="firebase",F="[DEFAULT]",U={[l]:"fire-core",[d]:"fire-core-compat",[m]:"fire-analytics",[f]:"fire-analytics-compat",[g]:"fire-app-check",[p]:"fire-app-check-compat",[y]:"fire-auth",[v]:"fire-auth-compat",[w]:"fire-rtdb",[b]:"fire-data-connect",[x]:"fire-rtdb-compat",[S]:"fire-fn",[E]:"fire-fn-compat",[A]:"fire-iid",[N]:"fire-iid-compat",[T]:"fire-fcm",[k]:"fire-fcm-compat",[C]:"fire-perf",[I]:"fire-perf-compat",[_]:"fire-rc",[P]:"fire-rc-compat",[j]:"fire-gcs",[D]:"fire-gcs-compat",[M]:"fire-fst",[O]:"fire-fst-compat",[R]:"fire-vertex","fire-js":"fire-js",[L]:"fire-js-all"},B=new Map,V=new Map,z=new Map;function G(e,t){try{e.container.addComponent(t)}catch(n){h.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function H(e){const t=e.name;if(z.has(t))return h.debug("There were multiple attempts to register component ".concat(t,".")),!1;z.set(t,e);for(const n of B.values())G(n,e);for(const n of V.values())G(n,e);return!0}function q(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function W(e){return null!==e&&void 0!==e&&void 0!==e.settings}const Q={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},K=new o.FA("app","Firebase",Q);class J{constructor(e,t,n){this._isDeleted=!1,this._options=(0,r.A)({},e),this._config=(0,r.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new s.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw K.create("app-deleted",{appName:this._name})}}const Y="12.4.0";function Z(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=(0,r.A)({name:F,automaticDataCollectionEnabled:!0},t),a=i.name;if("string"!==typeof a||!a)throw K.create("bad-app-name",{appName:String(a)});if(n||(n=(0,o.T9)()),!n)throw K.create("no-options");const c=B.get(a);if(c){if((0,o.bD)(n,c.options)&&(0,o.bD)(i,c.config))return c;throw K.create("duplicate-app",{appName:a})}const l=new s.h1(a);for(const r of z.values())l.addComponent(r);const u=new J(n,i,l);return B.set(a,u),u}function X(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F;const t=B.get(e);if(!t&&e===F&&(0,o.T9)())return Z();if(!t)throw K.create("no-app",{appName:e});return t}function $(e,t,n){var r;let i=null!==(r=U[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return o&&e.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void h.warn(e.join(" "))}H(new s.uA("".concat(i,"-version"),()=>({library:i,version:t}),"VERSION"))}const ee="firebase-heartbeat-store";let te=null;function ne(){return te||(te=(0,a.openDB)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(n){console.warn(n)}}}).catch(e=>{throw K.create("idb-open",{originalErrorMessage:e.message})})),te}async function re(e,t){try{const n=(await ne()).transaction(ee,"readwrite"),r=n.objectStore(ee);await r.put(t,se(e)),await n.done}catch(n){if(n instanceof o.g)h.warn(n.message);else{const e=K.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});h.warn(e.message)}}}function se(e){return"".concat(e.name,"!").concat(e.options.appId)}class ie{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new ae(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=oe();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){h.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=oe(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),ce(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),ce(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=(0,o.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return h.warn(t),""}}}function oe(){return(new Date).toISOString().substring(0,10)}class ae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,o.zW)()&&(0,o.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ne()).transaction(ee),n=await t.objectStore(ee).get(se(e));return await t.done,n}catch(t){if(t instanceof o.g)h.warn(t.message);else{const e=K.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});h.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ce(e){return(0,o.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var le;le="",H(new s.uA("platform-logger",e=>new c(e),"PRIVATE")),H(new s.uA("heartbeat",e=>new ie(e),"PRIVATE")),$(l,u,le),$(l,u,"esm2020"),$("fire-js","")},153:(e,t,n)=>{"use strict";var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:l,ref:u,props:i,_owner:a.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},193:(e,t,n)=>{(function(){"use strict";var t;function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function r(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var s=0;s<16;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;s<16;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];let i,o=e.g[3];i=t+(o^n&(s^o))+r[0]+3614090360&4294967295,i=o+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[1]+3905402710&4294967295,o=t+(i<<12&4294967295|i>>>20),i=s+(n^o&(t^n))+r[2]+606105819&4294967295,i=n+(t^(s=o+(i<<17&4294967295|i>>>15))&(o^t))+r[3]+3250441966&4294967295,i=t+(o^(n=s+(i<<22&4294967295|i>>>10))&(s^o))+r[4]+4118548399&4294967295,i=o+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[5]+1200080426&4294967295,o=t+(i<<12&4294967295|i>>>20),i=s+(n^o&(t^n))+r[6]+2821735955&4294967295,i=n+(t^(s=o+(i<<17&4294967295|i>>>15))&(o^t))+r[7]+4249261313&4294967295,i=t+(o^(n=s+(i<<22&4294967295|i>>>10))&(s^o))+r[8]+1770035416&4294967295,i=o+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[9]+2336552879&4294967295,o=t+(i<<12&4294967295|i>>>20),i=s+(n^o&(t^n))+r[10]+4294925233&4294967295,i=n+(t^(s=o+(i<<17&4294967295|i>>>15))&(o^t))+r[11]+2304563134&4294967295,i=t+(o^(n=s+(i<<22&4294967295|i>>>10))&(s^o))+r[12]+1804603682&4294967295,i=o+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[13]+4254626195&4294967295,o=t+(i<<12&4294967295|i>>>20),i=s+(n^o&(t^n))+r[14]+2792965006&4294967295,i=n+(t^(s=o+(i<<17&4294967295|i>>>15))&(o^t))+r[15]+1236535329&4294967295,i=t+(s^o&((n=s+(i<<22&4294967295|i>>>10))^s))+r[1]+4129170786&4294967295,i=o+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[6]+3225465664&4294967295,o=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(o^t))+r[11]+643717713&4294967295,i=n+(o^t&((s=o+(i<<14&4294967295|i>>>18))^o))+r[0]+3921069994&4294967295,i=t+(s^o&((n=s+(i<<20&4294967295|i>>>12))^s))+r[5]+3593408605&4294967295,i=o+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[10]+38016083&4294967295,o=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(o^t))+r[15]+3634488961&4294967295,i=n+(o^t&((s=o+(i<<14&4294967295|i>>>18))^o))+r[4]+3889429448&4294967295,i=t+(s^o&((n=s+(i<<20&4294967295|i>>>12))^s))+r[9]+568446438&4294967295,i=o+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[14]+3275163606&4294967295,o=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(o^t))+r[3]+4107603335&4294967295,i=n+(o^t&((s=o+(i<<14&4294967295|i>>>18))^o))+r[8]+1163531501&4294967295,i=t+(s^o&((n=s+(i<<20&4294967295|i>>>12))^s))+r[13]+2850285829&4294967295,i=o+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[2]+4243563512&4294967295,o=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(o^t))+r[7]+1735328473&4294967295,i=n+(o^t&((s=o+(i<<14&4294967295|i>>>18))^o))+r[12]+2368359562&4294967295,i=t+((n=s+(i<<20&4294967295|i>>>12))^s^o)+r[5]+4294588738&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[8]+2272392833&4294967295,o=t+(i<<11&4294967295|i>>>21),i=s+(o^t^n)+r[11]+1839030562&4294967295,i=n+((s=o+(i<<16&4294967295|i>>>16))^o^t)+r[14]+4259657740&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^o)+r[1]+2763975236&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[4]+1272893353&4294967295,o=t+(i<<11&4294967295|i>>>21),i=s+(o^t^n)+r[7]+4139469664&4294967295,i=n+((s=o+(i<<16&4294967295|i>>>16))^o^t)+r[10]+3200236656&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^o)+r[13]+681279174&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[0]+3936430074&4294967295,o=t+(i<<11&4294967295|i>>>21),i=s+(o^t^n)+r[3]+3572445317&4294967295,i=n+((s=o+(i<<16&4294967295|i>>>16))^o^t)+r[6]+76029189&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^o)+r[9]+3654602809&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[12]+3873151461&4294967295,o=t+(i<<11&4294967295|i>>>21),i=s+(o^t^n)+r[15]+530742520&4294967295,i=n+((s=o+(i<<16&4294967295|i>>>16))^o^t)+r[2]+3299628645&4294967295,i=t+(s^((n=s+(i<<23&4294967295|i>>>9))|~o))+r[0]+4096336452&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[7]+1126891415&4294967295,o=t+(i<<10&4294967295|i>>>22),i=s+(t^(o|~n))+r[14]+2878612391&4294967295,i=n+(o^((s=o+(i<<15&4294967295|i>>>17))|~t))+r[5]+4237533241&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~o))+r[12]+1700485571&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[3]+2399980690&4294967295,o=t+(i<<10&4294967295|i>>>22),i=s+(t^(o|~n))+r[10]+4293915773&4294967295,i=n+(o^((s=o+(i<<15&4294967295|i>>>17))|~t))+r[1]+2240044497&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~o))+r[8]+1873313359&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[15]+4264355552&4294967295,o=t+(i<<10&4294967295|i>>>22),i=s+(t^(o|~n))+r[6]+2734768916&4294967295,i=n+(o^((s=o+(i<<15&4294967295|i>>>17))|~t))+r[13]+1309151649&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~o))+r[4]+4149444226&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[11]+3174756917&4294967295,o=t+(i<<10&4294967295|i>>>22),i=s+(t^(o|~n))+r[2]+718787259&4294967295,i=n+(o^((s=o+(i<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+o&4294967295}function s(e,t){this.h=t;const n=[];let r=!0;for(let s=e.length-1;s>=0;s--){const i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(n,function(){this.blockSize=-1}),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},n.prototype.v=function(e,t){void 0===t&&(t=e.length);const n=t-this.blockSize,s=this.C;let i=this.h,o=0;for(;o<t;){if(0==i)for(;o<=n;)r(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(s[i++]=e.charCodeAt(o++),i==this.blockSize){r(this,s),i=0;break}}else for(;o<t;)if(s[i++]=e[o++],i==this.blockSize){r(this,s),i=0;break}}this.h=i,this.o+=t},n.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var i={};function o(e){return-128<=e&&e<128?function(e,t){var n=i;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new s([0|e],e<0?-1:0)}):new s([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return c;if(e<0)return f(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=o(0),l=o(1),u=o(16777216);function h(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function f(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(l)}function m(e,t){return e.add(f(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function g(e,t){this.g=e,this.h=t}function y(e,t){if(h(t))throw Error("division by zero");if(h(e))return new g(c,c);if(d(e))return t=y(f(e),t),new g(f(t.g),f(t.h));if(d(t))return t=y(e,f(t)),new g(f(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=v(n),r=v(r);var s=w(n,1),i=w(r,1);for(r=w(r,2),n=w(n,2);!h(r);){var o=i.add(r);o.l(e)<=0&&(s=s.add(n),i=o),r=w(r,1),n=w(n,1)}return t=m(e,s.j(t)),new g(s,t)}for(s=c;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),o=(i=a(n)).j(t);d(o)||o.l(e)>0;)o=(i=a(n-=r)).j(t);h(i)&&(i=l),s=s.add(i),e=m(e,o)}return new g(s,e)}function v(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function w(e,t){const n=t>>5;t%=32;const r=e.g.length-n,i=[];for(let s=0;s<r;s++)i[s]=t>0?e.i(s+n)>>>t|e.i(s+n+1)<<32-t:e.i(s+n);return new s(i,e.h)}(t=s.prototype).m=function(){if(d(this))return-f(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},t.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(h(this))return"0";if(d(this))return"-"+f(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const s=y(n,t).g;let i=(((n=m(n,s.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(h(n=s))return i+r;for(;i.length<6;)i="0"+i;r=i+r}},t.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},t.l=function(e){return d(e=m(this,e))?-1:h(e)?0:1},t.abs=function(){return d(this)?f(this):this},t.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let s=0;s<=t;s++){let t=r+(65535&this.i(s))+(65535&e.i(s)),i=(t>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=i>>>16,t&=65535,i&=65535,n[s]=i<<16|t}return new s(n,-2147483648&n[n.length-1]?-1:0)},t.j=function(e){if(h(this)||h(e))return c;if(d(this))return d(e)?f(this).j(f(e)):f(f(this).j(e));if(d(e))return f(this.j(f(e)));if(this.l(u)<0&&e.l(u)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const s=this.i(r)>>>16,i=65535&this.i(r),o=e.i(t)>>>16,a=65535&e.i(t);n[2*r+2*t]+=i*a,p(n,2*r+2*t),n[2*r+2*t+1]+=s*a,p(n,2*r+2*t+1),n[2*r+2*t+1]+=i*o,p(n,2*r+2*t+1),n[2*r+2*t+2]+=s*o,p(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new s(n,0)},t.B=function(e){return y(this,e).h},t.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},t.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},t.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,e.exports.Md5=n,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=a,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return f(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let s=c;for(let o=0;o<t.length;o+=8){var i=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+i),n);i<8?(i=a(Math.pow(n,i)),s=s.j(i).add(a(e))):(s=s.j(r),s=s.add(a(e)))}return s},e.exports.Integer=s}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},198:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultsFromPostinstall=()=>{}},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function w(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var b=w.prototype=new v;b.constructor=w,p(b,y.prototype),b.isPureReactComponent=!0;var x=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function N(e,t,r){var s,i={},o=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)S.call(t,s)&&!A.hasOwnProperty(s)&&(i[s]=t[s]);var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(s in c=e.defaultProps)void 0===i[s]&&(i[s]=c[s]);return{$$typeof:n,type:e,key:o,ref:a,props:i,_owner:E.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var k=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,s,i,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case n:case r:c=!0}}if(c)return o=o(c=e),e=""===i?"."+C(c,0):i,x(o)?(s="",null!=e&&(s=e.replace(k,"$&/")+"/"),I(o,t,s,"",function(e){return e})):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,s+(!o.key||c&&c.key===o.key?"":(""+o.key).replace(k,"$&/")+"/")+e)),t.push(o)),1;if(c=0,i=""===i?".":i+":",x(e))for(var l=0;l<e.length;l++){var u=i+C(a=e[l],l);c+=I(a,t,s,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),l=0;!(a=e.next()).done;)c+=I(a=a.value,t,s,u=i+C(a,l++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function _(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",function(e){return t.call(n,e,s++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},D={transition:null},M={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:D,ReactCurrentOwner:E};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:_,forEach:function(e,t,n){_(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _(e,function(){t++}),t},toArray:function(e){return _(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=o,t.PureComponent=w,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=p({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=E.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)S.call(t,l)&&!A.hasOwnProperty(l)&&(s[l]=void 0===t[l]&&void 0!==c?c[l]:t[l])}var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}return{$$typeof:n,type:e.type,key:i,ref:o,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=N,t.createFactory=function(e){var t=N.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:l,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return j.current.useCallback(e,t)},t.useContext=function(e){return j.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return j.current.useDeferredValue(e)},t.useEffect=function(e,t){return j.current.useEffect(e,t)},t.useId=function(){return j.current.useId()},t.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return j.current.useMemo(e,t)},t.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},t.useRef=function(e){return j.current.useRef(e)},t.useState=function(e){return j.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return j.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,c=e[a],l=a+1,u=e[l];if(0>i(c,n))l<s&&0>i(u,c)?(e[r]=u,e[l]=n,r=l):(e[r]=c,e[a]=n,r=a);else{if(!(l<s&&0>i(u,n)))break e;e[r]=u,e[l]=n,r=l}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,c=a.now();t.unstable_now=function(){return a.now()-c}}var l=[],u=[],h=1,d=null,f=3,m=!1,p=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(l,t)}t=r(u)}}function x(e){if(g=!1,b(e),!p)if(null!==r(l))p=!0,D(S);else{var t=r(u);null!==t&&M(x,t.startTime-e)}}function S(e,n){p=!1,g&&(g=!1,v(T),T=-1),m=!0;var i=f;try{for(b(n),d=r(l);null!==d&&(!(d.expirationTime>n)||e&&!I());){var o=d.callback;if("function"===typeof o){d.callback=null,f=d.priorityLevel;var a=o(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?d.callback=a:d===r(l)&&s(l),b(n)}else s(l);d=r(l)}if(null!==d)var c=!0;else{var h=r(u);null!==h&&M(x,h.startTime-n),c=!1}return c}finally{d=null,f=i,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var E,A=!1,N=null,T=-1,k=5,C=-1;function I(){return!(t.unstable_now()-C<k)}function _(){if(null!==N){var e=t.unstable_now();C=e;var n=!0;try{n=N(!0,e)}finally{n?E():(A=!1,N=null)}}else A=!1}if("function"===typeof w)E=function(){w(_)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,j=P.port2;P.port1.onmessage=_,E=function(){j.postMessage(null)}}else E=function(){y(_,0)};function D(e){N=e,A||(A=!0,E())}function M(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,D(S))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:h++,callback:s,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===r(l)&&e===r(u)&&(g?(v(T),T=-1):g=!0,M(x,i-o))):(e.sortIndex=a,n(l,e),p||m||(p=!0,D(S))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},340:(e,t,n)=>{"use strict";n.r(t),n.d(t,{auth:()=>ar,db:()=>or,default:()=>lr,storage:()=>cr});var r=n(150);(0,r.KO)("firebase","12.4.0","app");var s=n(667),i=n(986),o=n(379),a=n(776),c=n(965),l=n(606);const u=["providerId"],h=["uid","auth","stsTokenManager"],d=["providerId","signInMethod"];function f(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const m=f,p=new a.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),g=new c.Vy("@firebase/auth");function y(e){if(g.logLevel<=c.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];g.error("Auth (".concat(r.MF,"): ").concat(e),...n)}}function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw S(e,...n)}function w(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return S(e,...n)}function b(e,t,n){const r=(0,o.A)((0,o.A)({},m()),{},{[t]:n});return new a.FA("auth","Firebase",r).create(t,{appName:e.name})}function x(e){return b(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function S(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return p.create(e,...n)}function E(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw S(t,...r)}}function A(e){const t="INTERNAL ASSERTION FAILED: "+e;throw y(t),new Error(t)}function N(e,t){e||A(t)}function T(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function k(){return"http:"===C()||"https:"===C()}function C(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class I{constructor(e,t){this.shortDelay=e,this.longDelay=t,N(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,a.jZ)()||(0,a.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(k()||(0,a.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function _(e,t){N(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class P{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void A("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void A("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void A("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const j={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},D=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],M=new I(3e4,6e4);function R(e,t){return e.tenantId&&!t.tenantId?(0,o.A)((0,o.A)({},t),{},{tenantId:e.tenantId}):t}async function O(e,t,n,r){return L(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const c=(0,a.Am)((0,o.A)({key:e.config.apiKey},i)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const u=(0,o.A)({method:t,headers:l},s);return(0,a.c1)()||(u.referrerPolicy="no-referrer"),e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(u.credentials="include"),P.fetch()(await U(e,e.config.apiHost,n,c),u)})}async function L(e,t,n){e._canInitEmulator=!1;const r=(0,o.A)((0,o.A)({},j),t);try{const t=new V(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw z(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw z(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw z(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw z(e,"user-disabled",i);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw b(e,a,o);v(e,a)}}catch(s){if(s instanceof a.g)throw s;v(e,"network-request-failed",{message:String(s)})}}async function F(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await O(e,t,n,r,s);return"mfaPendingCredential"in i&&v(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function U(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,o=i.config.emulator?_(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(D.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(o).toString()}return o}function B(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class V{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(w(this.auth,"network-request-failed")),M.get())})}}function z(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=w(e,t,r);return s.customData._tokenResponse=n,s}function G(e){return void 0!==e&&void 0!==e.enterprise}class H{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return B(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function q(e,t){return O(e,"GET","/v2/recaptchaConfig",R(e,t))}async function W(e,t){return O(e,"POST","/v1/accounts:lookup",t)}function Q(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function K(e){return 1e3*Number(e)}function J(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return y("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,a.u)(n);return e?JSON.parse(e):(y("Failed to decode base64 JWT payload"),null)}catch(s){return y("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function Y(e){const t=J(e);return E(t,"internal-error"),E("undefined"!==typeof t.exp,"internal-error"),E("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function Z(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof a.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class X{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class ${constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Q(this.lastLoginAt),this.creationTime=Q(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function ee(e){var t;const n=e.auth,r=await e.getIdToken(),s=await Z(e,W(n,{idToken:r}));E(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const o=null!==(t=i.providerUserInfo)&&void 0!==t&&t.length?te(i.providerUserInfo):[],a=(c=e.providerData,l=o,[...c.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var c,l;const u=e.isAnonymous,h=!(e.email&&i.passwordHash)&&!(null!==a&&void 0!==a&&a.length),d=!!u&&h,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new $(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function te(e){return e.map(e=>{let{providerId:t}=e,n=(0,i.A)(e,u);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class ne{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){E(e.idToken,"internal-error"),E("undefined"!==typeof e.idToken,"internal-error"),E("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):Y(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){E(0!==e.length,"internal-error");const t=Y(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(E(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await L(e,{},async()=>{const n=(0,a.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await U(e,r,"/v1/token","key=".concat(s)),o=await e._getAdditionalHeaders();o["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:o,body:n};return e.emulatorConfig&&(0,a.zJ)(e.emulatorConfig.host)&&(c.credentials="include"),P.fetch()(i,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new ne;return n&&(E("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(E("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(E("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ne,this.toJSON())}_performRefresh(){return A("not implemented")}}function re(e,t){E("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class se{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=(0,i.A)(e,h);this.providerId="firebase",this.proactiveRefresh=new X(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new $(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Z(this,this.stsTokenManager.getToken(this.auth,e));return E(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,a.Ku)(e),r=await n.getIdToken(t),s=J(r);E(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,o=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Q(K(s.auth_time)),issuedAtTime:Q(K(s.iat)),expirationTime:Q(K(s.exp)),signInProvider:o||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,a.Ku)(e);await ee(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(E(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,o.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new se((0,o.A)((0,o.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){E(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await ee(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,r.xZ)(this.auth.app))return Promise.reject(x(this.auth));const e=await this.getIdToken();return await Z(this,async function(e,t){return O(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,o.A)((0,o.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,o.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,c,l,u;const h=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,m=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(c=t._redirectEventId)&&void 0!==c?c:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:w,emailVerified:b,isAnonymous:x,providerData:S,stsTokenManager:A}=t;E(w&&A,e,"internal-error");const N=ne.fromJSON(this.name,A);E("string"===typeof w,e,"internal-error"),re(h,e.name),re(d,e.name),E("boolean"===typeof b,e,"internal-error"),E("boolean"===typeof x,e,"internal-error"),re(f,e.name),re(m,e.name),re(p,e.name),re(g,e.name),re(y,e.name),re(v,e.name);const T=new se({uid:w,auth:e,email:d,emailVerified:b,displayName:h,isAnonymous:x,photoURL:m,phoneNumber:f,tenantId:p,stsTokenManager:N,createdAt:y,lastLoginAt:v});return S&&Array.isArray(S)&&(T.providerData=S.map(e=>(0,o.A)({},e))),g&&(T._redirectEventId=g),T}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new ne;r.updateFromServerResponse(t);const s=new se({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await ee(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];E(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?te(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length),o=new ne;o.updateFromIdToken(n);const a=new se({uid:r.localId,auth:e,stsTokenManager:o,isAnonymous:i}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new $(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length)};return Object.assign(a,c),a}}const ie=new Map;function oe(e){N(e instanceof Function,"Expected a class definition");let t=ie.get(e);return t?(N(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ie.set(e,t),t)}class ae{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ae.type="NONE";const ce=ae;function le(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class ue{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=le(this.userKey,r.apiKey,s),this.fullPersistenceKey=le("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await W(this.auth,{idToken:e}).catch(()=>{});return t?se._fromGetAccountInfoResponse(this.auth,t,e):null}return se._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new ue(oe(ce),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||oe(ce);const i=le(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(i);if(t){let n;if("string"===typeof t){const r=await W(e,{idToken:t}).catch(()=>{});if(!r)break;n=await se._fromGetAccountInfoResponse(e,r,t)}else n=se._fromJSON(e,t);l!==s&&(o=n),s=l;break}}catch(c){}const a=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(t){}})),new ue(s,e,n)):new ue(s,e,n)}}function he(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(pe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(de(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ye(t))return"Blackberry";if(ve(t))return"Webos";if(fe(t))return"Safari";if((t.includes("chrome/")||me(t))&&!t.includes("edge/"))return"Chrome";if(ge(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function de(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/firefox\//i.test(e)}function fe(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function me(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/crios\//i.test(e)}function pe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iemobile/i.test(e)}function ge(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/android/i.test(e)}function ye(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/blackberry/i.test(e)}function ve(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/webos/i.test(e)}function we(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)();return we(e)||ge(e)||ve(e)||ye(e)||/windows phone/i.test(e)||pe(e)}function xe(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=he((0,a.ZQ)());break;case"Worker":t="".concat(he((0,a.ZQ)()),"-").concat(e);break;default:t=e}const s=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(r.MF,"/").concat(s)}class Se{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Ee{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=null===(t=a.meetsMinPasswordLength)||void 0===t||t),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(r=a.containsLowercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsUppercaseLetter)||void 0===s||s),a.isValid&&(a.isValid=null===(i=a.containsNumericCharacter)||void 0===i||i),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Ae{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Te(this),this.idTokenSubscription=new Te(this),this.beforeStateQueue=new Se(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=p,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=oe(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await ue.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await W(this,{idToken:e}),n=await se._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if((0,r.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,s=!1;if(e&&this.config.authDomain){var i,o;await this.getOrInitRedirectPersistenceManager();const t=null===(i=this.redirectUser)||void 0===i?void 0:i._redirectEventId,r=null===(o=n)||void 0===o?void 0:o._redirectEventId,a=await this.tryRedirectSignIn(e);t&&t!==r||null===a||void 0===a||!a.user||(n=a.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return E(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await ee(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,r.xZ)(this.app))return Promise.reject(x(this));const t=e?(0,a.Ku)(e):null;return t&&E(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&E(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,r.xZ)(this.app)?Promise.reject(x(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,r.xZ)(this.app)?Promise.reject(x(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(oe(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return O(e,"GET","/v2/passwordPolicy",R(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Ee(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new a.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return O(e,"POST","/v2/accounts:revokeToken",R(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&oe(e)||this._popupRedirectResolver;E(t,this,"argument-error"),this.redirectPersistenceManager=await ue.create(this,[oe(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(E(o,this,"internal-error"),o.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return E(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=xe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(g.logLevel<=c.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];g.warn("Auth (".concat(r.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ne(e){return(0,a.Ku)(e)}class Te{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,a.tD)(e=>this.observer=e)}get next(){return E(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let ke={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ce(e){return ke.loadJS(e)}function Ie(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class _e{constructor(){this.enterprise=new Pe}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Pe{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const je="NO_RECAPTCHA";class De{constructor(e){this.type="recaptcha-enterprise",this.auth=Ne(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;G(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(je)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new _e).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{q(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new H(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&G(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=ke.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Ce(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Me(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new De(e);let a;if(s)a=je;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const c=(0,o.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in c){const e=c.phoneEnrollmentInfo.phoneNumber,t=c.phoneEnrollmentInfo.recaptchaToken;Object.assign(c,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in c){const e=c.phoneSignInInfo.recaptchaToken;Object.assign(c,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return c}return r?Object.assign(c,{captchaResp:a}):Object.assign(c,{captchaResponse:a}),Object.assign(c,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(c,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),c}async function Re(e,t,n,r,s){if("EMAIL_PASSWORD_PROVIDER"===s){var i;if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Me(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Me(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){var o;if(null!==(o=e._getRecaptchaConfig())&&void 0!==o&&o.isProviderEnabled("PHONE_PROVIDER")){const s=await Me(e,t,n);return r(e,s).catch(async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await Me(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await Me(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Oe(e){const t=Ne(e),n=await q(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new H(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new De(t).verify()}}function Le(e,t,n){const r=Ne(e);E(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!(null===n||void 0===n||!n.disableWarnings),i=Fe(t),{host:o,port:c}=function(e){const t=Fe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Ue(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Ue(t)}}}(t),l=null===c?"":":".concat(c),u={url:"".concat(i,"//").concat(o).concat(l,"/")},h=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return E(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void E((0,a.bD)(u,r.config.emulator)&&(0,a.bD)(h,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=u,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,(0,a.zJ)(o)?((0,a.gE)("".concat(i,"//").concat(o).concat(l)),(0,a.P1)("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Fe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Ue(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Be{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return A("not implemented")}_getIdTokenResponse(e){return A("not implemented")}_linkToIdToken(e,t){return A("not implemented")}_getReauthenticationResolver(e){return A("not implemented")}}async function Ve(e,t){return O(e,"POST","/v1/accounts:signUp",t)}async function ze(e,t){return F(e,"POST","/v1/accounts:signInWithPassword",R(e,t))}class Ge extends Be{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ge(e,t,"password")}static _fromEmailAndCode(e,t){return new Ge(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Re(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",ze,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",R(e,t))}(e,{email:this._email,oobCode:this._password});default:v(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Re(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Ve,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return F(e,"POST","/v1/accounts:signInWithEmailLink",R(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:v(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function He(e,t){return F(e,"POST","/v1/accounts:signInWithIdp",R(e,t))}class qe extends Be{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new qe(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):v("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=(0,i.A)(t,d);if(!n||!r)return null;const o=new qe(n,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){return He(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,He(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,He(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,a.Am)(t)}return e}}async function We(e,t){return O(e,"POST","/v1/accounts:sendVerificationCode",R(e,t))}const Qe={USER_NOT_FOUND:"user-not-found"};class Ke extends Be{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ke({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ke({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await F(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,t));if(n.temporaryProof)throw z(e,"account-exists-with-different-credential",n);return n}(e,(0,o.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return F(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,(0,o.A)((0,o.A)({},t),{},{operation:"REAUTH"})),Qe)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new Ke({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class Je{constructor(e){var t,n,r,s,i,o;const c=(0,a.I9)((0,a.hp)(e)),l=null!==(t=c.apiKey)&&void 0!==t?t:null,u=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=c.mode)&&void 0!==r?r:null);E(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=c.lang)&&void 0!==i?i:null,this.tenantId=null!==(o=c.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=(0,a.I9)((0,a.hp)(e)).link,n=t?(0,a.I9)((0,a.hp)(t)).deep_link_id:null,r=(0,a.I9)((0,a.hp)(e)).deep_link_id;return(r?(0,a.I9)((0,a.hp)(r)).link:null)||r||n||t||e}(e);try{return new Je(t)}catch(n){return null}}}class Ye{constructor(){this.providerId=Ye.PROVIDER_ID}static credential(e,t){return Ge._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Je.parseLink(t);return E(n,"argument-error"),Ge._fromEmailAndCode(e,n.code,n.tenantId)}}Ye.PROVIDER_ID="password",Ye.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ye.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Ze{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Xe extends Ze{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class $e extends Xe{constructor(){super("facebook.com")}static credential(e){return qe._fromParams({providerId:$e.PROVIDER_ID,signInMethod:$e.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $e.credentialFromTaggedObject(e)}static credentialFromError(e){return $e.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return $e.credential(t.oauthAccessToken)}catch(n){return null}}}$e.FACEBOOK_SIGN_IN_METHOD="facebook.com",$e.PROVIDER_ID="facebook.com";class et extends Xe{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return qe._fromParams({providerId:et.PROVIDER_ID,signInMethod:et.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return et.credentialFromTaggedObject(e)}static credentialFromError(e){return et.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return et.credential(n,r)}catch(s){return null}}}et.GOOGLE_SIGN_IN_METHOD="google.com",et.PROVIDER_ID="google.com";class tt extends Xe{constructor(){super("github.com")}static credential(e){return qe._fromParams({providerId:tt.PROVIDER_ID,signInMethod:tt.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return tt.credentialFromTaggedObject(e)}static credentialFromError(e){return tt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return tt.credential(t.oauthAccessToken)}catch(n){return null}}}tt.GITHUB_SIGN_IN_METHOD="github.com",tt.PROVIDER_ID="github.com";class nt extends Xe{constructor(){super("twitter.com")}static credential(e,t){return qe._fromParams({providerId:nt.PROVIDER_ID,signInMethod:nt.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return nt.credentialFromTaggedObject(e)}static credentialFromError(e){return nt.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return nt.credential(n,r)}catch(s){return null}}}nt.TWITTER_SIGN_IN_METHOD="twitter.com",nt.PROVIDER_ID="twitter.com";class rt{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await se._fromIdTokenResponse(e,n,r),i=st(n);return new rt({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=st(n);return new rt({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function st(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class it extends a.g{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,it.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new it(e,t,n,r)}}function ot(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw it._fromErrorAndOperation(e,n,t,r);throw n})}async function at(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await Z(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return rt._forOperation(e,"link",r)}async function ct(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:s}=e;if((0,r.xZ)(s.app))return Promise.reject(x(s));const i="reauthenticate";try{const r=await Z(e,ot(s,i,t,e),n);E(r.idToken,s,"internal-error");const o=J(r.idToken);E(o,s,"internal-error");const{sub:a}=o;return E(e.uid===a,s,"user-mismatch"),rt._forOperation(e,i,r)}catch(o){throw(null===o||void 0===o?void 0:o.code)==="auth/".concat("user-not-found")&&v(s,"user-mismatch"),o}}async function lt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(x(e));const s="signIn",i=await ot(e,s,t),o=await rt._fromIdTokenResponse(e,s,i);return n||await e._updateCurrentUser(o.user),o}function ut(e,t){return O(e,"POST","/v2/accounts/mfaEnrollment:start",R(e,t))}new WeakMap;const ht="__sak";class dt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(ht,"1"),this.storage.removeItem(ht),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class ft extends dt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=be(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,a.lT)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}ft.type="LOCAL";const mt=ft;function pt(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(s))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function gt(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class yt{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=gt(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return pt(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=gt(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=gt(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=pt(n);const s=setInterval(()=>{const e=pt(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}yt.type="COOKIE";class vt extends dt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}vt.type="SESSION";const wt=vt;class bt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new bt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(null===i||void 0===i||!i.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(i).map(async e=>e(t.origin,s)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function xt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}bt.receivers=[];class St{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const c=xt("",20);r.port1.start();const l=setTimeout(()=>{a(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(l),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Et(){return window}function At(){return"undefined"!==typeof Et().WorkerGlobalScope&&"function"===typeof Et().importScripts}const Nt="firebaseLocalStorageDb",Tt="firebaseLocalStorage",kt="fbase_key";class Ct{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function It(e,t){return e.transaction([Tt],t?"readwrite":"readonly").objectStore(Tt)}function _t(){const e=indexedDB.open(Nt,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Tt,{keyPath:kt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Tt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Nt);return new Ct(e).toPromise()}(),t(await _t()))})})}async function Pt(e,t,n){const r=It(e,!0).put({[kt]:t,value:n});return new Ct(r).toPromise()}function jt(e,t){const n=It(e,!0).delete(t);return new Ct(n).toPromise()}class Dt{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await _t()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return At()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bt._getInstance(At()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new St(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _t();return await Pt(e,ht,"1"),await jt(e,ht),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Pt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=It(e,!1).get(t),r=await new Ct(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>jt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=It(e,!1).getAll();return new Ct(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Dt.type="LOCAL";const Mt=Dt;function Rt(e,t){return O(e,"POST","/v2/accounts/mfaSignIn:start",R(e,t))}Ie("rcb"),new I(3e4,6e4);const Ot="recaptcha";async function Lt(e,t,n){if(!e._getRecaptchaConfig())try{await Oe(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){E("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Re(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===je){E((null===n||void 0===n?void 0:n.type)===Ot,e,"argument-error");return ut(e,await Ft(e,t,n))}return ut(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;E("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;E(i,e,"missing-multi-factor-info");const o={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},a=Re(e,o,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===je){E((null===n||void 0===n?void 0:n.type)===Ot,e,"argument-error");return Rt(e,await Ft(e,t,n))}return Rt(e,t)},"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Re(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===je){E((null===n||void 0===n?void 0:n.type)===Ot,e,"argument-error");return We(e,await Ft(e,t,n))}return We(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function Ft(e,t,n){E(n.type===Ot,e,"argument-error");const r=await n.verify();E("string"===typeof r,e,"argument-error");const s=(0,o.A)({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class Ut{constructor(e){this.providerId=Ut.PROVIDER_ID,this.auth=Ne(e)}verifyPhoneNumber(e,t){return Lt(this.auth,e,(0,a.Ku)(t))}static credential(e,t){return Ke._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Ut.credentialFromTaggedObject(t)}static credentialFromError(e){return Ut.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?Ke._fromTokenResponse(n,r):null}}function Bt(e,t){return t?oe(t):(E(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}Ut.PROVIDER_ID="phone",Ut.PHONE_SIGN_IN_METHOD="phone";class Vt extends Be{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return He(e,this._buildIdpRequest())}_linkToIdToken(e,t){return He(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return He(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function zt(e){return lt(e.auth,new Vt(e),e.bypassAuthState)}function Gt(e){const{auth:t,user:n}=e;return E(n,t,"internal-error"),ct(n,new Vt(e),e.bypassAuthState)}async function Ht(e){const{auth:t,user:n}=e;return E(n,t,"internal-error"),at(n,new Vt(e),e.bypassAuthState)}class qt{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:o}=e;if(i)return void this.reject(i);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return zt;case"linkViaPopup":case"linkViaRedirect":return Ht;case"reauthViaPopup":case"reauthViaRedirect":return Gt;default:v(this.auth,"internal-error")}}resolve(e){N(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){N(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Wt=new I(2e3,1e4);class Qt extends qt{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Qt.currentPopupAction&&Qt.currentPopupAction.cancel(),Qt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return E(e,this.auth,"internal-error"),e}async onExecution(){N(1===this.filter.length,"Popup operations only handle one event");const e=xt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(w(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(w(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(w(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Wt.get())};e()}}Qt.currentPopupAction=null;const Kt=new Map;class Jt extends qt{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Kt.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Xt(t),r=Zt(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}Kt.set(this.auth._key(),e)}return this.bypassAuthState||Kt.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Yt(e,t){Kt.set(e._key(),t)}function Zt(e){return oe(e._redirectPersistence)}function Xt(e){return le("pendingRedirect",e.config.apiKey,e.name)}async function $t(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,r.xZ)(e.app))return Promise.reject(x(e));const s=Ne(e),i=Bt(s,t),o=new Jt(s,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await s._persistUserIfCurrent(a.user),await s._setRedirectUser(null,t)),a}class en{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nn(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!nn(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(w(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(tn(e))}saveEventToCache(e){this.cachedEventUids.add(tn(e)),this.lastProcessedEventTime=Date.now()}}function tn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function nn(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const rn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sn=/^https?/;async function on(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return O(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(an(r))return}catch(n){}v(e,"unauthorized-domain")}function an(e){const t=T(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!sn.test(n))return!1;if(rn.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const cn=new I(3e4,6e4);function ln(){const e=Et().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function un(e){return new Promise((t,n)=>{var r,s;function i(){ln(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ln(),n(w(e,"network-request-failed"))},timeout:cn.get()})}if(null!==(r=Et().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(s=Et().gapi)||void 0===s||!s.load){const t=Ie("iframefcb");return Et()[t]=()=>{gapi.load?i():n(w(e,"network-request-failed"))},Ce("".concat(ke.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw hn=null,e})}let hn=null;const dn=new I(5e3,15e3),fn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pn(e){const t=e.config;E(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?_(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),s={apiKey:t.apiKey,appName:e.name,v:r.MF},i=mn.get(e.config.apiHost);i&&(s.eid=i);const o=e._getFrameworks();return o.length&&(s.fw=o.join(",")),"".concat(n,"?").concat((0,a.Am)(s).slice(1))}async function gn(e){const t=await function(e){return hn=hn||un(e),hn}(e),n=Et().gapi;return E(n,e,"internal-error"),t.open({where:document.body,url:pn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=w(e,"network-request-failed"),i=Et().setTimeout(()=>{r(s)},dn.get());function o(){Et().clearTimeout(i),n(t)}t.ping(o).then(o,()=>{r(s)})}))}const yn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vn{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function wn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),c=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=(0,o.A)((0,o.A)({},yn),{},{width:r.toString(),height:s.toString(),top:i,left:c}),h=(0,a.ZQ)().toLowerCase();n&&(l=me(h)?"_blank":n),de(h)&&(t=t||"http://localhost",u.scrollbars="yes");const d=Object.entries(u).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return we(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,a.ZQ)())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(h)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new vn(null);const f=window.open(t||"",l,d);E(f,e,"popup-blocked");try{f.focus()}catch(m){}return new vn(f)}const bn="__/auth/handler",xn="emulator/auth/handler",Sn=encodeURIComponent("fac");async function En(e,t,n,s,i,o){E(e.config.authDomain,e,"auth-domain-config-required"),E(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:r.MF,eventId:i};if(t instanceof Ze){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,a.Im)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))c[e]=t}if(t instanceof Xe){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const l=c;for(const r of Object.keys(l))void 0===l[r]&&delete l[r];const u=await e._getAppCheckToken(),h=u?"#".concat(Sn,"=").concat(encodeURIComponent(u)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(bn);return _(t,xn)}(e),"?").concat((0,a.Am)(l).slice(1)).concat(h)}const An="webStorageSupport";const Nn=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wt,this._completeRedirectFn=$t,this._overrideRedirectResult=Yt}async _openPopup(e,t,n,r){var s;N(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return wn(e,await En(e,t,n,T(),r),xt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Et().location.href=e}(await En(e,t,n,T(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(N(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await gn(e),n=new en(e);return t.register("authEvent",t=>{E(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(An,{type:An},n=>{var r;const s=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[An];void 0!==s&&t(!!s),v(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=on(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return be()||fe()||we()}};var Tn="@firebase/auth",kn="1.11.0";class Cn{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){E(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const In=(0,a.XA)("authIdTokenMaxAge")||300;let _n=null;var Pn;ke={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=w("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Pn="Browser",(0,r.om)(new l.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;E(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:a,clientPlatform:Pn,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:xe(Pn)},l=new Ae(r,s,i,c);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(oe);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,r.om)(new l.uA("auth-internal",e=>(e=>new Cn(e))(Ne(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(Tn,kn,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(Pn)),(0,r.KO)(Tn,kn,"esm2020");const jn="firebasestorage.googleapis.com",Dn="storageBucket";class Mn extends a.g{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(Ln(e),"Firebase Storage: ".concat(t," (").concat(Ln(e),")")),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Ln(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var Rn,On;function Ln(e){return"storage/"+e}function Fn(){return new Mn(Rn.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Un(){return new Mn(Rn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Bn(){return new Mn(Rn.CANCELED,"User canceled the upload/download.")}function Vn(e){return new Mn(Rn.INVALID_ARGUMENT,e)}function zn(){return new Mn(Rn.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Rn||(Rn={}));class Gn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=Gn.makeFromUrl(e,t)}catch(s){return new Gn(e,"")}if(""===n.path)return n;throw r=e,new Mn(Rn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(o,"/").concat("v[A-Za-z0-9_]+","/b/").concat(r,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://".concat(t===jn?"(?:storage.googleapis.com|storage.cloud.google.com)":t,"/").concat(r,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:i}];for(let c=0;c<a.length;c++){const t=a[c],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new Gn(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new Mn(Rn.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Hn{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function qn(e,t,n,r){if(r<t)throw Vn("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Vn("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Wn(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function Qn(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(On||(On={}));class Kn{constructor(e,t,n,r,s,i,o,a,c,l,u){let h=!(arguments.length>11&&void 0!==arguments[11])||arguments[11],d=arguments.length>12&&void 0!==arguments[12]&&arguments[12];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=a,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=u,this.retry=h,this.isUsingEmulator=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Jn(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===On.NO_ERROR,s=n.getStatus();if(!t||Qn(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===On.ABORT;return void e(!1,new Jn(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new Jn(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(i){r(i)}else if(null!==s){const e=Fn();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?zn():Bn())}else{r(Un())}};this.canceled_?t(0,new Jn(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,o=!1,a=0;function c(){return 2===a}let l=!1;function u(){if(!l){l=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function h(t){s=setTimeout(()=>{s=null,e(f,c())},t)}function d(){i&&clearTimeout(i)}function f(e){if(l)return void d();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return d(),void u.call(null,e,...n);if(c()||o)return d(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),h(i)}let m=!1;function p(e){m||(m=!0,d(),l||(null!==s?(e||(a=2),clearTimeout(s),h(0)):e||(a=1)))}return h(0),i=setTimeout(()=>{o=!0,p(!0)},n),p}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Jn{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Yn(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Zn{constructor(e,t){this._service=e,this._location=t instanceof Gn?t:Gn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Zn(e,t)}get root(){const e=new Gn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Yn(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new Gn(this._location.bucket,e);return new Zn(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new Mn(Rn.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Xn(e,t){const n=null===t||void 0===t?void 0:t[Dn];return null==n?null:Gn.makeFromBucketSpec(n,e)}class $n{constructor(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._isUsingEmulator=i,this._bucket=null,this._host=jn,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?Gn.makeFromBucketSpec(r,this._host):Xn(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=Gn.makeFromBucketSpec(this._url,e):this._bucket=Xn(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){qn("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){qn("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){if((0,r.xZ)(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Zn(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Hn(zn());{const i=function(e,t,n,r,s,i){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],a=arguments.length>7&&void 0!==arguments[7]&&arguments[7];const c=Wn(e.urlParams),l=e.url+c,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(u,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new Kn(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o,a)}(e,this._appId,n,r,t,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const er="@firebase/storage",tr="0.14.0",nr="storage";function rr(e,t){let{instanceIdentifier:n}=t;const s=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),o=e.getProvider("app-check-internal");return new $n(s,i,o,n,r.MF)}(0,r.om)(new l.uA(nr,rr,"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(er,tr,""),(0,r.KO)(er,tr,"esm2020");const sr={apiKey:"AIzaSyB1Bbr1smnKb9AzfxTh9VZkF3X9Q-Zg2dw",authDomain:"ubss-9f4a1.firebaseapp.com",projectId:"ubss-9f4a1",storageBucket:"ubss-9f4a1.firebasestorage.app",messagingSenderId:"124546511785",appId:"1:124546511785:web:b0d098bf3db618d2b04ab8",measurementId:"G-5X9YC8NLRQ"};let ir,or,ar,cr;try{ir=(0,r.Wp)(sr),or=(0,s.aU)(ir),ar=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)();const t=(0,r.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,r.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,a.bD)(r,null!==t&&void 0!==t?t:{}))return e;v(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Nn,persistence:[Mt,mt,wt]}),s=(0,a.XA)("authTokenSyncURL");if(s&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(s,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>In)return;const r=null===t||void 0===t?void 0:t.token;_n!==r&&(_n=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){(0,a.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,a.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const o=(0,a.Tj)("auth");return o&&Le(n,"http://".concat(o)),n}(ir),cr=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,r.Sx)(),t=arguments.length>1?arguments[1]:void 0;e=(0,a.Ku)(e);const n=(0,r.j6)(e,nr).getImmediate({identifier:t}),s=(0,a.yU)("storage");return s&&function(e,t,n){!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n);const s=(0,a.zJ)(t);s&&((0,a.gE)("https://".concat(e.host,"/b")),(0,a.P1)("Storage",!0)),e._isUsingEmulator=!0,e._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"===typeof i?i:(0,a.Fy)(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}(n,...s),n}(ir),console.log("Firebase initialized successfully")}catch(ur){console.error("Firebase initialization error:",ur),ir=null,or=null,ar=null,cr=null}const lr=ir},379:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var r=n(705);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},391:(e,t,n)=>{"use strict";var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},544:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(968);Object.keys(r).forEach(function(e){"default"===e||t.hasOwnProperty(e)||Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},579:(e,t,n)=>{"use strict";e.exports=n(153)},606:(e,t,n)=>{"use strict";n.d(t,{h1:()=>a,uA:()=>s});var r=n(776);class s{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const i="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:i})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===i?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return this.component?this.component.multipleInstances?e:i:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},667:(e,t,n)=>{"use strict";n.d(t,{gS:()=>pl,rJ:()=>sc,H9:()=>ic,x7:()=>hl,GG:()=>fl,aU:()=>hc,GV:()=>Nl,aQ:()=>gl,My:()=>$c,P:()=>Kc,c4:()=>El,O5:()=>Al,mZ:()=>ml,_M:()=>Yc});var r,s,i=n(379),o=n(150),a=n(606),c=n(965),l=n(776),u="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},h={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var s=0;s<16;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;s<16;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];let i,o=e.g[3];i=t+(o^n&(s^o))+r[0]+3614090360&4294967295,i=o+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[1]+3905402710&4294967295,o=t+(i<<12&4294967295|i>>>20),i=s+(n^o&(t^n))+r[2]+606105819&4294967295,i=n+(t^(s=o+(i<<17&4294967295|i>>>15))&(o^t))+r[3]+3250441966&4294967295,i=t+(o^(n=s+(i<<22&4294967295|i>>>10))&(s^o))+r[4]+4118548399&4294967295,i=o+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[5]+1200080426&4294967295,o=t+(i<<12&4294967295|i>>>20),i=s+(n^o&(t^n))+r[6]+2821735955&4294967295,i=n+(t^(s=o+(i<<17&4294967295|i>>>15))&(o^t))+r[7]+4249261313&4294967295,i=t+(o^(n=s+(i<<22&4294967295|i>>>10))&(s^o))+r[8]+1770035416&4294967295,i=o+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[9]+2336552879&4294967295,o=t+(i<<12&4294967295|i>>>20),i=s+(n^o&(t^n))+r[10]+4294925233&4294967295,i=n+(t^(s=o+(i<<17&4294967295|i>>>15))&(o^t))+r[11]+2304563134&4294967295,i=t+(o^(n=s+(i<<22&4294967295|i>>>10))&(s^o))+r[12]+1804603682&4294967295,i=o+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[13]+4254626195&4294967295,o=t+(i<<12&4294967295|i>>>20),i=s+(n^o&(t^n))+r[14]+2792965006&4294967295,i=n+(t^(s=o+(i<<17&4294967295|i>>>15))&(o^t))+r[15]+1236535329&4294967295,i=t+(s^o&((n=s+(i<<22&4294967295|i>>>10))^s))+r[1]+4129170786&4294967295,i=o+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[6]+3225465664&4294967295,o=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(o^t))+r[11]+643717713&4294967295,i=n+(o^t&((s=o+(i<<14&4294967295|i>>>18))^o))+r[0]+3921069994&4294967295,i=t+(s^o&((n=s+(i<<20&4294967295|i>>>12))^s))+r[5]+3593408605&4294967295,i=o+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[10]+38016083&4294967295,o=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(o^t))+r[15]+3634488961&4294967295,i=n+(o^t&((s=o+(i<<14&4294967295|i>>>18))^o))+r[4]+3889429448&4294967295,i=t+(s^o&((n=s+(i<<20&4294967295|i>>>12))^s))+r[9]+568446438&4294967295,i=o+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[14]+3275163606&4294967295,o=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(o^t))+r[3]+4107603335&4294967295,i=n+(o^t&((s=o+(i<<14&4294967295|i>>>18))^o))+r[8]+1163531501&4294967295,i=t+(s^o&((n=s+(i<<20&4294967295|i>>>12))^s))+r[13]+2850285829&4294967295,i=o+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[2]+4243563512&4294967295,o=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(o^t))+r[7]+1735328473&4294967295,i=n+(o^t&((s=o+(i<<14&4294967295|i>>>18))^o))+r[12]+2368359562&4294967295,i=t+((n=s+(i<<20&4294967295|i>>>12))^s^o)+r[5]+4294588738&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[8]+2272392833&4294967295,o=t+(i<<11&4294967295|i>>>21),i=s+(o^t^n)+r[11]+1839030562&4294967295,i=n+((s=o+(i<<16&4294967295|i>>>16))^o^t)+r[14]+4259657740&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^o)+r[1]+2763975236&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[4]+1272893353&4294967295,o=t+(i<<11&4294967295|i>>>21),i=s+(o^t^n)+r[7]+4139469664&4294967295,i=n+((s=o+(i<<16&4294967295|i>>>16))^o^t)+r[10]+3200236656&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^o)+r[13]+681279174&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[0]+3936430074&4294967295,o=t+(i<<11&4294967295|i>>>21),i=s+(o^t^n)+r[3]+3572445317&4294967295,i=n+((s=o+(i<<16&4294967295|i>>>16))^o^t)+r[6]+76029189&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^o)+r[9]+3654602809&4294967295,i=o+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[12]+3873151461&4294967295,o=t+(i<<11&4294967295|i>>>21),i=s+(o^t^n)+r[15]+530742520&4294967295,i=n+((s=o+(i<<16&4294967295|i>>>16))^o^t)+r[2]+3299628645&4294967295,i=t+(s^((n=s+(i<<23&4294967295|i>>>9))|~o))+r[0]+4096336452&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[7]+1126891415&4294967295,o=t+(i<<10&4294967295|i>>>22),i=s+(t^(o|~n))+r[14]+2878612391&4294967295,i=n+(o^((s=o+(i<<15&4294967295|i>>>17))|~t))+r[5]+4237533241&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~o))+r[12]+1700485571&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[3]+2399980690&4294967295,o=t+(i<<10&4294967295|i>>>22),i=s+(t^(o|~n))+r[10]+4293915773&4294967295,i=n+(o^((s=o+(i<<15&4294967295|i>>>17))|~t))+r[1]+2240044497&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~o))+r[8]+1873313359&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[15]+4264355552&4294967295,o=t+(i<<10&4294967295|i>>>22),i=s+(t^(o|~n))+r[6]+2734768916&4294967295,i=n+(o^((s=o+(i<<15&4294967295|i>>>17))|~t))+r[13]+1309151649&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~o))+r[4]+4149444226&4294967295,i=o+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[11]+3174756917&4294967295,o=t+(i<<10&4294967295|i>>>22),i=s+(t^(o|~n))+r[2]+718787259&4294967295,i=n+(o^((s=o+(i<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+o&4294967295}function i(e,t){this.h=t;const n=[];let r=!0;for(let s=e.length-1;s>=0;s--){const i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,s=this.C;let i=this.h,o=0;for(;o<t;){if(0==i)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"===typeof e){for(;o<t;)if(s[i++]=e.charCodeAt(o++),i==this.blockSize){n(this,s),i=0;break}}else for(;o<t;)if(s[i++]=e[o++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var o={};function a(e){return-128<=e&&e<128?function(e,t){var n=o;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],e<0?-1:0)}):new i([0|e],e<0?-1:0)}function c(e){if(isNaN(e)||!isFinite(e))return l;if(e<0)return p(c(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var l=a(0),u=a(1),d=a(16777216);function f(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function m(e){return-1==e.h}function p(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(u)}function g(e,t){return e.add(p(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function w(e,t){if(f(t))throw Error("division by zero");if(f(e))return new v(l,l);if(m(e))return t=w(p(e),t),new v(p(t.g),p(t.h));if(m(t))return t=w(e,p(t)),new v(p(t.g),t.h);if(e.g.length>30){if(m(e)||m(t))throw Error("slowDivide_ only works with positive integers.");for(var n=u,r=t;r.l(e)<=0;)n=b(n),r=b(r);var s=x(n,1),i=x(r,1);for(r=x(r,2),n=x(n,2);!f(r);){var o=i.add(r);o.l(e)<=0&&(s=s.add(n),i=o),r=x(r,1),n=x(n,1)}return t=g(e,s.j(t)),new v(s,t)}for(s=l;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),o=(i=c(n)).j(t);m(o)||o.l(e)>0;)o=(i=c(n-=r)).j(t);f(i)&&(i=u),s=s.add(i),e=g(e,o)}return new v(s,e)}function b(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function x(e,t){const n=t>>5;t%=32;const r=e.g.length-n,s=[];for(let i=0;i<r;i++)s[i]=t>0?e.i(i+n)>>>t|e.i(i+n+1)<<32-t:e.i(i+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(m(this))return-p(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(m(this))return"-"+p(this).toString(e);const t=c(Math.pow(e,6));var n=this;let r="";for(;;){const s=w(n,t).g;let i=(((n=g(n,s.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(f(n=s))return i+r;for(;i.length<6;)i="0"+i;r=i+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return m(e=g(this,e))?-1:f(e)?0:1},e.abs=function(){return m(this)?p(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let r=0;for(let s=0;s<=t;s++){let t=r+(65535&this.i(s))+(65535&e.i(s)),i=(t>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=i>>>16,t&=65535,i&=65535,n[s]=i<<16|t}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return l;if(m(this))return m(e)?p(this).j(p(e)):p(p(this).j(e));if(m(e))return p(this.j(p(e)));if(this.l(d)<0&&e.l(d)<0)return c(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(let t=0;t<e.g.length;t++){const s=this.i(r)>>>16,i=65535&this.i(r),o=e.i(t)>>>16,a=65535&e.i(t);n[2*r+2*t]+=i*a,y(n,2*r+2*t),n[2*r+2*t+1]+=s*a,y(n,2*r+2*t+1),n[2*r+2*t+1]+=i*o,y(n,2*r+2*t+1),n[2*r+2*t+2]+=s*o,y(n,2*r+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new i(n,0)},e.B=function(e){return w(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,s=h.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.B,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return p(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=c(Math.pow(n,8));let s=l;for(let o=0;o<t.length;o+=8){var i=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+i),n);i<8?(i=c(Math.pow(n,i)),s=s.j(i).add(c(e))):(s=s.j(r),s=s.add(c(e)))}return s},r=h.Integer=i}).apply("undefined"!==typeof u?u:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var d,f,m,p,g,y,v,w,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},x={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in s))break e;s=s[o]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var s=s||{},i=this||self;function o(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function a(e,t,n){return e.call.apply(e.bind,arguments)}function c(e,t,n){return(c=a).apply(null,arguments)}function l(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}var h="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function S(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function A(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function N(e){i.setTimeout(()=>{throw e},0)}function T(){var e=P;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new C,e=>e.reset());class C{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let I,_=!1,P=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=Promise.resolve(void 0);I=()=>{e.then(D)}};function D(){for(var e;e=T();){try{e.h.call(e.g)}catch(n){N(n)}var t=k;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}_=!1}function M(){this.u=this.u,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}M.prototype.u=!1,M.prototype.dispose=function(){this.u||(this.u=!0,this.N())},M.prototype[Symbol.dispose]=function(){this.dispose()},M.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var O=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function L(e){return/^[\s\xa0]*$/.test(e)}function F(e,t){R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(F,R),F.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&F.Z.h.call(this)},F.prototype.h=function(){F.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var U="closure_listenable_"+(1e6*Math.random()|0),B=0;function V(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++B,this.da=this.fa=!1}function z(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function G(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function H(e){const t={};for(const n in e)t[n]=e[n];return t}const q="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function W(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<q.length;t++)n=q[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Q(e){this.src=e,this.g={},this.h=0}function K(e,t){const n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=i>=0)&&Array.prototype.splice.call(s,i,1),r&&(z(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function J(e,t,n,r){for(let s=0;s<e.length;++s){const i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}Q.prototype.add=function(e,t,n,r,s){const i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);const o=J(e,t,r,s);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new V(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var Y="closure_lm_"+(1e6*Math.random()|0),Z={};function X(e,t,n,r,s){if(r&&r.once)return ee(e,t,n,r,s);if(Array.isArray(t)){for(let i=0;i<t.length;i++)X(e,t[i],n,r,s);return null}return n=ce(n),e&&e[U]?e.J(t,n,o(r)?!!r.capture:!!r,s):$(e,t,n,!1,r,s)}function $(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");const a=o(s)?!!s.capture:!!s;let c=oe(e);if(c||(e[Y]=c=new Q(e)),(n=c.add(t,n,r,a,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ie;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)O||(s=a),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(se(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ee(e,t,n,r,s){if(Array.isArray(t)){for(let i=0;i<t.length;i++)ee(e,t[i],n,r,s);return null}return n=ce(n),e&&e[U]?e.K(t,n,o(r)?!!r.capture:!!r,s):$(e,t,n,!0,r,s)}function ne(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)ne(e,t[i],n,r,s);else r=o(r)?!!r.capture:!!r,n=ce(n),e&&e[U]?(e=e.i,(i=String(t).toString())in e.g&&((n=J(t=e.g[i],n,r,s))>-1&&(z(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[i],e.h--)))):e&&(e=oe(e))&&(t=e.g[t.toString()],e=-1,t&&(e=J(t,n,r,s)),(n=e>-1?t[e]:null)&&re(n))}function re(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[U])K(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(se(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=oe(t))?(K(n,e),0==n.h&&(n.src=null,t[Y]=null)):z(e)}}}function se(e){return e in Z?Z[e]:Z[e]="on"+e}function ie(e,t){if(e.da)e=!0;else{t=new F(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&re(e),e=n.call(r,t)}return e}function oe(e){return(e=e[Y])instanceof Q?e:null}var ae="__closure_events_fn_"+(1e9*Math.random()>>>0);function ce(e){return"function"===typeof e?e:(e[ae]||(e[ae]=function(t){return e.handleEvent(t)}),e[ae])}function le(){M.call(this),this.i=new Q(this),this.M=this,this.G=null}function ue(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var s=t;W(t=new R(r,e),s)}let i,o;if(s=!0,n)for(o=n.length-1;o>=0;o--)i=t.g=n[o],s=he(i,r,!0,t)&&s;if(i=t.g=e,s=he(i,r,!0,t)&&s,s=he(i,r,!1,t)&&s,n)for(o=0;o<n.length;o++)i=t.g=n[o],s=he(i,r,!1,t)&&s}function he(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let s=!0;for(let i=0;i<t.length;++i){const o=t[i];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&K(e.i,o),s=!1!==t.call(n,r)&&s}}return s&&!r.defaultPrevented}function de(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return Number(t)>2147483647?-1:i.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,de(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(le,M),le.prototype[U]=!0,le.prototype.removeEventListener=function(e,t,n,r){ne(this,e,t,n,r)},le.prototype.N=function(){if(le.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)z(n[e]);delete e.g[t],e.h--}}this.G=null},le.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},le.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class fe extends M{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:de(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function me(e){M.call(this),this.h=e,this.g={}}u(me,M);var pe=[];function ge(e){G(e.g,function(e,t){this.g.hasOwnProperty(t)&&re(e)},e),e.g={}}me.prototype.N=function(){me.Z.N.call(this),ge(this)},me.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ye=i.JSON.stringify,ve=i.JSON.parse,we=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function be(){}function xe(){}var Se={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ee(){R.call(this,"d")}function Ae(){R.call(this,"c")}u(Ee,R),u(Ae,R);var Ne={},Te=null;function ke(){return Te=Te||new le}function Ce(e){R.call(this,Ne.Ia,e)}function Ie(e){const t=ke();ue(t,new Ce(t))}function _e(e,t){R.call(this,Ne.STAT_EVENT,e),this.stat=t}function Pe(e){const t=ke();ue(t,new _e(t,e))}function je(e,t){R.call(this,Ne.Ja,e),this.size=t}function De(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Me(){this.g=!0}function Re(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const i=JSON.parse(t);if(i)for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var n=i[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(let e=1;e<r.length;e++)r[e]=""}}}return ye(i)}catch(i){return t}}(e,n)+(r?" "+r:"")})}Ne.Ia="serverreachability",u(Ce,R),Ne.STAT_EVENT="statevent",u(_e,R),Ne.Ja="timingevent",u(je,R),Me.prototype.ua=function(){this.g=!1},Me.prototype.info=function(){};var Oe,Le={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fe={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ue(){}function Be(e){return encodeURIComponent(String(e))}function Ve(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function ze(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new me(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ge}function Ge(){this.i=null,this.g="",this.h=!1}u(Ue,be),Ue.prototype.g=function(){return new XMLHttpRequest},Oe=new Ue;var He={},qe={};function We(e,t,n){e.M=1,e.A=yt(dt(t)),e.u=n,e.R=!0,Qe(e,null)}function Qe(e,t){e.F=Date.now(),Ye(e),e.B=dt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),Pt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Ge,e.g=vn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new fe(c(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var s="readystatechange";Array.isArray(s)||(s&&(pe[0]=s.toString()),s=pe);for(let i=0;i<s.length;i++){const e=X(n,s[i],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?H(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),Ie(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i){var o="",a=i.split("&");for(let e=0;e<a.length;e++){var c=a[e].split("=");if(c.length>1){const e=c[0];c=c[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+c+"&":o+(e+"=redacted&")}}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Ke(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Je(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?qe:(n=Number(t.substring(n,r)),isNaN(n)?He:(r+=1)+n>t.length?qe:(t=t.slice(r,r+n),e.C=r+n,t))}function Ye(e){e.T=Date.now()+e.H,Ze(e,e.H)}function Ze(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=De(c(e.aa,e),t)}function Xe(e){e.D&&(i.clearTimeout(e.D),e.D=null)}function $e(e){0==e.j.I||e.K||fn(e.j,e)}function et(e){Xe(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,ge(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function tt(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||ot(n.h,e)))if(!e.L&&ot(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;dn(n),tn(n)}ln(n),Pe(18)}}else n.xa=s[1],0<n.xa-n.K&&s[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=De(c(n.Va,n),6e3));it(n.h)<=1&&n.ta&&(n.ta=void 0)}else pn(n,11)}else if((e.L||n.g==e)&&dn(n),!L(t))for(s=n.Ba.g.parse(t),t=0;t<s.length;t++){let c=s[t];const u=c[0];if(!(u<=n.K))if(n.K=u,c=c[1],2==n.I)if("c"==c[0]){n.M=c[1],n.ba=c[2];const t=c[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const s=c[4];null!=s&&(n.za=s,n.j.info("SVER="+n.za));const u=c[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(at(i,i.h),i.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,gt(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=yn(r,r.L?r.ba:null,r.W),o.L){ct(r.h,o);var a=o,l=r.O;l&&(a.H=l),a.D&&(Xe(a),Ye(a)),r.g=o}else cn(r);n.i.length>0&&rn(n)}else"stop"!=c[0]&&"close"!=c[0]||pn(n,7);else 3==n.I&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?pn(n,7):en(n):"noop"!=c[0]&&n.l&&n.l.qa(c),n.A=0)}Ie()}catch(u){}}ze.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Yt(e)?t.j():this.Y(e)},ze.prototype.Y=function(e){try{if(e==this.g)e:{const c=Yt(this.g),l=this.g.ya();this.g.ca();if(!(c<3)&&(3!=c||this.g&&(this.h.h||this.g.la()||Zt(this.g)))){this.K||4!=c||7==l||Ie(),Xe(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Ke(e))return e.g.la();const t=Zt(e.g);if(""===t)return"";let n="";const r=t.length,s=4==Yt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return et(e),$e(e),"";e.h.i=new i.TextDecoder}for(let i=0;i<r;i++)e.h.h=!0,n+=e.h.i.decode(t[i],{stream:!(s&&i==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.i,this.v,this.B,this.l,this.S,c,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,s=this.g;if((r=s.g?s.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!L(r)){var o=r;break t}}o=null}if(!(e=o)){this.o=!1,this.m=3,Pe(12),et(this),$e(this);break e}Re(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,tt(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Je(this,n),t==qe){4==c&&(this.m=4,Pe(14),e=!1),Re(this.i,this.l,null,"[Incomplete Response]");break}if(t==He){this.m=4,Pe(15),Re(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Re(this.i,this.l,t,null),tt(this,t)}if(Ke(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=c||0!=n.length||this.h.h||(this.m=1,Pe(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var a=this.j;a.g==this&&a.aa&&!a.P&&(a.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),un(a),a.P=!0,Pe(11))}}else Re(this.i,this.l,n,"[Invalid Chunked Response]"),et(this),$e(this)}else Re(this.i,this.l,n,null),tt(this,n);4==c&&et(this),this.o&&!this.K&&(4==c?fn(this.j,this):(this.o=!1,Ye(this)))}else(function(e){const t={};e=(e.g&&Yt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(L(e[r]))continue;var n=Ve(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,Pe(12)):(this.m=0,Pe(13)),et(this),$e(this)}}}catch(te){}},ze.prototype.cancel=function(){this.K=!0,et(this)},ze.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(Ie(),Pe(17)),et(this),this.m=2,$e(this)):Ze(this,this.T-e)};var nt=class{constructor(e,t){this.g=e,this.map=t}};function rt(e){this.l=e||10,i.PerformanceNavigationTiming?e=(e=i.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function st(e){return!!e.h||!!e.g&&e.g.size>=e.j}function it(e){return e.h?1:e.g?e.g.size:0}function ot(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function at(e,t){e.g?e.g.add(t):e.h=t}function ct(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function lt(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return S(e.i)}rt.prototype.cancel=function(){if(this.i=lt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var ut=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ht(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof ht?(this.l=e.l,ft(this,e.j),this.o=e.o,this.g=e.g,mt(this,e.u),this.h=e.h,pt(this,jt(e.i)),this.m=e.m):e&&(t=String(e).match(ut))?(this.l=!1,ft(this,t[1]||"",!0),this.o=vt(t[2]||""),this.g=vt(t[3]||"",!0),mt(this,t[4]),this.h=vt(t[5]||"",!0),pt(this,t[6]||"",!0),this.m=vt(t[7]||"")):(this.l=!1,this.i=new Tt(null,this.l))}function dt(e){return new ht(e)}function ft(e,t,n){e.j=n?vt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function mt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function pt(e,t,n){t instanceof Tt?(e.i=t,function(e,t){t&&!e.j&&(kt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(Ct(this,t),Pt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=wt(t,At)),e.i=new Tt(t,e.l))}function gt(e,t,n){e.i.set(t,n)}function yt(e){return gt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function vt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function wt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,bt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function bt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}ht.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(wt(t,xt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(wt(t,xt,!0),"@"),e.push(Be(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(wt(n,"/"==n.charAt(0)?Et:St,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",wt(n,Nt)),e.join("")},ht.prototype.resolve=function(e){const t=dt(this);let n=!!e.j;n?ft(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)mt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var s=t.h.lastIndexOf("/");-1!=s&&(r=t.h.slice(0,s+1)+r)}if(".."==(s=r)||"."==s)r="";else if(-1!=s.indexOf("./")||-1!=s.indexOf("/.")){r=0==s.lastIndexOf("/",0),s=s.split("/");const e=[];for(let t=0;t<s.length;){const n=s[t++];"."==n?r&&t==s.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==s.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=s}return n?t.h=r:n=""!==e.i.toString(),n?pt(t,jt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var xt=/[#\/\?@]/g,St=/[#\?:]/g,Et=/[#\?]/g,At=/[#\?@]/g,Nt=/#/g;function Tt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function kt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let s,i=null;r>=0?(s=e[n].substring(0,r),i=e[n].substring(r+1)):s=e[n],t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Ct(e,t){kt(e),t=Dt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function It(e,t){return kt(e),t=Dt(e,t),e.g.has(t)}function _t(e,t){kt(e);let n=[];if("string"===typeof t)It(e,t)&&(n=n.concat(e.g.get(Dt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function Pt(e,t,n){Ct(e,t),n.length>0&&(e.i=null,e.g.set(Dt(e,t),S(n)),e.h+=n.length)}function jt(e){const t=new Tt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Dt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Mt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Rt(){this.g=new we}function Ot(e){this.i=e.Sb||null,this.h=e.ab||!1}function Lt(e,t){le.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ft(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function Ut(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Bt(e)}function Bt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Vt(e){let t="";return G(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function zt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Vt(n),"string"===typeof e?null!=n&&Be(n):gt(e,t,n))}function Gt(e){le.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=Tt.prototype).add=function(e,t){kt(this),this.i=null,e=Dt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){kt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return kt(this),this.i=null,It(this,e=Dt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=_t(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const s=Be(n);n=_t(this,n);for(let t=0;t<n.length;t++){let r=s;""!==n[t]&&(r+="="+Be(n[t])),e.push(r)}}return this.i=e.join("&")},u(Ot,be),Ot.prototype.g=function(){return new Lt(this.i,this.h)},u(Lt,le),(e=Lt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Bt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||i).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,Ut(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Bt(this)),this.g&&(this.readyState=3,Bt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ft(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ut(this):Bt(this),3==this.readyState&&Ft(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,Ut(this))},e.Na=function(e){this.g&&(this.response=e,Ut(this))},e.ga=function(){this.g&&Ut(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(Gt,le);var Ht=/^https?$/i,qt=["POST","PUT"];function Wt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Qt(e),Jt(e)}function Qt(e){e.A||(e.A=!0,ue(e,"complete"),ue(e,"error"))}function Kt(e){if(e.h&&"undefined"!=typeof s)if(e.v&&4==Yt(e))setTimeout(e.Ca.bind(e),0);else if(ue(e,"readystatechange"),4==Yt(e)){e.h=!1;try{const s=e.ca();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){let t=String(e.D).match(ut)[1]||null;!t&&i.self&&i.self.location&&(t=i.self.location.protocol.slice(0,-1)),r=!Ht.test(t?t.toLowerCase():"")}n=r}if(n)ue(e,"complete"),ue(e,"success");else{e.o=6;try{var o=Yt(e)>2?e.g.statusText:""}catch(a){o=""}e.l=o+" ["+e.ca()+"]",Qt(e)}}finally{Jt(e)}}}function Jt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||ue(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Yt(e){return e.g?e.g.readyState:0}function Zt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Xt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function $t(e){this.za=0,this.i=[],this.j=new Me,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Xt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Xt("baseRetryDelayMs",5e3,e),this.Za=Xt("retryDelaySeedMs",1e4,e),this.Ta=Xt("forwardChannelMaxRetries",2,e),this.va=Xt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new rt(e&&e.concurrentRequestLimit),this.Ba=new Rt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function en(e){if(nn(e),3==e.I){var t=e.V++,n=dt(e.J);if(gt(n,"SID",e.M),gt(n,"RID",t),gt(n,"TYPE","terminate"),on(e,n),(t=new ze(e,e.j,t)).M=2,t.A=yt(dt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.A,n=!0),n||(t.g=vn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Ye(t)}gn(e)}function tn(e){e.g&&(un(e),e.g.cancel(),e.g=null)}function nn(e){tn(e),e.v&&(i.clearTimeout(e.v),e.v=null),dn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&i.clearTimeout(e.m),e.m=null)}function rn(e){if(!st(e.h)&&!e.m){e.m=!0;var t=e.Ea;I||j(),_||(I(),_=!0),P.add(t,e),e.D=0}}function sn(e,t){var n;n=t?t.l:e.V++;const r=dt(e.J);gt(r,"SID",e.M),gt(r,"RID",n),gt(r,"AID",e.K),on(e,r),e.u&&e.o&&zt(r,e.u,e.o),n=new ze(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=an(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),at(e.h,n),We(n,r,t)}function on(e,t){e.H&&G(e.H,function(e,n){gt(t,n,e)}),e.l&&G({},function(e,n){gt(t,n,e)})}function an(e,t,n){n=Math.min(e.i.length,n);const r=e.l?c(e.l.Ka,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let c=!0;for(let l=0;l<n;l++){var i=s[l].g;const n=s[l].map;if((i-=t)<0)t=Math.max(0,s[l].g-100),c=!1;else try{i="req"+i+"_"||0;try{var a=n instanceof Map?n:Object.entries(n);for(const[t,n]of a){let r=n;o(n)&&(r=ye(n)),e.push(i+t+"="+encodeURIComponent(r))}}catch(E){throw e.push(i+"type="+encodeURIComponent("_badmap")),E}}catch(E){r&&r(n)}}if(c){a=e.join("&");break e}}a=void 0}return e=e.i.splice(0,n),t.G=e,a}function cn(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;I||j(),_||(I(),_=!0),P.add(t,e),e.A=0}}function ln(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=De(c(e.Da,e),mn(e,e.A)),e.A++,!0)}function un(e){null!=e.B&&(i.clearTimeout(e.B),e.B=null)}function hn(e){e.g=new ze(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=dt(e.na);gt(t,"RID","rpc"),gt(t,"SID",e.M),gt(t,"AID",e.K),gt(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&gt(t,"TO",e.ia),gt(t,"TYPE","xmlhttp"),on(e,t),e.u&&e.o&&zt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=yt(dt(t)),n.u=null,n.R=!0,Qe(n,e)}function dn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function fn(e,t){var n=null;if(e.g==t){dn(e),un(e),e.g=null;var r=2}else{if(!ot(e.h,t))return;n=t.G,ct(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var s=e.D;ue(r=ke(),new je(r,n)),rn(e)}else cn(e);else if(3==(s=t.m)||0==s&&t.X>0||!(1==r&&function(e,t){return!(it(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=De(c(e.Ea,e,t),mn(e,e.D)),e.D++,!0))}(e,t)||2==r&&ln(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),s){case 1:pn(e,5);break;case 4:pn(e,10);break;case 3:pn(e,6);break;default:pn(e,2)}}function mn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function pn(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.bb,e),r=e.Ua;const t=!r;r=new ht(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||ft(r,"https"),yt(r),t?function(e,t){const n=new Me;if(i.Image){const r=new Image;r.onload=l(Mt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=l(Mt,n,"TestLoadImage: error",!1,t,r),r.onabort=l(Mt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=l(Mt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Me;const n=new AbortController,r=setTimeout(()=>{n.abort(),Mt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Mt(0,0,!0,t):Mt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Mt(0,0,!1,t)})}(r.toString(),n)}else Pe(2);e.I=0,e.l&&e.l.pa(t),gn(e),nn(e)}function gn(e){if(e.I=0,e.ja=[],e.l){const t=lt(e.h);0==t.length&&0==e.i.length||(A(e.ja,t),A(e.ja,e.i),e.h.i.length=0,S(e.i),e.i.length=0),e.l.oa()}}function yn(e,t,n){var r=n instanceof ht?dt(n):new ht(n);if(""!=r.g)t&&(r.g=t+"."+r.g),mt(r,r.u);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;const e=new ht(null);r&&ft(e,r),t&&(e.g=t),s&&mt(e,s),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&gt(r,n,t),gt(r,"VER",e.ka),on(e,r),r}function vn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Gt(new Ot({ab:n})):new Gt(e.ma)).Fa(e.L),t}function wn(){}function bn(){}function xn(e,t){le.call(this),this.g=new $t(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!L(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!L(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new An(this)}function Sn(e){Ee.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function En(){Ae.call(this),this.status=1}function An(e){this.g=e}(e=Gt.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Oe.g(),this.g.onreadystatechange=h(c(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(o){return void Wt(this,o)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(Array.prototype.indexOf.call(qt,t,void 0)>=0)||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,a]of n)this.g.setRequestHeader(i,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(o){Wt(this,o)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ue(this,"complete"),ue(this,"abort"),Jt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Jt(this,!0)),Gt.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Kt(this):this.Xa())},e.Xa=function(){Kt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Yt(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ve(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=$t.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){Pe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=yn(this,null,this.W),rn(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const s=new ze(this,this.j,e);let i=this.o;if(this.U&&(i?(i=H(i),W(i,this.U)):i=this.U),null!==this.u||this.R||(s.J=i,i=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=an(this,s,t),gt(n=dt(this.J),"RID",e),gt(n,"CVER",22),this.G&&gt(n,"X-HTTP-Session-Id",this.G),on(this,n),i&&(this.R?t="headers="+Be(Vt(i))+"&"+t:this.u&&zt(n,this.u,i)),at(this.h,s),this.Ra&&gt(n,"TYPE","init"),this.S?(gt(n,"$req",t),gt(n,"SID","null"),s.U=!0,We(s,n,null)):We(s,n,t),this.I=2}}else 3==this.I&&(e?sn(this,e):0==this.i.length||st(this.h)||sn(this))},e.Da=function(){if(this.v=null,hn(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=De(c(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pe(10),tn(this),hn(this))},e.Va=function(){null!=this.C&&(this.C=null,tn(this),ln(this),Pe(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=wn.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},bn.prototype.g=function(e,t){return new xn(e,t)},u(xn,le),xn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},xn.prototype.close=function(){en(this.g)},xn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ye(e),e=n);t.i.push(new nt(t.Ya++,e)),3==t.I&&rn(t)},xn.prototype.N=function(){this.g.l=null,delete this.j,en(this.g),delete this.g,xn.Z.N.call(this)},u(Sn,Ee),u(En,Ae),u(An,wn),An.prototype.ra=function(){ue(this.g,"a")},An.prototype.qa=function(e){ue(this.g,new Sn(e))},An.prototype.pa=function(e){ue(this.g,new En)},An.prototype.oa=function(){ue(this.g,"b")},bn.prototype.createWebChannel=bn.prototype.g,xn.prototype.send=xn.prototype.o,xn.prototype.open=xn.prototype.m,xn.prototype.close=xn.prototype.close,w=x.createWebChannelTransport=function(){return new bn},v=x.getStatEventTarget=function(){return ke()},y=x.Event=Ne,g=x.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Le.NO_ERROR=0,Le.TIMEOUT=8,Le.HTTP_ERROR=6,p=x.ErrorCode=Le,Fe.COMPLETE="complete",m=x.EventType=Fe,xe.EventType=Se,Se.OPEN="a",Se.CLOSE="b",Se.ERROR="c",Se.MESSAGE="d",le.prototype.listen=le.prototype.J,f=x.WebChannel=xe,x.FetchXmlHttpFactory=Ot,Gt.prototype.listenOnce=Gt.prototype.K,Gt.prototype.getLastError=Gt.prototype.Ha,Gt.prototype.getLastErrorCode=Gt.prototype.ya,Gt.prototype.getStatus=Gt.prototype.ca,Gt.prototype.getResponseJson=Gt.prototype.La,Gt.prototype.getResponseText=Gt.prototype.la,Gt.prototype.send=Gt.prototype.ea,Gt.prototype.setWithCredentials=Gt.prototype.Fa,d=x.XhrIo=Gt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const S="@firebase/firestore",E="4.9.2";class A{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}A.UNAUTHENTICATED=new A(null),A.GOOGLE_CREDENTIALS=new A("google-credentials-uid"),A.FIRST_PARTY=new A("first-party-uid"),A.MOCK_USER=new A("mock-user");let N="12.3.0";const T=new c.Vy("@firebase/firestore");function k(){return T.logLevel}function C(e){if(T.logLevel<=c.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(P);T.debug("Firestore (".concat(N,"): ").concat(e),...s)}}function I(e){if(T.logLevel<=c.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(P);T.error("Firestore (".concat(N,"): ").concat(e),...s)}}function _(e){if(T.logLevel<=c.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(P);T.warn("Firestore (".concat(N,"): ").concat(e),...s)}}function P(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function j(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,D(e,r,n)}function D(e,t,n){let r="FIRESTORE (".concat(N,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw I(r),new Error(r)}function M(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||D(t,s,r)}function R(e,t){return e}const O={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class L extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class F{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class U{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class B{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(A.UNAUTHENTICATED))}shutdown(){}}class V{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class z{constructor(e){this.t=e,this.currentUser=A.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){M(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new F;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new F,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{C("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(C("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new F)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(C("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(M("string"==typeof t.accessToken,31837,{l:t}),new U(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return M(null===e||"string"==typeof e,2055,{h:e}),new A(e)}}class G{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=A.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class H{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new G(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(A.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class W{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,(0,o.xZ)(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){M(void 0===this.o,3512);const n=e=>{null!=e.error&&C("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,C("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{C("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):C("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new q(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(M("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new q(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Q(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class K{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Q(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function J(e,t){return e<t?-1:e>t?1:0}function Y(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return $(n)===$(s)?J(n,s):$(n)?1:-1}return J(e.length,t.length)}const Z=55296,X=57343;function $(e){const t=e.charCodeAt(0);return t>=Z&&t<=X}function ee(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const te="__name__";class ne{constructor(e,t,n){void 0===t?t=0:t>e.length&&j(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&j(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ne.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ne?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=ne.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return J(e.length,t.length)}static compareSegments(e,t){const n=ne.isNumericId(e),r=ne.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?ne.extractNumericId(e).compare(ne.extractNumericId(t)):Y(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return r.fromString(e.substring(4,e.length-2))}}class re extends ne{construct(e,t,n){return new re(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new L(O.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new re(e)}static emptyPath(){return new re([])}}const se=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ie extends ne{construct(e,t,n){return new ie(e,t,n)}static isValidIdentifier(e){return se.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ie.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===te}static keyField(){return new ie([te])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new L(O.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new L(O.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new L(O.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new L(O.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ie(t)}static emptyPath(){return new ie([])}}class oe{constructor(e){this.path=e}static fromPath(e){return new oe(re.fromString(e))}static fromName(e){return new oe(re.fromString(e).popFirst(5))}static empty(){return new oe(re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===re.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return re.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new re(e.slice()))}}function ae(e,t,n){if(!n)throw new L(O.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ce(e){if(!oe.isDocumentKey(e))throw new L(O.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function le(e){if(oe.isDocumentKey(e))throw new L(O.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ue(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function he(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":j(12329,{type:typeof e})}function de(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new L(O.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=he(e);throw new L(O.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function fe(e,t){const n={typeString:e};return t&&(n.value=t),n}function me(e,t){if(!ue(e))throw new L(O.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(s&&typeof o!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==i&&o!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new L(O.INVALID_ARGUMENT,n);return!0}const pe=-62135596800,ge=1e6;class ye{static now(){return ye.fromMillis(Date.now())}static fromDate(e){return ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ge);return new ye(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new L(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new L(O.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<pe)throw new L(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new L(O.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ge}_compareTo(e){return this.seconds===e.seconds?J(this.nanoseconds,e.nanoseconds):J(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(me(e,ye._jsonSchema))return new ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-pe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ye._jsonSchemaVersion="firestore/timestamp/1.0",ye._jsonSchema={type:fe("string",ye._jsonSchemaVersion),seconds:fe("number"),nanoseconds:fe("number")};class ve{static fromTimestamp(e){return new ve(e)}static min(){return new ve(new ye(0,0))}static max(){return new ve(new ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const we=-1;class be{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}be.UNKNOWN_ID=-1;function xe(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=ve.fromTimestamp(1e9===r?new ye(n+1,0):new ye(n,r));return new Ee(s,oe.empty(),t)}function Se(e){return new Ee(e.readTime,e.key,we)}class Ee{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ee(ve.min(),oe.empty(),we)}static max(){return new Ee(ve.max(),oe.empty(),we)}}function Ae(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=oe.comparator(e.documentKey,t.documentKey),0!==n?n:J(e.largestBatchId,t.largestBatchId))}const Ne="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Te{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ke(e){if(e.code!==O.FAILED_PRECONDITION||e.message!==Ne)throw e;C("LocalStore","Unexpectedly lost primary lease")}class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&j(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ce((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ce?t:Ce.resolve(t)}catch(e){return Ce.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ce.reject(t)}static resolve(e){return new Ce((t,n)=>{t(e)})}static reject(e){return new Ce((t,n)=>{n(e)})}static waitFor(e){return new Ce((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Ce.resolve(!1);for(const n of e)t=t.next(e=>e?Ce.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ce((n,r)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;t(e[c]).next(e=>{i[c]=e,++o,o===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Ce((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Ie(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function _e(e){return"IndexedDbTransactionError"===e.name}class Pe{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Pe.ce=-1;const je=-1;function De(e){return null==e}function Me(e){return 0===e&&1/e==-1/0}function Re(e){return"number"==typeof e&&Number.isInteger(e)&&!Me(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Oe="\x01";function Le(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ue(t)),t=Fe(e.get(n),t);return Ue(t)}function Fe(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Oe:n+="\x01\x11";break;default:n+=t}}return n}function Ue(e){return e+Oe+"\x01"}const Be="remoteDocuments",Ve="owner",ze="mutationQueues",Ge="mutations";const He="documentMutations",qe="remoteDocumentsV14",We="remoteDocumentGlobal",Qe="targets",Ke="targetDocuments",Je="targetGlobal",Ye="collectionParents",Ze="clientMetadata",Xe="bundles",$e="namedQueries",et="indexConfiguration",tt="indexState",nt="indexEntries",rt="documentOverlays",st="globals",it=[ze,Ge,He,Be,Qe,Ve,Je,Ke,Ze,We,Ye,Xe,$e],ot=[ze,Ge,He,qe,Qe,Ve,Je,Ke,Ze,We,Ye,Xe,$e,rt],at=ot,ct=[...at,et,tt,nt];function lt(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ut(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function ht(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class dt{constructor(e,t){this.comparator=e,this.root=t||mt.EMPTY}insert(e,t){return new dt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ft(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ft(this.root,e,this.comparator,!1)}getReverseIterator(){return new ft(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ft(this.root,e,this.comparator,!0)}}class ft{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mt{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:mt.RED,this.left=null!=r?r:mt.EMPTY,this.right=null!=s?s:mt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new mt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return mt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return mt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw j(43730,{key:this.key,value:this.value});if(this.right.isRed())throw j(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw j(27949);return e+(this.isRed()?0:1)}}mt.EMPTY=null,mt.RED=!0,mt.BLACK=!1,mt.EMPTY=new class{constructor(){this.size=0}get key(){throw j(57766)}get value(){throw j(16141)}get color(){throw j(16727)}get left(){throw j(29726)}get right(){throw j(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new mt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class pt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new gt(this.data.getIterator())}getIteratorFrom(e){return new gt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof pt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new pt(this.comparator);return t.data=e,t}}class gt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class yt{constructor(e){this.fields=e,e.sort(ie.comparator)}static empty(){return new yt([])}unionWith(e){let t=new pt(ie.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new yt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ee(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class vt extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class wt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new vt("Invalid base64 string: "+e):e}}(e);return new wt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new wt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return J(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}wt.EMPTY_BYTE_STRING=new wt("");const bt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xt(e){if(M(!!e,39018),"string"==typeof e){let t=0;const n=bt.exec(e);if(M(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:St(e.seconds),nanos:St(e.nanos)}}function St(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Et(e){return"string"==typeof e?wt.fromBase64String(e):wt.fromUint8Array(e)}const At="server_timestamp",Nt="__type__",Tt="__previous_value__",kt="__local_write_time__";function Ct(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Nt])||void 0===t?void 0:t.stringValue)===At}function It(e){const t=e.mapValue.fields[Tt];return Ct(t)?It(t):t}function _t(e){const t=xt(e.mapValue.fields[kt].timestampValue);return new ye(t.seconds,t.nanos)}class Pt{constructor(e,t,n,r,s,i,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c,this.isUsingEmulator=l}}const jt="(default)";class Dt{constructor(e,t){this.projectId=e,this.database=t||jt}static empty(){return new Dt("","")}get isDefaultDatabase(){return this.database===jt}isEqual(e){return e instanceof Dt&&e.projectId===this.projectId&&e.database===this.database}}const Mt="__type__",Rt="__max__",Ot={mapValue:{fields:{__type__:{stringValue:Rt}}}},Lt="__vector__",Ft="value";function Ut(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ct(e)?4:nn(e)?9007199254740991:en(e)?10:11:j(28295,{value:e})}function Bt(e,t){if(e===t)return!0;const n=Ut(e);if(n!==Ut(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return _t(e).isEqual(_t(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=xt(e.timestampValue),r=xt(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Et(e.bytesValue).isEqual(Et(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return St(e.geoPointValue.latitude)===St(t.geoPointValue.latitude)&&St(e.geoPointValue.longitude)===St(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return St(e.integerValue)===St(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=St(e.doubleValue),r=St(t.doubleValue);return n===r?Me(n)===Me(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ee(e.arrayValue.values||[],t.arrayValue.values||[],Bt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(lt(n)!==lt(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Bt(n[s],r[s])))return!1;return!0}(e,t);default:return j(52216,{left:e})}}function Vt(e,t){return void 0!==(e.values||[]).find(e=>Bt(e,t))}function zt(e,t){if(e===t)return 0;const n=Ut(e),r=Ut(t);if(n!==r)return J(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return J(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=St(e.integerValue||e.doubleValue),r=St(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Gt(e.timestampValue,t.timestampValue);case 4:return Gt(_t(e),_t(t));case 5:return Y(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Et(e),r=Et(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=J(n[s],r[s]);if(0!==e)return e}return J(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=J(St(e.latitude),St(t.latitude));return 0!==n?n:J(St(e.longitude),St(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Ht(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,s,i){const o=e.fields||{},a=t.fields||{},c=null===(n=o[Ft])||void 0===n?void 0:n.arrayValue,l=null===(r=a[Ft])||void 0===r?void 0:r.arrayValue,u=J((null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0,(null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:Ht(c,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ot.mapValue&&t===Ot.mapValue)return 0;if(e===Ot.mapValue)return 1;if(t===Ot.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let o=0;o<r.length&&o<i.length;++o){const e=Y(r[o],i[o]);if(0!==e)return e;const t=zt(n[r[o]],s[i[o]]);if(0!==t)return t}return J(r.length,i.length)}(e.mapValue,t.mapValue);default:throw j(23264,{he:n})}}function Gt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return J(e,t);const n=xt(e),r=xt(t),s=J(n.seconds,r.seconds);return 0!==s?s:J(n.nanos,r.nanos)}function Ht(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=zt(n[s],r[s]);if(e)return e}return J(n.length,r.length)}function qt(e){return Wt(e)}function Wt(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=xt(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Et(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return oe.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Wt(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Wt(e.fields[s]));return n+"}"}(e.mapValue):j(61005,{value:e})}function Qt(e){switch(Ut(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=It(e);return t?16+Qt(t):16;case 5:return 2*e.stringValue.length;case 6:return Et(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Qt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return ut(e.fields,(e,n)=>{t+=e.length+Qt(n)}),t}(e.mapValue);default:throw j(13486,{value:e})}}function Kt(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Jt(e){return!!e&&"integerValue"in e}function Yt(e){return!!e&&"arrayValue"in e}function Zt(e){return!!e&&"nullValue"in e}function Xt(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function $t(e){return!!e&&"mapValue"in e}function en(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Mt])||void 0===t?void 0:t.stringValue)===Lt}function tn(e){if(e.geoPointValue)return{geoPointValue:(0,i.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,i.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ut(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=tn(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=tn(e.arrayValue.values[n]);return t}return(0,i.A)({},e)}function nn(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Rt}class rn{constructor(e){this.value=e}static empty(){return new rn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!$t(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tn(t)}setAll(e){let t=ie.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=tn(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());$t(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];$t(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){ut(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new rn(tn(this.value))}}function sn(e){const t=[];return ut(e.fields,(e,n)=>{const r=new ie([e]);if($t(n)){const e=sn(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new yt(t)}class on{constructor(e,t,n,r,s,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new on(e,0,ve.min(),ve.min(),ve.min(),rn.empty(),0)}static newFoundDocument(e,t,n,r){return new on(e,1,t,ve.min(),n,r,0)}static newNoDocument(e,t){return new on(e,2,t,ve.min(),ve.min(),rn.empty(),0)}static newUnknownDocument(e,t){return new on(e,3,t,ve.min(),ve.min(),rn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ve.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=rn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=rn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ve.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof on&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new on(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class an{constructor(e,t){this.position=e,this.inclusive=t}}function cn(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?oe.comparator(oe.fromName(o.referenceValue),n.key):zt(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function ln(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Bt(e.position[n],t.position[n]))return!1;return!0}class un{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function hn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class dn{}class fn extends dn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new xn(e,t,n):"array-contains"===t?new Nn(e,n):"in"===t?new Tn(e,n):"not-in"===t?new kn(e,n):"array-contains-any"===t?new Cn(e,n):new fn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Sn(e,n):new En(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(zt(t,this.value)):null!==t&&Ut(this.value)===Ut(t)&&this.matchesComparison(zt(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return j(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class mn extends dn{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new mn(e,t)}matches(e){return pn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function pn(e){return"and"===e.op}function gn(e){return yn(e)&&pn(e)}function yn(e){for(const t of e.filters)if(t instanceof mn)return!1;return!0}function vn(e){if(e instanceof fn)return e.field.canonicalString()+e.op.toString()+qt(e.value);if(gn(e))return e.filters.map(e=>vn(e)).join(",");{const t=e.filters.map(e=>vn(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function wn(e,t){return e instanceof fn?function(e,t){return t instanceof fn&&e.op===t.op&&e.field.isEqual(t.field)&&Bt(e.value,t.value)}(e,t):e instanceof mn?function(e,t){return t instanceof mn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&wn(n,t.filters[r]),!0)}(e,t):void j(19439)}function bn(e){return e instanceof fn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(qt(e.value))}(e):e instanceof mn?function(e){return e.op.toString()+" {"+e.getFilters().map(bn).join(" ,")+"}"}(e):"Filter"}class xn extends fn{constructor(e,t,n){super(e,t,n),this.key=oe.fromName(n.referenceValue)}matches(e){const t=oe.comparator(e.key,this.key);return this.matchesComparison(t)}}class Sn extends fn{constructor(e,t){super(e,"in",t),this.keys=An("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class En extends fn{constructor(e,t){super(e,"not-in",t),this.keys=An("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function An(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>oe.fromName(e.referenceValue))}class Nn extends fn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yt(t)&&Vt(t.arrayValue,this.value)}}class Tn extends fn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Vt(this.value.arrayValue,t)}}class kn extends fn{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Vt(this.value.arrayValue,t)}}class Cn extends fn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Vt(this.value.arrayValue,e))}}class In{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function _n(e){return new In(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Pn(e){const t=R(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>vn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),De(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>qt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>qt(e)).join(",")),t.Te=e}return t.Te}function jn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!hn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!wn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ln(e.startAt,t.startAt)&&ln(e.endAt,t.endAt)}function Dn(e){return oe.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Mn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Rn(e,t,n,r,s,i,o,a){return new Mn(e,t,n,r,s,i,o,a)}function On(e){return new Mn(e)}function Ln(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Fn(e){return null!==e.collectionGroup}function Un(e){const t=R(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new pt(ie.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new un(r,n))}),e.has(ie.keyField().canonicalString())||t.Ie.push(new un(ie.keyField(),n))}return t.Ie}function Bn(e){const t=R(e);return t.Ee||(t.Ee=Vn(t,Un(e))),t.Ee}function Vn(e,t){if("F"===e.limitType)return _n(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new un(e.field,t)});const n=e.endAt?new an(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new an(e.startAt.position,e.startAt.inclusive):null;return _n(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function zn(e,t){const n=e.filters.concat([t]);return new Mn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Gn(e,t,n){return new Mn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Hn(e,t){return jn(Bn(e),Bn(t))&&e.limitType===t.limitType}function qn(e){return"".concat(Pn(Bn(e)),"|lt:").concat(e.limitType)}function Wn(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>bn(e)).join(", "),"]")),De(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>qt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>qt(e)).join(",")),"Target(".concat(t,")")}(Bn(e)),"; limitType=").concat(e.limitType,")")}function Qn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):oe.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Un(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=cn(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Un(e),t))&&!(e.endAt&&!function(e,t,n){const r=cn(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Un(e),t))}(e,t)}function Kn(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Jn(e){return(t,n)=>{let r=!1;for(const s of Un(e)){const e=Yn(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Yn(e,t,n){const r=e.field.isKeyField()?oe.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?zt(r,s):j(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return j(19790,{direction:e.dir})}}class Zn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){ut(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return ht(this.inner)}size(){return this.innerSize}}const Xn=new dt(oe.comparator);function $n(){return Xn}const er=new dt(oe.comparator);function tr(){let e=er;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function nr(e){let t=er;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function rr(){return ir()}function sr(){return ir()}function ir(){return new Zn(e=>e.toString(),(e,t)=>e.isEqual(t))}const or=new dt(oe.comparator),ar=new pt(oe.comparator);function cr(){let e=ar;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const lr=new pt(J);function ur(){return lr}function hr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Me(t)?"-0":t}}function dr(e){return{integerValue:""+e}}function fr(e,t){return Re(t)?dr(t):hr(e,t)}class mr{constructor(){this._=void 0}}function pr(e,t,n){return e instanceof vr?function(e,t){const n={fields:{[Nt]:{stringValue:At},[kt]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ct(t)&&(t=It(t)),t&&(n.fields[Tt]=t),{mapValue:n}}(n,t):e instanceof wr?br(e,t):e instanceof xr?Sr(e,t):function(e,t){const n=yr(e,t),r=Ar(n)+Ar(e.Ae);return Jt(n)&&Jt(e.Ae)?dr(r):hr(e.serializer,r)}(e,t)}function gr(e,t,n){return e instanceof wr?br(e,t):e instanceof xr?Sr(e,t):n}function yr(e,t){return e instanceof Er?function(e){return Jt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class vr extends mr{}class wr extends mr{constructor(e){super(),this.elements=e}}function br(e,t){const n=Nr(t);for(const r of e.elements)n.some(e=>Bt(e,r))||n.push(r);return{arrayValue:{values:n}}}class xr extends mr{constructor(e){super(),this.elements=e}}function Sr(e,t){let n=Nr(t);for(const r of e.elements)n=n.filter(e=>!Bt(e,r));return{arrayValue:{values:n}}}class Er extends mr{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Ar(e){return St(e.integerValue||e.doubleValue)}function Nr(e){return Yt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Tr{constructor(e,t){this.field=e,this.transform=t}}class kr{constructor(e,t){this.version=e,this.transformResults=t}}class Cr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Cr}static exists(e){return new Cr(void 0,e)}static updateTime(e){return new Cr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ir(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class _r{}function Pr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Vr(e.key,Cr.none()):new Or(e.key,e.data,Cr.none());{const n=e.data,r=rn.empty();let s=new pt(ie.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Lr(e.key,r,new yt(s.toArray()),Cr.none())}}function jr(e,t,n){e instanceof Or?function(e,t,n){const r=e.value.clone(),s=Ur(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Lr?function(e,t,n){if(!Ir(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Ur(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Fr(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Dr(e,t,n,r){return e instanceof Or?function(e,t,n,r){if(!Ir(e.precondition,t))return n;const s=e.value.clone(),i=Br(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Lr?function(e,t,n,r){if(!Ir(e.precondition,t))return n;const s=Br(e.fieldTransforms,r,t),i=t.data;return i.setAll(Fr(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ir(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Mr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=yr(r.transform,e||null);null!=s&&(null===n&&(n=rn.empty()),n.set(r.field,s))}return n||null}function Rr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ee(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wr&&t instanceof wr||e instanceof xr&&t instanceof xr?ee(e.elements,t.elements,Bt):e instanceof Er&&t instanceof Er?Bt(e.Ae,t.Ae):e instanceof vr&&t instanceof vr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Or extends _r{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Lr extends _r{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Fr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Ur(e,t,n){const r=new Map;M(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,gr(o,a,n[s]))}return r}function Br(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,pr(e,i,t))}return r}class Vr extends _r{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zr extends _r{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Gr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&jr(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Dr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Dr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=sr();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=t.has(r.key)?null:o;const a=Pr(i,o);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(ve.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),cr())}isEqual(e){return this.batchId===e.batchId&&ee(this.mutations,e.mutations,(e,t)=>Rr(e,t))&&ee(this.baseMutations,e.baseMutations,(e,t)=>Rr(e,t))}}class Hr{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){M(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=or;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Hr(e,t,n,r)}}class qr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Wr{constructor(e,t){this.count=e,this.unchangedNames=t}}var Qr,Kr;function Jr(e){switch(e){case O.OK:return j(64938);case O.CANCELLED:case O.UNKNOWN:case O.DEADLINE_EXCEEDED:case O.RESOURCE_EXHAUSTED:case O.INTERNAL:case O.UNAVAILABLE:case O.UNAUTHENTICATED:return!1;case O.INVALID_ARGUMENT:case O.NOT_FOUND:case O.ALREADY_EXISTS:case O.PERMISSION_DENIED:case O.FAILED_PRECONDITION:case O.ABORTED:case O.OUT_OF_RANGE:case O.UNIMPLEMENTED:case O.DATA_LOSS:return!0;default:return j(15467,{code:e})}}function Yr(e){if(void 0===e)return I("GRPC error has no .code"),O.UNKNOWN;switch(e){case Qr.OK:return O.OK;case Qr.CANCELLED:return O.CANCELLED;case Qr.UNKNOWN:return O.UNKNOWN;case Qr.DEADLINE_EXCEEDED:return O.DEADLINE_EXCEEDED;case Qr.RESOURCE_EXHAUSTED:return O.RESOURCE_EXHAUSTED;case Qr.INTERNAL:return O.INTERNAL;case Qr.UNAVAILABLE:return O.UNAVAILABLE;case Qr.UNAUTHENTICATED:return O.UNAUTHENTICATED;case Qr.INVALID_ARGUMENT:return O.INVALID_ARGUMENT;case Qr.NOT_FOUND:return O.NOT_FOUND;case Qr.ALREADY_EXISTS:return O.ALREADY_EXISTS;case Qr.PERMISSION_DENIED:return O.PERMISSION_DENIED;case Qr.FAILED_PRECONDITION:return O.FAILED_PRECONDITION;case Qr.ABORTED:return O.ABORTED;case Qr.OUT_OF_RANGE:return O.OUT_OF_RANGE;case Qr.UNIMPLEMENTED:return O.UNIMPLEMENTED;case Qr.DATA_LOSS:return O.DATA_LOSS;default:return j(39323,{code:e})}}(Kr=Qr||(Qr={}))[Kr.OK=0]="OK",Kr[Kr.CANCELLED=1]="CANCELLED",Kr[Kr.UNKNOWN=2]="UNKNOWN",Kr[Kr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kr[Kr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kr[Kr.NOT_FOUND=5]="NOT_FOUND",Kr[Kr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kr[Kr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kr[Kr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kr[Kr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kr[Kr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kr[Kr.ABORTED=10]="ABORTED",Kr[Kr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kr[Kr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kr[Kr.INTERNAL=13]="INTERNAL",Kr[Kr.UNAVAILABLE=14]="UNAVAILABLE",Kr[Kr.DATA_LOSS=15]="DATA_LOSS";let Zr=null;function Xr(){return new TextEncoder}const $r=new r([4294967295,4294967295],0);function es(e){const t=Xr().encode(e),n=new s;return n.update(t),new Uint8Array(n.digest())}function ts(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),s=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new r([n,s],0),new r([i,o],0)]}class ns{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new rs("Invalid padding: ".concat(t));if(n<0)throw new rs("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new rs("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new rs("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=r.fromNumber(this.ge)}ye(e,t,n){let s=e.add(t.multiply(r.fromNumber(n)));return 1===s.compare($r)&&(s=new r([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=es(e),[n,r]=ts(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new ns(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=es(e),[n,r]=ts(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class rs extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class ss{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,is.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new ss(ve.min(),r,new dt(J),$n(),cr())}}class is{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new is(n,t,cr(),cr(),cr())}}class os{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class as{constructor(e,t){this.targetId=e,this.Ce=t}}class cs{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class ls{constructor(){this.ve=0,this.Fe=ds(),this.Me=wt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=cr(),t=cr(),n=cr();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:j(38017,{changeType:s})}}),new is(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=ds()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,M(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class us{constructor(e){this.Ge=e,this.ze=new Map,this.je=$n(),this.Je=hs(),this.He=hs(),this.Ye=new dt(J)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:j(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(Dn(i))if(0===n){const e=new oe(i.path);this.et(t,e,on.newNoDocument(e,ve.min()))}else M(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var s;const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(s=Zr)||void 0===s||s.lt(function(e,t,n,r,s,i,o,a,c,l){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===s,hashCount:null!==(i=null===h||void 0===h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(o=null===h||void 0===h||null===(a=h.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(c=null===h||void 0===h||null===(l=h.bits)||void 0===l?void 0:l.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,o;try{i=Et(n).toUint8Array()}catch(e){if(e instanceof vt)return _("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new ns(i,r,s)}catch(e){return _(e instanceof rs?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Ge.ht(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const s=this.ot(r);if(s){if(n.current&&Dn(s.target)){const t=new oe(s.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,on.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=cr();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new ss(e,t,this.Ye,this.je,n);return this.je=$n(),this.Je=hs(),this.He=hs(),this.Ye=new dt(J),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new ls,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new pt(J),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new pt(J),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||C("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new ls),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function hs(){return new dt(oe.comparator)}function ds(){return new dt(oe.comparator)}const fs={asc:"ASCENDING",desc:"DESCENDING"},ms={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ps={and:"AND",or:"OR"};class gs{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function ys(e,t){return e.useProto3Json||De(t)?t:{value:t}}function vs(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ws(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bs(e,t){return vs(e,t.toTimestamp())}function xs(e){return M(!!e,49232),ve.fromTimestamp(function(e){const t=xt(e);return new ye(t.seconds,t.nanos)}(e))}function Ss(e,t){return Es(e,t).canonicalString()}function Es(e,t){const n=function(e){return new re(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function As(e){const t=re.fromString(e);return M(Hs(t),10190,{key:t.toString()}),t}function Ns(e,t){return Ss(e.databaseId,t.path)}function Ts(e,t){const n=As(t);if(n.get(1)!==e.databaseId.projectId)throw new L(O.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new L(O.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new oe(_s(n))}function ks(e,t){return Ss(e.databaseId,t)}function Cs(e){const t=As(e);return 4===t.length?re.emptyPath():_s(t)}function Is(e){return new re(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function _s(e){return M(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Ps(e,t,n){return{name:Ns(e,t),fields:n.value.mapValue.fields}}function js(e,t){let n;if(t instanceof Or)n={update:Ps(e,t.key,t.value)};else if(t instanceof Vr)n={delete:Ns(e,t.key)};else if(t instanceof Lr)n={update:Ps(e,t.key,t.data),updateMask:Gs(t.fieldMask)};else{if(!(t instanceof zr))return j(16599,{Vt:t.type});n={verify:Ns(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof vr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wr)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Er)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw j(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bs(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:j(27497)}(e,t.precondition)),n}function Ds(e,t){return{documents:[ks(e,t.path)]}}function Ms(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=ks(e,s);const i=function(e){if(0!==e.length)return zs(mn.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Bs(e.field),direction:Ls(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=ys(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function Rs(e){let t=Cs(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){M(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Os(e);return t instanceof mn&&gn(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new un(Vs(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,De(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new an(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new an(n,t)}(n.endAt)),Rn(t,s,o,i,a,"F",c,l)}function Os(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Vs(e.unaryFilter.field);return fn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Vs(e.unaryFilter.field);return fn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Vs(e.unaryFilter.field);return fn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Vs(e.unaryFilter.field);return fn.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return j(61313);default:return j(60726)}}(e):void 0!==e.fieldFilter?function(e){return fn.create(Vs(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return j(58110);default:return j(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return mn.create(e.compositeFilter.filters.map(e=>Os(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return j(1026)}}(e.compositeFilter.op))}(e):j(30097,{filter:e})}function Ls(e){return fs[e]}function Fs(e){return ms[e]}function Us(e){return ps[e]}function Bs(e){return{fieldPath:e.canonicalString()}}function Vs(e){return ie.fromServerFormat(e.fieldPath)}function zs(e){return e instanceof fn?function(e){if("=="===e.op){if(Xt(e.value))return{unaryFilter:{field:Bs(e.field),op:"IS_NAN"}};if(Zt(e.value))return{unaryFilter:{field:Bs(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xt(e.value))return{unaryFilter:{field:Bs(e.field),op:"IS_NOT_NAN"}};if(Zt(e.value))return{unaryFilter:{field:Bs(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Bs(e.field),op:Fs(e.op),value:e.value}}}(e):e instanceof mn?function(e){const t=e.getFilters().map(e=>zs(e));return 1===t.length?t[0]:{compositeFilter:{op:Us(e.op),filters:t}}}(e):j(54877,{filter:e})}function Gs(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Hs(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class qs{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ve.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ve.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:wt.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new qs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ws{constructor(e){this.yt=e}}function Qs(e){const t=Rs({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Gn(t,t.limit,"L"):t}class Ks{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(St(e.integerValue));else if("doubleValue"in e){const n=St(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Me(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=xt(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Et(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?nn(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):en(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):j(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const s=Ft,i=(null===(n=r[s].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(St(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),oe.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Ks.Kt=new Ks;class Js{constructor(){this.Cn=new Ys}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ce.resolve()}getCollectionParents(e,t){return Ce.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ce.resolve()}deleteFieldIndex(e,t){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,t){return Ce.resolve()}getDocumentsMatchingTarget(e,t){return Ce.resolve(null)}getIndexType(e,t){return Ce.resolve(0)}getFieldIndexes(e,t){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,t){return Ce.resolve(Ee.min())}getMinOffsetFromCollectionGroup(e,t){return Ce.resolve(Ee.min())}updateCollectionGroup(e,t,n){return Ce.resolve()}updateIndexEntries(e,t){return Ce.resolve()}}class Ys{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new pt(re.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new pt(re.comparator)).toArray()}}new Uint8Array(0);const Zs={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xs=41943040;class $s{static withCacheSize(e){return new $s(e,$s.DEFAULT_COLLECTION_PERCENTILE,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}$s.DEFAULT_COLLECTION_PERCENTILE=10,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$s.DEFAULT=new $s(Xs,$s.DEFAULT_COLLECTION_PERCENTILE,$s.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$s.DISABLED=new $s(-1,0,0);class ei{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ei(0)}static cr(){return new ei(-1)}}const ti="LruGarbageCollector",ni=1048576;function ri(e,t){let[n,r]=e,[s,i]=t;const o=J(n,s);return 0===o?J(r,i):o}class si{constructor(e){this.Ir=e,this.buffer=new pt(ri),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ri(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ii{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){C(ti,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){_e(e)?C(ti,"Ignoring IndexedDB error during garbage collection: ",e):await ke(e)}await this.Vr(3e5)})}}class oi{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ce.resolve(Pe.ce);const n=new si(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(C("LruGarbageCollector","Garbage collection skipped; disabled"),Ce.resolve(Zs)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(C("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Zs):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,i,o,a,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(C("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,o=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,a=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),k()<=c.$b.DEBUG&&C("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(a-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-a)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),Ce.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function ai(e,t){return new oi(e,t)}class ci{constructor(){this.changes=new Zn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,on.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ce.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class li{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class ui{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Dr(n.mutation,e,yt.empty(),ye.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,cr()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:cr();const r=rr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=tr();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=rr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,cr()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=$n();const i=ir(),o=ir();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Lr)?s=s.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),Dr(o.mutation,t,o.mutation.getFieldMask(),ye.now())):i.set(t.key,yt.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new li(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=ir();let r=new dt((e,t)=>e-t),s=cr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||yt.empty();o=s.applyToLocalView(i,o),n.set(e,o);const a=(r.get(s.batchId)||cr()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=sr();c.forEach(e=>{if(!s.has(e)){const r=Pr(t.get(e),n.get(e));null!==r&&l.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Ce.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return oe.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Fn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Ce.resolve(rr());let o=we,a=s;return i.next(t=>Ce.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(t)?Ce.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,cr())).next(e=>({batchId:o,changes:nr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new oe(t)).next(e=>{let t=tr();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=tr();return this.indexManager.getCollectionParents(e,s).next(o=>Ce.forEach(o,o=>{const a=function(e,t){return new Mn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,on.newInvalidDocument(r)))});let n=tr();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Dr(i.mutation,r,yt.empty(),ye.now()),Qn(t,r)&&(n=n.insert(e,r))}),n})}}class hi{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ce.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:xs(e.createTime)}}(t)),Ce.resolve()}getNamedQuery(e,t){return Ce.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Qs(e.bundledQuery),readTime:xs(e.readTime)}}(t)),Ce.resolve()}}class di{constructor(){this.overlays=new dt(oe.comparator),this.qr=new Map}getOverlay(e,t){return Ce.resolve(this.overlays.get(t))}getOverlays(e,t){const n=rr();return Ce.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Ce.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ce.resolve()}getOverlaysForCollection(e,t,n){const r=rr(),s=t.length+1,i=new oe(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ce.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new dt((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=rr(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=rr(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Ce.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qr(t,n));let s=this.qr.get(t);void 0===s&&(s=cr(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class fi{constructor(){this.sessionToken=wt.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ce.resolve()}}class mi{constructor(){this.Qr=new pt(pi.$r),this.Ur=new pt(pi.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new pi(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new pi(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new oe(new re([])),n=new pi(t,e),r=new pi(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new oe(new re([])),n=new pi(t,e),r=new pi(t,e+1);let s=cr();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new pi(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class pi{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return oe.comparator(e.key,t.key)||J(e.Yr,t.Yr)}static Kr(e,t){return J(e.Yr,t.Yr)||oe.comparator(e.key,t.key)}}class gi{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new pt(pi.$r)}checkEmpty(e){return Ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Gr(s,t,n,r);this.mutationQueue.push(i);for(const o of r)this.Zr=this.Zr.add(new pi(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ce.resolve(i)}lookupMutationBatch(e,t){return Ce.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return Ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(0===this.mutationQueue.length?je:this.tr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new pi(t,0),r=new pi(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),Ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new pt(J);return t.forEach(e=>{const t=new pi(e,0),r=new pi(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Ce.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;oe.isDocumentKey(s)||(s=s.child(""));const i=new pi(new oe(s),0);let o=new pt(J);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},i),Ce.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){M(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ce.forEach(t.mutations,r=>{const s=new pi(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new pi(t,0),r=this.Zr.firstAfterOrEqual(n);return Ce.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class yi{constructor(e){this.ri=e,this.docs=new dt(oe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ce.resolve(n?n.document.mutableCopy():on.newInvalidDocument(t))}getEntries(e,t){let n=$n();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():on.newInvalidDocument(e))}),Ce.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=$n();const i=t.path,o=new oe(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Ae(Se(o),n)<=0||(r.has(o.key)||Qn(t,o))&&(s=s.insert(o.key,o.mutableCopy()))}return Ce.resolve(s)}getAllFromCollectionGroup(e,t,n,r){j(9500)}ii(e,t){return Ce.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new vi(this)}getSize(e){return Ce.resolve(this.size)}}class vi extends ci{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Ce.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class wi{constructor(e){this.persistence=e,this.si=new Zn(e=>Pn(e),jn),this.lastRemoteSnapshotVersion=ve.min(),this.highestTargetId=0,this.oi=0,this._i=new mi,this.targetCount=0,this.ai=ei.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ce.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ei(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ce.resolve()}updateTargetData(e,t){return this.Pr(t),Ce.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Ce.waitFor(s).next(()=>r)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ce.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ce.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ce.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ce.resolve(n)}containsKey(e,t){return Ce.resolve(this._i.containsKey(t))}}class bi{constructor(e,t){this.ui={},this.overlays={},this.ci=new Pe(0),this.li=!1,this.li=!0,this.hi=new fi,this.referenceDelegate=e(this),this.Pi=new wi(this),this.indexManager=new Js,this.remoteDocumentCache=function(e){return new yi(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Ws(t),this.Ii=new hi(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new di,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new gi(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){C("MemoryPersistence","Starting transaction:",e);const r=new xi(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Ce.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class xi extends Te{constructor(e){super(),this.currentSequenceNumber=e}}class Si{constructor(e){this.persistence=e,this.Ri=new mi,this.Vi=null}static mi(e){return new Si(e)}get fi(){if(this.Vi)return this.Vi;throw j(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ce.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ce.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ce.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.fi,n=>{const r=oe.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,ve.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ce.or([()=>Ce.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ei{constructor(e,t){this.persistence=e,this.pi=new Zn(e=>Le(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ai(this,t)}static mi(e,t){return new Ei(e,t)}Ei(){}di(e){return Ce.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ce.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Ce.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,s.removeEntry(r,ve.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ce.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ce.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Qt(e.data.value)),t}br(e,t,n){return Ce.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ce.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ai{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=cr(),r=cr();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Ai(e,t.fromCache,n,r)}}class Ni{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Ti{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(0,l.nr)()?8:Ie((0,l.ZQ)())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Ni;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(k()<=c.$b.DEBUG&&C("QueryEngine","SDK will not create cache indexes for query:",Wn(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ce.resolve()):(k()<=c.$b.DEBUG&&C("QueryEngine","Query:",Wn(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(k()<=c.$b.DEBUG&&C("QueryEngine","The SDK decides to create cache indexes for query:",Wn(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(t))):Ce.resolve())}ys(e,t){if(Ln(t))return Ce.resolve(null);let n=Bn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Gn(t,null,"F"),n=Bn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=cr(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n.readTime)?this.ys(e,Gn(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return Ln(t)||r.isEqual(ve.min())?Ce.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(t,s);return this.Cs(t,i,n,r)?Ce.resolve(null):(k()<=c.$b.DEBUG&&C("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wn(t)),this.vs(e,i,t,xe(r,we)).next(e=>e))})}Ds(e,t){let n=new pt(Jn(e));return t.forEach((t,r)=>{Qn(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return k()<=c.$b.DEBUG&&C("QueryEngine","Using full collection scan to execute query:",Wn(t)),this.ps.getDocumentsMatchingQuery(e,t,Ee.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const ki="LocalStore",Ci=3e8;class Ii{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new dt(J),this.xs=new Zn(e=>Pn(e),jn),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ui(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function _i(e,t,n,r){return new Ii(e,t,n,r)}async function Pi(e,t){const n=R(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let o=cr();for(const e of r){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:i}))})})}function ji(e){const t=R(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Di(e,t,n){let r=cr(),s=cr();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=$n();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(ve.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):C(ki,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{ks:r,qs:s}})}function Mi(e,t){const n=R(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=je),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ri(e,t){const n=R(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(s=>s?(r=s,Ce.resolve(r)):n.Pi.allocateTargetId(e).next(s=>(r=new qs(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Oi(e,t,n){const r=R(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!_e(e))throw e;C(ki,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Li(e,t,n){const r=R(e);let s=ve.min(),i=cr();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=R(e),s=r.xs.get(n);return void 0!==s?Ce.resolve(r.Ms.get(s)):r.Pi.getTargetData(t,n)}(r,e,Bn(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?s:ve.min(),n?i:cr())).next(e=>(Fi(r,Kn(t),e),{documents:e,Qs:i})))}function Fi(e,t,n){let r=e.Os.get(t)||ve.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Ui{constructor(){this.activeTargetIds=ur()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Bi{constructor(){this.Mo=new Ui,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Ui,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Vi{Oo(e){}shutdown(){}}const zi="ConnectivityMonitor";class Gi{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){C(zi,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){C(zi,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Hi=null;function qi(){return null===Hi?Hi=268435456+Math.round(2147483648*Math.random()):Hi++,"0x"+Hi.toString(16)}const Wi="RestConnection",Qi={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ki{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===jt?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,s){const i=qi(),o=this.zo(e,t.toUriEncodedString());C(Wi,"Sending RPC '".concat(e,"' ").concat(i,":"),o,n);const a={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(a,r,s);const{host:c}=new URL(o),u=(0,l.zJ)(c);return this.Jo(e,o,a,n,u).then(t=>(C(Wi,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw _(Wi,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,s,i){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+N,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Qi[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Ji{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Yi="WebChannelConnection";class Zi extends Ki{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=qi();return new Promise((s,o)=>{const a=new d;a.setWithCredentials(!0),a.listenOnce(m.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case p.NO_ERROR:const n=a.getResponseJson();C(Yi,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(n)),s(n);break;case p.TIMEOUT:C(Yi,"RPC '".concat(e,"' ").concat(i," timed out")),o(new L(O.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:const r=a.getStatus();if(C(Yi,"RPC '".concat(e,"' ").concat(i," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(O).indexOf(t)>=0?t:O.UNKNOWN}(n.status);o(new L(e,n.message))}else o(new L(O.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new L(O.UNAVAILABLE,"Connection failed."));break;default:j(9055,{l_:e,streamId:i,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{C(Yi,"RPC '".concat(e,"' ").concat(i," completed."))}});const c=JSON.stringify(r);C(Yi,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)})}T_(e,t,n){const r=qi(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=w(),o=v(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const l=s.join("");C(Yi,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(l),a);const u=i.createWebChannel(l,a);this.I_(u);let h=!1,d=!1;const m=new Ji({Yo:t=>{d?C(Yi,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(C(Yi,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),C(Yi,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,f.EventType.OPEN,()=>{d||(C(Yi,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),m.o_())}),p(u,f.EventType.CLOSE,()=>{d||(d=!0,C(Yi,"RPC '".concat(e,"' stream ").concat(r," transport closed")),m.a_(),this.E_(u))}),p(u,f.EventType.ERROR,t=>{d||(d=!0,_(Yi,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),m.a_(new L(O.UNAVAILABLE,"The operation could not be completed")))}),p(u,f.EventType.MESSAGE,t=>{if(!d){var n;const s=t.data[0];M(!!s,16349);const i=s,o=(null===i||void 0===i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){C(Yi,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=Qr[e];if(void 0!==t)return Yr(t)}(t),s=o.message;void 0===n&&(n=O.INTERNAL,s="Unknown error status: "+t+" with message "+o.message),d=!0,m.a_(new L(n,s)),u.close()}else C(Yi,"RPC '".concat(e,"' stream ").concat(r," received:"),s),m.u_(s)}}),p(o,y.STAT_EVENT,t=>{t.stat===g.PROXY?C(Yi,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===g.NOPROXY&&C(Yi,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{m.__()},0),m}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Xi(){return"undefined"!=typeof document?document:null}function $i(e){return new gs(e,!0)}class eo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&C("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const to="PersistentStream";class no{constructor(e,t,n,r,s,i,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new eo(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===O.RESOURCE_EXHAUSTED?(I(t.toString()),I("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===O.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new L(O.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return C(to,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(C(to,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ro extends no{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:j(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(M(void 0===t||"string"==typeof t,58123),wt.fromBase64String(t||"")):(M(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),wt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?O.UNKNOWN:Yr(e.code);return new L(t,e.message||"")}(o);n=new cs(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ts(e,r.document.name),i=xs(r.document.updateTime),o=r.document.createTime?xs(r.document.createTime):ve.min(),a=new rn({mapValue:{fields:r.document.fields}}),c=on.newFoundDocument(s,i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new os(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Ts(e,r.document),i=r.readTime?xs(r.readTime):ve.min(),o=on.newNoDocument(s,i),a=r.removedTargetIds||[];n=new os([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Ts(e,r.document),i=r.removedTargetIds||[];n=new os([],i,s,null)}else{if(!("filter"in t))return j(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Wr(r,s),o=e.targetId;n=new as(o,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ve.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?ve.min():t.readTime?xs(t.readTime):ve.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Is(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Dn(r)?{documents:Ds(e,r)}:{query:Ms(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ws(e,t.resumeToken);const r=ys(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(ve.min())>0){n.readTime=vs(e,t.snapshotVersion.toTimestamp());const r=ys(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return j(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Is(this.serializer),t.removeTarget=e,this.q_(t)}}class so extends no{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return M(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,M(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){M(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(M(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?xs(e.updateTime):xs(t);return n.isEqual(ve.min())&&(n=xs(t)),new kr(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=xs(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Is(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>js(this.serializer,e))};this.q_(t)}}class io{}class oo extends io{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new L(O.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,o]=s;return this.connection.Go(e,Es(t,n),r,i,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(O.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Ho(e,Es(t,n),r,o,a,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===O.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new L(O.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ao{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(I(t),this.aa=!1):C("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const co="RemoteStore";class lo{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{wo(this)&&(C(co,"Restarting streams for network reachability change."),await async function(e){const t=R(e);t.Ea.add(4),await ho(t),t.Ra.set("Unknown"),t.Ea.delete(4),await uo(t)}(this))})}),this.Ra=new ao(n,r)}}async function uo(e){if(wo(e))for(const t of e.da)await t(!0)}async function ho(e){for(const t of e.da)await t(!1)}function fo(e,t){const n=R(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),vo(n)?yo(n):Fo(n).O_()&&po(n,t))}function mo(e,t){const n=R(e),r=Fo(n);n.Ia.delete(t),r.O_()&&go(n,t),0===n.Ia.size&&(r.O_()?r.L_():wo(n)&&n.Ra.set("Unknown"))}function po(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(ve.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Fo(e).Y_(t)}function go(e,t){e.Va.Ue(t),Fo(e).Z_(t)}function yo(e){e.Va=new us({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Fo(e).start(),e.Ra.ua()}function vo(e){return wo(e)&&!Fo(e).x_()&&e.Ia.size>0}function wo(e){return 0===R(e).Ea.size}function bo(e){e.Va=void 0}async function xo(e){e.Ra.set("Online")}async function So(e){e.Ia.forEach((t,n)=>{po(e,t)})}async function Eo(e,t){bo(e),vo(e)?(e.Ra.ha(t),yo(e)):e.Ra.set("Unknown")}async function Ao(e,t,n){if(e.Ra.set("Online"),t instanceof cs&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){C(co,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await No(e,n)}else if(t instanceof os?e.Va.Ze(t):t instanceof as?e.Va.st(t):e.Va.tt(t),!n.isEqual(ve.min()))try{const t=await ji(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ia.get(r);s&&e.Ia.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(wt.EMPTY_BYTE_STRING,r.snapshotVersion)),go(e,t);const s=new qs(r.target,t,n,r.sequenceNumber);po(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){C(co,"Failed to raise snapshot:",t),await No(e,t)}}async function No(e,t,n){if(!_e(t))throw t;e.Ea.add(1),await ho(e),e.Ra.set("Offline"),n||(n=()=>ji(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{C(co,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await uo(e)})}function To(e,t){return t().catch(n=>No(e,n,t))}async function ko(e){const t=R(e),n=Uo(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:je;for(;Co(t);)try{const e=await Mi(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Io(t,e)}catch(e){await No(t,e)}_o(t)&&Po(t)}function Co(e){return wo(e)&&e.Ta.length<10}function Io(e,t){e.Ta.push(t);const n=Uo(e);n.O_()&&n.X_&&n.ea(t.mutations)}function _o(e){return wo(e)&&!Uo(e).x_()&&e.Ta.length>0}function Po(e){Uo(e).start()}async function jo(e){Uo(e).ra()}async function Do(e){const t=Uo(e);for(const n of e.Ta)t.ea(n.mutations)}async function Mo(e,t,n){const r=e.Ta.shift(),s=Hr.from(r,t,n);await To(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await ko(e)}async function Ro(e,t){t&&Uo(e).X_&&await async function(e,t){if(function(e){return Jr(e)&&e!==O.ABORTED}(t.code)){const n=e.Ta.shift();Uo(e).B_(),await To(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ko(e)}}(e,t),_o(e)&&Po(e)}async function Oo(e,t){const n=R(e);n.asyncQueue.verifyOperationInProgress(),C(co,"RemoteStore received new credentials");const r=wo(n);n.Ea.add(3),await ho(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await uo(n)}async function Lo(e,t){const n=R(e);t?(n.Ea.delete(2),await uo(n)):t||(n.Ea.add(2),await ho(n),n.Ra.set("Unknown"))}function Fo(e){return e.ma||(e.ma=function(e,t,n){const r=R(e);return r.sa(),new ro(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:xo.bind(null,e),t_:So.bind(null,e),r_:Eo.bind(null,e),H_:Ao.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),vo(e)?yo(e):e.Ra.set("Unknown")):(await e.ma.stop(),bo(e))})),e.ma}function Uo(e){return e.fa||(e.fa=function(e,t,n){const r=R(e);return r.sa(),new so(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:jo.bind(null,e),r_:Ro.bind(null,e),ta:Do.bind(null,e),na:Mo.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await ko(e)):(await e.fa.stop(),e.Ta.length>0&&(C(co,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Bo{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new F,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new Bo(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new L(O.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Vo(e,t){if(I("AsyncQueue","".concat(t,": ").concat(e)),_e(e))return new L(O.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class zo{static emptySet(e){return new zo(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||oe.comparator(t.key,n.key):(e,t)=>oe.comparator(e.key,t.key),this.keyedMap=tr(),this.sortedSet=new dt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zo))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new zo;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Go{constructor(){this.ga=new dt(oe.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):j(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ho{constructor(e,t,n,r,s,i,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Ho(e,t,zo.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hn(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class qo{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Wo{constructor(){this.queries=Qo(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=R(e),r=n.queries;n.queries=Qo(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new L(O.ABORTED,"Firestore shutting down"))}}function Qo(){return new Zn(e=>qn(e),Hn)}async function Ko(e,t){const n=R(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new qo,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Vo(e,"Initialization of query '".concat(Wn(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Xo(n)}async function Jo(e,t){const n=R(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Yo(e,t){const n=R(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(s)&&(r=!0);t.wa=s}}r&&Xo(n)}function Zo(e,t,n){const r=R(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Xo(e){e.Ca.forEach(e=>{e.next()})}var $o,ea;(ea=$o||($o={})).Ma="default",ea.Cache="cache";class ta{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ho(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Ho.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==$o.Cache}}class na{constructor(e){this.key=e}}class ra{constructor(e){this.key=e}}class sa{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=cr(),this.mutatedKeys=cr(),this.eu=Jn(e),this.tu=new zo(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Go,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),u=Qn(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(i=i.add(u),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return j(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,c=a!==this.Za;return this.Za=a,0!==i.length||c?{snapshot:new Ho(this.query,e.tu,s,i,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Go,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=cr(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new ra(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new na(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=cr();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Ho.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const ia="SyncEngine";class oa{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class aa{constructor(e){this.key=e,this.hu=!1}}class ca{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Zn(e=>qn(e),Hn),this.Iu=new Map,this.Eu=new Set,this.du=new dt(oe.comparator),this.Au=new Map,this.Ru=new mi,this.Vu={},this.mu=new Map,this.fu=ei.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function la(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=_a(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await ha(r,t,n,!0),s}async function ua(e,t){const n=_a(e);await ha(n,t,!0,!1)}async function ha(e,t,n,r){const s=await Ri(e.localStore,Bn(t)),i=s.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await da(e,t,i,"current"===o,s.resumeToken)),e.isPrimaryClient&&n&&fo(e.remoteStore,s),a}async function da(e,t,n,r,s){e.pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.ru(n);s.Cs&&(s=await Li(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,s)}));const i=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i,o);return Aa(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const i=await Li(e.localStore,t,!0),o=new sa(t,i.Qs),a=o.ru(i.documents),c=is.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),l=o.applyChanges(a,e.isPrimaryClient,c);Aa(e,n,l.au);const u=new oa(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function fa(e,t,n){const r=R(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(e=>!Hn(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Oi(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&mo(r.remoteStore,s.targetId),Sa(r,s.targetId)}).catch(ke)):(Sa(r,s.targetId),await Oi(r.localStore,s.targetId,!0))}async function ma(e,t){const n=R(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),mo(n.remoteStore,r.targetId))}async function pa(e,t){const n=R(e);try{const e=await function(e,t){const n=R(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];t.targetChanges.forEach((i,a)=>{const c=s.get(a);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,a)));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(wt.EMPTY_BYTE_STRING,ve.min()).withLastLimboFreeSnapshotVersion(ve.min()):i.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(i.resumeToken,r)),s=s.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=Ci||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,l,i)&&o.push(n.Pi.updateTargetData(e,l))});let a=$n(),c=cr();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Di(e,i,t.documentUpdates).next(e=>{a=e.ks,c=e.qs})),!r.isEqual(ve.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Ce.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,c)).next(()=>a)}).then(e=>(n.Ms=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(M(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?M(r.hu,14607):e.removedDocuments.size>0&&(M(r.hu,42227),r.hu=!1))}),await ka(n,e,t)}catch(e){await ke(e)}}function ga(e,t,n){const r=R(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=R(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&Xo(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ya(e,t,n){const r=R(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let e=new dt(oe.comparator);e=e.insert(i,on.newNoDocument(i,ve.min()));const n=cr().add(i),s=new ss(ve.min(),new Map,new dt(J),e,n);await pa(r,s),r.du=r.du.remove(i),r.Au.delete(t),Ta(r)}else await Oi(r.localStore,t,!1).then(()=>Sa(r,t,n)).catch(ke)}async function va(e,t){const n=R(e),r=t.batch.batchId;try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=Ce.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);M(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=cr();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);xa(n,r,null),ba(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ka(n,e)}catch(e){await ke(e)}}async function wa(e,t,n){const r=R(e);try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(M(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);xa(r,t,n),ba(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ka(r,e)}catch(n){await ke(n)}}function ba(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function xa(e,t,n){const r=R(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function Sa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Ea(e,t)})}function Ea(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(mo(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Ta(e))}function Aa(e,t,n){for(const r of n)r instanceof na?(e.Ru.addReference(r.key,t),Na(e,r)):r instanceof ra?(C(ia,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Ea(e,r.key)):j(19791,{wu:r})}function Na(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(C(ia,"New document in limbo: "+n),e.Eu.add(r),Ta(e))}function Ta(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new oe(re.fromString(t)),r=e.fu.next();e.Au.set(r,new aa(n)),e.du=e.du.insert(n,r),fo(e.remoteStore,new qs(Bn(On(n.path)),r,"TargetPurposeLimboResolution",Pe.ce))}}async function ka(e,t,n){const r=R(e),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const s=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Ai.As(a.targetId,e);i.push(t)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(e,t){const n=R(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ce.forEach(t,t=>Ce.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ce.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!_e(e))throw e;C(ki,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,i))}async function Ca(e,t){const n=R(e);if(!n.currentUser.isEqual(t)){C(ia,"User change. New user:",t.toKey());const e=await Pi(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new L(O.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await ka(n,e.Ls)}}function Ia(e,t){const n=R(e),r=n.Au.get(t);if(r&&r.hu)return cr().add(r.key);{let e=cr();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function _a(e){const t=R(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=pa.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ia.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ya.bind(null,t),t.Pu.H_=Yo.bind(null,t.eventManager),t.Pu.yu=Zo.bind(null,t.eventManager),t}function Pa(e){const t=R(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=va.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=wa.bind(null,t),t}class ja{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$i(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _i(this.persistence,new Ti,e.initialUser,this.serializer)}Cu(e){return new bi(Si.mi,this.serializer)}Du(e){return new Bi}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ja.provider={build:()=>new ja};class Da extends ja{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){M(this.persistence.referenceDelegate instanceof Ei,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new ii(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?$s.withCacheSize(this.cacheSizeBytes):$s.DEFAULT;return new bi(e=>Ei.mi(e,t),this.serializer)}}class Ma{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ga(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ca.bind(null,this.syncEngine),await Lo(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Wo}createDatastore(e){const t=$i(e.databaseInfo.databaseId),n=function(e){return new Zi(e)}(e.databaseInfo);return function(e,t,n,r){return new oo(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new lo(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>ga(this.syncEngine,e,0),Gi.v()?new Gi:new Vi)}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new ca(e,t,n,r,s,i);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=R(e);C(co,"RemoteStore shutting down."),t.Ea.add(5),await ho(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Ma.provider={build:()=>new Ma};class Ra{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):I("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Oa{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new L(O.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=R(e),r={documents:t.map(e=>Ns(n.serializer,e))},s=await n.Ho("BatchGetDocuments",n.serializer.databaseId,re.emptyPath(),r,t.length),i=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){M(!!t.found,43571),t.found.name,t.found.updateTime;const n=Ts(e,t.found.name),r=xs(t.found.updateTime),s=t.found.createTime?xs(t.found.createTime):ve.min(),i=new rn({mapValue:{fields:t.found.fields}});return on.newFoundDocument(n,r,s,i)}(e,t):"missing"in t?function(e,t){M(!!t.missing,3894),M(!!t.readTime,22933);const n=Ts(e,t.missing),r=xs(t.readTime);return on.newNoDocument(n,r)}(e,t):j(7234,{result:t})}(n.serializer,e);i.set(t.key.toString(),t)});const o=[];return t.forEach(e=>{const t=i.get(e.toString());M(!!t,55234,{key:e}),o.push(t)}),o}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Vr(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=oe.fromPath(t);this.mutations.push(new zr(n,this.precondition(n)))}),await async function(e,t){const n=R(e),r={writes:t.map(e=>js(n.serializer,e))};await n.Go("Commit",n.serializer.databaseId,re.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw j(50498,{Gu:e.constructor.name});t=ve.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new L(O.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ve.min())?Cr.exists(!1):Cr.updateTime(t):Cr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ve.min()))throw new L(O.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Cr.updateTime(t)}return Cr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class La{constructor(e,t,n,r,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=s,this.zu=n.maxAttempts,this.M_=new eo(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new Oa(this.datastore),t=this.Hu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Yu(e)}))}).catch(e=>{this.Yu(e)})})}Hu(e){try{const t=this.updateFunction(e);return!De(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if("FirebaseError"===(null===e||void 0===e?void 0:e.name)){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Jr(t)}return!1}}const Fa="FirestoreClient";class Ua{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=A.UNAUTHENTICATED,this.clientId=K.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{C(Fa,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(C(Fa,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new F;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Vo(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Ba(e,t){e.asyncQueue.verifyOperationInProgress(),C(Fa,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Pi(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Va(e,t){e.asyncQueue.verifyOperationInProgress();const n=await za(e);C(Fa,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Oo(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Oo(t.remoteStore,n)),e._onlineComponents=t}async function za(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){C(Fa,"Using user provided OfflineComponentProvider");try{await Ba(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===O.FAILED_PRECONDITION||e.code===O.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;_("Error using user provided cache. Falling back to memory cache: "+n),await Ba(e,new ja)}}else C(Fa,"Using default OfflineComponentProvider"),await Ba(e,new Da(void 0));return e._offlineComponents}async function Ga(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(C(Fa,"Using user provided OnlineComponentProvider"),await Va(e,e._uninitializedComponentsProvider._online)):(C(Fa,"Using default OnlineComponentProvider"),await Va(e,new Ma))),e._onlineComponents}function Ha(e){return Ga(e).then(e=>e.syncEngine)}function qa(e){return Ga(e).then(e=>e.datastore)}async function Wa(e){const t=await Ga(e),n=t.eventManager;return n.onListen=la.bind(null,t.syncEngine),n.onUnlisten=fa.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ua.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=ma.bind(null,t.syncEngine),n}function Qa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new F;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Ra({next:a=>{i.Nu(),t.enqueueAndForget(()=>Jo(e,o));const c=a.docs.has(n);!c&&a.fromCache?s.reject(new L(O.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&a.fromCache&&r&&"server"===r.source?s.reject(new L(O.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(a)},error:e=>s.reject(e)}),o=new ta(On(n.path),i,{includeMetadataChanges:!0,qa:!0});return Ko(e,o)}(await Wa(e),e.asyncQueue,t,n,r)),r.promise}function Ka(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new F;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Ra({next:n=>{i.Nu(),t.enqueueAndForget(()=>Jo(e,o)),n.fromCache&&"server"===r.source?s.reject(new L(O.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new ta(n,i,{includeMetadataChanges:!0,qa:!0});return Ko(e,o)}(await Wa(e),e.asyncQueue,t,n,r)),r.promise}function Ja(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Ya=new Map,Za="firestore.googleapis.com",Xa=!0;class $a{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new L(O.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Za,this.ssl=Xa}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Xa;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Xs;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<ni)throw new L(O.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new L(O.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ja(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new L(O.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ec{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $a({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new L(O.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new L(O.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $a(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new B;switch(e.type){case"firstParty":return new H(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new L(O.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Ya.get(e);t&&(C("ComponentProvider","Removing Datastore"),Ya.delete(e),t.terminate())}(this),Promise.resolve()}}class tc{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new tc(this.firestore,e,this._query)}}class nc{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new rc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new nc(this.firestore,e,this._key)}toJSON(){return{type:nc._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(me(t,nc._jsonSchema))return new nc(e,n||null,new oe(re.fromString(t.referencePath)))}}nc._jsonSchemaVersion="firestore/documentReference/1.0",nc._jsonSchema={type:fe("string",nc._jsonSchemaVersion),referencePath:fe("string")};class rc extends tc{constructor(e,t,n){super(e,t,On(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new nc(this.firestore,null,new oe(e))}withConverter(e){return new rc(this.firestore,e,this._path)}}function sc(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),ae("collection","path",t),e instanceof ec){const n=re.fromString(t,...r);return le(n),new rc(e,null,n)}{if(!(e instanceof nc||e instanceof rc))throw new L(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return le(n),new rc(e.firestore,null,n)}}function ic(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=(0,l.Ku)(e),1===arguments.length&&(t=K.newId()),ae("doc","path",t),e instanceof ec){const n=re.fromString(t,...r);return ce(n),new nc(e,null,new oe(n))}{if(!(e instanceof nc||e instanceof rc))throw new L(O.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(re.fromString(t,...r));return ce(n),new nc(e.firestore,e instanceof rc?e.converter:null,new oe(n))}}const oc="AsyncQueue";class ac{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new eo(this,"async_queue_retry"),this._c=()=>{const e=Xi();e&&C(oc,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Xi();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Xi();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new F;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!_e(e))throw e;C(oc,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,I("INTERNAL UNHANDLED ERROR: ",cc(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Bo.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&j(47125,{Pc:cc(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function cc(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function lc(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class uc extends ec{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new ac,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ac(e),this._firestoreClient=void 0,await e}}}function hc(e,t){const n="object"==typeof e?e:(0,o.Sx)(),r="string"==typeof e?e:t||jt,s=(0,o.j6)(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(0,l.yU)("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=de(e,ec);const s=(0,l.zJ)(t),o=e._getSettings(),a=(0,i.A)((0,i.A)({},o),{},{emulatorOptions:e._getEmulatorOptions()}),c="".concat(t,":").concat(n);s&&((0,l.gE)("https://".concat(c)),(0,l.P1)("Firestore",!0)),o.host!==Za&&o.host!==c&&_("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=(0,i.A)((0,i.A)({},o),{},{host:c,ssl:s,emulatorOptions:r});if(!(0,l.bD)(u,a)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=A.MOCK_USER;else{var h;t=(0,l.Fy)(r.mockUserToken,null===(h=e._app)||void 0===h?void 0:h.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new L(O.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new A(s)}e._authCredentials=new V(new U(t,n))}}(s,...e)}return s}function dc(e){if(e._terminated)throw new L(O.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||fc(e),e._firestoreClient}function fc(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Pt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Ja(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||null!==(n=s.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Ua(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class mc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new mc(wt.fromBase64String(e))}catch(e){throw new L(O.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new mc(wt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:mc._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(me(e,mc._jsonSchema))return mc.fromBase64String(e.bytes)}}mc._jsonSchemaVersion="firestore/bytes/1.0",mc._jsonSchema={type:fe("string",mc._jsonSchemaVersion),bytes:fe("string")};class pc{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new L(O.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ie(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class gc{constructor(e){this._methodName=e}}class yc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new L(O.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new L(O.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return J(this._lat,e._lat)||J(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:yc._jsonSchemaVersion}}static fromJSON(e){if(me(e,yc._jsonSchema))return new yc(e.latitude,e.longitude)}}yc._jsonSchemaVersion="firestore/geoPoint/1.0",yc._jsonSchema={type:fe("string",yc._jsonSchemaVersion),latitude:fe("number"),longitude:fe("number")};class vc{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:vc._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(me(e,vc._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new vc(e.vectorValues);throw new L(O.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}vc._jsonSchemaVersion="firestore/vectorValue/1.0",vc._jsonSchema={type:fe("string",vc._jsonSchemaVersion),vectorValues:fe("object")};const wc=/^__.*__$/;class bc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Or(e,this.data,t,this.fieldTransforms)}}class xc{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Lr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Sc(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw j(40011,{Ac:e})}}class Ec{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Ec((0,i.A)((0,i.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Sc(this.Ac)&&wc.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Ac{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||$i(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Ec({Ac:e,methodName:t,Dc:n,path:ie.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Nc(e){const t=e._freezeSettings(),n=$i(e._databaseId);return new Ac(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Tc(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);Oc("Data must be an object, but it was:",o,r);const a=Mc(r,o);let c,l;if(i.merge)c=new yt(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Lc(t,r,n);if(!o.contains(s))throw new L(O.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));Vc(e,s)||e.push(s)}c=new yt(e),l=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,l=o.fieldTransforms;return new bc(new rn(a),c,l)}class kc extends gc{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof kc}}class Cc extends gc{_toFieldTransform(e){return new Tr(e.path,new vr)}isEqual(e){return e instanceof Cc}}class Ic extends gc{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Er(e.serializer,fr(e.serializer,this.Fc));return new Tr(e.path,t)}isEqual(e){return e instanceof Ic&&this.Fc===e.Fc}}function _c(e,t,n,r){const s=e.Cc(1,t,n);Oc("Data must be an object, but it was:",s,r);const i=[],o=rn.empty();ut(r,(e,r)=>{const a=Uc(t,e,n);r=(0,l.Ku)(r);const c=s.yc(a);if(r instanceof kc)i.push(a);else{const e=Dc(r,c);null!=e&&(i.push(a),o.set(a,e))}});const a=new yt(i);return new xc(o,a,s.fieldTransforms)}function Pc(e,t,n,r,s,i){const o=e.Cc(1,t,n),a=[Lc(t,r,n)],c=[s];if(i.length%2!=0)throw new L(O.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let l=0;l<i.length;l+=2)a.push(Lc(t,i[l])),c.push(i[l+1]);const u=[],h=rn.empty();for(let f=a.length-1;f>=0;--f)if(!Vc(u,a[f])){const e=a[f];let t=c[f];t=(0,l.Ku)(t);const n=o.yc(e);if(t instanceof kc)u.push(e);else{const r=Dc(t,n);null!=r&&(u.push(e),h.set(e,r))}}const d=new yt(u);return new xc(h,d,o.fieldTransforms)}function jc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Dc(n,e.Cc(r?4:3,t))}function Dc(e,t){if(Rc(e=(0,l.Ku)(e)))return Oc("Unsupported field value:",t,e),Mc(e,t);if(e instanceof gc)return function(e,t){if(!Sc(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Dc(s,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return fr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ye.fromDate(e);return{timestampValue:vs(t.serializer,n)}}if(e instanceof ye){const n=new ye(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vs(t.serializer,n)}}if(e instanceof yc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof mc)return{bytesValue:ws(t.serializer,e._byteString)};if(e instanceof nc){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Ss(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof vc)return function(e,t){return{mapValue:{fields:{[Mt]:{stringValue:Lt},[Ft]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return hr(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(he(e)))}(e,t)}function Mc(e,t){const n={};return ht(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ut(e,(e,r)=>{const s=Dc(r,t.mc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Rc(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ye||e instanceof yc||e instanceof mc||e instanceof nc||e instanceof gc||e instanceof vc)}function Oc(e,t,n){if(!Rc(n)||!ue(n)){const r=he(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Lc(e,t,n){if((t=(0,l.Ku)(t))instanceof pc)return t._internalPath;if("string"==typeof t)return Uc(e,t);throw Bc("Field path arguments must be of type string or ",e,!1,void 0,n)}const Fc=new RegExp("[~\\*/\\[\\]]");function Uc(e,t,n){if(t.search(Fc)>=0)throw Bc("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new pc(...t.split("."))._internalPath}catch(r){throw Bc("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Bc(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(s)),c+=")"),new L(O.INVALID_ARGUMENT,a+e+c)}function Vc(e,t){return e.some(e=>e.isEqual(t))}class zc{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new nc(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Gc(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Hc("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Gc extends zc{data(){return super.data()}}function Hc(e,t){return"string"==typeof t?Uc(e,t):t instanceof pc?t._internalPath:t._delegate._internalPath}function qc(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new L(O.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wc{}class Qc extends Wc{}function Kc(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Wc&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Zc).length,n=e.filter(e=>e instanceof Jc).length;if(t>1||t>0&&n>0)throw new L(O.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class Jc extends Qc{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Jc(e,t,n)}_apply(e){const t=this._parse(e);return nl(e._query,t),new tc(e.firestore,e.converter,zn(e._query,t))}_parse(e){const t=Nc(e.firestore),n=function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new L(O.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){tl(o,i);const t=[];for(const n of o)t.push(el(r,e,n));a={arrayValue:{values:t}}}else a=el(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||tl(o,i),a=jc(n,t,o,"in"===i||"not-in"===i);return fn.create(s,i,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Yc(e,t,n){const r=t,s=Hc("where",e);return Jc._create(s,r,n)}class Zc extends Wc{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Zc(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:mn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)nl(n,s),n=zn(n,s)}(e._query,t),new tc(e.firestore,e.converter,zn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Xc extends Qc{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Xc(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new L(O.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new L(O.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new un(t,n)}(e._query,this._field,this._direction);return new tc(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Mn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function $c(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Hc("orderBy",e);return Xc._create(n,t)}function el(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Fn(t)&&-1!==n.indexOf("/"))throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(re.fromString(n));if(!oe.isDocumentKey(r))throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Kt(e,new oe(r))}if(n instanceof nc)return Kt(e,n._key);throw new L(O.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(he(n),"."))}function tl(e,t){if(!Array.isArray(e)||0===e.length)throw new L(O.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function nl(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new L(O.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new L(O.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class rl{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ut(e)){case 0:return null;case 1:return e.booleanValue;case 2:return St(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Et(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw j(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return ut(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Ft].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>St(e.doubleValue));return new vc(n)}convertGeoPoint(e){return new yc(St(e.latitude),St(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=It(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(_t(e));default:return null}}convertTimestamp(e){const t=xt(e);return new ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=re.fromString(e);M(Hs(n),9688,{name:e});const r=new Dt(n.get(1),n.get(3)),s=new oe(n.popFirst(5));return r.isEqual(t)||I("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function sl(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class il extends rl{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nc(this.firestore,null,t)}}class ol{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class al extends zc{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new cl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Hc("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new L(O.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=al._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}al._jsonSchemaVersion="firestore/documentSnapshot/1.0",al._jsonSchema={type:fe("string",al._jsonSchemaVersion),bundleSource:fe("string","DocumentSnapshot"),bundleName:fe("string"),bundle:fe("string")};class cl extends al{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class ll{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ol(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new cl(this._firestore,this._userDataWriter,n.key,n,new ol(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new L(O.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new cl(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ol(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new cl(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ol(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:ul(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new L(O.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ll._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=K.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function ul(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return j(61501,{type:e})}}function hl(e){e=de(e,nc);const t=de(e.firestore,uc);return Qa(dc(t),e._key).then(n=>vl(t,e,n))}ll._jsonSchemaVersion="firestore/querySnapshot/1.0",ll._jsonSchema={type:fe("string",ll._jsonSchemaVersion),bundleSource:fe("string","QuerySnapshot"),bundleName:fe("string"),bundle:fe("string")};class dl extends rl{constructor(e){super(),this.firestore=e}convertBytes(e){return new mc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new nc(this.firestore,null,t)}}function fl(e){e=de(e,tc);const t=de(e.firestore,uc),n=dc(t),r=new dl(t);return qc(e._query),Ka(n,e._query).then(n=>new ll(t,r,e,n))}function ml(e,t,n){e=de(e,nc);const r=de(e.firestore,uc),s=Nc(r);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),c=3;c<o;c++)a[c-3]=arguments[c];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof pc?Pc(s,"updateDoc",e._key,t,n,a):_c(s,"updateDoc",e._key,t),yl(r,[i.toMutation(e._key,Cr.exists(!0))])}function pl(e,t){const n=de(e.firestore,uc),r=ic(e),s=sl(e.converter,t);return yl(n,[Tc(Nc(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Cr.exists(!1))]).then(()=>r)}function gl(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=(0,l.Ku)(e);let s={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof n[i]||lc(n[i])||(s=n[i++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(lc(n[i])){var a,c,u;const e=n[i];n[i]=null===(a=e.next)||void 0===a?void 0:a.bind(e),n[i+1]=null===(c=e.error)||void 0===c?void 0:c.bind(e),n[i+2]=null===(u=e.complete)||void 0===u?void 0:u.bind(e)}let h,d,f;if(e instanceof nc)d=de(e.firestore,uc),f=On(e._key.path),h={next:t=>{n[i]&&n[i](vl(d,e,t))},error:n[i+1],complete:n[i+2]};else{const t=de(e,tc);d=de(t.firestore,uc),f=t._query;const r=new dl(d);h={next:e=>{n[i]&&n[i](new ll(d,r,t,e))},error:n[i+1],complete:n[i+2]},qc(e._query)}return function(e,t,n,r){const s=new Ra(r),i=new ta(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>Ko(await Wa(e),i)),()=>{s.Nu(),e.asyncQueue.enqueueAndForget(async()=>Jo(await Wa(e),i))}}(dc(d),f,o,h)}function yl(e,t){return function(e,t){const n=new F;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Pa(e);try{const e=await function(e,t){const n=R(e),r=ye.now(),s=t.reduce((e,t)=>e.add(t.key),cr());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=$n(),c=cr();return n.Ns.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{i=s;const o=[];for(const e of t){const t=Mr(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new Lr(e.key,t,sn(t.value.mapValue),Cr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(i,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:nr(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new dt(J)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await ka(r,e.changes),await ko(r.remoteStore)}catch(e){const t=Vo(e,"Failed to persist write");n.reject(t)}}(await Ha(e),t,n)),n.promise}(dc(e),t)}function vl(e,t,n){const r=n.docs.get(t._key),s=new dl(e);return new al(e,s,t._key,r,new ol(n.hasPendingWrites,n.fromCache),t.converter)}const wl={maxAttempts:5};function bl(e,t){if((e=(0,l.Ku)(e)).firestore!==t)throw new L(O.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class xl{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Nc(e)}get(e){const t=bl(e,this._firestore),n=new il(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return j(24041);const r=e[0];if(r.isFoundDocument())return new zc(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new zc(this._firestore,n,t._key,null,t.converter);throw j(18433,{doc:r})})}set(e,t,n){const r=bl(e,this._firestore),s=sl(r.converter,t,n),i=Tc(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,n);return this._transaction.set(r._key,i),this}update(e,t,n){const r=bl(e,this._firestore);let s;for(var i=arguments.length,o=new Array(i>3?i-3:0),a=3;a<i;a++)o[a-3]=arguments[a];return s="string"==typeof(t=(0,l.Ku)(t))||t instanceof pc?Pc(this._dataReader,"Transaction.update",r._key,t,n,o):_c(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,s),this}delete(e){const t=bl(e,this._firestore);return this._transaction.delete(t._key),this}}class Sl extends xl{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=bl(e,this._firestore),n=new dl(this._firestore);return super.get(e).then(e=>new al(this._firestore,n,t._key,e._document,new ol(!1,!1),t.converter))}}function El(e,t,n){e=de(e,uc);const r=(0,i.A)((0,i.A)({},wl),n);return function(e){if(e.maxAttempts<1)throw new L(O.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new F;return e.asyncQueue.enqueueAndForget(async()=>{const s=await qa(e);new La(e.asyncQueue,s,n,t,r).ju()}),r.promise}(dc(e),n=>t(new Sl(e,n)),r)}function Al(){return new Cc("serverTimestamp")}function Nl(e){return new Ic("increment",e)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){N=e}(o.MF),(0,o.om)(new a.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const o=e.getProvider("app").getImmediate(),a=new uc(new z(e.getProvider("auth-internal")),new W(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new L(O.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dt(e.options.projectId,t)}(o,r),o);return s=(0,i.A)({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,o.KO)(S,E,e),(0,o.KO)(S,E,"esm2020")}()},679:(e,t,n)=>{"use strict";var r=n(897).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(198);const i={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(e,t){if(!e)throw a(t)},a=function(e){return new Error("Firebase Database ("+i.SDK_VERSION+") INTERNAL ASSERT FAILED: "+e)},c=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},l={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,o=i?e[s+1]:0,a=s+2<e.length,c=a?e[s+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,i||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(c(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const o=s<e.length?n[e.charAt(s)]:64;++s;const a=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==o||null==a)throw new u;const c=t<<2|i>>4;if(r.push(c),64!==o){const e=i<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class u extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const h=function(e){const t=c(e);return l.encodeByteArray(t,!0)},d=function(e){return h(e).replace(/\./g,"")},f=function(e){try{return l.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function m(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&p(n)&&(e[n]=m(e[n],t[n]));return e}function p(e){return"__proto__"!==e}function g(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const y=()=>{try{return s.getDefaultsFromPostinstall()||g().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/UBSS",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&f(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},v=e=>{var t;return null===(t=y())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]};class w{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function b(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}const x={};let S=!1;function E(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function A(){var e;const t=null===(e=y())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function N(){return"undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof self&&self instanceof WorkerGlobalScope}class T extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,k.prototype.create)}}class k{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(C,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new T(n,i,t)}}const C=/\{\$([^}]+)}/g;function I(e){return JSON.parse(e)}const _=function(e){let t={},n={},r={},s="";try{const i=e.split(".");t=I(f(i[0])||""),n=I(f(i[1])||""),s=i[2],r=n.d||{},delete n.d}catch(i){}return{header:t,claims:n,data:r,signature:s}};function P(e){return null!==e&&"object"===typeof e}class j{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=D),void 0===r.error&&(r.error=D),void 0===r.complete&&(r.complete=D);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function D(){}function M(e,t){return"".concat(e," failed: ").concat(t," argument ")}const R=144e5;t.CONSTANTS=i,t.DecodeBase64StringError=u,t.Deferred=w,t.ErrorFactory=k,t.FirebaseError=T,t.MAX_VALUE_MILLIS=R,t.RANDOM_FACTOR=.5,t.Sha1=class{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"===typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,s,i=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=c^o&(a^c),s=1518500249):(r=o^a^c,s=1859775393):u<60?(r=o&a|c&(o|a),s=2400959708):(r=o^a^c,s=3395469782);const e=(i<<5|i>>>27)+r+l+s+n[u]&4294967295;l=c,c=a,a=4294967295&(o<<30|o>>>2),o=i,i=e}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const s=this.buf_;let i=this.inbuf_;for(;r<t;){if(0===i)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"===typeof e){for(;r<t;)if(s[i]=e.charCodeAt(r),++i,++r,i===this.blockSize){this.compress_(s),i=0;break}}else for(;r<t;)if(s[i]=e[r],++i,++r,i===this.blockSize){this.compress_(s),i=0;break}}this.inbuf_=i,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}},t.areCookiesEnabled=function(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)},t.assert=o,t.assertionError=a,t.async=function(e,t){return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];Promise.resolve(!0).then(()=>{e(...r)}).catch(e=>{t&&t(e)})}},t.base64=l,t.base64Decode=f,t.base64Encode=h,t.base64urlEncodeWithoutPadding=d,t.calculateBackoffMillis=function(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(R,n+r)},t.contains=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.createMockUserToken=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=r({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[d(JSON.stringify({alg:"none",type:"JWT"})),d(JSON.stringify(o)),""].join(".")},t.createSubscribe=function(e,t){const n=new j(e,t);return n.subscribe.bind(n)},t.decode=_,t.deepCopy=function(e){return m(void 0,e)},t.deepEqual=function e(t,n){if(t===n)return!0;const r=Object.keys(t),s=Object.keys(n);for(const i of r){if(!s.includes(i))return!1;const r=t[i],o=n[i];if(P(r)&&P(o)){if(!e(r,o))return!1}else if(r!==o)return!1}for(const i of s)if(!r.includes(i))return!1;return!0},t.deepExtend=m,t.errorPrefix=M,t.extractQuerystring=function(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)},t.getDefaultAppConfig=()=>{var e;return null===(e=y())||void 0===e?void 0:e.config},t.getDefaultEmulatorHost=v,t.getDefaultEmulatorHostnameAndPort=e=>{const t=v(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},t.getDefaults=y,t.getExperimentalSetting=e=>{var t;return null===(t=y())||void 0===t?void 0:t["_".concat(e)]},t.getGlobal=g,t.getModularInstance=function(e){return e&&e._delegate?e._delegate:e},t.getUA=E,t.isAdmin=function(e){const t=_(e).claims;return"object"===typeof t&&!0===t.admin},t.isBrowser=function(){return"undefined"!==typeof window||N()},t.isBrowserExtension=function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id},t.isCloudWorkstation=b,t.isCloudflareWorker=function(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent},t.isElectron=function(){return E().indexOf("Electron/")>=0},t.isEmpty=function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0},t.isIE=function(){const e=E();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0},t.isIndexedDBAvailable=function(){try{return"object"===typeof indexedDB}catch(e){return!1}},t.isMobileCordova=function(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(E())},t.isNode=A,t.isNodeSdk=function(){return!0===i.NODE_CLIENT||!0===i.NODE_ADMIN},t.isReactNative=function(){return"object"===typeof navigator&&"ReactNative"===navigator.product},t.isSafari=function(){return!A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")},t.isSafariOrWebkit=function(){return!A()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")},t.isUWP=function(){return E().indexOf("MSAppHost/")>=0},t.isValidFormat=function(e){const t=_(e).claims;return!!t&&"object"===typeof t&&t.hasOwnProperty("iat")},t.isValidTimestamp=function(e){const t=_(e).claims,n=Math.floor((new Date).getTime()/1e3);let r=0,s=0;return"object"===typeof t&&(t.hasOwnProperty("nbf")?r=t.nbf:t.hasOwnProperty("iat")&&(r=t.iat),s=t.hasOwnProperty("exp")?t.exp:r+86400),!!n&&!!r&&!!s&&n>=r&&n<=s},t.isWebWorker=N,t.issuedAtTime=function(e){const t=_(e).claims;return"object"===typeof t&&t.hasOwnProperty("iat")?t.iat:null},t.jsonEval=I,t.map=function(e,t,n){const r={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=t.call(n,e[s],s,e));return r},t.ordinal=function(e){return Number.isFinite(e)?e+function(e){e=Math.abs(e);const t=e%100;if(t>=10&&t<=20)return"th";const n=e%10;if(1===n)return"st";if(2===n)return"nd";if(3===n)return"rd";return"th"}(e):"".concat(e)},t.pingServer=async function(e){return(await fetch(e,{credentials:"include"})).ok},t.promiseWithTimeout=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;const n=new w;return setTimeout(()=>n.reject("timeout!"),t),e.then(n.resolve,n.reject),n.promise},t.querystring=function(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""},t.querystringDecode=function(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t},t.safeGet=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0},t.stringLength=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t},t.stringToByteArray=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);if(s>=55296&&s<=56319){const t=s-55296;r++,o(r<e.length,"Surrogate pair missing trail surrogate.");s=65536+(t<<10)+(e.charCodeAt(r)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},t.stringify=function(e){return JSON.stringify(e)},t.updateEmulatorBanner=function(e,t){if("undefined"===typeof window||"undefined"===typeof document||!b(window.location.host)||x[e]===t||x[e]||S)return;function n(e){return"__firebase__banner__".concat(e)}x[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(x))x[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{S=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),c=document.getElementById(a)||document.createElement("a"),l=n("preprendIcon"),u=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(c,a);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,l),t.append(u,o,c,n),document.body.appendChild(t)}s?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()},t.validateArgCount=function(e,t,n,r){let s;if(r<t?s="at least "+t:r>n&&(s=0===n?"none":"no more than "+n),s){throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+s+".")}},t.validateCallback=function(e,t,n,r){if((!r||n)&&"function"!==typeof n)throw new Error(M(e,t)+"must be a valid function.")},t.validateContextObject=function(e,t,n,r){if((!r||n)&&("object"!==typeof n||null===n))throw new Error(M(e,t)+"must be a valid context object.")},t.validateIndexedDBOpenable=function(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})},t.validateNamespace=function(e,t,n){if((!n||t)&&"string"!==typeof t)throw new Error(M(e,"namespace")+"must be a valid firebase namespace.")}},693:(e,t,n)=>{var r=n(736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},705:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>i})},730:(e,t,n)=>{"use strict";var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function c(e,t){l(e,t),l(e+"Capture",t)}function l(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function p(e,t,n,r,s,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function w(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!h.call(m,e)||!h.call(f,e)&&(d.test(e)?m[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),k=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),j=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var M=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=M&&e[M]||e["@@iterator"])?e:null}var O,L=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&"string"===typeof l.stack){for(var s=l.stack.split("\n"),i=r.stack.split("\n"),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==i[a]){var c="\n"+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}}while(1<=o&&0<=a);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case E:return"Fragment";case S:return"Portal";case N:return"Profiler";case A:return"StrictMode";case I:return"Suspense";case _:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case k:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function G(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function Q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function K(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function J(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Z(e,t){null!=(t=t.checked)&&w(e,"checked",t,!1)}function X(e,t){Z(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&K(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function ie(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ce(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var le,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((le=le||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=le.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function we(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Se=null,Ee=null,Ae=null;function Ne(e){if(e=ws(e)){if("function"!==typeof Se)throw Error(i(280));var t=e.stateNode;t&&(t=xs(t),Se(e.stateNode,e.type,t))}}function Te(e){Ee?Ae?Ae.push(e):Ae=[e]:Ee=e}function ke(){if(Ee){var e=Ee,t=Ae;if(Ae=Ee=null,Ne(e),t)for(e=0;e<t.length;e++)Ne(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var _e=!1;function Pe(e,t,n){if(_e)return e(t,n);_e=!0;try{return Ce(e,t,n)}finally{_e=!1,(null!==Ee||null!==Ae)&&(Ie(),ke())}}function je(e,t){var n=e.stateNode;if(null===n)return null;var r=xs(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var De=!1;if(u)try{var Me={};Object.defineProperty(Me,"passive",{get:function(){De=!0}}),window.addEventListener("test",Me,Me),window.removeEventListener("test",Me,Me)}catch(ue){De=!1}function Re(e,t,n,r,s,i,o,a,c){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(u){this.onError(u)}}var Oe=!1,Le=null,Fe=!1,Ue=null,Be={onError:function(e){Oe=!0,Le=e}};function Ve(e,t,n,r,s,i,o,a,c){Oe=!1,Le=null,Re.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ge(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(ze(e)!==e)throw Error(i(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(r=s.return)){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return He(s),e;if(o===r)return He(s),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,c=s.child;c;){if(c===n){a=!0,n=s,r=o;break}if(c===r){a=!0,r=s,n=o;break}c=c.sibling}if(!a){for(c=o.child;c;){if(c===n){a=!0,n=o,r=s;break}if(c===r){a=!0,r=o,n=s;break}c=c.sibling}if(!a)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Qe=s.unstable_scheduleCallback,Ke=s.unstable_cancelCallback,Je=s.unstable_shouldYield,Ye=s.unstable_requestPaint,Ze=s.unstable_now,Xe=s.unstable_getCurrentPriorityLevel,$e=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/ct|0)|0},at=Math.log,ct=Math.LN2;var lt=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~s;0!==a?r=ht(a):0!==(i&=o)&&(r=ht(i))}else 0!==(o=n&~s)?r=ht(o):0!==i&&(r=ht(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-ot(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=lt;return 0===(4194240&(lt<<=1))&&(lt=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var wt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,St,Et,At,Nt,Tt=!1,kt=[],Ct=null,It=null,_t=null,Pt=new Map,jt=new Map,Dt=[],Mt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":_t=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jt.delete(t.pointerId)}}function Ot(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=ws(t))&&St(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Lt(e){var t=vs(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ge(n)))return e.blockedOn=t,void Nt(e.priority,function(){Et(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Jt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ws(n))&&St(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==It&&Ft(It)&&(It=null),null!==_t&&Ft(_t)&&(_t=null),Pt.forEach(Ut),jt.forEach(Ut)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return Vt(t,e)}if(0<kt.length){Vt(kt[0],e);for(var n=1;n<kt.length;n++){var r=kt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Vt(Ct,e),null!==It&&Vt(It,e),null!==_t&&Vt(_t,e),Pt.forEach(t),jt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Dt.shift()}var Gt=b.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var s=wt,i=Gt.transition;Gt.transition=null;try{wt=1,Qt(e,t,n,r)}finally{wt=s,Gt.transition=i}}function Wt(e,t,n,r){var s=wt,i=Gt.transition;Gt.transition=null;try{wt=4,Qt(e,t,n,r)}finally{wt=s,Gt.transition=i}}function Qt(e,t,n,r){if(Ht){var s=Jt(e,t,n,r);if(null===s)Hr(e,t,r,Kt,n),Rt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ct=Ot(Ct,e,t,n,r,s),!0;case"dragenter":return It=Ot(It,e,t,n,r,s),!0;case"mouseover":return _t=Ot(_t,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Pt.set(i,Ot(Pt.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,jt.set(i,Ot(jt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Mt.indexOf(e)){for(;null!==s;){var i=ws(s);if(null!==i&&xt(i),null===(i=Jt(e,t,n,r))&&Hr(e,t,r,Kt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Kt=null;function Jt(e,t,n,r){if(Kt=null,null!==(e=vs(e=xe(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ge(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xe()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Zt=null,Xt=null,$t=null;function en(){if($t)return $t;var e,t,n=Xt,r=n.length,s="value"in Zt?Zt.value:Zt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===s[i-t];t++);return $t=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,cn,ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(ln),hn=L({},ln,{view:0,detail:0}),dn=sn(hn),fn=L({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==cn&&(cn&&"mousemove"===e.type?(on=e.screenX-cn.screenX,an=e.screenY-cn.screenY):an=on=0,cn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),mn=sn(fn),pn=sn(L({},fn,{dataTransfer:0})),gn=sn(L({},hn,{relatedTarget:0})),yn=sn(L({},ln,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wn=sn(vn),bn=sn(L({},ln,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function An(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=En[e])&&!!t[e]}function Nn(){return An}var Tn=L({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?Sn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),kn=sn(Tn),Cn=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(L({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nn})),_n=sn(L({},ln,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),jn=sn(Pn),Dn=[9,13,27,32],Mn=u&&"CompositionEvent"in window,Rn=null;u&&"documentMode"in document&&(Rn=document.documentMode);var On=u&&"TextEvent"in window&&!Rn,Ln=u&&(!Mn||Rn&&8<Rn&&11>=Rn),Fn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var Gn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Gn[e.type]:"textarea"===t}function qn(e,t,n,r){Te(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Qn=null;function Kn(e){Fr(e,0)}function Jn(e){if(Q(bs(e)))return e}function Yn(e,t){if("change"===e)return t}var Zn=!1;if(u){var Xn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Xn=$n}else Xn=!1;Zn=Xn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Qn=Wn=null)}function nr(e){if("value"===e.propertyName&&Jn(Qn)){var t=[];qn(t,Qn,e,xe(e)),Pe(Kn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Qn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Jn(Qn)}function ir(e,t){if("click"===e)return Jn(t)}function or(e,t){if("input"===e||"change"===e)return Jn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function cr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!h.call(t,s)||!ar(e[s],t[s]))return!1}return!0}function lr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=lr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=lr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=K();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=K((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var o=ur(n,r);s&&o&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,wr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;wr||null==gr||gr!==K(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&cr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Sr={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},Er={},Ar={};function Nr(e){if(Er[e])return Er[e];if(!Sr[e])return e;var t,n=Sr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ar)return Er[e]=n[t];return e}u&&(Ar=document.createElement("div").style,"AnimationEvent"in window||(delete Sr.animationend.animation,delete Sr.animationiteration.animation,delete Sr.animationstart.animation),"TransitionEvent"in window||delete Sr.transitionend.transition);var Tr=Nr("animationend"),kr=Nr("animationiteration"),Cr=Nr("animationstart"),Ir=Nr("transitionend"),_r=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function jr(e,t){_r.set(e,t),c(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Mr=Pr[Dr];jr(Mr.toLowerCase(),"on"+(Mr[0].toUpperCase()+Mr.slice(1)))}jr(Tr,"onAnimationEnd"),jr(kr,"onAnimationIteration"),jr(Cr,"onAnimationStart"),jr("dblclick","onDoubleClick"),jr("focusin","onFocus"),jr("focusout","onBlur"),jr(Ir,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,o,a,c,l){if(Ve.apply(this,arguments),Oe){if(!Oe)throw Error(i(198));var u=Le;Oe=!1,Le=null,Fe||(Fe=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],c=a.instance,l=a.currentTarget;if(a=a.listener,c!==i&&s.isPropagationStopped())break e;Lr(s,a,l),i=c}else for(o=0;o<r.length;o++){if(c=(a=r[o]).instance,l=a.currentTarget,a=a.listener,c!==i&&s.isPropagationStopped())break e;Lr(s,a,l),i=c}}}if(Fe)throw e=Ue,Fe=!1,Ue=null,e}function Ur(e,t){var n=t[ps];void 0===n&&(n=t[ps]=new Set);var r=e+"__bubble";n.has(r)||(Gr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),Gr(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[Vr]){e[Vr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Or.has(t)||Br(t,!1,e),Br(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vr]||(t[Vr]=!0,Br("selectionchange",!1,t))}}function Gr(e,t,n,r){switch(Yt(t)){case 1:var s=qt;break;case 4:s=Wt;break;default:s=Qt}n=s.bind(null,t,n,e),s=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=r.return;null!==o;){var c=o.tag;if((3===c||4===c)&&((c=o.stateNode.containerInfo)===s||8===c.nodeType&&c.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=vs(a)))return;if(5===(c=o.tag)||6===c){r=i=o;continue e}a=a.parentNode}}r=r.return}Pe(function(){var r=i,s=xe(n),o=[];e:{var a=_r.get(e);if(void 0!==a){var c=un,l=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":c=kn;break;case"focusin":l="focus",c=gn;break;case"focusout":l="blur",c=gn;break;case"beforeblur":case"afterblur":c=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=In;break;case Tr:case kr:case Cr:c=yn;break;case Ir:c=_n;break;case"scroll":c=dn;break;case"wheel":c=jn;break;case"copy":case"cut":case"paste":c=wn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==a?a+"Capture":null:a;u=[];for(var f,m=r;null!==m;){var p=(f=m).stateNode;if(5===f.tag&&null!==p&&(f=p,null!==d&&(null!=(p=je(m,d))&&u.push(qr(m,p,f)))),h)break;m=m.return}0<u.length&&(a=new c(a,l,null,n,s),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===be||!(l=n.relatedTarget||n.fromElement)||!vs(l)&&!l[ms])&&(c||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,c?(c=r,null!==(l=(l=n.relatedTarget||n.toElement)?vs(l):null)&&(l!==(h=ze(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(c=null,l=r),c!==l)){if(u=mn,p="onMouseLeave",d="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,p="onPointerLeave",d="onPointerEnter",m="pointer"),h=null==c?a:bs(c),f=null==l?a:bs(l),(a=new u(p,m+"leave",c,n,s)).target=h,a.relatedTarget=f,p=null,vs(s)===r&&((u=new u(d,m+"enter",l,n,s)).target=f,u.relatedTarget=h,p=u),h=p,c&&l)e:{for(d=l,m=0,f=u=c;f;f=Qr(f))m++;for(f=0,p=d;p;p=Qr(p))f++;for(;0<m-f;)u=Qr(u),m--;for(;0<f-m;)d=Qr(d),f--;for(;m--;){if(u===d||null!==d&&u===d.alternate)break e;u=Qr(u),d=Qr(d)}u=null}else u=null;null!==c&&Kr(o,a,c,u,!1),null!==l&&null!==h&&Kr(o,h,l,u,!0)}if("select"===(c=(a=r?bs(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===c&&"file"===a.type)var g=Yn;else if(Hn(a))if(Zn)g=or;else{g=sr;var y=rr}else(c=a.nodeName)&&"input"===c.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ir);switch(g&&(g=g(e,r))?qn(o,g,n,s):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?bs(r):window,e){case"focusin":(Hn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":wr=!0;break;case"contextmenu":case"mouseup":case"dragend":wr=!1,br(o,n,s);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,s)}var v;if(Mn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else zn?Bn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Ln&&"ko"!==n.locale&&(zn||"onCompositionStart"!==w?"onCompositionEnd"===w&&zn&&(v=en()):(Xt="value"in(Zt=s)?Zt.value:Zt.textContent,zn=!0)),0<(y=Wr(r,w)).length&&(w=new bn(w,e,null,n,s),o.push({event:w,listeners:y}),v?w.data=v:null!==(v=Vn(n))&&(w.data=v))),(v=On?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(Un=!0,Fn);case"textInput":return(e=t.data)===Fn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!Mn&&Bn(e,t)?(e=en(),$t=Xt=Zt=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(s=new bn("onBeforeInput","beforeinput",null,n,s),o.push({event:s,listeners:r}),s.data=v))}Fr(o,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=je(e,n))&&r.unshift(qr(e,i,s)),null!=(i=je(e,t))&&r.push(qr(e,i,s))),e=e.return}return r}function Qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Kr(e,t,n,r,s){for(var i=t._reactName,o=[];null!==n&&n!==r;){var a=n,c=a.alternate,l=a.stateNode;if(null!==c&&c===r)break;5===a.tag&&null!==l&&(a=l,s?null!=(c=je(n,i))&&o.unshift(qr(n,c,a)):s||null!=(c=je(n,i))&&o.push(qr(n,c,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Jr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Zr(e){return("string"===typeof e?e:""+e).replace(Jr,"\n").replace(Yr,"")}function Xr(e,t,n){if(t=Zr(t),Zr(e)!==t&&n)throw Error(i(425))}function $r(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,os="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(as)}:rs;function as(e){setTimeout(function(){throw e})}function cs(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);zt(t)}function ls(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hs=Math.random().toString(36).slice(2),ds="__reactFiber$"+hs,fs="__reactProps$"+hs,ms="__reactContainer$"+hs,ps="__reactEvents$"+hs,gs="__reactListeners$"+hs,ys="__reactHandles$"+hs;function vs(e){var t=e[ds];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ms]||n[ds]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[ds])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function ws(e){return!(e=e[ds]||e[ms])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function xs(e){return e[fs]||null}var Ss=[],Es=-1;function As(e){return{current:e}}function Ns(e){0>Es||(e.current=Ss[Es],Ss[Es]=null,Es--)}function Ts(e,t){Es++,Ss[Es]=e.current,e.current=t}var ks={},Cs=As(ks),Is=As(!1),_s=ks;function Ps(e,t){var n=e.type.contextTypes;if(!n)return ks;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function js(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ds(){Ns(Is),Ns(Cs)}function Ms(e,t,n){if(Cs.current!==ks)throw Error(i(168));Ts(Cs,t),Ts(Is,n)}function Rs(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,G(e)||"Unknown",s));return L({},n,r)}function Os(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ks,_s=Cs.current,Ts(Cs,e),Ts(Is,Is.current),!0}function Ls(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Rs(e,t,_s),r.__reactInternalMemoizedMergedChildContext=e,Ns(Is),Ns(Cs),Ts(Cs,e)):Ns(Is),Ts(Is,n)}var Fs=null,Us=!1,Bs=!1;function Vs(e){null===Fs?Fs=[e]:Fs.push(e)}function zs(){if(!Bs&&null!==Fs){Bs=!0;var e=0,t=wt;try{var n=Fs;for(wt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fs=null,Us=!1}catch(s){throw null!==Fs&&(Fs=Fs.slice(e+1)),Qe($e,zs),s}finally{wt=t,Bs=!1}}return null}var Gs=[],Hs=0,qs=null,Ws=0,Qs=[],Ks=0,Js=null,Ys=1,Zs="";function Xs(e,t){Gs[Hs++]=Ws,Gs[Hs++]=qs,qs=e,Ws=t}function $s(e,t,n){Qs[Ks++]=Ys,Qs[Ks++]=Zs,Qs[Ks++]=Js,Js=e;var r=Ys;e=Zs;var s=32-ot(r)-1;r&=~(1<<s),n+=1;var i=32-ot(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Ys=1<<32-ot(t)+s|n<<s|r,Zs=i+e}else Ys=1<<i|n<<s|r,Zs=e}function ei(e){null!==e.return&&(Xs(e,1),$s(e,1,0))}function ti(e){for(;e===qs;)qs=Gs[--Hs],Gs[Hs]=null,Ws=Gs[--Hs],Gs[Hs]=null;for(;e===Js;)Js=Qs[--Ks],Qs[Ks]=null,Zs=Qs[--Ks],Qs[Ks]=null,Ys=Qs[--Ks],Qs[Ks]=null}var ni=null,ri=null,si=!1,ii=null;function oi(e,t){var n=Pl(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ai(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=ls(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Js?{id:Ys,overflow:Zs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pl(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function ci(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function li(e){if(si){var t=ri;if(t){var n=t;if(!ai(e,t)){if(ci(e))throw Error(i(418));t=ls(n.nextSibling);var r=ni;t&&ai(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(ci(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function hi(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(ci(e))throw di(),Error(i(418));for(;t;)oi(e,t),t=ls(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=ls(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?ls(e.stateNode.nextSibling):null;return!0}function di(){for(var e=ri;e;)e=ls(e.nextSibling)}function fi(){ri=ni=null,si=!1}function mi(e){null===ii?ii=[e]:ii.push(e)}var pi=b.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=s.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function wi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Dl(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function c(e,t,n,r){return null===t||6!==t.tag?((t=Ll(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function l(e,t,n,r){var i=n.type;return i===E?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===j&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Ml(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fl(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function h(e,t,n,r,i){return null===t||7!==t.tag?((t=Rl(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Ll(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Ml(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case S:return(t=Fl(t,e.mode,n)).return=e,t;case j:return d(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rl(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:c(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===s?l(e,t,n,r):null;case S:return n.key===s?u(e,t,n,r):null;case j:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||R(n))return null!==s?null:h(e,t,n,r,null);yi(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return c(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,s);case S:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case j:return m(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||R(r))return h(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function p(s,i,a,c){for(var l=null,u=null,h=i,p=i=0,g=null;null!==h&&p<a.length;p++){h.index>p?(g=h,h=null):g=h.sibling;var y=f(s,h,a[p],c);if(null===y){null===h&&(h=g);break}e&&h&&null===y.alternate&&t(s,h),i=o(y,i,p),null===u?l=y:u.sibling=y,u=y,h=g}if(p===a.length)return n(s,h),si&&Xs(s,p),l;if(null===h){for(;p<a.length;p++)null!==(h=d(s,a[p],c))&&(i=o(h,i,p),null===u?l=h:u.sibling=h,u=h);return si&&Xs(s,p),l}for(h=r(s,h);p<a.length;p++)null!==(g=m(h,s,p,a[p],c))&&(e&&null!==g.alternate&&h.delete(null===g.key?p:g.key),i=o(g,i,p),null===u?l=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(s,e)}),si&&Xs(s,p),l}function g(s,a,c,l){var u=R(c);if("function"!==typeof u)throw Error(i(150));if(null==(c=u.call(c)))throw Error(i(151));for(var h=u=null,p=a,g=a=0,y=null,v=c.next();null!==p&&!v.done;g++,v=c.next()){p.index>g?(y=p,p=null):y=p.sibling;var w=f(s,p,v.value,l);if(null===w){null===p&&(p=y);break}e&&p&&null===w.alternate&&t(s,p),a=o(w,a,g),null===h?u=w:h.sibling=w,h=w,p=y}if(v.done)return n(s,p),si&&Xs(s,g),u;if(null===p){for(;!v.done;g++,v=c.next())null!==(v=d(s,v.value,l))&&(a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return si&&Xs(s,g),u}for(p=r(s,p);!v.done;g++,v=c.next())null!==(v=m(p,s,g,v.value,l))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),a=o(v,a,g),null===h?u=v:h.sibling=v,h=v);return e&&p.forEach(function(e){return t(s,e)}),si&&Xs(s,g),u}return function e(r,i,o,c){if("object"===typeof o&&null!==o&&o.type===E&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case x:e:{for(var l=o.key,u=i;null!==u;){if(u.key===l){if((l=o.type)===E){if(7===u.tag){n(r,u.sibling),(i=s(u,o.props.children)).return=r,r=i;break e}}else if(u.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===j&&vi(l)===u.type){n(r,u.sibling),(i=s(u,o.props)).ref=gi(r,u,o),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===E?((i=Rl(o.props.children,r.mode,c,o.key)).return=r,r=i):((c=Ml(o.type,o.key,o.props,null,r.mode,c)).ref=gi(r,i,o),c.return=r,r=c)}return a(r);case S:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=s(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=Fl(o,r.mode,c)).return=r,r=i}return a(r);case j:return e(r,i,(u=o._init)(o._payload),c)}if(te(o))return p(r,i,o,c);if(R(o))return g(r,i,o,c);yi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,o)).return=r,r=i):(n(r,i),(i=Ll(o,r.mode,c)).return=r,r=i),a(r)):n(r,i)}}var bi=wi(!0),xi=wi(!1),Si=As(null),Ei=null,Ai=null,Ni=null;function Ti(){Ni=Ai=Ei=null}function ki(e){var t=Si.current;Ns(Si),e._currentValue=t}function Ci(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ii(e,t){Ei=e,Ni=Ai=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wa=!0),e.firstContext=null)}function _i(e){var t=e._currentValue;if(Ni!==e)if(e={context:e,memoizedValue:t,next:null},null===Ai){if(null===Ei)throw Error(i(308));Ai=e,Ei.dependencies={lanes:0,firstContext:e}}else Ai=Ai.next=e;return t}var Pi=null;function ji(e){null===Pi?Pi=[e]:Pi.push(e)}function Di(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,ji(t)):(n.next=s.next,s.next=n),t.interleaved=n,Mi(e,r)}function Mi(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ri=!1;function Oi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Li(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ui(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Mi(e,n)}return null===(s=r.interleaved)?(t.next=t,ji(r)):(t.next=s.next,s.next=t),r.interleaved=t,Mi(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Vi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function zi(e,t,n,r){var s=e.updateQueue;Ri=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var c=a,l=c.next;c.next=null,null===o?i=l:o.next=l,o=c;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=l:a.next=l,u.lastBaseUpdate=c))}if(null!==i){var h=s.baseState;for(o=0,u=l=c=null,a=i;;){var d=a.lane,f=a.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=e,p=a;switch(d=t,f=n,p.tag){case 1:if("function"===typeof(m=p.payload)){h=m.call(f,h,d);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(d="function"===typeof(m=p.payload)?m.call(f,h,d):m)||void 0===d)break e;h=L({},h,d);break e;case 2:Ri=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(d=s.effects)?s.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(l=u=f,c=h):u=u.next=f,o|=d;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(d=a).next,d.next=null,s.lastBaseUpdate=d,s.shared.pending=null}}if(null===u&&(c=h),s.baseState=c,s.firstBaseUpdate=l,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{o|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);Oc|=o,e.lanes=o,e.memoizedState=h}}function Gi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Hi={},qi=As(Hi),Wi=As(Hi),Qi=As(Hi);function Ki(e){if(e===Hi)throw Error(i(174));return e}function Ji(e,t){switch(Ts(Qi,t),Ts(Wi,e),Ts(qi,Hi),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ce(null,"");break;default:t=ce(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ns(qi),Ts(qi,t)}function Yi(){Ns(qi),Ns(Wi),Ns(Qi)}function Zi(e){Ki(Qi.current);var t=Ki(qi.current),n=ce(t,e.type);t!==n&&(Ts(Wi,e),Ts(qi,n))}function Xi(e){Wi.current===e&&(Ns(qi),Ns(Wi))}var $i=As(0);function eo(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var to=[];function no(){for(var e=0;e<to.length;e++)to[e]._workInProgressVersionPrimary=null;to.length=0}var ro=b.ReactCurrentDispatcher,so=b.ReactCurrentBatchConfig,io=0,oo=null,ao=null,co=null,lo=!1,uo=!1,ho=0,fo=0;function mo(){throw Error(i(321))}function po(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function go(e,t,n,r,s,o){if(io=o,oo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ro.current=null===e||null===e.memoizedState?$o:ea,e=n(r,s),uo){o=0;do{if(uo=!1,ho=0,25<=o)throw Error(i(301));o+=1,co=ao=null,t.updateQueue=null,ro.current=ta,e=n(r,s)}while(uo)}if(ro.current=Xo,t=null!==ao&&null!==ao.next,io=0,co=ao=oo=null,lo=!1,t)throw Error(i(300));return e}function yo(){var e=0!==ho;return ho=0,e}function vo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===co?oo.memoizedState=co=e:co=co.next=e,co}function wo(){if(null===ao){var e=oo.alternate;e=null!==e?e.memoizedState:null}else e=ao.next;var t=null===co?oo.memoizedState:co.next;if(null!==t)co=t,ao=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ao=e).memoizedState,baseState:ao.baseState,baseQueue:ao.baseQueue,queue:ao.queue,next:null},null===co?oo.memoizedState=co=e:co=co.next=e}return co}function bo(e,t){return"function"===typeof t?t(e):t}function xo(e){var t=wo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ao,s=r.baseQueue,o=n.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(null!==s){o=s.next,r=r.baseState;var c=a=null,l=null,u=o;do{var h=u.lane;if((io&h)===h)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(c=l=d,a=r):l=l.next=d,oo.lanes|=h,Oc|=h}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=c,ar(r,t.memoizedState)||(wa=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{o=s.lane,oo.lanes|=o,Oc|=o,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function So(e){var t=wo(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{o=e(o,a.action),a=a.next}while(a!==s);ar(o,t.memoizedState)||(wa=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Eo(){}function Ao(e,t){var n=oo,r=wo(),s=t(),o=!ar(r.memoizedState,s);if(o&&(r.memoizedState=s,wa=!0),r=r.queue,Oo(ko.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==co&&1&co.memoizedState.tag){if(n.flags|=2048,Po(9,To.bind(null,n,r,s,t),void 0,null),null===Ic)throw Error(i(349));0!==(30&io)||No(n,t,s)}return s}function No(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function To(e,t,n,r){t.value=n,t.getSnapshot=r,Co(t)&&Io(e)}function ko(e,t,n){return n(function(){Co(t)&&Io(e)})}function Co(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Io(e){var t=Mi(e,1);null!==t&&nl(t,e,1,-1)}function _o(e){var t=vo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:bo,lastRenderedState:e},t.queue=e,e=e.dispatch=Ko.bind(null,oo,e),[t.memoizedState,e]}function Po(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=oo.updateQueue)?(t={lastEffect:null,stores:null},oo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function jo(){return wo().memoizedState}function Do(e,t,n,r){var s=vo();oo.flags|=e,s.memoizedState=Po(1|t,n,void 0,void 0===r?null:r)}function Mo(e,t,n,r){var s=wo();r=void 0===r?null:r;var i=void 0;if(null!==ao){var o=ao.memoizedState;if(i=o.destroy,null!==r&&po(r,o.deps))return void(s.memoizedState=Po(t,n,i,r))}oo.flags|=e,s.memoizedState=Po(1|t,n,i,r)}function Ro(e,t){return Do(8390656,8,e,t)}function Oo(e,t){return Mo(2048,8,e,t)}function Lo(e,t){return Mo(4,2,e,t)}function Fo(e,t){return Mo(4,4,e,t)}function Uo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Bo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4,4,Uo.bind(null,t,e),n)}function Vo(){}function zo(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&po(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Go(e,t){var n=wo();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&po(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ho(e,t,n){return 0===(21&io)?(e.baseState&&(e.baseState=!1,wa=!0),e.memoizedState=n):(ar(n,t)||(n=pt(),oo.lanes|=n,Oc|=n,e.baseState=!0),t)}function qo(e,t){var n=wt;wt=0!==n&&4>n?n:4,e(!0);var r=so.transition;so.transition={};try{e(!1),t()}finally{wt=n,so.transition=r}}function Wo(){return wo().memoizedState}function Qo(e,t,n){var r=tl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Jo(e))Yo(t,n);else if(null!==(n=Di(e,t,n,r))){nl(n,e,r,el()),Zo(n,t,r)}}function Ko(e,t,n){var r=tl(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jo(e))Yo(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ar(a,o)){var c=t.interleaved;return null===c?(s.next=s,ji(t)):(s.next=c.next,c.next=s),void(t.interleaved=s)}}catch(l){}null!==(n=Di(e,t,s,r))&&(nl(n,e,r,s=el()),Zo(n,t,r))}}function Jo(e){var t=e.alternate;return e===oo||null!==t&&t===oo}function Yo(e,t){uo=lo=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zo(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var Xo={readContext:_i,useCallback:mo,useContext:mo,useEffect:mo,useImperativeHandle:mo,useInsertionEffect:mo,useLayoutEffect:mo,useMemo:mo,useReducer:mo,useRef:mo,useState:mo,useDebugValue:mo,useDeferredValue:mo,useTransition:mo,useMutableSource:mo,useSyncExternalStore:mo,useId:mo,unstable_isNewReconciler:!1},$o={readContext:_i,useCallback:function(e,t){return vo().memoizedState=[e,void 0===t?null:t],e},useContext:_i,useEffect:Ro,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Do(4194308,4,Uo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Do(4194308,4,e,t)},useInsertionEffect:function(e,t){return Do(4,2,e,t)},useMemo:function(e,t){var n=vo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=vo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qo.bind(null,oo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},vo().memoizedState=e},useState:_o,useDebugValue:Vo,useDeferredValue:function(e){return vo().memoizedState=e},useTransition:function(){var e=_o(!1),t=e[0];return e=qo.bind(null,e[1]),vo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=oo,s=vo();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Ic)throw Error(i(349));0!==(30&io)||No(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Ro(ko.bind(null,r,o,e),[e]),r.flags|=2048,Po(9,To.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=vo(),t=Ic.identifierPrefix;if(si){var n=Zs;t=":"+t+"R"+(n=(Ys&~(1<<32-ot(Ys)-1)).toString(32)+n),0<(n=ho++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ea={readContext:_i,useCallback:zo,useContext:_i,useEffect:Oo,useImperativeHandle:Bo,useInsertionEffect:Lo,useLayoutEffect:Fo,useMemo:Go,useReducer:xo,useRef:jo,useState:function(){return xo(bo)},useDebugValue:Vo,useDeferredValue:function(e){return Ho(wo(),ao.memoizedState,e)},useTransition:function(){return[xo(bo)[0],wo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Ao,useId:Wo,unstable_isNewReconciler:!1},ta={readContext:_i,useCallback:zo,useContext:_i,useEffect:Oo,useImperativeHandle:Bo,useInsertionEffect:Lo,useLayoutEffect:Fo,useMemo:Go,useReducer:So,useRef:jo,useState:function(){return So(bo)},useDebugValue:Vo,useDeferredValue:function(e){var t=wo();return null===ao?t.memoizedState=e:Ho(t,ao.memoizedState,e)},useTransition:function(){return[So(bo)[0],wo().memoizedState]},useMutableSource:Eo,useSyncExternalStore:Ao,useId:Wo,unstable_isNewReconciler:!1};function na(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function ra(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var sa={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=el(),s=tl(e),i=Fi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(nl(t,e,s,r),Bi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=el(),s=tl(e),i=Fi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=Ui(e,i,s))&&(nl(t,e,s,r),Bi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=el(),r=tl(e),s=Fi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=Ui(e,s,r))&&(nl(t,e,r,n),Bi(t,e,r))}};function ia(e,t,n,r,s,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!cr(n,r)||!cr(s,i))}function oa(e,t,n){var r=!1,s=ks,i=t.contextType;return"object"===typeof i&&null!==i?i=_i(i):(s=js(t)?_s:Cs.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ps(e,s):ks),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=sa,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function aa(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&sa.enqueueReplaceState(t,t.state,null)}function ca(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Oi(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=_i(i):(i=js(t)?_s:Cs.current,s.context=Ps(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(ra(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&sa.enqueueReplaceState(s,s.state,null),zi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function la(e,t){try{var n="",r=t;do{n+=V(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function ua(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ha(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var da="function"===typeof WeakMap?WeakMap:Map;function fa(e,t,n){(n=Fi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hc||(Hc=!0,qc=r),ha(0,t)},n}function ma(e,t,n){(n=Fi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ha(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ha(0,t),"function"!==typeof r&&(null===Wc?Wc=new Set([this]):Wc.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new da;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=Nl.bind(null,e,t,n),t.then(e,e))}function ga(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function ya(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fi(-1,1)).tag=2,Ui(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var va=b.ReactCurrentOwner,wa=!1;function ba(e,t,n,r){t.child=null===e?xi(t,null,n,r):bi(t,e.child,n,r)}function xa(e,t,n,r,s){n=n.render;var i=t.ref;return Ii(t,s),r=go(e,t,n,r,i,s),n=yo(),null===e||wa?(si&&n&&ei(t),t.flags|=1,ba(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ha(e,t,s))}function Sa(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||jl(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Ml(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ea(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:cr)(o,r)&&e.ref===t.ref)return Ha(e,t,s)}return t.flags|=1,(e=Dl(i,r)).ref=t.ref,e.return=t,t.child=e}function Ea(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(cr(i,r)&&e.ref===t.ref){if(wa=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Ha(e,t,s);0!==(131072&e.flags)&&(wa=!0)}}return Ta(e,t,n,r,s)}function Aa(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ts(Dc,jc),jc|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ts(Dc,jc),jc|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,Ts(Dc,jc),jc|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,Ts(Dc,jc),jc|=r;return ba(e,t,s,n),t.child}function Na(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ta(e,t,n,r,s){var i=js(n)?_s:Cs.current;return i=Ps(t,i),Ii(t,s),n=go(e,t,n,r,i,s),r=yo(),null===e||wa?(si&&r&&ei(t),t.flags|=1,ba(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Ha(e,t,s))}function ka(e,t,n,r,s){if(js(n)){var i=!0;Os(t)}else i=!1;if(Ii(t,s),null===t.stateNode)Ga(e,t),oa(t,n,r),ca(t,n,r,s),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var c=o.context,l=n.contextType;"object"===typeof l&&null!==l?l=_i(l):l=Ps(t,l=js(n)?_s:Cs.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;h||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||c!==l)&&aa(t,o,r,l),Ri=!1;var d=t.memoizedState;o.state=d,zi(t,r,o,s),c=t.memoizedState,a!==r||d!==c||Is.current||Ri?("function"===typeof u&&(ra(t,n,u,r),c=t.memoizedState),(a=Ri||ia(t,n,a,r,d,c,l))?(h||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),o.props=r,o.state=c,o.context=l,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Li(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:na(t.type,a),o.props=l,h=t.pendingProps,d=o.context,"object"===typeof(c=n.contextType)&&null!==c?c=_i(c):c=Ps(t,c=js(n)?_s:Cs.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==h||d!==c)&&aa(t,o,r,c),Ri=!1,d=t.memoizedState,o.state=d,zi(t,r,o,s);var m=t.memoizedState;a!==h||d!==m||Is.current||Ri?("function"===typeof f&&(ra(t,n,f,r),m=t.memoizedState),(l=Ri||ia(t,n,l,r,d,m,c)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,m,c),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,m,c)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),o.props=r,o.state=m,o.context=c,r=l):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ca(e,t,n,r,i,s)}function Ca(e,t,n,r,s,i){Na(e,t);var o=0!==(128&t.flags);if(!r&&!o)return s&&Ls(t,n,!1),Ha(e,t,i);r=t.stateNode,va.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=bi(t,e.child,null,i),t.child=bi(t,null,a,i)):ba(e,t,a,i),t.memoizedState=r.state,s&&Ls(t,n,!0),t.child}function Ia(e){var t=e.stateNode;t.pendingContext?Ms(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ms(0,t.context,!1),Ji(e,t.containerInfo)}function _a(e,t,n,r,s){return fi(),mi(s),t.flags|=256,ba(e,t,n,r),t.child}var Pa,ja,Da,Ma,Ra={dehydrated:null,treeContext:null,retryLane:0};function Oa(e){return{baseLanes:e,cachePool:null,transitions:null}}function La(e,t,n){var r,s=t.pendingProps,o=$i.current,a=!1,c=0!==(128&t.flags);if((r=c)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ts($i,1&o),null===e)return li(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(c=s.children,e=s.fallback,a?(s=t.mode,a=t.child,c={mode:"hidden",children:c},0===(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=c):a=Ol(c,s,0,null),e=Rl(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Oa(n),t.memoizedState=Ra,e):Fa(t,c));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,s,o,a){if(n)return 256&t.flags?(t.flags&=-257,Ua(e,t,a,r=ua(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=Ol({mode:"visible",children:r.children},s,0,null),(o=Rl(o,s,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&bi(t,e.child,null,a),t.child.memoizedState=Oa(a),t.memoizedState=Ra,o);if(0===(1&t.mode))return Ua(e,t,a,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var c=r.dgst;return r=c,Ua(e,t,a,r=ua(o=Error(i(419)),r,void 0))}if(c=0!==(a&e.childLanes),wa||c){if(null!==(r=Ic)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|a))?0:s)&&s!==o.retryLane&&(o.retryLane=s,Mi(e,s),nl(r,e,s,-1))}return pl(),Ua(e,t,a,r=ua(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=kl.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,ri=ls(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Qs[Ks++]=Ys,Qs[Ks++]=Zs,Qs[Ks++]=Js,Ys=e.id,Zs=e.overflow,Js=t),t=Fa(t,r.children),t.flags|=4096,t)}(e,t,c,s,r,o,n);if(a){a=s.fallback,c=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:s.children};return 0===(1&c)&&t.child!==o?((s=t.child).childLanes=0,s.pendingProps=l,t.deletions=null):(s=Dl(o,l)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Dl(r,a):(a=Rl(a,c,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,c=null===(c=e.child.memoizedState)?Oa(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=Ra,s}return e=(a=e.child).sibling,s=Dl(a,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fa(e,t){return(t=Ol({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ua(e,t,n,r){return null!==r&&mi(r),bi(t,e.child,null,n),(e=Fa(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ba(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ci(e.return,t,n)}function Va(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function za(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(ba(e,t,r.children,n),0!==(2&(r=$i.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ba(e,n,t);else if(19===e.tag)Ba(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ts($i,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===eo(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Va(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===eo(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Va(t,!0,n,null,i);break;case"together":Va(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ha(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Oc|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Dl(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dl(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qa(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wa(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qa(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wa(t),null;case 1:case 17:return js(t.type)&&Ds(),Wa(t),null;case 3:return r=t.stateNode,Yi(),Ns(Is),Ns(Cs),no(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hi(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(ol(ii),ii=null))),ja(e,t),Wa(t),null;case 5:Xi(t);var s=Ki(Qi.current);if(n=t.type,null!==e&&null!=t.stateNode)Da(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Wa(t),null}if(e=Ki(qi.current),hi(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[ds]=t,r[fs]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(s=0;s<Rr.length;s++)Ur(Rr[s],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":Y(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":se(r,o),Ur("invalid",r)}for(var c in ve(n,o),s=null,o)if(o.hasOwnProperty(c)){var l=o[c];"children"===c?"string"===typeof l?r.textContent!==l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),s=["children",l]):"number"===typeof l&&r.textContent!==""+l&&(!0!==o.suppressHydrationWarning&&Xr(r.textContent,l,e),s=["children",""+l]):a.hasOwnProperty(c)&&null!=l&&"onScroll"===c&&Ur("scroll",r)}switch(n){case"input":W(r),$(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=$r)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{c=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=c.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),"select"===n&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[ds]=t,e[fs]=r,Pa(e,t,!1,!1),t.stateNode=e;e:{switch(c=we(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),s=r;break;case"iframe":case"object":case"embed":Ur("load",e),s=r;break;case"video":case"audio":for(s=0;s<Rr.length;s++)Ur(Rr[s],e);s=r;break;case"source":Ur("error",e),s=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),s=r;break;case"details":Ur("toggle",e),s=r;break;case"input":Y(e,r),s=J(e,r),Ur("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=L({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Ur("invalid",e)}for(o in ve(n,s),l=s)if(l.hasOwnProperty(o)){var u=l[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Ur("scroll",e):null!=u&&w(e,o,u,c))}switch(n){case"input":W(e),$(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wa(t),null;case 6:if(e&&null!=t.stateNode)Ma(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Ki(Qi.current),Ki(qi.current),hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ds]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Xr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ds]=t,t.stateNode=r}return Wa(t),null;case 13:if(Ns($i),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))di(),fi(),t.flags|=98560,o=!1;else if(o=hi(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[ds]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wa(t),o=!1}else null!==ii&&(ol(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$i.current)?0===Mc&&(Mc=3):pl())),null!==t.updateQueue&&(t.flags|=4),Wa(t),null);case 4:return Yi(),ja(e,t),null===e&&zr(t.stateNode.containerInfo),Wa(t),null;case 10:return ki(t.type._context),Wa(t),null;case 19:if(Ns($i),null===(o=t.memoizedState))return Wa(t),null;if(r=0!==(128&t.flags),null===(c=o.rendering))if(r)qa(o,!1);else{if(0!==Mc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(c=eo(e))){for(t.flags|=128,qa(o,!1),null!==(r=c.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(c=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=c.childLanes,o.lanes=c.lanes,o.child=c.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=c.memoizedProps,o.memoizedState=c.memoizedState,o.updateQueue=c.updateQueue,o.type=c.type,e=c.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ts($i,1&$i.current|2),t.child}e=e.sibling}null!==o.tail&&Ze()>zc&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=eo(c))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!c.alternate&&!si)return Wa(t),null}else 2*Ze()-o.renderingStartTime>zc&&1073741824!==n&&(t.flags|=128,r=!0,qa(o,!1),t.lanes=4194304);o.isBackwards?(c.sibling=t.child,t.child=c):(null!==(n=o.last)?n.sibling=c:t.child=c,o.last=c)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Ze(),t.sibling=null,n=$i.current,Ts($i,r?1&n|2:1&n),t):(Wa(t),null);case 22:case 23:return hl(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&jc)&&(Wa(t),6&t.subtreeFlags&&(t.flags|=8192)):Wa(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Ka(e,t){switch(ti(t),t.tag){case 1:return js(t.type)&&Ds(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Yi(),Ns(Is),Ns(Cs),no(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Xi(t),null;case 13:if(Ns($i),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ns($i),null;case 4:return Yi(),null;case 10:return ki(t.type._context),null;case 22:case 23:return hl(),null;default:return null}}Pa=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ja=function(){},Da=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Ki(qi.current);var i,o=null;switch(n){case"input":s=J(e,s),r=J(e,r),o=[];break;case"select":s=L({},s,{value:void 0}),r=L({},r,{value:void 0}),o=[];break;case"textarea":s=re(e,s),r=re(e,r),o=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var c=s[u];for(i in c)c.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var l=r[u];if(c=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&l!==c&&(null!=l||null!=c))if("style"===u)if(c){for(i in c)!c.hasOwnProperty(i)||l&&l.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in l)l.hasOwnProperty(i)&&c[i]!==l[i]&&(n||(n={}),n[i]=l[i])}else n||(o||(o=[]),o.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,c=c?c.__html:void 0,null!=l&&c!==l&&(o=o||[]).push(u,l)):"children"===u?"string"!==typeof l&&"number"!==typeof l||(o=o||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Ur("scroll",e),o||c===l||(o=[])):(o=o||[]).push(u,l))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Ma=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ja=!1,Ya=!1,Za="function"===typeof WeakSet?WeakSet:Set,Xa=null;function $a(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Al(e,t,r)}else n.current=null}function ec(e,t,n){try{n()}catch(r){Al(e,t,r)}}var tc=!1;function nc(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&ec(t,n,i)}s=s.next}while(s!==r)}}function rc(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function sc(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ic(e){var t=e.alternate;null!==t&&(e.alternate=null,ic(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ds],delete t[fs],delete t[ps],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function oc(e){return 5===e.tag||3===e.tag||4===e.tag}function ac(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||oc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(cc(e,t,n),e=e.sibling;null!==e;)cc(e,t,n),e=e.sibling}function lc(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lc(e,t,n),e=e.sibling;null!==e;)lc(e,t,n),e=e.sibling}var uc=null,hc=!1;function dc(e,t,n){for(n=n.child;null!==n;)fc(e,t,n),n=n.sibling}function fc(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(a){}switch(n.tag){case 5:Ya||$a(n,t);case 6:var r=uc,s=hc;uc=null,dc(e,t,n),hc=s,null!==(uc=r)&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uc.removeChild(n.stateNode));break;case 18:null!==uc&&(hc?(e=uc,n=n.stateNode,8===e.nodeType?cs(e.parentNode,n):1===e.nodeType&&cs(e,n),zt(e)):cs(uc,n.stateNode));break;case 4:r=uc,s=hc,uc=n.stateNode.containerInfo,hc=!0,dc(e,t,n),uc=r,hc=s;break;case 0:case 11:case 14:case 15:if(!Ya&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&ec(n,t,o),s=s.next}while(s!==r)}dc(e,t,n);break;case 1:if(!Ya&&($a(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Al(n,t,a)}dc(e,t,n);break;case 21:dc(e,t,n);break;case 22:1&n.mode?(Ya=(r=Ya)||null!==n.memoizedState,dc(e,t,n),Ya=r):dc(e,t,n);break;default:dc(e,t,n)}}function mc(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Za),t.forEach(function(t){var r=Cl.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function pc(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,c=a;e:for(;null!==c;){switch(c.tag){case 5:uc=c.stateNode,hc=!1;break e;case 3:case 4:uc=c.stateNode.containerInfo,hc=!0;break e}c=c.return}if(null===uc)throw Error(i(160));fc(o,a,s),uc=null,hc=!1;var l=s.alternate;null!==l&&(l.return=null),s.return=null}catch(u){Al(s,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gc(t,e),t=t.sibling}function gc(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(pc(t,e),yc(e),4&r){try{nc(3,e,e.return),rc(3,e)}catch(g){Al(e,e.return,g)}try{nc(5,e,e.return)}catch(g){Al(e,e.return,g)}}break;case 1:pc(t,e),yc(e),512&r&&null!==n&&$a(n,n.return);break;case 5:if(pc(t,e),yc(e),512&r&&null!==n&&$a(n,n.return),32&e.flags){var s=e.stateNode;try{de(s,"")}catch(g){Al(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,c=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===c&&"radio"===o.type&&null!=o.name&&Z(s,o),we(c,a);var u=we(c,o);for(a=0;a<l.length;a+=2){var h=l[a],d=l[a+1];"style"===h?ge(s,d):"dangerouslySetInnerHTML"===h?he(s,d):"children"===h?de(s,d):w(s,h,d,u)}switch(c){case"input":X(s,o);break;case"textarea":ie(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var m=o.value;null!=m?ne(s,!!o.multiple,m,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(s,!!o.multiple,o.defaultValue,!0):ne(s,!!o.multiple,o.multiple?[]:"",!1))}s[fs]=o}catch(g){Al(e,e.return,g)}}break;case 6:if(pc(t,e),yc(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){Al(e,e.return,g)}}break;case 3:if(pc(t,e),yc(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(g){Al(e,e.return,g)}break;case 4:default:pc(t,e),yc(e);break;case 13:pc(t,e),yc(e),8192&(s=e.child).flags&&(o=null!==s.memoizedState,s.stateNode.isHidden=o,!o||null!==s.alternate&&null!==s.alternate.memoizedState||(Vc=Ze())),4&r&&mc(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Ya=(u=Ya)||h,pc(t,e),Ya=u):pc(t,e),yc(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Xa=e,h=e.child;null!==h;){for(d=Xa=h;null!==Xa;){switch(m=(f=Xa).child,f.tag){case 0:case 11:case 14:case 15:nc(4,f,f.return);break;case 1:$a(f,f.return);var p=f.stateNode;if("function"===typeof p.componentWillUnmount){r=f,n=f.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(g){Al(r,n,g)}}break;case 5:$a(f,f.return);break;case 22:if(null!==f.memoizedState){xc(d);continue}}null!==m?(m.return=f,Xa=m):xc(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{s=d.stateNode,u?"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none":(c=d.stateNode,a=void 0!==(l=d.memoizedProps.style)&&null!==l&&l.hasOwnProperty("display")?l.display:null,c.style.display=pe("display",a))}catch(g){Al(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Al(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:pc(t,e),yc(e),4&r&&mc(e);case 21:}}function yc(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(oc(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(de(s,""),r.flags&=-33),lc(e,ac(e),s);break;case 3:case 4:var o=r.stateNode.containerInfo;cc(e,ac(e),o);break;default:throw Error(i(161))}}catch(a){Al(e,e.return,a)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vc(e,t,n){Xa=e,wc(e,t,n)}function wc(e,t,n){for(var r=0!==(1&e.mode);null!==Xa;){var s=Xa,i=s.child;if(22===s.tag&&r){var o=null!==s.memoizedState||Ja;if(!o){var a=s.alternate,c=null!==a&&null!==a.memoizedState||Ya;a=Ja;var l=Ya;if(Ja=o,(Ya=c)&&!l)for(Xa=s;null!==Xa;)c=(o=Xa).child,22===o.tag&&null!==o.memoizedState?Sc(s):null!==c?(c.return=o,Xa=c):Sc(s);for(;null!==i;)Xa=i,wc(i,t,n),i=i.sibling;Xa=s,Ja=a,Ya=l}bc(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,Xa=i):bc(e)}}function bc(e){for(;null!==Xa;){var t=Xa;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Ya||rc(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Ya)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:na(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Gi(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Gi(t,a,n)}break;case 5:var c=t.stateNode;if(null===n&&4&t.flags){n=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&zt(d)}}}break;default:throw Error(i(163))}Ya||512&t.flags&&sc(t)}catch(f){Al(t,t.return,f)}}if(t===e){Xa=null;break}if(null!==(n=t.sibling)){n.return=t.return,Xa=n;break}Xa=t.return}}function xc(e){for(;null!==Xa;){var t=Xa;if(t===e){Xa=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Xa=n;break}Xa=t.return}}function Sc(e){for(;null!==Xa;){var t=Xa;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rc(4,t)}catch(c){Al(t,n,c)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(c){Al(t,s,c)}}var i=t.return;try{sc(t)}catch(c){Al(t,i,c)}break;case 5:var o=t.return;try{sc(t)}catch(c){Al(t,o,c)}}}catch(c){Al(t,t.return,c)}if(t===e){Xa=null;break}var a=t.sibling;if(null!==a){a.return=t.return,Xa=a;break}Xa=t.return}}var Ec,Ac=Math.ceil,Nc=b.ReactCurrentDispatcher,Tc=b.ReactCurrentOwner,kc=b.ReactCurrentBatchConfig,Cc=0,Ic=null,_c=null,Pc=0,jc=0,Dc=As(0),Mc=0,Rc=null,Oc=0,Lc=0,Fc=0,Uc=null,Bc=null,Vc=0,zc=1/0,Gc=null,Hc=!1,qc=null,Wc=null,Qc=!1,Kc=null,Jc=0,Yc=0,Zc=null,Xc=-1,$c=0;function el(){return 0!==(6&Cc)?Ze():-1!==Xc?Xc:Xc=Ze()}function tl(e){return 0===(1&e.mode)?1:0!==(2&Cc)&&0!==Pc?Pc&-Pc:null!==pi.transition?(0===$c&&($c=pt()),$c):0!==(e=wt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function nl(e,t,n,r){if(50<Yc)throw Yc=0,Zc=null,Error(i(185));yt(e,n,r),0!==(2&Cc)&&e===Ic||(e===Ic&&(0===(2&Cc)&&(Lc|=n),4===Mc&&al(e,Pc)),rl(e,r),1===n&&0===Cc&&0===(1&t.mode)&&(zc=Ze()+500,Us&&zs()))}function rl(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),a=1<<o,c=s[o];-1===c?0!==(a&n)&&0===(a&r)||(s[o]=ft(a,t)):c<=t&&(e.expiredLanes|=a),i&=~a}}(e,t);var r=dt(e,e===Ic?Pc:0);if(0===r)null!==n&&Ke(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ke(n),1===t)0===e.tag?function(e){Us=!0,Vs(e)}(cl.bind(null,e)):Vs(cl.bind(null,e)),os(function(){0===(6&Cc)&&zs()}),n=null;else{switch(bt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Il(n,sl.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function sl(e,t){if(Xc=-1,$c=0,0!==(6&Cc))throw Error(i(327));var n=e.callbackNode;if(Sl()&&e.callbackNode!==n)return null;var r=dt(e,e===Ic?Pc:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gl(e,r);else{t=r;var s=Cc;Cc|=2;var o=ml();for(Ic===e&&Pc===t||(Gc=null,zc=Ze()+500,dl(e,t));;)try{vl();break}catch(c){fl(e,c)}Ti(),Nc.current=o,Cc=s,null!==_c?t=0:(Ic=null,Pc=0,t=Mc)}if(0!==t){if(2===t&&(0!==(s=mt(e))&&(r=s,t=il(e,s))),1===t)throw n=Rc,dl(e,0),al(e,r),rl(e,Ze()),n;if(6===t)al(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ar(i(),s))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=gl(e,r))&&(0!==(o=mt(e))&&(r=o,t=il(e,o))),1===t))throw n=Rc,dl(e,0),al(e,r),rl(e,Ze()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:xl(e,Bc,Gc);break;case 3:if(al(e,r),(130023424&r)===r&&10<(t=Vc+500-Ze())){if(0!==dt(e,0))break;if(((s=e.suspendedLanes)&r)!==r){el(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(xl.bind(null,e,Bc,Gc),t);break}xl(e,Bc,Gc);break;case 4:if(al(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>s&&(s=a),r&=~o}if(r=s,10<(r=(120>(r=Ze()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ac(r/1960))-r)){e.timeoutHandle=rs(xl.bind(null,e,Bc,Gc),r);break}xl(e,Bc,Gc);break;default:throw Error(i(329))}}}return rl(e,Ze()),e.callbackNode===n?sl.bind(null,e):null}function il(e,t){var n=Uc;return e.current.memoizedState.isDehydrated&&(dl(e,t).flags|=256),2!==(e=gl(e,t))&&(t=Bc,Bc=n,null!==t&&ol(t)),e}function ol(e){null===Bc?Bc=e:Bc.push.apply(Bc,e)}function al(e,t){for(t&=~Fc,t&=~Lc,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cl(e){if(0!==(6&Cc))throw Error(i(327));Sl();var t=dt(e,0);if(0===(1&t))return rl(e,Ze()),null;var n=gl(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=il(e,r))}if(1===n)throw n=Rc,dl(e,0),al(e,t),rl(e,Ze()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xl(e,Bc,Gc),rl(e,Ze()),null}function ll(e,t){var n=Cc;Cc|=1;try{return e(t)}finally{0===(Cc=n)&&(zc=Ze()+500,Us&&zs())}}function ul(e){null!==Kc&&0===Kc.tag&&0===(6&Cc)&&Sl();var t=Cc;Cc|=1;var n=kc.transition,r=wt;try{if(kc.transition=null,wt=1,e)return e()}finally{wt=r,kc.transition=n,0===(6&(Cc=t))&&zs()}}function hl(){jc=Dc.current,Ns(Dc)}function dl(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==_c)for(n=_c.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ds();break;case 3:Yi(),Ns(Is),Ns(Cs),no();break;case 5:Xi(r);break;case 4:Yi();break;case 13:case 19:Ns($i);break;case 10:ki(r.type._context);break;case 22:case 23:hl()}n=n.return}if(Ic=e,_c=e=Dl(e.current,null),Pc=jc=t,Mc=0,Rc=null,Fc=Lc=Oc=0,Bc=Uc=null,null!==Pi){for(t=0;t<Pi.length;t++)if(null!==(r=(n=Pi[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=s,r.next=o}n.pending=r}Pi=null}return e}function fl(e,t){for(;;){var n=_c;try{if(Ti(),ro.current=Xo,lo){for(var r=oo.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}lo=!1}if(io=0,co=ao=oo=null,uo=!1,ho=0,Tc.current=null,null===n||null===n.return){Mc=1,Rc=t,_c=null;break}e:{var o=e,a=n.return,c=n,l=t;if(t=Pc,c.flags|=32768,null!==l&&"object"===typeof l&&"function"===typeof l.then){var u=l,h=c,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var m=ga(a);if(null!==m){m.flags&=-257,ya(m,a,c,0,t),1&m.mode&&pa(o,u,t),l=u;var p=(t=m).updateQueue;if(null===p){var g=new Set;g.add(l),t.updateQueue=g}else p.add(l);break e}if(0===(1&t)){pa(o,u,t),pl();break e}l=Error(i(426))}else if(si&&1&c.mode){var y=ga(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),ya(y,a,c,0,t),mi(la(l,c));break e}}o=l=la(l,c),4!==Mc&&(Mc=2),null===Uc?Uc=[o]:Uc.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Vi(o,fa(0,l,t));break e;case 1:c=l;var v=o.type,w=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Wc||!Wc.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t,Vi(o,ma(o,c,t));break e}}o=o.return}while(null!==o)}bl(n)}catch(b){t=b,_c===n&&null!==n&&(_c=n=n.return);continue}break}}function ml(){var e=Nc.current;return Nc.current=Xo,null===e?Xo:e}function pl(){0!==Mc&&3!==Mc&&2!==Mc||(Mc=4),null===Ic||0===(268435455&Oc)&&0===(268435455&Lc)||al(Ic,Pc)}function gl(e,t){var n=Cc;Cc|=2;var r=ml();for(Ic===e&&Pc===t||(Gc=null,dl(e,t));;)try{yl();break}catch(s){fl(e,s)}if(Ti(),Cc=n,Nc.current=r,null!==_c)throw Error(i(261));return Ic=null,Pc=0,Mc}function yl(){for(;null!==_c;)wl(_c)}function vl(){for(;null!==_c&&!Je();)wl(_c)}function wl(e){var t=Ec(e.alternate,e,jc);e.memoizedProps=e.pendingProps,null===t?bl(e):_c=t,Tc.current=null}function bl(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qa(n,t,jc)))return void(_c=n)}else{if(null!==(n=Ka(n,t)))return n.flags&=32767,void(_c=n);if(null===e)return Mc=6,void(_c=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(_c=t);_c=t=e}while(null!==t);0===Mc&&(Mc=5)}function xl(e,t,n){var r=wt,s=kc.transition;try{kc.transition=null,wt=1,function(e,t,n,r){do{Sl()}while(null!==Kc);if(0!==(6&Cc))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ot(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,o),e===Ic&&(_c=Ic=null,Pc=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qc||(Qc=!0,Il(tt,function(){return Sl(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=kc.transition,kc.transition=null;var a=wt;wt=1;var c=Cc;Cc|=4,Tc.current=null,function(e,t){if(es=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var a=0,c=-1,l=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var m;d!==n||0!==s&&3!==d.nodeType||(c=a+s),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(m=d.firstChild);)f=d,d=m;for(;;){if(d===e)break t;if(f===n&&++u===s&&(c=a),f===o&&++h===r&&(l=a),null!==(m=d.nextSibling))break;f=(d=f).parentNode}d=m}n=-1===c||-1===l?null:{start:c,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},Ht=!1,Xa=t;null!==Xa;)if(e=(t=Xa).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Xa=e;else for(;null!==Xa;){t=Xa;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var g=p.memoizedProps,y=p.memoizedState,v=t.stateNode,w=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:na(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(i(163))}}catch(x){Al(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Xa=e;break}Xa=t.return}p=tc,tc=!1}(e,n),gc(n,e),mr(ts),Ht=!!es,ts=es=null,e.current=n,vc(n,e,s),Ye(),Cc=c,wt=a,kc.transition=o}else e.current=n;if(Qc&&(Qc=!1,Kc=e,Jc=s),o=e.pendingLanes,0===o&&(Wc=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rl(e,Ze()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Hc)throw Hc=!1,e=qc,qc=null,e;0!==(1&Jc)&&0!==e.tag&&Sl(),o=e.pendingLanes,0!==(1&o)?e===Zc?Yc++:(Yc=0,Zc=e):Yc=0,zs()}(e,t,n,r)}finally{kc.transition=s,wt=r}return null}function Sl(){if(null!==Kc){var e=bt(Jc),t=kc.transition,n=wt;try{if(kc.transition=null,wt=16>e?16:e,null===Kc)var r=!1;else{if(e=Kc,Kc=null,Jc=0,0!==(6&Cc))throw Error(i(331));var s=Cc;for(Cc|=4,Xa=e.current;null!==Xa;){var o=Xa,a=o.child;if(0!==(16&Xa.flags)){var c=o.deletions;if(null!==c){for(var l=0;l<c.length;l++){var u=c[l];for(Xa=u;null!==Xa;){var h=Xa;switch(h.tag){case 0:case 11:case 15:nc(8,h,o)}var d=h.child;if(null!==d)d.return=h,Xa=d;else for(;null!==Xa;){var f=(h=Xa).sibling,m=h.return;if(ic(h),h===u){Xa=null;break}if(null!==f){f.return=m,Xa=f;break}Xa=m}}}var p=o.alternate;if(null!==p){var g=p.child;if(null!==g){p.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}Xa=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,Xa=a;else e:for(;null!==Xa;){if(0!==(2048&(o=Xa).flags))switch(o.tag){case 0:case 11:case 15:nc(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Xa=v;break e}Xa=o.return}}var w=e.current;for(Xa=w;null!==Xa;){var b=(a=Xa).child;if(0!==(2064&a.subtreeFlags)&&null!==b)b.return=a,Xa=b;else e:for(a=w;null!==Xa;){if(0!==(2048&(c=Xa).flags))try{switch(c.tag){case 0:case 11:case 15:rc(9,c)}}catch(S){Al(c,c.return,S)}if(c===a){Xa=null;break e}var x=c.sibling;if(null!==x){x.return=c.return,Xa=x;break e}Xa=c.return}}if(Cc=s,zs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(S){}r=!0}return r}finally{wt=n,kc.transition=t}}return!1}function El(e,t,n){e=Ui(e,t=fa(0,t=la(n,t),1),1),t=el(),null!==e&&(yt(e,1,t),rl(e,t))}function Al(e,t,n){if(3===e.tag)El(e,e,n);else for(;null!==t;){if(3===t.tag){El(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wc||!Wc.has(r))){t=Ui(t,e=ma(t,e=la(n,e),1),1),e=el(),null!==t&&(yt(t,1,e),rl(t,e));break}}t=t.return}}function Nl(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=el(),e.pingedLanes|=e.suspendedLanes&n,Ic===e&&(Pc&n)===n&&(4===Mc||3===Mc&&(130023424&Pc)===Pc&&500>Ze()-Vc?dl(e,0):Fc|=n),rl(e,t)}function Tl(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=el();null!==(e=Mi(e,t))&&(yt(e,t,n),rl(e,n))}function kl(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tl(e,n)}function Cl(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Tl(e,n)}function Il(e,t){return Qe(e,t)}function _l(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pl(e,t,n,r){return new _l(e,t,n,r)}function jl(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dl(e,t){var n=e.alternate;return null===n?((n=Pl(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ml(e,t,n,r,s,o){var a=2;if(r=e,"function"===typeof e)jl(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case E:return Rl(n.children,s,o,t);case A:a=8,s|=8;break;case N:return(e=Pl(12,n,t,2|s)).elementType=N,e.lanes=o,e;case I:return(e=Pl(13,n,t,s)).elementType=I,e.lanes=o,e;case _:return(e=Pl(19,n,t,s)).elementType=_,e.lanes=o,e;case D:return Ol(n,s,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:a=10;break e;case k:a=9;break e;case C:a=11;break e;case P:a=14;break e;case j:a=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Pl(a,n,t,s)).elementType=e,t.type=r,t.lanes=o,t}function Rl(e,t,n,r){return(e=Pl(7,e,r,t)).lanes=n,e}function Ol(e,t,n,r){return(e=Pl(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Ll(e,t,n){return(e=Pl(6,e,null,t)).lanes=n,e}function Fl(e,t,n){return(t=Pl(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Ul(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Bl(e,t,n,r,s,i,o,a,c){return e=new Ul(e,t,n,a,c),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Pl(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oi(i),e}function Vl(e){if(!e)return ks;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(js(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(js(n))return Rs(e,n,t)}return t}function zl(e,t,n,r,s,i,o,a,c){return(e=Bl(n,r,!0,e,0,i,0,a,c)).context=Vl(null),n=e.current,(i=Fi(r=el(),s=tl(n))).callback=void 0!==t&&null!==t?t:null,Ui(n,i,s),e.current.lanes=s,yt(e,s,r),rl(e,r),e}function Gl(e,t,n,r){var s=t.current,i=el(),o=tl(s);return n=Vl(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fi(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Ui(s,t,o))&&(nl(e,s,o,i),Bi(e,s,o)),o}function Hl(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ql(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wl(e,t){ql(e,t),(e=e.alternate)&&ql(e,t)}Ec=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)wa=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wa=!1,function(e,t,n){switch(t.tag){case 3:Ia(t),fi();break;case 5:Zi(t);break;case 1:js(t.type)&&Os(t);break;case 4:Ji(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Ts(Si,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ts($i,1&$i.current),t.flags|=128,null):0!==(n&t.child.childLanes)?La(e,t,n):(Ts($i,1&$i.current),null!==(e=Ha(e,t,n))?e.sibling:null);Ts($i,1&$i.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return za(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ts($i,$i.current),r)break;return null;case 22:case 23:return t.lanes=0,Aa(e,t,n)}return Ha(e,t,n)}(e,t,n);wa=0!==(131072&e.flags)}else wa=!1,si&&0!==(1048576&t.flags)&&$s(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var s=Ps(t,Cs.current);Ii(t,n),s=go(null,t,r,e,s,n);var o=yo();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,js(r)?(o=!0,Os(t)):o=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Oi(t),s.updater=sa,t.stateNode=s,s._reactInternals=t,ca(t,r,e,n),t=Ca(null,t,r,!0,o,n)):(t.tag=0,si&&o&&ei(t),ba(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return jl(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=na(r,e),s){case 0:t=Ta(null,t,r,e,n);break e;case 1:t=ka(null,t,r,e,n);break e;case 11:t=xa(null,t,r,e,n);break e;case 14:t=Sa(null,t,r,na(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Ta(e,t,r,s=t.elementType===r?s:na(r,s),n);case 1:return r=t.type,s=t.pendingProps,ka(e,t,r,s=t.elementType===r?s:na(r,s),n);case 3:e:{if(Ia(t),null===e)throw Error(i(387));r=t.pendingProps,s=(o=t.memoizedState).element,Li(e,t),zi(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=_a(e,t,r,n,s=la(Error(i(423)),t));break e}if(r!==s){t=_a(e,t,r,n,s=la(Error(i(424)),t));break e}for(ri=ls(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=xi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Ha(e,t,n);break e}ba(e,t,r,n)}t=t.child}return t;case 5:return Zi(t),null===e&&li(t),r=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,a=s.children,ns(r,s)?a=null:null!==o&&ns(r,o)&&(t.flags|=32),Na(e,t),ba(e,t,a,n),t.child;case 6:return null===e&&li(t),null;case 13:return La(e,t,n);case 4:return Ji(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bi(t,null,r,n):ba(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,xa(e,t,r,s=t.elementType===r?s:na(r,s),n);case 7:return ba(e,t,t.pendingProps,n),t.child;case 8:case 12:return ba(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,Ts(Si,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===s.children&&!Is.current){t=Ha(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var c=o.dependencies;if(null!==c){a=o.child;for(var l=c.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Fi(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ci(o.return,n,t),c.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(i(341));a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Ci(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}ba(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ii(t,n),r=r(s=_i(s)),t.flags|=1,ba(e,t,r,n),t.child;case 14:return s=na(r=t.type,t.pendingProps),Sa(e,t,r,s=na(r.type,s),n);case 15:return Ea(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:na(r,s),Ga(e,t),t.tag=1,js(r)?(e=!0,Os(t)):e=!1,Ii(t,n),oa(t,r,s),ca(t,r,s,n),Ca(null,t,r,!0,e,n);case 19:return za(e,t,n);case 22:return Aa(e,t,n)}throw Error(i(156,t.tag))};var Ql="function"===typeof reportError?reportError:function(e){console.error(e)};function Kl(e){this._internalRoot=e}function Jl(e){this._internalRoot=e}function Yl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Zl(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Xl(){}function $l(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof s){var a=s;s=function(){var e=Hl(o);a.call(e)}}Gl(t,o,e,s)}else o=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Hl(o);i.call(e)}}var o=zl(t,r,e,0,null,!1,0,"",Xl);return e._reactRootContainer=o,e[ms]=o.current,zr(8===e.nodeType?e.parentNode:e),ul(),o}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var a=r;r=function(){var e=Hl(c);a.call(e)}}var c=Bl(e,0,!1,null,0,!1,0,"",Xl);return e._reactRootContainer=c,e[ms]=c.current,zr(8===e.nodeType?e.parentNode:e),ul(function(){Gl(t,c,n,r)}),c}(n,t,e,s,r);return Hl(o)}Jl.prototype.render=Kl.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Gl(e,t,null,null)},Jl.prototype.unmount=Kl.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ul(function(){Gl(null,e,null,null)}),t[ms]=null}},Jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=At();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Lt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rl(t,Ze()),0===(6&Cc)&&(zc=Ze()+500,zs()))}break;case 13:ul(function(){var t=Mi(e,1);if(null!==t){var n=el();nl(t,e,1,n)}}),Wl(e,1)}},St=function(e){if(13===e.tag){var t=Mi(e,134217728);if(null!==t)nl(t,e,134217728,el());Wl(e,134217728)}},Et=function(e){if(13===e.tag){var t=tl(e),n=Mi(e,t);if(null!==n)nl(n,e,t,el());Wl(e,t)}},At=function(){return wt},Nt=function(e,t){var n=wt;try{return wt=e,t()}finally{wt=n}},Se=function(e,t,n){switch(t){case"input":if(X(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=xs(r);if(!s)throw Error(i(90));Q(r),X(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=ll,Ie=ul;var eu={usingClientEntryPoint:!1,Events:[ws,bs,xs,Te,ke,ll]},tu={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{st=ru.inject(nu),it=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yl(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:S,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yl(e))throw Error(i(299));var n=!1,r="",s=Ql;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Bl(e,1,!1,null,0,n,0,r,s),e[ms]=t.current,zr(8===e.nodeType?e.parentNode:e),new Kl(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return ul(e)},t.hydrate=function(e,t,n){if(!Zl(t))throw Error(i(200));return $l(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yl(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,o="",a=Ql;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zl(t,null,e,1,null!=n?n:null,s,0,o,a),e[ms]=t.current,zr(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new Jl(t)},t.render=function(e,t,n){if(!Zl(t))throw Error(i(200));return $l(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Zl(e))throw Error(i(40));return!!e._reactRootContainer&&(ul(function(){$l(null,null,e,!1,function(){e._reactRootContainer=null,e[ms]=null})}),!0)},t.unstable_batchedUpdates=ll,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zl(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return $l(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},736:(e,t,n)=>{var r=n(738).default,s=n(45);e.exports=function(e){var t=s(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},761:(e,t,n)=>{(function(){"use strict";var t,r=Object.defineProperty;var s=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function i(e,t){if(t)e:{var n=s;e=e.split(".");for(var i=0;i<e.length-1;i++){var o=e[i];if(!(o in n))break e;n=n[o]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r(n,e,{configurable:!0,writable:!0,value:t})}}i("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var o=o||{},a=this||self;function c(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function l(e,t,n){return e.call.apply(e.bind,arguments)}function u(e,t,n){return(u=l).apply(null,arguments)}function h(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}var f="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function m(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function p(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function g(e){a.setTimeout(()=>{throw e},0)}function y(){var e=S;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var v=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new w,e=>e.reset());class w{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let b,x=!1,S=new class{constructor(){this.h=this.g=null}add(e,t){const n=v.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},E=()=>{const e=Promise.resolve(void 0);b=()=>{e.then(A)}};function A(){for(var e;e=y();){try{e.h.call(e.g)}catch(n){g(n)}var t=v;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}x=!1}function N(){this.u=this.u,this.C=this.C}function T(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}N.prototype.u=!1,N.prototype.dispose=function(){this.u||(this.u=!0,this.N())},N.prototype[Symbol.dispose]=function(){this.dispose()},N.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},T.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};a.addEventListener("test",e,t),a.removeEventListener("test",e,t)}catch(n){}return e}();function C(e){return/^[\s\xa0]*$/.test(e)}function I(e,t){T.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}d(I,T),I.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&I.Z.h.call(this)},I.prototype.h=function(){I.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var _="closure_listenable_"+(1e6*Math.random()|0),P=0;function j(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++P,this.da=this.fa=!1}function D(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function M(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}const O="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function L(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<O.length;t++)n=O[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function F(e){this.src=e,this.g={},this.h=0}function U(e,t){const n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=i>=0)&&Array.prototype.splice.call(s,i,1),r&&(D(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(let s=0;s<e.length;++s){const i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}F.prototype.add=function(e,t,n,r,s){const i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);const o=B(e,t,r,s);return o>-1?(t=e[o],n||(t.fa=!1)):((t=new j(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var V="closure_lm_"+(1e6*Math.random()|0),z={};function G(e,t,n,r,s){if(r&&r.once)return q(e,t,n,r,s);if(Array.isArray(t)){for(let i=0;i<t.length;i++)G(e,t[i],n,r,s);return null}return n=X(n),e&&e[_]?e.J(t,n,c(r)?!!r.capture:!!r,s):H(e,t,n,!1,r,s)}function H(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");const o=c(s)?!!s.capture:!!s;let a=Y(e);if(a||(e[V]=a=new F(e)),(n=a.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)k||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,s){if(Array.isArray(t)){for(let i=0;i<t.length;i++)q(e,t[i],n,r,s);return null}return n=X(n),e&&e[_]?e.K(t,n,c(r)?!!r.capture:!!r,s):H(e,t,n,!0,r,s)}function W(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);else r=c(r)?!!r.capture:!!r,n=X(n),e&&e[_]?(e=e.i,(i=String(t).toString())in e.g&&((n=B(t=e.g[i],n,r,s))>-1&&(D(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[i],e.h--)))):e&&(e=Y(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,s)),(n=e>-1?t[e]:null)&&Q(n))}function Q(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[_])U(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Y(t))?(U(n,e),0==n.h&&(n.src=null,t[V]=null)):D(e)}}}function K(e){return e in z?z[e]:z[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new I(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&Q(e),e=n.call(r,t)}return e}function Y(e){return(e=e[V])instanceof F?e:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Z]||(e[Z]=function(t){return e.handleEvent(t)}),e[Z])}function $(){N.call(this),this.i=new F(this),this.M=this,this.G=null}function ee(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new T(t,e);else if(t instanceof T)t.target=t.target||e;else{var s=t;L(t=new T(r,e),s)}let i,o;if(s=!0,n)for(o=n.length-1;o>=0;o--)i=t.g=n[o],s=te(i,r,!0,t)&&s;if(i=t.g=e,s=te(i,r,!0,t)&&s,s=te(i,r,!1,t)&&s,n)for(o=0;o<n.length;o++)i=t.g=n[o],s=te(i,r,!1,t)&&s}function te(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let s=!0;for(let i=0;i<t.length;++i){const o=t[i];if(o&&!o.da&&o.capture==n){const t=o.listener,n=o.ha||o.src;o.fa&&U(e.i,o),s=!1!==t.call(n,r)&&s}}return s&&!r.defaultPrevented}function ne(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=u(e.handleEvent,e)}return Number(t)>2147483647?-1:a.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ne(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d($,N),$.prototype[_]=!0,$.prototype.removeEventListener=function(e,t,n,r){W(this,e,t,n,r)},$.prototype.N=function(){if($.Z.N.call(this),this.i){var e=this.i;let t=0;for(const n in e.g){const r=e.g[n];for(let e=0;e<r.length;e++)++t,D(r[e]);delete e.g[n],e.h--}}this.G=null},$.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},$.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class re extends N{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ne(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function se(e){N.call(this),this.h=e,this.g={}}d(se,N);var ie=[];function oe(e){M(e.g,function(e,t){this.g.hasOwnProperty(t)&&Q(e)},e),e.g={}}se.prototype.N=function(){se.Z.N.call(this),oe(this)},se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ae=a.JSON.stringify,ce=a.JSON.parse,le=class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}};function ue(){}function he(){}var de={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function fe(){T.call(this,"d")}function me(){T.call(this,"c")}d(fe,T),d(me,T);var pe={},ge=null;function ye(){return ge=ge||new $}function ve(e){T.call(this,pe.Ia,e)}function we(e){const t=ye();ee(t,new ve(t,e))}function be(e,t){T.call(this,pe.STAT_EVENT,e),this.stat=t}function xe(e){const t=ye();ee(t,new be(t,e))}function Se(e,t){T.call(this,pe.Ja,e),this.size=t}function Ee(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){e()},t)}function Ae(){this.g=!0}function Ne(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const i=JSON.parse(t);if(i)for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var n=i[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(let e=1;e<r.length;e++)r[e]=""}}}return ae(i)}catch(i){return t}}(e,n)+(r?" "+r:"")})}pe.Ia="serverreachability",d(ve,T),pe.STAT_EVENT="statevent",d(be,T),pe.Ja="timingevent",d(Se,T),Ae.prototype.ua=function(){this.g=!1},Ae.prototype.info=function(){};var Te,ke={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ce={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ie(){}function _e(e){return encodeURIComponent(String(e))}function Pe(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function je(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new De}function De(){this.i=null,this.g="",this.h=!1}d(Ie,ue),Ie.prototype.g=function(){return new XMLHttpRequest},Te=new Ie;var Me={},Re={};function Oe(e,t,n){e.M=1,e.A=at(nt(t)),e.u=n,e.R=!0,Le(e,null)}function Le(e,t){e.F=Date.now(),Be(e),e.B=nt(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),xt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new De,e.g=cn(e.j,n?t:null,!e.u),e.P>0&&(e.O=new re(u(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var s="readystatechange";Array.isArray(s)||(s&&(ie[0]=s.toString()),s=ie);for(let i=0;i<s.length;i++){const e=G(n,s[i],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?R(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),we(1),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i){var o="",a=i.split("&");for(let e=0;e<a.length;e++){var c=a[e].split("=");if(c.length>1){const e=c[0];c=c[1];const t=e.split("_");o=t.length>=2&&"type"==t[1]?o+(e+"=")+c+"&":o+(e+"=redacted&")}}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Fe(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Ue(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Re:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Re:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.T=Date.now()+e.H,Ve(e,e.H)}function Ve(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=Ee(u(e.aa,e),t)}function ze(e){e.D&&(a.clearTimeout(e.D),e.D=null)}function Ge(e){0==e.j.I||e.K||nn(e.j,e)}function He(e){ze(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,oe(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function qe(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Ye(n.h,e)))if(!e.L&&Ye(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;tn(n),qt(n)}Xt(n),xe(18)}}else n.xa=s[1],0<n.xa-n.K&&s[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=Ee(u(n.Va,n),6e3));Je(n.h)<=1&&n.ta&&(n.ta=void 0)}else sn(n,11)}else if((e.L||n.g==e)&&tn(n),!C(t))for(s=n.Ba.g.parse(t),t=0;t<s.length;t++){let l=s[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const s=l[4];null!=s&&(n.za=s,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Ze(i,i.h),i.h=null))}if(r.G){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,ot(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var o=e;if((r=n).na=an(r,r.L?r.ba:null,r.W),o.L){Xe(r.h,o);var a=o,c=r.O;c&&(a.H=c),a.D&&(ze(a),Be(a)),r.g=o}else Zt(r);n.i.length>0&&Qt(n)}else"stop"!=l[0]&&"close"!=l[0]||sn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?sn(n,7):Ht(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}we(4)}catch(l){}}je.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Bt(e)?t.j():this.Y(e)},je.prototype.Y=function(e){try{if(e==this.g)e:{const c=Bt(this.g),l=this.g.ya(),u=this.g.ca();if(!(c<3)&&(3!=c||this.g&&(this.h.h||this.g.la()||Vt(this.g)))){this.K||4!=c||7==l||we(8==l||u<=0?3:2),ze(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Fe(e))return e.g.la();const t=Vt(e.g);if(""===t)return"";let n="";const r=t.length,s=4==Bt(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return He(e),Ge(e),"";e.h.i=new a.TextDecoder}for(let i=0;i<r;i++)e.h.h=!0,n+=e.h.i.decode(t[i],{stream:!(s&&i==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.i,this.v,this.B,this.l,this.S,c,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,s=this.g;if((r=s.g?s.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(r)){var i=r;break t}}i=null}if(!(e=i)){this.o=!1,this.m=3,xe(12),He(this),Ge(this);break e}Ne(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Ue(this,n),t==Re){4==c&&(this.m=4,xe(14),e=!1),Ne(this.i,this.l,null,"[Incomplete Response]");break}if(t==Me){this.m=4,xe(15),Ne(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Ne(this.i,this.l,t,null),qe(this,t)}if(Fe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=c||0!=n.length||this.h.h||(this.m=1,xe(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),$t(o),o.P=!0,xe(11))}}else Ne(this.i,this.l,n,"[Invalid Chunked Response]"),He(this),Ge(this)}else Ne(this.i,this.l,n,null),qe(this,n);4==c&&He(this),this.o&&!this.K&&(4==c?nn(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&Bt(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(C(e[r]))continue;var n=Pe(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,xe(12)):(this.m=0,xe(13)),He(this),Ge(this)}}}catch(c){}},je.prototype.cancel=function(){this.K=!0,He(this)},je.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(we(3),xe(17)),He(this),this.m=2,Ge(this)):Ve(this,this.T-e)};var We=class{constructor(e,t){this.g=e,this.map=t}};function Qe(e){this.l=e||10,a.PerformanceNavigationTiming?e=(e=a.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function Ye(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ze(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $e(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return m(e.i)}Qe.prototype.cancel=function(){if(this.i=$e(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var et=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function tt(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof tt?(this.l=e.l,rt(this,e.j),this.o=e.o,this.g=e.g,st(this,e.u),this.h=e.h,it(this,St(e.i)),this.m=e.m):e&&(t=String(e).match(et))?(this.l=!1,rt(this,t[1]||"",!0),this.o=ct(t[2]||""),this.g=ct(t[3]||"",!0),st(this,t[4]),this.h=ct(t[5]||"",!0),it(this,t[6]||"",!0),this.m=ct(t[7]||"")):(this.l=!1,this.i=new gt(null,this.l))}function nt(e){return new tt(e)}function rt(e,t,n){e.j=n?ct(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function st(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function it(e,t,n){t instanceof gt?(e.i=t,function(e,t){t&&!e.j&&(yt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(vt(this,t),xt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=lt(t,mt)),e.i=new gt(t,e.l))}function ot(e,t,n){e.i.set(t,n)}function at(e){return ot(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ct(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function lt(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,ut),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function ut(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}tt.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(lt(t,ht,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(lt(t,ht,!0),"@"),e.push(_e(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(lt(n,"/"==n.charAt(0)?ft:dt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",lt(n,pt)),e.join("")},tt.prototype.resolve=function(e){const t=nt(this);let n=!!e.j;n?rt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)st(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var s=t.h.lastIndexOf("/");-1!=s&&(r=t.h.slice(0,s+1)+r)}if(".."==(s=r)||"."==s)r="";else if(-1!=s.indexOf("./")||-1!=s.indexOf("/.")){r=0==s.lastIndexOf("/",0),s=s.split("/");const e=[];for(let t=0;t<s.length;){const n=s[t++];"."==n?r&&t==s.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==s.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=s}return n?t.h=r:n=""!==e.i.toString(),n?it(t,St(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ht=/[#\/\?@]/g,dt=/[#\?:]/g,ft=/[#\?]/g,mt=/[#\?@]/g,pt=/#/g;function gt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function yt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let s,i=null;r>=0?(s=e[n].substring(0,r),i=e[n].substring(r+1)):s=e[n],t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function vt(e,t){yt(e),t=Et(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function wt(e,t){return yt(e),t=Et(e,t),e.g.has(t)}function bt(e,t){yt(e);let n=[];if("string"===typeof t)wt(e,t)&&(n=n.concat(e.g.get(Et(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function xt(e,t,n){vt(e,t),n.length>0&&(e.i=null,e.g.set(Et(e,t),m(n)),e.h+=n.length)}function St(e){const t=new gt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function Et(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function At(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Nt(){this.g=new le}function Tt(e){this.i=e.Sb||null,this.h=e.ab||!1}function kt(e,t){$.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function Ct(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function It(e){e.readyState=4,e.l=null,e.j=null,e.B=null,_t(e)}function _t(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Pt(e){let t="";return M(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function jt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Pt(n),"string"===typeof e?(_e(t),null!=n&&_e(n)):ot(e,t,n))}function Dt(e){$.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(t=gt.prototype).add=function(e,t){yt(this),this.i=null,e=Et(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},t.forEach=function(e,t){yt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},t.set=function(e,t){return yt(this),this.i=null,wt(this,e=Et(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},t.get=function(e,t){return e&&(e=bt(this,e)).length>0?String(e[0]):t},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const s=_e(n);n=bt(this,n);for(let t=0;t<n.length;t++){let r=s;""!==n[t]&&(r+="="+_e(n[t])),e.push(r)}}return this.i=e.join("&")},d(Tt,ue),Tt.prototype.g=function(){return new kt(this.i,this.h)},d(kt,$),(t=kt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,_t(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||a).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,It(this)),this.readyState=0},t.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,_t(this)),this.g&&(this.readyState=3,_t(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ct(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},t.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?It(this):_t(this),3==this.readyState&&Ct(this)}},t.Oa=function(e){this.g&&(this.response=this.responseText=e,It(this))},t.Na=function(e){this.g&&(this.response=e,It(this))},t.ga=function(){this.g&&It(this)},t.setRequestHeader=function(e,t){this.A.append(e,t)},t.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(kt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Dt,$);var Mt=/^https?$/i,Rt=["POST","PUT"];function Ot(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Lt(e),Ut(e)}function Lt(e){e.A||(e.A=!0,ee(e,"complete"),ee(e,"error"))}function Ft(e){if(e.h&&"undefined"!=typeof o)if(e.v&&4==Bt(e))setTimeout(e.Ca.bind(e),0);else if(ee(e,"readystatechange"),4==Bt(e)){e.h=!1;try{const o=e.ca();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){let t=String(e.D).match(et)[1]||null;!t&&a.self&&a.self.location&&(t=a.self.location.protocol.slice(0,-1)),r=!Mt.test(t?t.toLowerCase():"")}n=r}if(n)ee(e,"complete"),ee(e,"success");else{e.o=6;try{var s=Bt(e)>2?e.g.statusText:""}catch(i){s=""}e.l=s+" ["+e.ca()+"]",Lt(e)}}finally{Ut(e)}}}function Ut(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||ee(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Bt(e){return e.g?e.g.readyState:0}function Vt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Gt(e){this.za=0,this.i=[],this.j=new Ae,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zt("baseRetryDelayMs",5e3,e),this.Za=zt("retryDelaySeedMs",1e4,e),this.Ta=zt("forwardChannelMaxRetries",2,e),this.va=zt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new Qe(e&&e.concurrentRequestLimit),this.Ba=new Nt,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Ht(e){if(Wt(e),3==e.I){var t=e.V++,n=nt(e.J);if(ot(n,"SID",e.M),ot(n,"RID",t),ot(n,"TYPE","terminate"),Jt(e,n),(t=new je(e,e.j,t)).M=2,t.A=at(nt(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&a.Image&&((new Image).src=t.A,n=!0),n||(t.g=cn(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Be(t)}on(e)}function qt(e){e.g&&($t(e),e.g.cancel(),e.g=null)}function Wt(e){qt(e),e.v&&(a.clearTimeout(e.v),e.v=null),tn(e),e.h.cancel(),e.m&&("number"===typeof e.m&&a.clearTimeout(e.m),e.m=null)}function Qt(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;b||E(),x||(b(),x=!0),S.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=nt(e.J);ot(r,"SID",e.M),ot(r,"RID",n),ot(r,"AID",e.K),Jt(e,r),e.u&&e.o&&jt(r,e.u,e.o),n=new je(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Yt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ze(e.h,n),Oe(n,r,t)}function Jt(e,t){e.H&&M(e.H,function(e,n){ot(t,n,e)}),e.l&&M({},function(e,n){ot(t,n,e)})}function Yt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?u(e.l.Ka,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let u=0;u<n;u++){var i=s[u].g;const n=s[u].map;if((i-=t)<0)t=Math.max(0,s[u].g-100),l=!1;else try{i="req"+i+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;c(n)&&(r=ae(n)),e.push(i+t+"="+encodeURIComponent(r))}}catch(a){throw e.push(i+"type="+encodeURIComponent("_badmap")),a}}catch(a){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Zt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;b||E(),x||(b(),x=!0),S.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=Ee(u(e.Da,e),rn(e,e.A)),e.A++,!0)}function $t(e){null!=e.B&&(a.clearTimeout(e.B),e.B=null)}function en(e){e.g=new je(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=nt(e.na);ot(t,"RID","rpc"),ot(t,"SID",e.M),ot(t,"AID",e.K),ot(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&ot(t,"TO",e.ia),ot(t,"TYPE","xmlhttp"),Jt(e,t),e.u&&e.o&&jt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=at(nt(t)),n.u=null,n.R=!0,Le(n,e)}function tn(e){null!=e.C&&(a.clearTimeout(e.C),e.C=null)}function nn(e,t){var n=null;if(e.g==t){tn(e),$t(e),e.g=null;var r=2}else{if(!Ye(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var s=e.D;ee(r=ye(),new Se(r,n,t,s)),Qt(e)}else Zt(e);else if(3==(s=t.m)||0==s&&t.X>0||!(1==r&&function(e,t){return!(Je(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=Ee(u(e.Ea,e,t),rn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Xt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),s){case 1:sn(e,5);break;case 4:sn(e,10);break;case 3:sn(e,6);break;default:sn(e,2)}}function rn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function sn(e,t){if(e.j.info("Error code "+t),2==t){var n=u(e.bb,e),r=e.Ua;const t=!r;r=new tt(r||"//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||rt(r,"https"),at(r),t?function(e,t){const n=new Ae;if(a.Image){const r=new Image;r.onload=h(At,n,"TestLoadImage: loaded",!0,t,r),r.onerror=h(At,n,"TestLoadImage: error",!1,t,r),r.onabort=h(At,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=h(At,n,"TestLoadImage: timeout",!1,t,r),a.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ae;const n=new AbortController,r=setTimeout(()=>{n.abort(),At(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?At(0,0,!0,t):At(0,0,!1,t)}).catch(()=>{clearTimeout(r),At(0,0,!1,t)})}(r.toString(),n)}else xe(2);e.I=0,e.l&&e.l.pa(t),on(e),Wt(e)}function on(e){if(e.I=0,e.ja=[],e.l){const t=$e(e.h);0==t.length&&0==e.i.length||(p(e.ja,t),p(e.ja,e.i),e.h.i.length=0,m(e.i),e.i.length=0),e.l.oa()}}function an(e,t,n){var r=n instanceof tt?nt(n):new tt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),st(r,r.u);else{var s=a.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;const e=new tt(null);r&&rt(e,r),t&&(e.g=t),s&&st(e,s),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&ot(r,n,t),ot(r,"VER",e.ka),Jt(e,r),r}function cn(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new Dt(new Tt({ab:n})):new Dt(e.ma)).Fa(e.L),t}function ln(){}function un(){}function hn(e,t){$.call(this),this.g=new Gt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!C(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!C(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new mn(this)}function dn(e){fe.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function fn(){me.call(this),this.status=1}function mn(e){this.g=e}(t=Dt.prototype).Fa=function(e){this.H=e},t.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Te.g(),this.g.onreadystatechange=f(u(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(i){return void Ot(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=a.FormData&&e instanceof a.FormData,!(Array.prototype.indexOf.call(Rt,t,void 0)>=0)||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(i){Ot(this,i)}},t.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,ee(this,"complete"),ee(this,"abort"),Ut(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ut(this,!0)),Dt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ft(this):this.Xa())},t.Xa=function(){Ft(this)},t.isActive=function(){return!!this.g},t.ca=function(){try{return Bt(this)>2?this.g.status:-1}catch(e){return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},t.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ce(t)}},t.ya=function(){return this.o},t.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(t=Gt.prototype).ka=8,t.I=1,t.connect=function(e,t,n,r){xe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=an(this,null,this.W),Qt(this)},t.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const s=new je(this,this.j,e);let i=this.o;if(this.U&&(i?(i=R(i),L(i,this.U)):i=this.U),null!==this.u||this.R||(s.J=i,i=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Yt(this,s,t),ot(n=nt(this.J),"RID",e),ot(n,"CVER",22),this.G&&ot(n,"X-HTTP-Session-Id",this.G),Jt(this,n),i&&(this.R?t="headers="+_e(Pt(i))+"&"+t:this.u&&jt(n,this.u,i)),Ze(this.h,s),this.Ra&&ot(n,"TYPE","init"),this.S?(ot(n,"$req",t),ot(n,"SID","null"),s.U=!0,Oe(s,n,null)):Oe(s,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},t.Da=function(){if(this.v=null,en(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=Ee(u(this.Wa,this),e)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,xe(10),qt(this),en(this))},t.Va=function(){null!=this.C&&(this.C=null,qt(this),Xt(this),xe(19))},t.bb=function(e){e?(this.j.info("Successfully pinged google.com"),xe(2)):(this.j.info("Failed to ping google.com"),xe(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=ln.prototype).ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){},un.prototype.g=function(e,t){return new hn(e,t)},d(hn,$),hn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},hn.prototype.close=function(){Ht(this.g)},hn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ae(e),e=n);t.i.push(new We(t.Ya++,e)),3==t.I&&Qt(t)},hn.prototype.N=function(){this.g.l=null,delete this.j,Ht(this.g),delete this.g,hn.Z.N.call(this)},d(dn,fe),d(fn,me),d(mn,ln),mn.prototype.ra=function(){ee(this.g,"a")},mn.prototype.qa=function(e){ee(this.g,new dn(e))},mn.prototype.pa=function(e){ee(this.g,new fn(e))},mn.prototype.oa=function(){ee(this.g,"b")},un.prototype.createWebChannel=un.prototype.g,hn.prototype.send=hn.prototype.o,hn.prototype.open=hn.prototype.m,hn.prototype.close=hn.prototype.close,e.exports.createWebChannelTransport=function(){return new un},e.exports.getStatEventTarget=function(){return ye()},e.exports.Event=pe,e.exports.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ke.NO_ERROR=0,ke.TIMEOUT=8,ke.HTTP_ERROR=6,e.exports.ErrorCode=ke,Ce.COMPLETE="complete",e.exports.EventType=Ce,he.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",$.prototype.listen=$.prototype.J,e.exports.WebChannel=he,e.exports.FetchXmlHttpFactory=Tt,Dt.prototype.listenOnce=Dt.prototype.K,Dt.prototype.getLastError=Dt.prototype.Ha,Dt.prototype.getLastErrorCode=Dt.prototype.ya,Dt.prototype.getStatus=Dt.prototype.ca,Dt.prototype.getResponseJson=Dt.prototype.La,Dt.prototype.getResponseText=Dt.prototype.la,Dt.prototype.send=Dt.prototype.ea,Dt.prototype.setWithCredentials=Dt.prototype.Fa,e.exports.XhrIo=Dt}).apply("undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{})},776:(e,t,n)=>{"use strict";n.d(t,{cY:()=>p,FA:()=>M,g:()=>D,u:()=>c,Uj:()=>a,Fy:()=>v,tD:()=>z,bD:()=>L,hp:()=>V,T9:()=>f,Tj:()=>h,yU:()=>d,XA:()=>m,mS:()=>l,Ku:()=>q,ZQ:()=>S,sr:()=>T,zJ:()=>g,c1:()=>N,Im:()=>O,lT:()=>C,zW:()=>P,jZ:()=>E,lV:()=>k,nr:()=>I,Ov:()=>_,gE:()=>y,Am:()=>U,I9:()=>B,P1:()=>x,eX:()=>j});var r=n(379);const s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,o=i?e[s+1]:0,a=s+2<e.length,c=a?e[s+2]:0,l=t>>2,u=(3&t)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,i||(h=64)),r.push(n[l],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const c=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==c)throw new o;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==c){const e=a<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=s(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function l(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const u=()=>{try{return l().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/UBSS",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},h=e=>{var t;return null===(t=u())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},d=e=>{const t=h(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},f=()=>{var e;return null===(e=u())||void 0===e?void 0:e.config},m=e=>{var t;return null===(t=u())||void 0===t?void 0:t["_".concat(e)]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function y(e){return(await fetch(e,{credentials:"include"})).ok}function v(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=(0,r.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(o)),""].join(".")}const w={};let b=!1;function x(e,t){if("undefined"===typeof window||"undefined"===typeof document||!g(window.location.host)||w[e]===t||w[e]||b)return;function n(e){return"__firebase__banner__".concat(e)}w[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(w))w[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{b=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),o=document.getElementById(t)||document.createElement("span"),a=n("learnmore"),c=document.getElementById(a)||document.createElement("a"),l=n("preprendIcon"),u=document.getElementById(l)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(c,a);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,l),t.append(u,o,c,n),document.body.appendChild(t)}s?(o.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',o.innerText="Preview backend running in this workspace."),o.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function S(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function E(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(S())}function A(){var e;const t=null===(e=u())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function N(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function T(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function k(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function C(){const e=S();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function I(){return!A()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){return!A()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function P(){try{return"object"===typeof indexedDB}catch(e){return!1}}function j(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}class D extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,D.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M.prototype.create)}}class M{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(R,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new D(n,i,t)}}const R=/\{\$([^}]+)}/g;function O(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function L(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(F(n)&&F(i)){if(!L(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function F(e){return null!==e&&"object"===typeof e}function U(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function B(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function V(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function z(e,t){const n=new G(e,t);return n.subscribe.bind(n)}class G{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function H(){}function q(e){return e&&e._delegate?e._delegate:e}},799:(e,t,n)=>{"use strict";n.r(t),n.d(t,{deleteDB:()=>v,openDB:()=>y,unwrap:()=>g,wrap:()=>p});var r=n(379);const s=(e,t)=>t.some(t=>e instanceof t);let i,o;const a=new WeakMap,c=new WeakMap,l=new WeakMap,u=new WeakMap,h=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return c.get(e);if("objectStoreNames"===t)return e.objectStoreNames||l.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return p(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(o||(o=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(g(this),n),p(a.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return p(e.apply(g(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(g(this),t,...r);return l.set(i,t.sort?t.sort():[t]),p(i)}}function m(e){return"function"===typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(c.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});c.set(e,t)}(e),s(e,i||(i=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function p(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(p(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&a.set(t,e)}).catch(()=>{}),h.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=m(e);return t!==e&&(u.set(e,t),h.set(t,e)),t}const g=e=>h.get(e);function y(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=p(o);return r&&o.addEventListener("upgradeneeded",e=>{r(p(o.result),e.oldVersion,e.newVersion,p(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}function v(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),p(n).then(()=>{})}const w=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],x=new Map;function S(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(x.get(t))return x.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!w.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),c=1;c<o;c++)a[c-1]=arguments[c];return r&&(i=i.index(a.shift())),(await Promise.all([i[n](...a),s&&t.done]))[0]};return x.set(t,i),i}d=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>S(t,n)||e.get(t,n,r),has:(t,n)=>!!S(t,n)||e.has(t,n)}))(d)},853:(e,t,n)=>{"use strict";e.exports=n(234)},858:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(679);const s="[DEFAULT]";class i{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.Deferred;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(o){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}t.Component=class{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}},t.ComponentContainer=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new i(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}},t.Provider=i},887:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=[];var r;t.LogLevel=void 0,(r=t.LogLevel||(t.LogLevel={}))[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT";const s={debug:t.LogLevel.DEBUG,verbose:t.LogLevel.VERBOSE,info:t.LogLevel.INFO,warn:t.LogLevel.WARN,error:t.LogLevel.ERROR,silent:t.LogLevel.SILENT},i=t.LogLevel.INFO,o={[t.LogLevel.DEBUG]:"log",[t.LogLevel.VERBOSE]:"log",[t.LogLevel.INFO]:"info",[t.LogLevel.WARN]:"warn",[t.LogLevel.ERROR]:"error"},a=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};t.Logger=class{constructor(e){this.name=e,this._logLevel=i,this._logHandler=a,this._userLogHandler=null,n.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in t.LogLevel))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.DEBUG,...n),this._logHandler(this,t.LogLevel.DEBUG,...n)}log(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.VERBOSE,...n),this._logHandler(this,t.LogLevel.VERBOSE,...n)}info(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.INFO,...n),this._logHandler(this,t.LogLevel.INFO,...n)}warn(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.WARN,...n),this._logHandler(this,t.LogLevel.WARN,...n)}error(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];this._userLogHandler&&this._userLogHandler(this,t.LogLevel.ERROR,...n),this._logHandler(this,t.LogLevel.ERROR,...n)}},t.setLogLevel=function(e){n.forEach(t=>{t.setLogLevel(e)})},t.setUserLogHandler=function(e,r){for(const i of n){let n=null;r&&r.level&&(n=s[r.level]),i.userLogHandler=null===e?null:function(r,s){for(var i=arguments.length,o=new Array(i>2?i-2:0),a=2;a<i;a++)o[a-2]=arguments[a];const c=o.map(e=>{if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");s>=(null!==n&&void 0!==n?n:r.logLevel)&&e({level:t.LogLevel[s].toLowerCase(),message:c,args:o,type:r.name})}}}},897:(e,t,n)=>{var r=n(693);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},965:(e,t,n)=>{"use strict";n.d(t,{$b:()=>s,Vy:()=>l});const r=[];var s;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(s||(s={}));const i={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},o=s.INFO,a={[s.DEBUG]:"log",[s.VERBOSE]:"log",[s.INFO]:"info",[s.WARN]:"warn",[s.ERROR]:"error"},c=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=a[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),o=2;o<s;o++)i[o-2]=arguments[o];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class l{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in s))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?i[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.DEBUG,...t),this._logHandler(this,s.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.VERBOSE,...t),this._logHandler(this,s.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.INFO,...t),this._logHandler(this,s.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.WARN,...t),this._logHandler(this,s.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,s.ERROR,...t),this._logHandler(this,s.ERROR,...t)}}},968:(e,t,n)=>{"use strict";var r=n(897).default;Object.defineProperty(t,"__esModule",{value:!0});var s=n(98),i=n(858),o=n(887),a=n(679),c=n(193),l=n(761);const u="@firebase/firestore",h="4.9.2";class d{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}d.UNAUTHENTICATED=new d(null),d.GOOGLE_CREDENTIALS=new d("google-credentials-uid"),d.FIRST_PARTY=new d("first-party-uid"),d.MOCK_USER=new d("mock-user");let f="12.3.0";const m=new o.Logger("@firebase/firestore");function p(){return m.logLevel}function g(e){if(m.logLevel<=o.LogLevel.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(w);m.debug("Firestore (".concat(f,"): ").concat(e),...s)}}function y(e){if(m.logLevel<=o.LogLevel.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(w);m.error("Firestore (".concat(f,"): ").concat(e),...s)}}function v(e){if(m.logLevel<=o.LogLevel.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(w);m.warn("Firestore (".concat(f,"): ").concat(e),...s)}}function w(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function b(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,x(e,r,n)}function x(e,t,n){let r="FIRESTORE (".concat(f,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw y(r),new Error(r)}function S(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||x(t,s,r)}function E(e,t){return e}const A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class N extends a.FirebaseError{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class T{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class k{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class C{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(d.UNAUTHENTICATED))}shutdown(){}}class I{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class _{constructor(e){this.t=e,this.currentUser=d.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){S(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new T;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new T,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{g("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(g("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new T)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(g("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(S("string"==typeof t.accessToken,31837,{l:t}),new k(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return S(null===e||"string"==typeof e,2055,{h:e}),new d(e)}}class P{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=d.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class j{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new P(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(d.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class D{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class M{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,s._isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){S(void 0===this.o,3512);const n=e=>{null!=e.error&&g("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,g("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{g("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):g("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new D(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(S("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new D(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function R(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class O{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=R(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function L(e,t){return e<t?-1:e>t?1:0}function F(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return V(n)===V(s)?L(n,s):V(n)?1:-1}return L(e.length,t.length)}const U=55296,B=57343;function V(e){const t=e.charCodeAt(0);return t>=U&&t<=B}function z(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function G(e){return e+"\0"}const H="__name__";class q{constructor(e,t,n){void 0===t?t=0:t>e.length&&b(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&b(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===q.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof q?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=q.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return L(e.length,t.length)}static compareSegments(e,t){const n=q.isNumericId(e),r=q.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?q.extractNumericId(e).compare(q.extractNumericId(t)):F(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return c.Integer.fromString(e.substring(4,e.length-2))}}class W extends q{construct(e,t,n){return new W(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new N(A.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new W(e)}static emptyPath(){return new W([])}}const Q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class K extends q{construct(e,t,n){return new K(e,t,n)}static isValidIdentifier(e){return Q.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),K.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===H}static keyField(){return new K([H])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new N(A.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new N(A.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new N(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new N(A.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new K(t)}static emptyPath(){return new K([])}}class J{constructor(e){this.path=e}static fromPath(e){return new J(W.fromString(e))}static fromName(e){return new J(W.fromString(e).popFirst(5))}static empty(){return new J(W.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===W.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return W.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new J(new W(e.slice()))}}function Y(e,t,n){if(!n)throw new N(A.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Z(e,t,n,r){if(!0===t&&!0===r)throw new N(A.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function X(e){if(!J.isDocumentKey(e))throw new N(A.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function $(e){if(J.isDocumentKey(e))throw new N(A.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ee(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function te(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":b(12329,{type:typeof e})}function ne(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new N(A.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=te(e);throw new N(A.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function re(e,t){if(t<=0)throw new N(A.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}function se(e,t){const n={typeString:e};return t&&(n.value=t),n}function ie(e,t){if(!ee(e))throw new N(A.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const o=e[r];if(s&&typeof o!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==i&&o!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new N(A.INVALID_ARGUMENT,n);return!0}const oe=-62135596800,ae=1e6;class ce{static now(){return ce.fromMillis(Date.now())}static fromDate(e){return ce.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*ae);return new ce(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new N(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new N(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<oe)throw new N(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new N(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ae}_compareTo(e){return this.seconds===e.seconds?L(this.nanoseconds,e.nanoseconds):L(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ie(e,ce._jsonSchema))return new ce(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-oe;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ce._jsonSchemaVersion="firestore/timestamp/1.0",ce._jsonSchema={type:se("string",ce._jsonSchemaVersion),seconds:se("number"),nanoseconds:se("number")};class le{static fromTimestamp(e){return new le(e)}static min(){return new le(new ce(0,0))}static max(){return new le(new ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ue=-1;class he{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function de(e){return e.fields.find(e=>2===e.kind)}function fe(e){return e.fields.filter(e=>2!==e.kind)}function me(e,t){let n=L(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(n=ge(e.fields[r],t.fields[r]),0!==n)return n;return L(e.fields.length,t.fields.length)}he.UNKNOWN_ID=-1;class pe{constructor(e,t){this.fieldPath=e,this.kind=t}}function ge(e,t){const n=K.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:L(e.kind,t.kind)}class ye{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ye(0,be.min())}}function ve(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=le.fromTimestamp(1e9===r?new ce(n+1,0):new ce(n,r));return new be(s,J.empty(),t)}function we(e){return new be(e.readTime,e.key,ue)}class be{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new be(le.min(),J.empty(),ue)}static max(){return new be(le.max(),J.empty(),ue)}}function xe(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=J.comparator(e.documentKey,t.documentKey),0!==n?n:L(e.largestBatchId,t.largestBatchId))}const Se="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ee{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ae(e){if(e.code!==A.FAILED_PRECONDITION||e.message!==Se)throw e;g("LocalStore","Unexpectedly lost primary lease")}class Ne{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&b(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ne((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ne?t:Ne.resolve(t)}catch(e){return Ne.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ne.reject(t)}static resolve(e){return new Ne((t,n)=>{t(e)})}static reject(e){return new Ne((t,n)=>{n(e)})}static waitFor(e){return new Ne((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Ne.resolve(!1);for(const n of e)t=t.next(e=>e?Ne.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Ne((n,r)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const c=a;t(e[c]).next(e=>{i[c]=e,++o,o===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Ne((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}const Te="SimpleDb";class ke{static open(e,t,n,r){try{return new ke(t,e.transaction(r,n))}catch(e){throw new Pe(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new T,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new Pe(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{const n=Oe(t.target.error);this.S.reject(new Pe(e,n))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(g(Te,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new De(t)}}class Ce{static delete(e){return g(Te,"Removing database:",e),Me(a.getGlobal().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!a.isIndexedDBAvailable())return!1;if(Ce.F())return!0;const e=a.getUA(),t=Ce.M(e),n=0<t&&t<10,r=Ie(e),s=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||s)}static F(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.__PRIVATE_USE_MOCK_PERSISTENCE)}static O(e,t){return e.store(t)}static M(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.N=n,this.B=null,12.2===Ce.M(a.getUA())&&y("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(g(Te,"Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Pe(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new N(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new N(A.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Pe(e,r))},r.onupgradeneeded=e=>{g(Te,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.N.k(t,r.transaction,e.oldVersion,this.version).next(()=>{g(Te,"Database upgrade to version "+this.version+" complete")})}})),this.q&&(this.db.onversionchange=e=>this.q(e)),this.db}$(e){this.q=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const s="readonly"===t;let i=0;for(;;){++i;try{this.db=await this.L(e);const t=ke.open(this.db,e,s?"readonly":"readwrite",n),i=r(t).next(e=>(t.C(),e)).catch(e=>(t.abort(e),Ne.reject(e))).toPromise();return i.catch(()=>{}),await t.D,i}catch(e){const t=e,n="FirebaseError"!==t.name&&i<3;if(g(Te,"Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function Ie(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class _e{constructor(e){this.U=e,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(e){this.U=e}done(){this.K=!0}j(e){this.W=e}delete(){return Me(this.U.delete())}}class Pe extends N{constructor(e,t){super(A.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function je(e){return"IndexedDbTransactionError"===e.name}class De{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(g(Te,"PUT",this.store.name,e,t),n=this.store.put(t,e)):(g(Te,"PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Me(n)}add(e){return g(Te,"ADD",this.store.name,e,e),Me(this.store.add(e))}get(e){return Me(this.store.get(e)).next(t=>(void 0===t&&(t=null),g(Te,"GET",this.store.name,e,t),t))}delete(e){return g(Te,"DELETE",this.store.name,e),Me(this.store.delete(e))}count(){return g(Te,"COUNT",this.store.name),Me(this.store.count())}J(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new Ne((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.H(e,(e,n)=>{t.push(n)}).next(()=>t)}}Y(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new Ne((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}Z(e,t){g(Te,"DELETE ALL",this.store.name);const n=this.options(e,t);n.X=!1;const r=this.cursor(n);return this.H(r,(e,t,n)=>n.delete())}ee(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.H(r,t)}te(e){const t=this.cursor({});return new Ne((n,r)=>{t.onerror=e=>{const t=Oe(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}H(e,t){const n=[];return new Ne((r,s)=>{e.onerror=e=>{s(e.target.error)},e.onsuccess=e=>{const s=e.target.result;if(!s)return void r();const i=new _e(s),o=t(s.primaryKey,s.value,i);if(o instanceof Ne){const e=o.catch(e=>(i.done(),Ne.reject(e)));n.push(e)}i.isDone?r():null===i.G?s.continue():s.continue(i.G)}}).next(()=>Ne.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.X?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Me(e){return new Ne((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Oe(e.target.error);n(t)}})}let Re=!1;function Oe(e){const t=Ce.M(a.getUA());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new N("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Re||(Re=!0,setTimeout(()=>{throw e},0)),e}}return e}const Le="IndexBackfiller";class Fe{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}re(e){g(Le,"Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{const e=await this.ne.ie();g(Le,"Documents written: ".concat(e))}catch(e){je(e)?g(Le,"Ignoring IndexedDB error during index backfill: ",e):await Ae(e)}await this.re(6e4)})}}class Ue{constructor(e,t){this.localStore=e,this.persistence=t}async ie(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){const n=new Set;let r=t,s=!0;return Ne.doWhile(()=>!0===s&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return g(Le,"Processing collection: ".concat(t)),this.oe(e,t,r).next(e=>{r-=e,n.add(t)});s=!1})).next(()=>t-r)}oe(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const s=n.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this._e(r,n)).next(n=>(g(Le,"Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>s.size)}))}_e(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=we(t);xe(r,n)>0&&(n=r)}),new be(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Be{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Be.ce=-1;const Ve=-1;function ze(e){return null==e}function Ge(e){return 0===e&&1/e==-1/0}function He(e){return"number"==typeof e&&Number.isInteger(e)&&!Ge(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const qe="\x01";function We(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ke(t)),t=Qe(e.get(n),t);return Ke(t)}function Qe(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case qe:n+="\x01\x11";break;default:n+=t}}return n}function Ke(e){return e+qe+"\x01"}function Je(e){const t=e.length;if(S(t>=2,64408,{path:e}),2===t)return S(e.charAt(0)===qe&&"\x01"===e.charAt(1),56145,{path:e}),W.emptyPath();const n=t-2,r=[];let s="";for(let i=0;i<t;){const t=e.indexOf(qe,i);switch((t<0||t>n)&&b(50515,{path:e}),e.charAt(t+1)){case"\x01":const n=e.substring(i,t);let o;0===s.length?o=n:(s+=n,o=s,s=""),r.push(o);break;case"\x10":s+=e.substring(i,t),s+="\0";break;case"\x11":s+=e.substring(i,t+1);break;default:b(61167,{path:e})}i=t+2}return new W(r)}const Ye="remoteDocuments",Ze="owner",Xe="owner",$e="mutationQueues",et="mutations",tt="batchId",nt="userMutationsIndex",rt=["userId","batchId"];function st(e,t){return[e,We(t)]}function it(e,t,n){return[e,We(t),n]}const ot={},at="documentMutations",ct="remoteDocumentsV14",lt=["prefixPath","collectionGroup","readTime","documentId"],ut="documentKeyIndex",ht=["prefixPath","collectionGroup","documentId"],dt="collectionGroupIndex",ft=["collectionGroup","readTime","prefixPath","documentId"],mt="remoteDocumentGlobal",pt="remoteDocumentGlobalKey",gt="targets",yt="queryTargetsIndex",vt=["canonicalId","targetId"],wt="targetDocuments",bt=["targetId","path"],xt="documentTargetsIndex",St=["path","targetId"],Et="targetGlobalKey",At="targetGlobal",Nt="collectionParents",Tt=["collectionId","parent"],kt="clientMetadata",Ct="bundles",It="namedQueries",_t="indexConfiguration",Pt="collectionGroupIndex",jt="indexState",Dt=["indexId","uid"],Mt="sequenceNumberIndex",Rt=["uid","sequenceNumber"],Ot="indexEntries",Lt=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ft="documentKeyIndex",Ut=["indexId","uid","orderedDocumentKey"],Bt="documentOverlays",Vt=["userId","collectionPath","documentId"],zt="collectionPathOverlayIndex",Gt=["userId","collectionPath","largestBatchId"],Ht="collectionGroupOverlayIndex",qt=["userId","collectionGroup","largestBatchId"],Wt="globals",Qt=[$e,et,at,Ye,gt,Ze,At,wt,kt,mt,Nt,Ct,It],Kt=[...Qt,Bt],Jt=[$e,et,at,ct,gt,Ze,At,wt,kt,mt,Nt,Ct,It,Bt],Yt=Jt,Zt=[...Yt,_t,jt,Ot],Xt=Zt,$t=[...Zt,Wt],en=$t;class tn extends Ee{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function nn(e,t){const n=E(e);return Ce.O(n.le,t)}function rn(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function sn(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function on(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}function an(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class cn{constructor(e,t){this.comparator=e,this.root=t||un.EMPTY}insert(e,t){return new cn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,un.BLACK,null,null))}remove(e){return new cn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,un.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ln(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ln(this.root,e,this.comparator,!1)}getReverseIterator(){return new ln(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ln(this.root,e,this.comparator,!0)}}class ln{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class un{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:un.RED,this.left=null!=r?r:un.EMPTY,this.right=null!=s?s:un.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new un(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return un.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return un.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,un.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,un.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw b(43730,{key:this.key,value:this.value});if(this.right.isRed())throw b(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw b(27949);return e+(this.isRed()?0:1)}}un.EMPTY=null,un.RED=!0,un.BLACK=!1,un.EMPTY=new class{constructor(){this.size=0}get key(){throw b(57766)}get value(){throw b(16141)}get color(){throw b(16727)}get left(){throw b(29726)}get right(){throw b(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new un(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class hn{constructor(e){this.comparator=e,this.data=new cn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new dn(this.data.getIterator())}getIteratorFrom(e){return new dn(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof hn))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new hn(this.comparator);return t.data=e,t}}class dn{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fn(e){return e.hasNext()?e.getNext():void 0}class mn{constructor(e){this.fields=e,e.sort(K.comparator)}static empty(){return new mn([])}unionWith(e){let t=new hn(K.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new mn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return z(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class pn extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new pn("Invalid base64 string: "+e):e}}(e);return new gn(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new gn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return L(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gn.EMPTY_BYTE_STRING=new gn("");const yn=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vn(e){if(S(!!e,39018),"string"==typeof e){let t=0;const n=yn.exec(e);if(S(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:wn(e.seconds),nanos:wn(e.nanos)}}function wn(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function bn(e){return"string"==typeof e?gn.fromBase64String(e):gn.fromUint8Array(e)}const xn="server_timestamp",Sn="__type__",En="__previous_value__",An="__local_write_time__";function Nn(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Sn])||void 0===t?void 0:t.stringValue)===xn}function Tn(e){const t=e.mapValue.fields[En];return Nn(t)?Tn(t):t}function kn(e){const t=vn(e.mapValue.fields[An].timestampValue);return new ce(t.seconds,t.nanos)}class Cn{constructor(e,t,n,r,s,i,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c,this.isUsingEmulator=l}}const In="(default)";class _n{constructor(e,t){this.projectId=e,this.database=t||In}static empty(){return new _n("","")}get isDefaultDatabase(){return this.database===In}isEqual(e){return e instanceof _n&&e.projectId===this.projectId&&e.database===this.database}}const Pn="__type__",jn="__max__",Dn={mapValue:{fields:{__type__:{stringValue:jn}}}},Mn="__vector__",Rn="value",On={nullValue:"NULL_VALUE"};function Ln(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nn(e)?4:er(e)?9007199254740991:Xn(e)?10:11:b(28295,{value:e})}function Fn(e,t){if(e===t)return!0;const n=Ln(e);if(n!==Ln(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return kn(e).isEqual(kn(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=vn(e.timestampValue),r=vn(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return bn(e.bytesValue).isEqual(bn(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wn(e.geoPointValue.latitude)===wn(t.geoPointValue.latitude)&&wn(e.geoPointValue.longitude)===wn(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wn(e.integerValue)===wn(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=wn(e.doubleValue),r=wn(t.doubleValue);return n===r?Ge(n)===Ge(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return z(e.arrayValue.values||[],t.arrayValue.values||[],Fn);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(rn(n)!==rn(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Fn(n[s],r[s])))return!1;return!0}(e,t);default:return b(52216,{left:e})}}function Un(e,t){return void 0!==(e.values||[]).find(e=>Fn(e,t))}function Bn(e,t){if(e===t)return 0;const n=Ln(e),r=Ln(t);if(n!==r)return L(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return L(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=wn(e.integerValue||e.doubleValue),r=wn(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Vn(e.timestampValue,t.timestampValue);case 4:return Vn(kn(e),kn(t));case 5:return F(e.stringValue,t.stringValue);case 6:return function(e,t){const n=bn(e),r=bn(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=L(n[s],r[s]);if(0!==e)return e}return L(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=L(wn(e.latitude),wn(t.latitude));return 0!==n?n:L(wn(e.longitude),wn(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return zn(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,s,i){const o=e.fields||{},a=t.fields||{},c=null===(n=o[Rn])||void 0===n?void 0:n.arrayValue,l=null===(r=a[Rn])||void 0===r?void 0:r.arrayValue,u=L((null===c||void 0===c||null===(s=c.values)||void 0===s?void 0:s.length)||0,(null===l||void 0===l||null===(i=l.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:zn(c,l)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Dn.mapValue&&t===Dn.mapValue)return 0;if(e===Dn.mapValue)return 1;if(t===Dn.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let o=0;o<r.length&&o<i.length;++o){const e=F(r[o],i[o]);if(0!==e)return e;const t=Bn(n[r[o]],s[i[o]]);if(0!==t)return t}return L(r.length,i.length)}(e.mapValue,t.mapValue);default:throw b(23264,{he:n})}}function Vn(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return L(e,t);const n=vn(e),r=vn(t),s=L(n.seconds,r.seconds);return 0!==s?s:L(n.nanos,r.nanos)}function zn(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Bn(n[s],r[s]);if(e)return e}return L(n.length,r.length)}function Gn(e){return Hn(e)}function Hn(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=vn(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return bn(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return J.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Hn(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Hn(e.fields[s]));return n+"}"}(e.mapValue):b(61005,{value:e})}function qn(e){switch(Ln(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Tn(e);return t?16+qn(t):16;case 5:return 2*e.stringValue.length;case 6:return bn(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+qn(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return sn(e.fields,(e,n)=>{t+=e.length+qn(n)}),t}(e.mapValue);default:throw b(13486,{value:e})}}function Wn(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Qn(e){return!!e&&"integerValue"in e}function Kn(e){return!!e&&"arrayValue"in e}function Jn(e){return!!e&&"nullValue"in e}function Yn(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Zn(e){return!!e&&"mapValue"in e}function Xn(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Pn])||void 0===t?void 0:t.stringValue)===Mn}function $n(e){if(e.geoPointValue)return{geoPointValue:r({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:r({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return sn(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=$n(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=$n(e.arrayValue.values[n]);return t}return r({},e)}function er(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===jn}const tr={mapValue:{fields:{[Pn]:{stringValue:Mn},[Rn]:{arrayValue:{}}}}};function nr(e){return"nullValue"in e?On:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Wn(_n.empty(),J.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Xn(e)?tr:{mapValue:{}}:b(35942,{value:e})}function rr(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Wn(_n.empty(),J.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?tr:"mapValue"in e?Xn(e)?{mapValue:{}}:Dn:b(61959,{value:e})}function sr(e,t){const n=Bn(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function ir(e,t){const n=Bn(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class or{constructor(e){this.value=e}static empty(){return new or({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Zn(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$n(t)}setAll(e){let t=K.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=$n(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Zn(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Zn(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){sn(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new or($n(this.value))}}function ar(e){const t=[];return sn(e.fields,(e,n)=>{const r=new K([e]);if(Zn(n)){const e=ar(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new mn(t)}class cr{constructor(e,t,n,r,s,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new cr(e,0,le.min(),le.min(),le.min(),or.empty(),0)}static newFoundDocument(e,t,n,r){return new cr(e,1,t,le.min(),n,r,0)}static newNoDocument(e,t){return new cr(e,2,t,le.min(),le.min(),or.empty(),0)}static newUnknownDocument(e,t){return new cr(e,3,t,le.min(),le.min(),or.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(le.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=or.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=or.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=le.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof cr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new cr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class lr{constructor(e,t){this.position=e,this.inclusive=t}}function ur(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?J.comparator(J.fromName(o.referenceValue),n.key):Bn(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function hr(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Fn(e.position[n],t.position[n]))return!1;return!0}class dr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function fr(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class mr{}class pr extends mr{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Nr(e,t,n):"array-contains"===t?new Ir(e,n):"in"===t?new _r(e,n):"not-in"===t?new Pr(e,n):"array-contains-any"===t?new jr(e,n):new pr(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Tr(e,n):new kr(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Bn(t,this.value)):null!==t&&Ln(this.value)===Ln(t)&&this.matchesComparison(Bn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return b(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gr extends mr{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new gr(e,t)}matches(e){return yr(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function yr(e){return"and"===e.op}function vr(e){return"or"===e.op}function wr(e){return br(e)&&yr(e)}function br(e){for(const t of e.filters)if(t instanceof gr)return!1;return!0}function xr(e){if(e instanceof pr)return e.field.canonicalString()+e.op.toString()+Gn(e.value);if(wr(e))return e.filters.map(e=>xr(e)).join(",");{const t=e.filters.map(e=>xr(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Sr(e,t){return e instanceof pr?function(e,t){return t instanceof pr&&e.op===t.op&&e.field.isEqual(t.field)&&Fn(e.value,t.value)}(e,t):e instanceof gr?function(e,t){return t instanceof gr&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Sr(n,t.filters[r]),!0)}(e,t):void b(19439)}function Er(e,t){const n=e.filters.concat(t);return gr.create(n,e.op)}function Ar(e){return e instanceof pr?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Gn(e.value))}(e):e instanceof gr?function(e){return e.op.toString()+" {"+e.getFilters().map(Ar).join(" ,")+"}"}(e):"Filter"}class Nr extends pr{constructor(e,t,n){super(e,t,n),this.key=J.fromName(n.referenceValue)}matches(e){const t=J.comparator(e.key,this.key);return this.matchesComparison(t)}}class Tr extends pr{constructor(e,t){super(e,"in",t),this.keys=Cr("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class kr extends pr{constructor(e,t){super(e,"not-in",t),this.keys=Cr("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Cr(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>J.fromName(e.referenceValue))}class Ir extends pr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Kn(t)&&Un(t.arrayValue,this.value)}}class _r extends pr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Un(this.value.arrayValue,t)}}class Pr extends pr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Un(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Un(this.value.arrayValue,t)}}class jr extends pr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Kn(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Un(this.value.arrayValue,e))}}class Dr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.Te=null}}function Mr(e){return new Dr(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Rr(e){const t=E(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>xr(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ze(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Gn(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Gn(e)).join(",")),t.Te=e}return t.Te}function Or(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!fr(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Sr(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!hr(e.startAt,t.startAt)&&hr(e.endAt,t.endAt)}function Lr(e){return J.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Fr(e,t){return e.filters.filter(e=>e instanceof pr&&e.field.isEqual(t))}function Ur(e,t,n){let r=On,s=!0;for(const i of Fr(e,t)){let e=On,t=!0;switch(i.op){case"<":case"<=":e=nr(i.value);break;case"==":case"in":case">=":e=i.value;break;case">":e=i.value,t=!1;break;case"!=":case"not-in":e=On}sr({value:r,inclusive:s},{value:e,inclusive:t})<0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];sr({value:r,inclusive:s},{value:e,inclusive:n.inclusive})<0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}function Br(e,t,n){let r=Dn,s=!0;for(const i of Fr(e,t)){let e=Dn,t=!0;switch(i.op){case">=":case">":e=rr(i.value),t=!1;break;case"==":case"in":case"<=":e=i.value;break;case"<":e=i.value,t=!1;break;case"!=":case"not-in":e=Dn}ir({value:r,inclusive:s},{value:e,inclusive:t})>0&&(r=e,s=t)}if(null!==n)for(let i=0;i<e.orderBy.length;++i)if(e.orderBy[i].field.isEqual(t)){const e=n.position[i];ir({value:r,inclusive:s},{value:e,inclusive:n.inclusive})>0&&(r=e,s=n.inclusive);break}return{value:r,inclusive:s}}class Vr{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function zr(e,t,n,r,s,i,o,a){return new Vr(e,t,n,r,s,i,o,a)}function Gr(e){return new Vr(e)}function Hr(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function qr(e){return null!==e.collectionGroup}function Wr(e){const t=E(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new hn(K.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new dr(r,n))}),e.has(K.keyField().canonicalString())||t.Ie.push(new dr(K.keyField(),n))}return t.Ie}function Qr(e){const t=E(e);return t.Ee||(t.Ee=Jr(t,Wr(e))),t.Ee}function Kr(e){const t=E(e);return t.de||(t.de=Jr(t,e.explicitOrderBy)),t.de}function Jr(e,t){if("F"===e.limitType)return Mr(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new dr(e.field,t)});const n=e.endAt?new lr(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new lr(e.startAt.position,e.startAt.inclusive):null;return Mr(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Yr(e,t){const n=e.filters.concat([t]);return new Vr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Zr(e,t,n){return new Vr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Xr(e,t){return Or(Qr(e),Qr(t))&&e.limitType===t.limitType}function $r(e){return"".concat(Rr(Qr(e)),"|lt:").concat(e.limitType)}function es(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Ar(e)).join(", "),"]")),ze(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Gn(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Gn(e)).join(",")),"Target(".concat(t,")")}(Qr(e)),"; limitType=").concat(e.limitType,")")}function ts(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):J.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Wr(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=ur(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Wr(e),t))&&!(e.endAt&&!function(e,t,n){const r=ur(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Wr(e),t))}(e,t)}function ns(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function rs(e){return(t,n)=>{let r=!1;for(const s of Wr(e)){const e=ss(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function ss(e,t,n){const r=e.field.isKeyField()?J.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Bn(r,s):b(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return b(19790,{direction:e.dir})}}class is{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){sn(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return an(this.inner)}size(){return this.innerSize}}const os=new cn(J.comparator);function as(){return os}const cs=new cn(J.comparator);function ls(){let e=cs;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function us(e){let t=cs;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function hs(){return fs()}function ds(){return fs()}function fs(){return new is(e=>e.toString(),(e,t)=>e.isEqual(t))}const ms=new cn(J.comparator),ps=new hn(J.comparator);function gs(){let e=ps;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const ys=new hn(L);function vs(){return ys}function ws(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ge(t)?"-0":t}}function bs(e){return{integerValue:""+e}}function xs(e,t){return He(t)?bs(t):ws(e,t)}class Ss{constructor(){this._=void 0}}function Es(e,t,n){return e instanceof Ts?function(e,t){const n={fields:{[Sn]:{stringValue:xn},[An]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Nn(t)&&(t=Tn(t)),t&&(n.fields[En]=t),{mapValue:n}}(n,t):e instanceof ks?Cs(e,t):e instanceof Is?_s(e,t):function(e,t){const n=Ns(e,t),r=js(n)+js(e.Ae);return Qn(n)&&Qn(e.Ae)?bs(r):ws(e.serializer,r)}(e,t)}function As(e,t,n){return e instanceof ks?Cs(e,t):e instanceof Is?_s(e,t):n}function Ns(e,t){return e instanceof Ps?function(e){return Qn(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Ts extends Ss{}class ks extends Ss{constructor(e){super(),this.elements=e}}function Cs(e,t){const n=Ds(t);for(const r of e.elements)n.some(e=>Fn(e,r))||n.push(r);return{arrayValue:{values:n}}}class Is extends Ss{constructor(e){super(),this.elements=e}}function _s(e,t){let n=Ds(t);for(const r of e.elements)n=n.filter(e=>!Fn(e,r));return{arrayValue:{values:n}}}class Ps extends Ss{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function js(e){return wn(e.integerValue||e.doubleValue)}function Ds(e){return Kn(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Ms{constructor(e,t){this.field=e,this.transform=t}}class Rs{constructor(e,t){this.version=e,this.transformResults=t}}class Os{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Os}static exists(e){return new Os(void 0,e)}static updateTime(e){return new Os(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ls(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Fs{}function Us(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Js(e.key,Os.none()):new Hs(e.key,e.data,Os.none());{const n=e.data,r=or.empty();let s=new hn(K.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new qs(e.key,r,new mn(s.toArray()),Os.none())}}function Bs(e,t,n){e instanceof Hs?function(e,t,n){const r=e.value.clone(),s=Qs(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof qs?function(e,t,n){if(!Ls(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Qs(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Ws(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Vs(e,t,n,r){return e instanceof Hs?function(e,t,n,r){if(!Ls(e.precondition,t))return n;const s=e.value.clone(),i=Ks(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof qs?function(e,t,n,r){if(!Ls(e.precondition,t))return n;const s=Ks(e.fieldTransforms,r,t),i=t.data;return i.setAll(Ws(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Ls(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function zs(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Ns(r.transform,e||null);null!=s&&(null===n&&(n=or.empty()),n.set(r.field,s))}return n||null}function Gs(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&z(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof ks&&t instanceof ks||e instanceof Is&&t instanceof Is?z(e.elements,t.elements,Fn):e instanceof Ps&&t instanceof Ps?Fn(e.Ae,t.Ae):e instanceof Ts&&t instanceof Ts}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Hs extends Fs{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class qs extends Fs{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ws(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Qs(e,t,n){const r=new Map;S(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,As(o,a,n[s]))}return r}function Ks(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,Es(e,i,t))}return r}class Js extends Fs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ys extends Fs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Zs{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Bs(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Vs(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Vs(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=ds();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=t.has(r.key)?null:o;const a=Us(i,o);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(le.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gs())}isEqual(e){return this.batchId===e.batchId&&z(this.mutations,e.mutations,(e,t)=>Gs(e,t))&&z(this.baseMutations,e.baseMutations,(e,t)=>Gs(e,t))}}class Xs{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){S(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=ms;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new Xs(e,t,n,r)}}class $s{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ei{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class ti{constructor(e,t){this.count=e,this.unchangedNames=t}}var ni,ri;function si(e){switch(e){case A.OK:return b(64938);case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return!1;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return!0;default:return b(15467,{code:e})}}function ii(e){if(void 0===e)return y("GRPC error has no .code"),A.UNKNOWN;switch(e){case ni.OK:return A.OK;case ni.CANCELLED:return A.CANCELLED;case ni.UNKNOWN:return A.UNKNOWN;case ni.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case ni.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case ni.INTERNAL:return A.INTERNAL;case ni.UNAVAILABLE:return A.UNAVAILABLE;case ni.UNAUTHENTICATED:return A.UNAUTHENTICATED;case ni.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case ni.NOT_FOUND:return A.NOT_FOUND;case ni.ALREADY_EXISTS:return A.ALREADY_EXISTS;case ni.PERMISSION_DENIED:return A.PERMISSION_DENIED;case ni.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case ni.ABORTED:return A.ABORTED;case ni.OUT_OF_RANGE:return A.OUT_OF_RANGE;case ni.UNIMPLEMENTED:return A.UNIMPLEMENTED;case ni.DATA_LOSS:return A.DATA_LOSS;default:return b(39323,{code:e})}}(ri=ni||(ni={}))[ri.OK=0]="OK",ri[ri.CANCELLED=1]="CANCELLED",ri[ri.UNKNOWN=2]="UNKNOWN",ri[ri.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ri[ri.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ri[ri.NOT_FOUND=5]="NOT_FOUND",ri[ri.ALREADY_EXISTS=6]="ALREADY_EXISTS",ri[ri.PERMISSION_DENIED=7]="PERMISSION_DENIED",ri[ri.UNAUTHENTICATED=16]="UNAUTHENTICATED",ri[ri.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ri[ri.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ri[ri.ABORTED=10]="ABORTED",ri[ri.OUT_OF_RANGE=11]="OUT_OF_RANGE",ri[ri.UNIMPLEMENTED=12]="UNIMPLEMENTED",ri[ri.INTERNAL=13]="INTERNAL",ri[ri.UNAVAILABLE=14]="UNAVAILABLE",ri[ri.DATA_LOSS=15]="DATA_LOSS";let oi=null;function ai(){return new TextEncoder}const ci=new c.Integer([4294967295,4294967295],0);function li(e){const t=ai().encode(e),n=new c.Md5;return n.update(t),new Uint8Array(n.digest())}function ui(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new c.Integer([n,r],0),new c.Integer([s,i],0)]}class hi{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new di("Invalid padding: ".concat(t));if(n<0)throw new di("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new di("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new di("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=c.Integer.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(c.Integer.fromNumber(n)));return 1===r.compare(ci)&&(r=new c.Integer([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=li(e),[n,r]=ui(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new hi(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=li(e),[n,r]=ui(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class di extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class fi{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,mi.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new fi(le.min(),r,new cn(L),as(),gs())}}class mi{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new mi(n,t,gs(),gs(),gs())}}class pi{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class gi{constructor(e,t){this.targetId=e,this.Ce=t}}class yi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gn.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class vi{constructor(){this.ve=0,this.Fe=xi(),this.Me=gn.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=gs(),t=gs(),n=gs();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:b(38017,{changeType:s})}}),new mi(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=xi()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,S(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wi{constructor(e){this.Ge=e,this.ze=new Map,this.je=as(),this.Je=bi(),this.He=bi(),this.Ye=new cn(L)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:b(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(Lr(i))if(0===n){const e=new J(i.path);this.et(t,e,cr.newNoDocument(e,le.min()))}else S(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var s;const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(s=oi)||void 0===s||s.lt(function(e,t,n,r,s,i,o,a,c,l){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:0===s,hashCount:null!==(i=null===h||void 0===h?void 0:h.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(o=null===h||void 0===h||null===(a=h.bits)||void 0===a||null===(a=a.bitmap)||void 0===a?void 0:a.length)&&void 0!==o?o:0,padding:null!==(c=null===h||void 0===h||null===(l=h.bits)||void 0===l?void 0:l.padding)&&void 0!==c?c:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,o;try{i=bn(n).toUint8Array()}catch(e){if(e instanceof pn)return v("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{o=new hi(i,r,s)}catch(e){return v(e instanceof di?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===o.ge?null:o}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Ge.ht(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const s=this.ot(r);if(s){if(n.current&&Lr(s.target)){const t=new J(s.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,cr.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=gs();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new fi(e,t,this.Ye,this.je,n);return this.je=as(),this.Je=bi(),this.He=bi(),this.Ye=new cn(L),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new vi,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new hn(L),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new hn(L),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||g("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new vi),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function bi(){return new cn(J.comparator)}function xi(){return new cn(J.comparator)}const Si={asc:"ASCENDING",desc:"DESCENDING"},Ei={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ai={and:"AND",or:"OR"};class Ni{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ti(e,t){return e.useProto3Json||ze(t)?t:{value:t}}function ki(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Ci(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Ii(e,t){return ki(e,t.toTimestamp())}function _i(e){return S(!!e,49232),le.fromTimestamp(function(e){const t=vn(e);return new ce(t.seconds,t.nanos)}(e))}function Pi(e,t){return ji(e,t).canonicalString()}function ji(e,t){const n=function(e){return new W(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Di(e){const t=W.fromString(e);return S(no(t),10190,{key:t.toString()}),t}function Mi(e,t){return Pi(e.databaseId,t.path)}function Ri(e,t){const n=Di(t);if(n.get(1)!==e.databaseId.projectId)throw new N(A.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new N(A.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new J(Ui(n))}function Oi(e,t){return Pi(e.databaseId,t)}function Li(e){const t=Di(e);return 4===t.length?W.emptyPath():Ui(t)}function Fi(e){return new W(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ui(e){return S(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Bi(e,t,n){return{name:Mi(e,t),fields:n.value.mapValue.fields}}function Vi(e,t,n){const r=Ri(e,t.name),s=_i(t.updateTime),i=t.createTime?_i(t.createTime):le.min(),o=new or({mapValue:{fields:t.fields}}),a=cr.newFoundDocument(r,s,i,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function zi(e,t){let n;if(t instanceof Hs)n={update:Bi(e,t.key,t.value)};else if(t instanceof Js)n={delete:Mi(e,t.key)};else if(t instanceof qs)n={update:Bi(e,t.key,t.data),updateMask:to(t.fieldMask)};else{if(!(t instanceof Ys))return b(16599,{Vt:t.type});n={verify:Mi(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Ts)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof ks)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Is)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ps)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw b(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Ii(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:b(27497)}(e,t.precondition)),n}function Gi(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Os.updateTime(_i(e.updateTime)):void 0!==e.exists?Os.exists(e.exists):Os.none()}(t.currentDocument):Os.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)S("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),n=new Ts;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new ks(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Is(e)}else"increment"in t?n=new Ps(e,t.increment):b(16584,{proto:t});const r=K.fromServerFormat(t.fieldPath);return new Ms(r,n)}(e,t)):[];if(t.update){t.update.name;const s=Ri(e,t.update.name),i=new or({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new mn(t.map(e=>K.fromServerFormat(e)))}(t.updateMask);return new qs(s,i,e,n,r)}return new Hs(s,i,n,r)}if(t.delete){const r=Ri(e,t.delete);return new Js(r,n)}if(t.verify){const r=Ri(e,t.verify);return new Ys(r,n)}return b(1463,{proto:t})}function Hi(e,t){return{documents:[Oi(e,t.path)]}}function qi(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Oi(e,s);const i=function(e){if(0!==e.length)return eo(gr.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const o=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Xi(e.field),direction:Ji(e.dir)}}(e))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Ti(e,t.limit);return null!==a&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function Wi(e,t,n,r){const{ft:s,parent:i}=qi(e,t),o={},a=[];let c=0;return n.forEach(e=>{const t=r?e.alias:"aggregate_"+c++;o[t]=e.alias,"count"===e.aggregateType?a.push({alias:t,count:{}}):"avg"===e.aggregateType?a.push({alias:t,avg:{field:Xi(e.fieldPath)}}):"sum"===e.aggregateType&&a.push({alias:t,sum:{field:Xi(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:a,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function Qi(e){let t=Li(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){S(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Ki(e);return t instanceof gr&&wr(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=function(e){return e.map(e=>function(e){return new dr($i(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,ze(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new lr(n,t)}(n.startAt));let l=null;return n.endAt&&(l=function(e){const t=!e.before,n=e.values||[];return new lr(n,t)}(n.endAt)),zr(t,s,o,i,a,"F",c,l)}function Ki(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=$i(e.unaryFilter.field);return pr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=$i(e.unaryFilter.field);return pr.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$i(e.unaryFilter.field);return pr.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=$i(e.unaryFilter.field);return pr.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return b(61313);default:return b(60726)}}(e):void 0!==e.fieldFilter?function(e){return pr.create($i(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return b(58110);default:return b(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return gr.create(e.compositeFilter.filters.map(e=>Ki(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return b(1026)}}(e.compositeFilter.op))}(e):b(30097,{filter:e})}function Ji(e){return Si[e]}function Yi(e){return Ei[e]}function Zi(e){return Ai[e]}function Xi(e){return{fieldPath:e.canonicalString()}}function $i(e){return K.fromServerFormat(e.fieldPath)}function eo(e){return e instanceof pr?function(e){if("=="===e.op){if(Yn(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NAN"}};if(Jn(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Yn(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NOT_NAN"}};if(Jn(e.value))return{unaryFilter:{field:Xi(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xi(e.field),op:Yi(e.op),value:e.value}}}(e):e instanceof gr?function(e){const t=e.getFilters().map(e=>eo(e));return 1===t.length?t[0]:{compositeFilter:{op:Zi(e.op),filters:t}}}(e):b(54877,{filter:e})}function to(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function no(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ro{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:le.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:le.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:gn.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new ro(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ro(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class so{constructor(e){this.yt=e}}function io(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:oo(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Mi(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ki(e,t.version.toTimestamp()),createTime:ki(e,t.createTime.toTimestamp())}}(e.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:ao(t.version)};else{if(!t.isUnknownDocument())return b(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:ao(t.version)}}return r}function oo(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function ao(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function co(e){const t=new ce(e.seconds,e.nanoseconds);return le.fromTimestamp(t)}function lo(e,t){const n=(t.baseMutations||[]).map(t=>Gi(e.yt,t));for(let i=0;i<t.mutations.length-1;++i){const e=t.mutations[i];if(i+1<t.mutations.length&&void 0!==t.mutations[i+1].transform){const n=t.mutations[i+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(i+1,1),++i}}const r=t.mutations.map(t=>Gi(e.yt,t)),s=ce.fromMillis(t.localWriteTimeMs);return new Zs(t.batchId,s,n,r)}function uo(e){const t=co(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?co(e.lastLimboFreeSnapshotVersion):le.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){const t=e.documents.length;return S(1===t,1966,{count:t}),Qr(Gr(Li(e.documents[0])))}(e.query):function(e){return Qr(Qi(e))}(e.query),new ro(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,gn.fromBase64String(e.resumeToken))}function ho(e,t){const n=ao(t.snapshotVersion),r=ao(t.lastLimboFreeSnapshotVersion);let s;s=Lr(t.target)?Hi(e.yt,t.target):qi(e.yt,t.target).ft;const i=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Rr(t.target),readTime:n,resumeToken:i,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:s}}function fo(e){const t=Qi({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Zr(t,t.limit,"L"):t}function mo(e,t){return new $s(t.largestBatchId,Gi(e.yt,t.overlayMutation))}function po(e,t){const n=t.path.lastSegment();return[e,We(t.path.popLast()),n]}function go(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:ao(r.readTime),documentKey:We(r.documentKey.path),largestBatchId:r.largestBatchId}}class yo{getBundleMetadata(e,t){return vo(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:co(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return vo(e).put(function(e){return{bundleId:e.id,createTime:ao(_i(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return wo(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:fo(e.bundledQuery),readTime:co(e.readTime)}}(e)})}saveNamedQuery(e,t){return wo(e).put(function(e){return{name:e.name,readTime:ao(_i(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function vo(e){return nn(e,Ct)}function wo(e){return nn(e,It)}class bo{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){const n=t.uid||"";return new bo(e,n)}getOverlay(e,t){return xo(e).get(po(this.userId,t)).next(e=>e?mo(this.serializer,e):null)}getOverlays(e,t){const n=hs();return Ne.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,s)=>{const i=new $s(t,s);r.push(this.St(e,i))}),Ne.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(We(e.getCollectionPath())));const s=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);s.push(xo(e).Z(zt,r))}),Ne.waitFor(s)}getOverlaysForCollection(e,t,n){const r=hs(),s=We(t),i=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return xo(e).J(zt,i).next(e=>{for(const t of e){const e=mo(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const s=hs();let i;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return xo(e).ee({index:Ht,range:o},(e,t,n)=>{const o=mo(this.serializer,t);s.size()<r||o.largestBatchId===i?(s.set(o.getKey(),o),i=o.largestBatchId):n.done()}).next(()=>s)}St(e,t){return xo(e).put(function(e,t,n){const[r,s,i]=po(t,n.mutation.key);return{userId:t,collectionPath:s,documentId:i,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:zi(e.yt,n.mutation)}}(this.serializer,this.userId,t))}}function xo(e){return nn(e,Bt)}class So{bt(e){return nn(e,Wt)}getSessionToken(e){return this.bt(e).get("sessionToken").next(e=>{const t=null===e||void 0===e?void 0:e.value;return t?gn.fromUint8Array(t):gn.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.bt(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Eo{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(wn(e.integerValue));else if("doubleValue"in e){const n=wn(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ge(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=vn(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(bn(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?er(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):Xn(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):b(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const s=Rn,i=(null===(n=r[s].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(wn(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),J.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Eo.Kt=new Eo;const Ao=255;function No(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}function To(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=No(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}class ko{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Gt(n.value),n=t.next();this.zt()}jt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Jt(n.value),n=t.next();this.Ht()}Yt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Gt(e);else if(e<2048)this.Gt(960|e>>>6),this.Gt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Gt(480|e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e);else{const e=t.codePointAt(0);this.Gt(240|e>>>18),this.Gt(128|63&e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e)}}this.zt()}Zt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Jt(e);else if(e<2048)this.Jt(960|e>>>6),this.Jt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Jt(480|e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e);else{const e=t.codePointAt(0);this.Jt(240|e>>>18),this.Jt(128|63&e>>>12),this.Jt(128|63&e>>>6),this.Jt(128|63&e)}}this.Ht()}Xt(e){const t=this.en(e),n=To(t);this.tn(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}nn(e){const t=this.en(e),n=To(t);this.tn(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}rn(){this.sn(Ao),this.sn(255)}_n(){this.an(Ao),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Gt(e){const t=255&e;0===t?(this.sn(0),this.sn(255)):t===Ao?(this.sn(Ao),this.sn(0)):this.sn(t)}Jt(e){const t=255&e;0===t?(this.an(0),this.an(255)):t===Ao?(this.an(Ao),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Co{constructor(e){this.cn=e}Bt(e){this.cn.Wt(e)}xt(e){this.cn.Yt(e)}Mt(e){this.cn.Xt(e)}vt(){this.cn.rn()}}class Io{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class _o{constructor(){this.cn=new ko,this.ln=new Co(this.cn),this.hn=new Io(this.cn)}seed(e){this.cn.seed(e)}Pn(e){return 0===e?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}class Po{constructor(e,t,n,r){this.Tn=e,this.In=t,this.En=n,this.dn=r}An(){const e=this.dn.length,t=0===e||255===this.dn[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.dn,0),t!==e?n.set([0],this.dn.length):++n[n.length-1],new Po(this.Tn,this.In,this.En,n)}Rn(e,t,n){return{indexId:this.Tn,uid:e,arrayValue:Mo(this.En),directionalValue:Mo(this.dn),orderedDocumentKey:Mo(t),documentKey:n.path.toArray()}}Vn(e,t,n){const r=this.Rn(e,t,n);return[r.indexId,r.uid,r.arrayValue,r.directionalValue,r.orderedDocumentKey,r.documentKey]}}function jo(e,t){let n=e.Tn-t.Tn;return 0!==n?n:(n=Do(e.En,t.En),0!==n?n:(n=Do(e.dn,t.dn),0!==n?n:J.comparator(e.In,t.In)))}function Do(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}function Mo(e){return a.isSafariOrWebkit()?function(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):e}function Ro(e){return"string"!=typeof e?e:function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(e)}class Oo{constructor(e){this.mn=new hn((e,t)=>K.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.fn=e.orderBy,this.gn=[];for(const t of e.filters){const e=t;e.isInequality()?this.mn=this.mn.add(e):this.gn.push(e)}}get pn(){return this.mn.size>1}yn(e){if(S(e.collectionGroup===this.collectionId,49279),this.pn)return!1;const t=de(e);if(void 0!==t&&!this.wn(t))return!1;const n=fe(e);let r=new Set,s=0,i=0;for(;s<n.length&&this.wn(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.mn.size>0){const e=this.mn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[s];if(!this.Sn(e,t)||!this.bn(this.fn[i++],t))return!1}++s}for(;s<n.length;++s){const e=n[s];if(i>=this.fn.length||!this.bn(this.fn[i++],e))return!1}return!0}Dn(){if(this.pn)return null;let e=new hn(K.comparator);const t=[];for(const n of this.gn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new pe(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new pe(n.field,0))}for(const n of this.fn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new pe(n.field,"asc"===n.dir?0:1)));return new he(he.UNKNOWN_ID,this.collectionId,t,ye.empty())}wn(e){for(const t of this.gn)if(this.Sn(t,e))return!0;return!1}Sn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}bn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Lo(e){if(S(e instanceof pr||e instanceof gr,20012),e instanceof pr){if(e instanceof _r){var t;const n=(null===(t=e.value.arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(t=>pr.create(e.field,"==",t)))||[];return gr.create(n,"or")}return e}const n=e.filters.map(e=>Lo(e));return gr.create(n,e.op)}function Fo(e){if(0===e.getFilters().length)return[];const t=zo(Lo(e));return S(Vo(t),7391),Uo(t)||Bo(t)?[t]:t.getFilters()}function Uo(e){return e instanceof pr}function Bo(e){return e instanceof gr&&wr(e)}function Vo(e){return Uo(e)||Bo(e)||function(e){if(e instanceof gr&&vr(e)){for(const t of e.getFilters())if(!Uo(t)&&!Bo(t))return!1;return!0}return!1}(e)}function zo(e){if(S(e instanceof pr||e instanceof gr,34018),e instanceof pr)return e;if(1===e.filters.length)return zo(e.filters[0]);const t=e.filters.map(e=>zo(e));let n=gr.create(t,e.op);return n=qo(n),Vo(n)?n:(S(n instanceof gr,64498),S(yr(n),40251),S(n.filters.length>1,57927),n.filters.reduce((e,t)=>Go(e,t)))}function Go(e,t){let n;return S(e instanceof pr||e instanceof gr,38388),S(t instanceof pr||t instanceof gr,25473),n=e instanceof pr?t instanceof pr?function(e,t){return gr.create([e,t],"and")}(e,t):Ho(e,t):t instanceof pr?Ho(t,e):function(e,t){if(S(e.filters.length>0&&t.filters.length>0,48005),yr(e)&&yr(t))return Er(e,t.getFilters());const n=vr(e)?e:t,r=vr(e)?t:e,s=n.filters.map(e=>Go(e,r));return gr.create(s,"or")}(e,t),qo(n)}function Ho(e,t){if(yr(t))return Er(t,e.getFilters());{const n=t.filters.map(t=>Go(e,t));return gr.create(n,"or")}}function qo(e){if(S(e instanceof pr||e instanceof gr,11850),e instanceof pr)return e;const t=e.getFilters();if(1===t.length)return qo(t[0]);if(br(e))return e;const n=t.map(e=>qo(e)),r=[];return n.forEach(t=>{t instanceof pr?r.push(t):t instanceof gr&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:gr.create(r,e.op)}class Wo{constructor(){this.Cn=new Qo}addToCollectionParentIndex(e,t){return this.Cn.add(t),Ne.resolve()}getCollectionParents(e,t){return Ne.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Ne.resolve()}deleteFieldIndex(e,t){return Ne.resolve()}deleteAllFieldIndexes(e){return Ne.resolve()}createTargetIndexes(e,t){return Ne.resolve()}getDocumentsMatchingTarget(e,t){return Ne.resolve(null)}getIndexType(e,t){return Ne.resolve(0)}getFieldIndexes(e,t){return Ne.resolve([])}getNextCollectionGroupToUpdate(e){return Ne.resolve(null)}getMinOffset(e,t){return Ne.resolve(be.min())}getMinOffsetFromCollectionGroup(e,t){return Ne.resolve(be.min())}updateCollectionGroup(e,t,n){return Ne.resolve()}updateIndexEntries(e,t){return Ne.resolve()}}class Qo{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new hn(W.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new hn(W.comparator)).toArray()}}const Ko="IndexedDbIndexManager",Jo=new Uint8Array(0);class Yo{constructor(e,t){this.databaseId=t,this.vn=new Qo,this.Fn=new is(e=>Rr(e),(e,t)=>Or(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.vn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.vn.add(t)});const s={collectionId:n,parent:We(r)};return Zo(e).put(s)}return Ne.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[G(t),""],!1,!0);return Zo(e).J(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Je(r.parent))}return n})}addFieldIndex(e,t){const n=$o(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const s=n.add(r);if(t.indexState){const n=ea(e);return s.next(e=>{n.put(go(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const n=$o(e),r=ea(e),s=Xo(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=$o(e),n=Xo(e),r=ea(e);return t.Z().next(()=>n.Z()).next(()=>r.Z())}createTargetIndexes(e,t){return Ne.forEach(this.Mn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new Oo(t).Dn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=Xo(e);let r=!0;const s=new Map;return Ne.forEach(this.Mn(t),t=>this.xn(e,t).next(e=>{r&&(r=!!e),s.set(t,e)})).next(()=>{if(r){let e=gs();const r=[];return Ne.forEach(s,(s,i)=>{g(Ko,"Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(","))}(s)," to execute ").concat(Rr(t)));const o=function(e,t){const n=de(t);if(void 0===n)return null;for(const r of Fr(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(i,s),a=function(e,t){const n=new Map;for(const r of fe(t))for(const t of Fr(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(i,s),c=function(e,t){const n=[];let r=!0;for(const s of fe(t)){const t=0===s.kind?Ur(e,s.fieldPath,e.startAt):Br(e,s.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new lr(n,r)}(i,s),l=function(e,t){const n=[];let r=!0;for(const s of fe(t)){const t=0===s.kind?Br(e,s.fieldPath,e.endAt):Ur(e,s.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new lr(n,r)}(i,s),u=this.On(s,i,c),h=this.On(s,i,l),d=this.Nn(s,i,a),f=this.Bn(s.indexId,o,u,c.inclusive,h,l.inclusive,d);return Ne.forEach(f,s=>n.Y(s,t.limit).next(t=>{t.forEach(t=>{const n=J.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return Ne.resolve(null)})}Mn(e){let t=this.Fn.get(e);return t||(t=0===e.filters.length?[e]:Fo(gr.create(e.filters,"and")).map(t=>Mr(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Fn.set(e,t),t)}Bn(e,t,n,r,s,i,o){const a=(null!=t?t.length:1)*Math.max(n.length,s.length),c=a/(null!=t?t.length:1),l=[];for(let u=0;u<a;++u){const a=t?this.Ln(t[u/c]):Jo,h=this.kn(e,a,n[u%c],r),d=this.qn(e,a,s[u%c],i),f=o.map(t=>this.kn(e,a,t,!0));l.push(...this.createRange(h,d,f))}return l}kn(e,t,n,r){const s=new Po(e,J.empty(),t,n);return r?s:s.An()}qn(e,t,n,r){const s=new Po(e,J.empty(),t,n);return r?s.An():s}xn(e,t){const n=new Oo(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.yn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.Mn(t);return Ne.forEach(r,t=>this.xn(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new hn(K.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}Qn(e,t){const n=new _o;for(const r of fe(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const s=n.Pn(r.kind);Eo.Kt.Dt(e,s)}return n.un()}Ln(e){const t=new _o;return Eo.Kt.Dt(e,t.Pn(0)),t.un()}$n(e,t){const n=new _o;return Eo.Kt.Dt(Wn(this.databaseId,t),n.Pn(function(e){const t=fe(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.un()}Nn(e,t,n){if(null===n)return[];let r=[];r.push(new _o);let s=0;for(const i of fe(e)){const e=n[s++];for(const n of r)if(this.Un(t,i.fieldPath)&&Kn(e))r=this.Kn(r,i,e);else{const t=n.Pn(i.kind);Eo.Kt.Dt(e,t)}}return this.Wn(r)}On(e,t,n){return this.Nn(e,t,n.position)}Wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].un();return t}Kn(e,t,n){const r=[...e],s=[];for(const i of n.arrayValue.values||[])for(const e of r){const n=new _o;n.seed(e.un()),Eo.Kt.Dt(i,n.Pn(t.kind)),s.push(n)}return s}Un(e,t){return!!e.filters.find(e=>e instanceof pr&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=$o(e),r=ea(e);return(t?n.J(Pt,IDBKeyRange.bound(t,t)):n.J()).next(e=>{const t=[];return Ne.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new ye(t.sequenceNumber,new be(co(t.readTime),new J(Je(t.documentKey)),t.largestBatchId)):ye.empty(),r=e.fields.map(e=>{let[t,n]=e;return new pe(K.fromServerFormat(t),n)});return new he(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:L(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=$o(e),s=ea(e);return this.Gn(e).next(e=>r.J(Pt,IDBKeyRange.bound(t,t)).next(t=>Ne.forEach(t,t=>s.put(go(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return Ne.forEach(t,(t,r)=>{const s=n.get(t.collectionGroup);return(s?Ne.resolve(s):this.getFieldIndexes(e,t.collectionGroup)).next(s=>(n.set(t.collectionGroup,s),Ne.forEach(s,n=>this.zn(e,t,n).next(t=>{const s=this.jn(r,n);return t.isEqual(s)?Ne.resolve():this.Jn(e,r,n,t,s)}))))})}Hn(e,t,n,r){return Xo(e).put(r.Rn(this.uid,this.$n(n,t.key),t.key))}Yn(e,t,n,r){return Xo(e).delete(r.Vn(this.uid,this.$n(n,t.key),t.key))}zn(e,t,n){const r=Xo(e);let s=new hn(jo);return r.ee({index:Ft,range:IDBKeyRange.only([n.indexId,this.uid,Mo(this.$n(n,t))])},(e,r)=>{s=s.add(new Po(n.indexId,t,Ro(r.arrayValue),Ro(r.directionalValue)))}).next(()=>s)}jn(e,t){let n=new hn(jo);const r=this.Qn(t,e);if(null==r)return n;const s=de(t);if(null!=s){const i=e.data.field(s.fieldPath);if(Kn(i))for(const s of i.arrayValue.values||[])n=n.add(new Po(t.indexId,e.key,this.Ln(s),r))}else n=n.add(new Po(t.indexId,e.key,Jo,r));return n}Jn(e,t,n,r,s){g(Ko,"Updating index entries for document '%s'",t.key);const i=[];return function(e,t,n,r,s){const i=e.getIterator(),o=t.getIterator();let a=fn(i),c=fn(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=fn(o)):t?(s(a),a=fn(i)):(a=fn(i),c=fn(o))}}(r,s,jo,r=>{i.push(this.Hn(e,t,n,r))},r=>{i.push(this.Yn(e,t,n,r))}),Ne.waitFor(i)}Gn(e){let t=1;return ea(e).ee({index:Mt,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>jo(e,t)).filter((e,t,n)=>!t||0!==jo(e,n[t-1]));const r=[];r.push(e);for(const i of n){const n=jo(i,e),s=jo(i,t);if(0===n)r[0]=e.An();else if(n>0&&s<0)r.push(i),r.push(i.An());else if(s>0)break}r.push(t);const s=[];for(let i=0;i<r.length;i+=2){if(this.Zn(r[i],r[i+1]))return[];const e=r[i].Vn(this.uid,Jo,J.empty()),t=r[i+1].Vn(this.uid,Jo,J.empty());s.push(IDBKeyRange.bound(e,t))}return s}Zn(e,t){return jo(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ta)}getMinOffset(e,t){return Ne.mapArray(this.Mn(t),t=>this.xn(e,t).next(e=>e||b(44426))).next(ta)}}function Zo(e){return nn(e,Nt)}function Xo(e){return nn(e,Ot)}function $o(e){return nn(e,_t)}function ea(e){return nn(e,jt)}function ta(e){S(0!==e.length,28825);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const s=e[r].indexState.offset;xe(s,t)<0&&(t=s),n<s.largestBatchId&&(n=s.largestBatchId)}return new be(t.readTime,t.documentKey,n)}const na={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ra=41943040;class sa{static withCacheSize(e){return new sa(e,sa.DEFAULT_COLLECTION_PERCENTILE,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function ia(e,t,n){const r=e.store(et),s=e.store(at),i=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.ee({range:o},(e,t,n)=>(a++,n.delete()));i.push(c.next(()=>{S(1===a,47070,{batchId:n.batchId})}));const l=[];for(const u of n.mutations){const e=it(t,u.key.path,n.batchId);i.push(s.delete(e)),l.push(u.key)}return Ne.waitFor(i).next(()=>l)}function oa(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw b(14731);t=e.noDocument}return JSON.stringify(t).length}sa.DEFAULT_COLLECTION_PERCENTILE=10,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sa.DEFAULT=new sa(ra,sa.DEFAULT_COLLECTION_PERCENTILE,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sa.DISABLED=new sa(-1,0,0);class aa{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Xn={}}static wt(e,t,n,r){S(""!==e.uid,64387);const s=e.isAuthenticated()?e.uid:"";return new aa(s,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return la(e).ee({index:nt,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const s=ua(e),i=la(e);return i.add({}).next(o=>{S("number"==typeof o,49019);const a=new Zs(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>zi(e.yt,t)),s=n.mutations.map(t=>zi(e.yt,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:s}}(this.serializer,this.userId,a),l=[];let u=new hn((e,t)=>L(e.canonicalString(),t.canonicalString()));for(const e of r){const t=it(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(i.put(c)),l.push(s.put(t,ot))}return u.forEach(t=>{l.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Xn[o]=a.keys()}),Ne.waitFor(l).next(()=>a)})}lookupMutationBatch(e,t){return la(e).get(t).next(e=>e?(S(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),lo(this.serializer,e)):null)}er(e,t){return this.Xn[t]?Ne.resolve(this.Xn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Xn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let s=null;return la(e).ee({index:nt,range:r},(e,t,r)=>{t.userId===this.userId&&(S(t.batchId>=n,47524,{tr:n}),s=lo(this.serializer,t)),r.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=Ve;return la(e).ee({index:nt,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,Ve],[this.userId,Number.POSITIVE_INFINITY]);return la(e).J(nt,t).next(e=>e.map(e=>lo(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=st(this.userId,t.path),r=IDBKeyRange.lowerBound(n),s=[];return ua(e).ee({range:r},(n,r,i)=>{const[o,a,c]=n,l=Je(a);if(o===this.userId&&t.path.isEqual(l))return la(e).get(c).next(e=>{if(!e)throw b(61480,{nr:n,batchId:c});S(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:c}),s.push(lo(this.serializer,e))});i.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new hn(L);const r=[];return t.forEach(t=>{const s=st(this.userId,t.path),i=IDBKeyRange.lowerBound(s),o=ua(e).ee({range:i},(e,r,s)=>{const[i,o,a]=e,c=Je(o);i===this.userId&&t.path.isEqual(c)?n=n.add(a):s.done()});r.push(o)}),Ne.waitFor(r).next(()=>this.rr(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,s=st(this.userId,n),i=IDBKeyRange.lowerBound(s);let o=new hn(L);return ua(e).ee({range:i},(e,t,s)=>{const[i,a,c]=e,l=Je(a);i===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):s.done()}).next(()=>this.rr(e,o))}rr(e,t){const n=[],r=[];return t.forEach(t=>{r.push(la(e).get(t).next(e=>{if(null===e)throw b(35274,{batchId:t});S(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),n.push(lo(this.serializer,e))}))}),Ne.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return ia(e.le,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.ir(t.batchId)}),Ne.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}ir(e){delete this.Xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ne.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return ua(e).ee({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Je(e[1]);r.push(t)}else n.done()}).next(()=>{S(0===r.length,56720,{sr:r.map(e=>e.canonicalString())})})})}containsKey(e,t){return ca(e,this.userId,t)}_r(e){return ha(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Ve,lastStreamToken:""})}}function ca(e,t,n){const r=st(t,n.path),s=r[1],i=IDBKeyRange.lowerBound(r);let o=!1;return ua(e).ee({range:i,X:!0},(e,n,r)=>{const[i,a,c]=e;i===t&&a===s&&(o=!0),r.done()}).next(()=>o)}function la(e){return nn(e,et)}function ua(e){return nn(e,at)}function ha(e){return nn(e,$e)}class da{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new da(0)}static cr(){return new da(-1)}}class fa{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.lr(e).next(t=>{const n=new da(t.highestTargetId);return t.highestTargetId=n.next(),this.hr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.lr(e).next(e=>le.fromTimestamp(new ce(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.lr(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.lr(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.hr(e,r)))}addTargetData(e,t){return this.Pr(e,t).next(()=>this.lr(e).next(n=>(n.targetCount+=1,this.Tr(t,n),this.hr(e,n))))}updateTargetData(e,t){return this.Pr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ma(e).delete(t.targetId)).next(()=>this.lr(e)).next(t=>(S(t.targetCount>0,8065),t.targetCount-=1,this.hr(e,t)))}removeTargets(e,t,n){let r=0;const s=[];return ma(e).ee((i,o)=>{const a=uo(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,s.push(this.removeTargetData(e,a)))}).next(()=>Ne.waitFor(s)).next(()=>r)}forEachTarget(e,t){return ma(e).ee((e,n)=>{const r=uo(n);t(r)})}lr(e){return pa(e).get(Et).next(e=>(S(null!==e,2888),e))}hr(e,t){return pa(e).put(Et,t)}Pr(e,t){return ma(e).put(ho(this.serializer,t))}Tr(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.lr(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Rr(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let s=null;return ma(e).ee({range:r,index:yt},(e,n,r)=>{const i=uo(n);Or(t,i.target)&&(s=i,r.done())}).next(()=>s)}addMatchingKeys(e,t,n){const r=[],s=ga(e);return t.forEach(t=>{const i=We(t.path);r.push(s.put({targetId:n,path:i})),r.push(this.referenceDelegate.addReference(e,n,t))}),Ne.waitFor(r)}removeMatchingKeys(e,t,n){const r=ga(e);return Ne.forEach(t,t=>{const s=We(t.path);return Ne.waitFor([r.delete([n,s]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=ga(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=ga(e);let s=gs();return r.ee({range:n,X:!0},(e,t,n)=>{const r=Je(e[1]),i=new J(r);s=s.add(i)}).next(()=>s)}containsKey(e,t){const n=We(t.path),r=IDBKeyRange.bound([n],[G(n)],!1,!0);let s=0;return ga(e).ee({index:xt,X:!0,range:r},(e,t,n)=>{let[r,i]=e;0!==r&&(s++,n.done())}).next(()=>s>0)}At(e,t){return ma(e).get(t).next(e=>e?uo(e):null)}}function ma(e){return nn(e,gt)}function pa(e){return nn(e,At)}function ga(e){return nn(e,wt)}const ya="LruGarbageCollector",va=1048576;function wa(e,t){let[n,r]=e,[s,i]=t;const o=L(n,s);return 0===o?L(r,i):o}class ba{constructor(e){this.Ir=e,this.buffer=new hn(wa),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();wa(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class xa{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){g(ya,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){je(e)?g(ya,"Ignoring IndexedDB error during garbage collection: ",e):await Ae(e)}await this.Vr(3e5)})}}class Sa{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ne.resolve(Be.ce);const n=new ba(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(g("LruGarbageCollector","Garbage collection skipped; disabled"),Ne.resolve(na)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(g("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),na):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,i,a,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(g("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),p()<=o.LogLevel.DEBUG&&g("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(c-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-c)+"ms\n"+"Total Duration: ".concat(l-u,"ms")),Ne.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function Ea(e,t){return new Sa(e,t)}class Aa{constructor(e,t){this.db=e,this.garbageCollector=Ea(this,t)}gr(e){const t=this.wr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}pr(e,t){return this.Sr(e,(e,n)=>t(n))}addReference(e,t,n){return Na(e,n)}removeReference(e,t,n){return Na(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Na(e,t)}br(e,t){return function(e,t){let n=!1;return ha(e).te(r=>ca(e,r,t).next(e=>(e&&(n=!0),Ne.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let s=0;return this.Sr(e,(i,o)=>{if(o<=t){const t=this.br(e,i).next(t=>{if(!t)return s++,n.getEntry(e,i).next(()=>(n.removeEntry(i,le.min()),ga(e).delete(function(e){return[0,We(e.path)]}(i))))});r.push(t)}}).next(()=>Ne.waitFor(r)).next(()=>n.apply(e)).next(()=>s)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Na(e,t)}Sr(e,t){const n=ga(e);let r,s=Be.ce;return n.ee({index:xt},(e,n)=>{let[i,o]=e,{path:a,sequenceNumber:c}=n;0===i?(s!==Be.ce&&t(new J(Je(r)),s),s=c,r=a):s=Be.ce}).next(()=>{s!==Be.ce&&t(new J(Je(r)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Na(e,t){return ga(e).put(function(e,t){return{targetId:0,path:We(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class Ta{constructor(){this.changes=new is(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,cr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ne.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ka{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Pa(e).put(n)}removeEntry(e,t,n){return Pa(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],oo(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Dr(e,n)))}getEntry(e,t){let n=cr.newInvalidDocument(t);return Pa(e).ee({index:ut,range:IDBKeyRange.only(ja(t))},(e,r)=>{n=this.Cr(t,r)}).next(()=>n)}vr(e,t){let n={size:0,document:cr.newInvalidDocument(t)};return Pa(e).ee({index:ut,range:IDBKeyRange.only(ja(t))},(e,r)=>{n={document:this.Cr(t,r),size:oa(r)}}).next(()=>n)}getEntries(e,t){let n=as();return this.Fr(e,t,(e,t)=>{const r=this.Cr(e,t);n=n.insert(e,r)}).next(()=>n)}Mr(e,t){let n=as(),r=new cn(J.comparator);return this.Fr(e,t,(e,t)=>{const s=this.Cr(e,t);n=n.insert(e,s),r=r.insert(e,oa(t))}).next(()=>({documents:n,Or:r}))}Fr(e,t,n){if(t.isEmpty())return Ne.resolve();let r=new hn(Ma);t.forEach(e=>r=r.add(e));const s=IDBKeyRange.bound(ja(r.first()),ja(r.last())),i=r.getIterator();let o=i.getNext();return Pa(e).ee({index:ut,range:s},(e,t,r)=>{const s=J.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Ma(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,t),o=i.hasNext()?i.getNext():null),o?r.j(ja(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,s){const i=t.path,o=[i.popLast().toArray(),i.lastSegment(),oo(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Pa(e).J(IDBKeyRange.bound(o,a,!0)).next(e=>{null===s||void 0===s||s.incrementDocumentReadCount(e.length);let n=as();for(const s of e){const e=this.Cr(J.fromSegments(s.prefixPath.concat(s.collectionGroup,s.documentId)),s);e.isFoundDocument()&&(ts(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let s=as();const i=Da(t,n),o=Da(t,be.max());return Pa(e).ee({index:dt,range:IDBKeyRange.bound(i,o,!0)},(e,t,n)=>{const i=this.Cr(J.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);s=s.insert(i.key,i),s.size===r&&n.done()}).next(()=>s)}newChangeBuffer(e){return new Ia(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return _a(e).get(pt).next(e=>(S(!!e,20021),e))}Dr(e,t){return _a(e).put(pt,t)}Cr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Vi(e.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=J.fromSegments(t.noDocument.path),r=co(t.noDocument.readTime);n=cr.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return b(56709);{const e=J.fromSegments(t.unknownDocument.path),r=co(t.unknownDocument.version);n=cr.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new ce(e[0],e[1]);return le.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(le.min()))return e}return cr.newInvalidDocument(e)}}function Ca(e){return new ka(e)}class Ia extends Ta{constructor(e,t){super(),this.Nr=e,this.trackRemovals=t,this.Br=new is(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new hn((e,t)=>L(e.canonicalString(),t.canonicalString()));return this.changes.forEach((s,i)=>{const o=this.Br.get(s);if(t.push(this.Nr.removeEntry(e,s,o.readTime)),i.isValidDocument()){const a=io(this.Nr.serializer,i);r=r.add(s.path.popLast());const c=oa(a);n+=c-o.size,t.push(this.Nr.addEntry(e,s,a))}else if(n-=o.size,this.trackRemovals){const n=io(this.Nr.serializer,i.convertToNoDocument(le.min()));t.push(this.Nr.addEntry(e,s,n))}}),r.forEach(n=>{t.push(this.Nr.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.Nr.updateMetadata(e,n)),Ne.waitFor(t)}getFromCache(e,t){return this.Nr.vr(e,t).next(e=>(this.Br.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Nr.Mr(e,t).next(e=>{let{documents:t,Or:n}=e;return n.forEach((e,n)=>{this.Br.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function _a(e){return nn(e,mt)}function Pa(e){return nn(e,ct)}function ja(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Da(e,t){const n=t.documentKey.path.toArray();return[e,oo(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ma(e,t){const n=e.path.toArray(),r=t.path.toArray();let s=0;for(let i=0;i<n.length-2&&i<r.length-2;++i)if(s=L(n[i],r[i]),s)return s;return s=L(n.length,r.length),s||(s=L(n[n.length-2],r[r.length-2]),s||L(n[n.length-1],r[r.length-1]))}class Ra{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Oa{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Vs(n.mutation,e,mn.empty(),ce.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,gs()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gs();const r=hs();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ls();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=hs();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,gs()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=as();const i=fs(),o=fs();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof qs)?s=s.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),Vs(o.mutation,t,o.mutation.getFieldMask(),ce.now())):i.set(t.key,mn.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new Ra(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=fs();let r=new cn((e,t)=>e-t),s=gs();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||mn.empty();o=s.applyToLocalView(i,o),n.set(e,o);const a=(r.get(s.batchId)||gs()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,l=ds();c.forEach(e=>{if(!s.has(e)){const r=Us(t.get(e),n.get(e));null!==r&&l.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,l))}return Ne.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return J.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):qr(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Ne.resolve(hs());let o=ue,a=s;return i.next(t=>Ne.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(t)?Ne.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,gs())).next(e=>({batchId:o,changes:us(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new J(t)).next(e=>{let t=ls();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=ls();return this.indexManager.getCollectionParents(e,s).next(o=>Ne.forEach(o,o=>{const a=function(e,t){return new Vr(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(s));return this.getDocumentsMatchingCollectionQuery(e,a,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,cr.newInvalidDocument(r)))});let n=ls();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Vs(i.mutation,r,mn.empty(),ce.now()),ts(t,r)&&(n=n.insert(e,r))}),n})}}class La{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Ne.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:_i(e.createTime)}}(t)),Ne.resolve()}getNamedQuery(e,t){return Ne.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:fo(e.bundledQuery),readTime:_i(e.readTime)}}(t)),Ne.resolve()}}class Fa{constructor(){this.overlays=new cn(J.comparator),this.qr=new Map}getOverlay(e,t){return Ne.resolve(this.overlays.get(t))}getOverlays(e,t){const n=hs();return Ne.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Ne.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Ne.resolve()}getOverlaysForCollection(e,t,n){const r=hs(),s=t.length+1,i=new J(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Ne.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new cn((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=hs(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=hs(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return Ne.resolve(o)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new $s(t,n));let s=this.qr.get(t);void 0===s&&(s=gs(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class Ua{constructor(){this.sessionToken=gn.EMPTY_BYTE_STRING}getSessionToken(e){return Ne.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ne.resolve()}}class Ba{constructor(){this.Qr=new hn(Va.$r),this.Ur=new hn(Va.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new Va(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new Va(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new J(new W([])),n=new Va(t,e),r=new Va(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new J(new W([])),n=new Va(t,e),r=new Va(t,e+1);let s=gs();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Va(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Va{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return J.comparator(e.key,t.key)||L(e.Yr,t.Yr)}static Kr(e,t){return L(e.Yr,t.Yr)||J.comparator(e.key,t.key)}}class za{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new hn(Va.$r)}checkEmpty(e){return Ne.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Zs(s,t,n,r);this.mutationQueue.push(i);for(const o of r)this.Zr=this.Zr.add(new Va(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return Ne.resolve(i)}lookupMutationBatch(e,t){return Ne.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return Ne.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ne.resolve(0===this.mutationQueue.length?Ve:this.tr-1)}getAllMutationBatches(e){return Ne.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Va(t,0),r=new Va(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),Ne.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new hn(L);return t.forEach(e=>{const t=new Va(e,0),r=new Va(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Ne.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;J.isDocumentKey(s)||(s=s.child(""));const i=new Va(new J(s),0);let o=new hn(L);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.Yr)),!0)},i),Ne.resolve(this.ti(o))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){S(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Ne.forEach(t.mutations,r=>{const s=new Va(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new Va(t,0),r=this.Zr.firstAfterOrEqual(n);return Ne.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ne.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Ga{constructor(e){this.ri=e,this.docs=new cn(J.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ne.resolve(n?n.document.mutableCopy():cr.newInvalidDocument(t))}getEntries(e,t){let n=as();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():cr.newInvalidDocument(e))}),Ne.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=as();const i=t.path,o=new J(i.child("__id-9223372036854775808__")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||xe(we(o),n)<=0||(r.has(o.key)||ts(t,o))&&(s=s.insert(o.key,o.mutableCopy()))}return Ne.resolve(s)}getAllFromCollectionGroup(e,t,n,r){b(9500)}ii(e,t){return Ne.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Ha(this)}getSize(e){return Ne.resolve(this.size)}}class Ha extends Ta{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Ne.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class qa{constructor(e){this.persistence=e,this.si=new is(e=>Rr(e),Or),this.lastRemoteSnapshotVersion=le.min(),this.highestTargetId=0,this.oi=0,this._i=new Ba,this.targetCount=0,this.ai=da.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Ne.resolve()}getLastRemoteSnapshotVersion(e){return Ne.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ne.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Ne.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Ne.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new da(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Ne.resolve()}updateTargetData(e,t){return this.Pr(t),Ne.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Ne.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Ne.waitFor(s).next(()=>r)}getTargetCount(e){return Ne.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Ne.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Ne.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Ne.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Ne.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Ne.resolve(n)}containsKey(e,t){return Ne.resolve(this._i.containsKey(t))}}class Wa{constructor(e,t){this.ui={},this.overlays={},this.ci=new Be(0),this.li=!1,this.li=!0,this.hi=new Ua,this.referenceDelegate=e(this),this.Pi=new qa(this),this.indexManager=new Wo,this.remoteDocumentCache=function(e){return new Ga(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new so(t),this.Ii=new La(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Fa,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new za(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){g("MemoryPersistence","Starting transaction:",e);const r=new Qa(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Ne.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Qa extends Ee{constructor(e){super(),this.currentSequenceNumber=e}}class Ka{constructor(e){this.persistence=e,this.Ri=new Ba,this.Vi=null}static mi(e){return new Ka(e)}get fi(){if(this.Vi)return this.Vi;throw b(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Ne.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Ne.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Ne.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ne.forEach(this.fi,n=>{const r=J.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,le.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Ne.or([()=>Ne.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Ja{constructor(e,t){this.persistence=e,this.pi=new is(e=>We(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Ea(this,t)}static mi(e,t){return new Ja(e,t)}Ei(){}di(e){return Ne.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Ne.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Ne.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,s.removeEntry(r,le.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Ne.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Ne.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=qn(e.data.value)),t}br(e,t,n){return Ne.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Ne.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Ya{constructor(e){this.serializer=e}k(e,t,n,r){const s=new ke("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(Ze)}(e),function(e){e.createObjectStore($e,{keyPath:"userId"});e.createObjectStore(et,{keyPath:tt,autoIncrement:!0}).createIndex(nt,rt,{unique:!0}),e.createObjectStore(at)}(e),Za(e),function(e){e.createObjectStore(Ye)}(e));let i=Ne.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(wt),e.deleteObjectStore(gt),e.deleteObjectStore(At)}(e),Za(e)),i=i.next(()=>function(e){const t=e.store(At),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:le.min().toTimestamp(),targetCount:0};return t.put(Et,n)}(s))),n<4&&r>=4&&(0!==n&&(i=i.next(()=>function(e,t){return t.store(et).J().next(n=>{e.deleteObjectStore(et),e.createObjectStore(et,{keyPath:tt,autoIncrement:!0}).createIndex(nt,rt,{unique:!0});const r=t.store(et),s=n.map(e=>r.put(e));return Ne.waitFor(s)})}(e,s))),i=i.next(()=>{!function(e){e.createObjectStore(kt,{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(i=i.next(()=>this.yi(s))),n<6&&r>=6&&(i=i.next(()=>(function(e){e.createObjectStore(mt)}(e),this.wi(s)))),n<7&&r>=7&&(i=i.next(()=>this.Si(s))),n<8&&r>=8&&(i=i.next(()=>this.bi(e,s))),n<9&&r>=9&&(i=i.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(i=i.next(()=>this.Di(s))),n<11&&r>=11&&(i=i.next(()=>{!function(e){e.createObjectStore(Ct,{keyPath:"bundleId"})}(e),function(e){e.createObjectStore(It,{keyPath:"name"})}(e)})),n<12&&r>=12&&(i=i.next(()=>{!function(e){const t=e.createObjectStore(Bt,{keyPath:Vt});t.createIndex(zt,Gt,{unique:!1}),t.createIndex(Ht,qt,{unique:!1})}(e)})),n<13&&r>=13&&(i=i.next(()=>function(e){const t=e.createObjectStore(ct,{keyPath:lt});t.createIndex(ut,ht),t.createIndex(dt,ft)}(e)).next(()=>this.Ci(e,s)).next(()=>e.deleteObjectStore(Ye))),n<14&&r>=14&&(i=i.next(()=>this.Fi(e,s))),n<15&&r>=15&&(i=i.next(()=>function(e){e.createObjectStore(_t,{keyPath:"indexId",autoIncrement:!0}).createIndex(Pt,"collectionGroup",{unique:!1});e.createObjectStore(jt,{keyPath:Dt}).createIndex(Mt,Rt,{unique:!1});e.createObjectStore(Ot,{keyPath:Lt}).createIndex(Ft,Ut,{unique:!1})}(e))),n<16&&r>=16&&(i=i.next(()=>{t.objectStore(jt).clear()}).next(()=>{t.objectStore(Ot).clear()})),n<17&&r>=17&&(i=i.next(()=>{!function(e){e.createObjectStore(Wt,{keyPath:"name"})}(e)})),n<18&&r>=18&&a.isSafariOrWebkit()&&(i=i.next(()=>{t.objectStore(jt).clear()}).next(()=>{t.objectStore(Ot).clear()})),i}wi(e){let t=0;return e.store(Ye).ee((e,n)=>{t+=oa(n)}).next(()=>{const n={byteSize:t};return e.store(mt).put(pt,n)})}yi(e){const t=e.store($e),n=e.store(et);return t.J().next(t=>Ne.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,Ve],[t.userId,t.lastAcknowledgedBatchId]);return n.J(nt,r).next(n=>Ne.forEach(n,n=>{S(n.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:n.batchId});const r=lo(this.serializer,n);return ia(e,t.userId,r).next(()=>{})}))}))}Si(e){const t=e.store(wt),n=e.store(Ye);return e.store(At).get(Et).next(e=>{const r=[];return n.ee((n,s)=>{const i=new W(n),o=function(e){return[0,We(e)]}(i);r.push(t.get(o).next(n=>n?Ne.resolve():(n=>t.put({targetId:0,path:We(n),sequenceNumber:e.highestListenSequenceNumber}))(i)))}).next(()=>Ne.waitFor(r))})}bi(e,t){e.createObjectStore(Nt,{keyPath:Tt});const n=t.store(Nt),r=new Qo,s=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:We(r)})}};return t.store(Ye).ee({X:!0},(e,t)=>{const n=new W(e);return s(n.popLast())}).next(()=>t.store(at).ee({X:!0},(e,t)=>{let[n,r,i]=e;const o=Je(r);return s(o.popLast())}))}Di(e){const t=e.store(gt);return t.ee((e,n)=>{const r=uo(n),s=ho(this.serializer,r);return t.put(s)})}Ci(e,t){const n=t.store(Ye),r=[];return n.ee((e,n)=>{const s=t.store(ct),i=function(e){return e.document?new J(W.fromString(e.document.name).popFirst(5)):e.noDocument?J.fromSegments(e.noDocument.path):e.unknownDocument?J.fromSegments(e.unknownDocument.path):b(36783)}(n).path.toArray(),o={prefixPath:i.slice(0,i.length-2),collectionGroup:i[i.length-2],documentId:i[i.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(s.put(o))}).next(()=>Ne.waitFor(r))}Fi(e,t){const n=t.store(et),r=Ca(this.serializer),s=new Wa(Ka.mi,this.serializer.yt);return n.J().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:gs();lo(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),Ne.forEach(n,(e,n)=>{const i=new d(n),o=bo.wt(this.serializer,i),a=s.getIndexManager(i),c=aa.wt(i,this.serializer,a,s.referenceDelegate);return new Oa(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new tn(t,Be.ce),e).next()})})}}function Za(e){e.createObjectStore(wt,{keyPath:bt}).createIndex(xt,St,{unique:!0}),e.createObjectStore(gt,{keyPath:"targetId"}).createIndex(yt,vt,{unique:!0}),e.createObjectStore(At)}const Xa="IndexedDbPersistence",$a=18e5,ec=5e3,tc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",nc="main";class rc{constructor(e,t,n,r,s,i,o,a,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:18;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Mi=s,this.window=i,this.document=o,this.xi=c,this.Oi=l,this.Ni=u,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=e=>Promise.resolve(),!rc.v())throw new N(A.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Aa(this,r),this.$i=t+nc,this.serializer=new so(a),this.Ui=new Ce(this.$i,this.Ni,new Ya(this.serializer)),this.hi=new So,this.Pi=new fa(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ca(this.serializer),this.Ii=new yo,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,!1===l&&y(Xa,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new N(A.FAILED_PRECONDITION,tc);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Pi.getHighestSequenceNumber(e))}).then(e=>{this.ci=new Be(e,this.xi)}).then(()=>{this.li=!0}).catch(e=>(this.Ui&&this.Ui.close(),Promise.reject(e)))}Ji(e){return this.Qi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ui.$(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Mi.enqueueAndForget(async()=>{this.started&&await this.Wi()}))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ic(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Hi(e).next(e=>{e||(this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)))})}).next(()=>this.Yi(e)).next(t=>this.isPrimary&&!t?this.Zi(e).next(()=>!1):!!t&&this.Xi(e).next(()=>!0))).catch(e=>{if(je(e))return g(Xa,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return g(Xa,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Mi.enqueueRetryable(()=>this.Qi(e)),this.isPrimary=e})}Hi(e){return sc(e).get(Xe).next(e=>Ne.resolve(this.es(e)))}ts(e){return ic(e).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,$a)){this.qi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=nn(e,kt);return t.J().next(e=>{const n=this.ss(e,$a),r=e.filter(e=>-1===n.indexOf(e));return Ne.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Ki)for(const t of e)this.Ki.removeItem(this._s(t.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Wi().then(()=>this.ns()).then(()=>this.ji()))}es(e){return!!e&&e.ownerId===this.clientId}Yi(e){return this.Oi?Ne.resolve(!0):sc(e).get(Xe).next(t=>{if(null!==t&&this.rs(t.leaseTimestampMs,ec)&&!this.us(t.ownerId)){if(this.es(t)&&this.networkEnabled)return!0;if(!this.es(t)){if(!t.allowTabSynchronization)throw new N(A.FAILED_PRECONDITION,tc);return!1}}return!(!this.networkEnabled||!this.inForeground)||ic(e).J().next(e=>void 0===this.ss(e,ec).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&g(Xa,"Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Ze,kt],e=>{const t=new tn(e,Be.ce);return this.Zi(t).next(()=>this.ts(t))}),this.Ui.close(),this.Ps()}ss(e,t){return e.filter(e=>this.rs(e.updateTimeMs,t)&&!this.us(e.clientId))}Ts(){return this.runTransaction("getActiveClients","readonly",e=>ic(e).J().next(e=>this.ss(e,$a).map(e=>e.clientId)))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(e,t){return aa.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Yo(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return bo.wt(this.serializer,e)}getBundleCache(){return this.Ii}runTransaction(e,t,n){g(Xa,"Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",s=function(e){return 18===e?en:17===e?$t:16===e?Xt:15===e?Zt:14===e?Yt:13===e?Jt:12===e?Kt:11===e?Qt:void b(60245)}(this.Ni);let i;return this.Ui.runTransaction(e,r,s,r=>(i=new tn(r,this.ci?this.ci.next():Be.ce),"readwrite-primary"===t?this.Hi(i).next(e=>!!e||this.Yi(i)).next(t=>{if(!t)throw y("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.Mi.enqueueRetryable(()=>this.Qi(!1)),new N(A.FAILED_PRECONDITION,Se);return n(i)}).next(e=>this.Xi(i).next(()=>e)):this.Is(i).next(()=>n(i)))).then(e=>(i.raiseOnCommittedEvent(),e))}Is(e){return sc(e).get(Xe).next(e=>{if(null!==e&&this.rs(e.leaseTimestampMs,ec)&&!this.us(e.ownerId)&&!this.es(e)&&!(this.Oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new N(A.FAILED_PRECONDITION,tc)})}Xi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return sc(e).put(Xe,t)}static v(){return Ce.v()}Zi(e){const t=sc(e);return t.get(Xe).next(e=>this.es(e)?(g(Xa,"Releasing primary lease."),t.delete(Xe)):Ne.resolve())}rs(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(y("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}Gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Li=()=>{this.Mi.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Wi()))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground="visible"===this.document.visibilityState)}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Bi=()=>{this.cs();const e=/(?:Version|Mobile)\/1[456]/;a.isSafari()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(e){try{var t;const n=null!==(null===(t=this.Ki)||void 0===t?void 0:t.getItem(this._s(e)));return g(Xa,"Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return y(Xa,"Failed to get zombied client id.",e),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(e){y("Failed to set zombie client id.",e)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch(e){}}_s(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function sc(e){return nn(e,Ze)}function ic(e){return nn(e,kt)}function oc(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class ac{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=gs(),r=gs();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new ac(e,t.fromCache,n,r)}}class cc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class lc{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=a.isSafari()?8:Ie(a.getUA())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new cc;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(p()<=o.LogLevel.DEBUG&&g("QueryEngine","SDK will not create cache indexes for query:",es(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Ne.resolve()):(p()<=o.LogLevel.DEBUG&&g("QueryEngine","Query:",es(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(p()<=o.LogLevel.DEBUG&&g("QueryEngine","The SDK decides to create cache indexes for query:",es(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qr(t))):Ne.resolve())}ys(e,t){if(Hr(t))return Ne.resolve(null);let n=Qr(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Zr(t,null,"F"),n=Qr(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=gs(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n.readTime)?this.ys(e,Zr(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return Hr(t)||r.isEqual(le.min())?Ne.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(t,s);return this.Cs(t,i,n,r)?Ne.resolve(null):(p()<=o.LogLevel.DEBUG&&g("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),es(t)),this.vs(e,i,t,ve(r,ue)).next(e=>e))})}Ds(e,t){let n=new hn(rs(e));return t.forEach((t,r)=>{ts(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return p()<=o.LogLevel.DEBUG&&g("QueryEngine","Using full collection scan to execute query:",es(t)),this.ps.getDocumentsMatchingQuery(e,t,be.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const uc="LocalStore";class hc{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new cn(L),this.xs=new is(e=>Rr(e),Or),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Oa(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function dc(e,t,n,r){return new hc(e,t,n,r)}async function fc(e,t){const n=E(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let o=gs();for(const e of r){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:i}))})})}function mc(e){const t=E(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function pc(e,t,n){let r=gs(),s=gs();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=as();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(le.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):g(uc,"Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{ks:r,qs:s}})}function gc(e,t){const n=E(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ve),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function yc(e,t){const n=E(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(s=>s?(r=s,Ne.resolve(r)):n.Pi.allocateTargetId(e).next(s=>(r=new ro(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function vc(e,t,n){const r=E(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!je(e))throw e;g(uc,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function wc(e,t,n){const r=E(e);let s=le.min(),i=gs();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=E(e),s=r.xs.get(n);return void 0!==s?Ne.resolve(r.Ms.get(s)):r.Pi.getTargetData(t,n)}(r,e,Qr(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?s:le.min(),n?i:gs())).next(e=>(Sc(r,ns(t),e),{documents:e,Qs:i})))}function bc(e,t){const n=E(e),r=E(n.Pi),s=n.Ms.get(t);return s?Promise.resolve(s.target):n.persistence.runTransaction("Get target data","readonly",e=>r.At(e,t).next(e=>e?e.target:null))}function xc(e,t){const n=E(e),r=n.Os.get(t)||le.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.Ns.getAllFromCollectionGroup(e,t,ve(r,ue),Number.MAX_SAFE_INTEGER)).then(e=>(Sc(n,t,e),e))}function Sc(e,t,n){let r=e.Os.get(t)||le.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}async function Ec(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gs();const r=await yc(e,Qr(fo(t.bundledQuery))),s=E(e);return s.persistence.runTransaction("Save named query","readwrite",e=>{const i=_i(t.readTime);if(r.snapshotVersion.compareTo(i)>=0)return s.Ii.saveNamedQuery(e,t);const o=r.withResumeToken(gn.EMPTY_BYTE_STRING,i);return s.Ms=s.Ms.insert(o.targetId,o),s.Pi.updateTargetData(e,o).next(()=>s.Pi.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>s.Pi.addMatchingKeys(e,n,r.targetId)).next(()=>s.Ii.saveNamedQuery(e,t))})}const Ac="firestore_clients";function Nc(e,t){return"".concat(Ac,"_").concat(e,"_").concat(t)}const Tc="firestore_mutations";function kc(e,t,n){let r="".concat(Tc,"_").concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}const Cc="firestore_targets";function Ic(e,t){return"".concat(Cc,"_").concat(e,"_").concat(t)}const _c="SharedClientState";class Pc{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Ws(e,t,n){const r=JSON.parse(n);let s,i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code,i&&(s=new N(r.error.code,r.error.message))),i?new Pc(e,t,r.state,s):(y(_c,"Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class jc{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Ws(e,t){const n=JSON.parse(t);let r,s="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return s&&n.error&&(s="string"==typeof n.error.message&&"string"==typeof n.error.code,s&&(r=new N(n.error.code,n.error.message))),s?new jc(e,n.state,r):(y(_c,"Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}Gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dc{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Ws(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,s=vs();for(let i=0;r&&i<n.activeTargetIds.length;++i)r=He(n.activeTargetIds[i]),s=s.add(n.activeTargetIds[i]);return r?new Dc(e,s):(y(_c,"Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class Mc{constructor(e,t){this.clientId=e,this.onlineState=t}static Ws(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Mc(t.clientId,t.onlineState):(y(_c,"Failed to parse online state: ".concat(e)),null)}}class Rc{constructor(){this.activeTargetIds=vs()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Oc{constructor(e,t,n,r,s){this.window=e,this.Mi=t,this.persistenceKey=n,this.Js=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Hs=this.Ys.bind(this),this.Zs=new cn(L),this.started=!1,this.Xs=[];const i=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.eo=Nc(this.persistenceKey,this.Js),this.no=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Zs=this.Zs.insert(this.Js,new Rc),this.ro=new RegExp("^".concat(Ac,"_").concat(i,"_([^_]*)$")),this.io=new RegExp("^".concat(Tc,"_").concat(i,"_(\\d+)(?:_(.*))?$")),this.so=new RegExp("^".concat(Cc,"_").concat(i,"_(\\d+)$")),this.oo=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._o=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Hs)}static v(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Ts();for(const n of e){if(n===this.Js)continue;const e=this.getItem(Nc(this.persistenceKey,n));if(e){const t=Dc.Ws(n,e);t&&(this.Zs=this.Zs.insert(t.clientId,t))}}this.ao();const t=this.storage.getItem(this.oo);if(t){const e=this.uo(t);e&&this.co(e)}for(const n of this.Xs)this.Ys(n);this.Xs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.no,JSON.stringify(e))}getAllActiveQueryTargets(){return this.lo(this.Zs)}isActiveQueryTarget(e){let t=!1;return this.Zs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ho(e,"pending")}updateMutationState(e,t,n){this.ho(e,t,n),this.Po(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(Ic(this.persistenceKey,e));if(t){const r=jc.Ws(e,t);r&&(n=r.state)}}return t&&this.To.zs(e),this.ao(),n}removeLocalQueryTarget(e){this.To.js(e),this.ao()}isLocalQueryTarget(e){return this.To.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ic(this.persistenceKey,e))}updateQueryState(e,t,n){this.Io(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Po(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Eo(e)}notifyBundleLoaded(e){this.Ao(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Hs),this.removeItem(this.eo),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return g(_c,"READ",e,t),t}setItem(e,t){g(_c,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){g(_c,"REMOVE",e),this.storage.removeItem(e)}Ys(e){const t=e;if(t.storageArea===this.storage){if(g(_c,"EVENT",t.key,t.newValue),t.key===this.eo)return void y("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Mi.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.ro.test(t.key)){if(null==t.newValue){const e=this.Ro(t.key);return this.Vo(e,null)}{const e=this.mo(t.key,t.newValue);if(e)return this.Vo(e.clientId,e)}}else if(this.io.test(t.key)){if(null!==t.newValue){const e=this.fo(t.key,t.newValue);if(e)return this.po(e)}}else if(this.so.test(t.key)){if(null!==t.newValue){const e=this.yo(t.key,t.newValue);if(e)return this.wo(e)}}else if(t.key===this.oo){if(null!==t.newValue){const e=this.uo(t.newValue);if(e)return this.co(e)}}else if(t.key===this.no){const e=function(e){let t=Be.ce;if(null!=e)try{const n=JSON.parse(e);S("number"==typeof n,30636,{So:e}),t=n}catch(e){y(_c,"Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Be.ce&&this.sequenceNumberHandler(e)}else if(t.key===this._o){const e=this.bo(t.newValue);await Promise.all(e.map(e=>this.syncEngine.Do(e)))}}else this.Xs.push(t)})}}get To(){return this.Zs.get(this.Js)}ao(){this.setItem(this.eo,this.To.Gs())}ho(e,t,n){const r=new Pc(this.currentUser,e,t,n),s=kc(this.persistenceKey,this.currentUser,e);this.setItem(s,r.Gs())}Po(e){const t=kc(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Eo(e){const t={clientId:this.Js,onlineState:e};this.storage.setItem(this.oo,JSON.stringify(t))}Io(e,t,n){const r=Ic(this.persistenceKey,e),s=new jc(e,t,n);this.setItem(r,s.Gs())}Ao(e){const t=JSON.stringify(Array.from(e));this.setItem(this._o,t)}Ro(e){const t=this.ro.exec(e);return t?t[1]:null}mo(e,t){const n=this.Ro(e);return Dc.Ws(n,t)}fo(e,t){const n=this.io.exec(e),r=Number(n[1]),s=void 0!==n[2]?n[2]:null;return Pc.Ws(new d(s),r,t)}yo(e,t){const n=this.so.exec(e),r=Number(n[1]);return jc.Ws(r,t)}uo(e){return Mc.Ws(e)}bo(e){return JSON.parse(e)}async po(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Co(e.batchId,e.state,e.error);g(_c,"Ignoring mutation for non-active user ".concat(e.user.uid))}wo(e){return this.syncEngine.vo(e.targetId,e.state,e.error)}Vo(e,t){const n=t?this.Zs.insert(e,t):this.Zs.remove(e),r=this.lo(this.Zs),s=this.lo(n),i=[],o=[];return s.forEach(e=>{r.has(e)||i.push(e)}),r.forEach(e=>{s.has(e)||o.push(e)}),this.syncEngine.Fo(i,o).then(()=>{this.Zs=n})}co(e){this.Zs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}lo(e){let t=vs();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class Lc{constructor(){this.Mo=new Rc,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Rc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fc{Oo(e){}shutdown(){}}const Uc="ConnectivityMonitor";class Bc{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){g(Uc,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){g(Uc,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Vc=null;function zc(){return null===Vc?Vc=268435456+Math.round(2147483648*Math.random()):Vc++,"0x"+Vc.toString(16)}const Gc="RestConnection",Hc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class qc{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===In?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,s){const i=zc(),o=this.zo(e,t.toUriEncodedString());g(Gc,"Sending RPC '".concat(e,"' ").concat(i,":"),o,n);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,r,s);const{host:l}=new URL(o),u=a.isCloudWorkstation(l);return this.Jo(e,o,c,n,u).then(t=>(g(Gc,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw v(Gc,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",o,"request:",n),t})}Ho(e,t,n,r,s,i){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+f,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Hc[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Wc{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Qc="WebChannelConnection";class Kc extends qc{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=zc();return new Promise((s,o)=>{const a=new l.XhrIo;a.setWithCredentials(!0),a.listenOnce(l.EventType.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case l.ErrorCode.NO_ERROR:const n=a.getResponseJson();g(Qc,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(n)),s(n);break;case l.ErrorCode.TIMEOUT:g(Qc,"RPC '".concat(e,"' ").concat(i," timed out")),o(new N(A.DEADLINE_EXCEEDED,"Request time out"));break;case l.ErrorCode.HTTP_ERROR:const r=a.getStatus();if(g(Qc,"RPC '".concat(e,"' ").concat(i," failed with status:"),r,"response text:",a.getResponseText()),r>0){var t;let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(A).indexOf(t)>=0?t:A.UNKNOWN}(n.status);o(new N(e,n.message))}else o(new N(A.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new N(A.UNAVAILABLE,"Connection failed."));break;default:b(9055,{l_:e,streamId:i,h_:a.getLastErrorCode(),P_:a.getLastError()})}}finally{g(Qc,"RPC '".concat(e,"' ").concat(i," completed."))}});const c=JSON.stringify(r);g(Qc,"RPC '".concat(e,"' ").concat(i," sending request:"),r),a.send(t,"POST",c,n,15)})}T_(e,t,n){const r=zc(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=l.createWebChannelTransport(),o=l.getStatEventTarget(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;void 0!==c&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.useFetchStreams=!0),this.jo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const u=s.join("");g(Qc,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(u),a);const h=i.createWebChannel(u,a);this.I_(h);let d=!1,f=!1;const m=new Wc({Yo:t=>{f?g(Qc,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(g(Qc,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),h.open(),d=!0),g(Qc,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),h.send(t))},Zo:()=>h.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(h,l.WebChannel.EventType.OPEN,()=>{f||(g(Qc,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),m.o_())}),p(h,l.WebChannel.EventType.CLOSE,()=>{f||(f=!0,g(Qc,"RPC '".concat(e,"' stream ").concat(r," transport closed")),m.a_(),this.E_(h))}),p(h,l.WebChannel.EventType.ERROR,t=>{f||(f=!0,v(Qc,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),m.a_(new N(A.UNAVAILABLE,"The operation could not be completed")))}),p(h,l.WebChannel.EventType.MESSAGE,t=>{if(!f){var n;const s=t.data[0];S(!!s,16349);const i=s,o=(null===i||void 0===i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){g(Qc,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);const t=o.status;let n=function(e){const t=ni[e];if(void 0!==t)return ii(t)}(t),s=o.message;void 0===n&&(n=A.INTERNAL,s="Unknown error status: "+t+" with message "+o.message),f=!0,m.a_(new N(n,s)),h.close()}else g(Qc,"RPC '".concat(e,"' stream ").concat(r," received:"),s),m.u_(s)}}),p(o,l.Event.STAT_EVENT,t=>{t.stat===l.Stat.PROXY?g(Qc,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===l.Stat.NOPROXY&&g(Qc,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{m.__()},0),m}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Jc(){return"undefined"!=typeof window?window:null}function Yc(){return"undefined"!=typeof document?document:null}function Zc(e){return new Ni(e,!0)}class Xc{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&g("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const $c="PersistentStream";class el{constructor(e,t,n,r,s,i,o,a){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Xc(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===A.RESOURCE_EXHAUSTED?(y(t.toString()),y("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===A.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new N(A.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return g($c,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(g($c,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class tl extends el{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:b(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(S(void 0===t||"string"==typeof t,58123),gn.fromBase64String(t||"")):(S(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),gn.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?A.UNKNOWN:ii(e.code);return new N(t,e.message||"")}(o);n=new yi(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ri(e,r.document.name),i=_i(r.document.updateTime),o=r.document.createTime?_i(r.document.createTime):le.min(),a=new or({mapValue:{fields:r.document.fields}}),c=cr.newFoundDocument(s,i,o,a),l=r.targetIds||[],u=r.removedTargetIds||[];n=new pi(l,u,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Ri(e,r.document),i=r.readTime?_i(r.readTime):le.min(),o=cr.newNoDocument(s,i),a=r.removedTargetIds||[];n=new pi([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Ri(e,r.document),i=r.removedTargetIds||[];n=new pi([],i,s,null)}else{if(!("filter"in t))return b(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new ti(r,s),o=e.targetId;n=new gi(o,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return le.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?le.min():t.readTime?_i(t.readTime):le.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=Fi(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Lr(r)?{documents:Hi(e,r)}:{query:qi(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Ci(e,t.resumeToken);const r=Ti(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(le.min())>0){n.readTime=ki(e,t.snapshotVersion.toTimestamp());const r=Ti(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return b(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=Fi(this.serializer),t.removeTarget=e,this.q_(t)}}class nl extends el{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return S(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,S(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){S(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(S(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?_i(e.updateTime):_i(t);return n.isEqual(le.min())&&(n=_i(t)),new Rs(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=_i(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=Fi(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>zi(this.serializer,e))};this.q_(t)}}class rl{}class sl extends rl{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new N(A.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,o]=s;return this.connection.Go(e,ji(t,n),r,i,o)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new N(A.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[o,a]=i;return this.connection.Ho(e,ji(t,n),r,o,a,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===A.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new N(A.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class il{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(y(t),this.aa=!1):g("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const ol="RemoteStore";class al{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{gl(this)&&(g(ol,"Restarting streams for network reachability change."),await async function(e){const t=E(e);t.Ea.add(4),await ll(t),t.Ra.set("Unknown"),t.Ea.delete(4),await cl(t)}(this))})}),this.Ra=new il(n,r)}}async function cl(e){if(gl(e))for(const t of e.da)await t(!0)}async function ll(e){for(const t of e.da)await t(!1)}function ul(e,t){const n=E(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),pl(n)?ml(n):Rl(n).O_()&&dl(n,t))}function hl(e,t){const n=E(e),r=Rl(n);n.Ia.delete(t),r.O_()&&fl(n,t),0===n.Ia.size&&(r.O_()?r.L_():gl(n)&&n.Ra.set("Unknown"))}function dl(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(le.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Rl(e).Y_(t)}function fl(e,t){e.Va.Ue(t),Rl(e).Z_(t)}function ml(e){e.Va=new wi({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Rl(e).start(),e.Ra.ua()}function pl(e){return gl(e)&&!Rl(e).x_()&&e.Ia.size>0}function gl(e){return 0===E(e).Ea.size}function yl(e){e.Va=void 0}async function vl(e){e.Ra.set("Online")}async function wl(e){e.Ia.forEach((t,n)=>{dl(e,t)})}async function bl(e,t){yl(e),pl(e)?(e.Ra.ha(t),ml(e)):e.Ra.set("Unknown")}async function xl(e,t,n){if(e.Ra.set("Online"),t instanceof yi&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){g(ol,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Sl(e,n)}else if(t instanceof pi?e.Va.Ze(t):t instanceof gi?e.Va.st(t):e.Va.tt(t),!n.isEqual(le.min()))try{const t=await mc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ia.get(r);s&&e.Ia.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(gn.EMPTY_BYTE_STRING,r.snapshotVersion)),fl(e,t);const s=new ro(r.target,t,n,r.sequenceNumber);dl(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){g(ol,"Failed to raise snapshot:",t),await Sl(e,t)}}async function Sl(e,t,n){if(!je(t))throw t;e.Ea.add(1),await ll(e),e.Ra.set("Offline"),n||(n=()=>mc(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{g(ol,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await cl(e)})}function El(e,t){return t().catch(n=>Sl(e,n,t))}async function Al(e){const t=E(e),n=Ol(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ve;for(;Nl(t);)try{const e=await gc(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Tl(t,e)}catch(e){await Sl(t,e)}kl(t)&&Cl(t)}function Nl(e){return gl(e)&&e.Ta.length<10}function Tl(e,t){e.Ta.push(t);const n=Ol(e);n.O_()&&n.X_&&n.ea(t.mutations)}function kl(e){return gl(e)&&!Ol(e).x_()&&e.Ta.length>0}function Cl(e){Ol(e).start()}async function Il(e){Ol(e).ra()}async function _l(e){const t=Ol(e);for(const n of e.Ta)t.ea(n.mutations)}async function Pl(e,t,n){const r=e.Ta.shift(),s=Xs.from(r,t,n);await El(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Al(e)}async function jl(e,t){t&&Ol(e).X_&&await async function(e,t){if(function(e){return si(e)&&e!==A.ABORTED}(t.code)){const n=e.Ta.shift();Ol(e).B_(),await El(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Al(e)}}(e,t),kl(e)&&Cl(e)}async function Dl(e,t){const n=E(e);n.asyncQueue.verifyOperationInProgress(),g(ol,"RemoteStore received new credentials");const r=gl(n);n.Ea.add(3),await ll(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await cl(n)}async function Ml(e,t){const n=E(e);t?(n.Ea.delete(2),await cl(n)):t||(n.Ea.add(2),await ll(n),n.Ra.set("Unknown"))}function Rl(e){return e.ma||(e.ma=function(e,t,n){const r=E(e);return r.sa(),new tl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:vl.bind(null,e),t_:wl.bind(null,e),r_:bl.bind(null,e),H_:xl.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),pl(e)?ml(e):e.Ra.set("Unknown")):(await e.ma.stop(),yl(e))})),e.ma}function Ol(e){return e.fa||(e.fa=function(e,t,n){const r=E(e);return r.sa(),new nl(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Il.bind(null,e),r_:jl.bind(null,e),ta:_l.bind(null,e),na:Pl.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Al(e)):(await e.fa.stop(),e.Ta.length>0&&(g(ol,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Ll{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new T,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new Ll(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new N(A.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Fl(e,t){if(y("AsyncQueue","".concat(t,": ").concat(e)),je(e))return new N(A.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ul{static emptySet(e){return new Ul(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||J.comparator(t.key,n.key):(e,t)=>J.comparator(e.key,t.key),this.keyedMap=ls(),this.sortedSet=new cn(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ul))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ul;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Bl{constructor(){this.ga=new cn(J.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):b(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Vl{constructor(e,t,n,r,s,i,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Vl(e,t,Ul.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xr(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class zl{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Gl{constructor(){this.queries=Hl(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=E(e),r=n.queries;n.queries=Hl(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new N(A.ABORTED,"Firestore shutting down"))}}function Hl(){return new is(e=>$r(e),Xr)}async function ql(e,t){const n=E(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new zl,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Fl(e,"Initialization of query '".concat(es(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Jl(n)}async function Wl(e,t){const n=E(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Ql(e,t){const n=E(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(s)&&(r=!0);t.wa=s}}r&&Jl(n)}function Kl(e,t,n){const r=E(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Jl(e){e.Ca.forEach(e=>{e.next()})}var Yl,Zl;(Zl=Yl||(Yl={})).Ma="default",Zl.Cache="cache";class Xl{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Vl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Vl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Yl.Cache}}class $l{constructor(e,t){this.Qa=e,this.byteLength=t}$a(){return"metadata"in this.Qa}}class eu{constructor(e){this.serializer=e}$s(e){return Ri(this.serializer,e)}Us(e){return e.metadata.exists?Vi(this.serializer,e.document,!1):cr.newNoDocument(this.$s(e.metadata.name),this.Ks(e.metadata.readTime))}Ks(e){return _i(e)}}class tu{constructor(e,t){this.Ua=e,this.serializer=t,this.Ka=[],this.Wa=[],this.collectionGroups=new Set,this.progress=nu(e)}get queries(){return this.Ka}get documents(){return this.Wa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Qa.namedQuery)this.Ka.push(e.Qa.namedQuery);else if(e.Qa.documentMetadata){this.Wa.push({metadata:e.Qa.documentMetadata}),e.Qa.documentMetadata.exists||++t;const n=W.fromString(e.Qa.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Qa.document&&(this.Wa[this.Wa.length-1].document=e.Qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,r({},this.progress)):null}za(e){const t=new Map,n=new eu(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.$s(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||gs()).add(e);t.set(n,r)}}return t}async ja(e){const t=await async function(e,t,n,r){const s=E(e);let i=gs(),o=as();for(const l of n){const e=t.$s(l.metadata.name);l.document&&(i=i.add(e));const n=t.Us(l);n.setReadTime(t.Ks(l.metadata.readTime)),o=o.insert(e,n)}const a=s.Ns.newChangeBuffer({trackRemovals:!0}),c=await yc(s,function(e){return Qr(Gr(W.fromString("__bundle__/docs/".concat(e))))}(r));return s.persistence.runTransaction("Apply bundle documents","readwrite",e=>pc(e,a,o).next(t=>(a.apply(e),t)).next(t=>s.Pi.removeMatchingKeysForTargetId(e,c.targetId).next(()=>s.Pi.addMatchingKeys(e,i,c.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(e,t.ks,t.qs)).next(()=>t.ks)))}(e,new eu(this.serializer),this.Wa,this.Ua.id),n=this.za(this.documents);for(const r of this.Ka)await Ec(e,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,Ja:this.collectionGroups,Ha:t}}}function nu(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class ru{constructor(e){this.key=e}}class su{constructor(e){this.key=e}}class iu{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=gs(),this.mutatedKeys=gs(),this.eu=rs(e),this.tu=new Ul(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Bl,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),u=ts(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.su(l,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.eu(u,a)>0||c&&this.eu(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),f=!0):l&&!u&&(n.track({type:1,doc:l}),f=!0,(a||c)&&(o=!0)),f&&(u?(i=i.add(u),s=d?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:o,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return b(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const o=t&&!r?this._u():[],a=0===this.Xa.size&&this.current&&!r?1:0,c=a!==this.Za;return this.Za=a,0!==i.length||c?{snapshot:new Vl(this.query,e.tu,s,i,e.mutatedKeys,0===a,c,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Bl,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=gs(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new su(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new ru(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=gs();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Vl.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const ou="SyncEngine";class au{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class cu{constructor(e){this.key=e,this.hu=!1}}class lu{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new is(e=>$r(e),Xr),this.Iu=new Map,this.Eu=new Set,this.du=new cn(J.comparator),this.Au=new Map,this.Ru=new Ba,this.Vu={},this.mu=new Map,this.fu=da.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function uu(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Uu(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await du(r,t,n,!0),s}async function hu(e,t){const n=Uu(e);await du(n,t,!0,!1)}async function du(e,t,n,r){const s=await yc(e.localStore,Qr(t)),i=s.targetId,o=e.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await fu(e,t,i,"current"===o,s.resumeToken)),e.isPrimaryClient&&n&&ul(e.remoteStore,s),a}async function fu(e,t,n,r,s){e.pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.ru(n);s.Cs&&(s=await wc(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,s)}));const i=r&&r.targetChanges.get(t.targetId),o=r&&null!=r.targetMismatches.get(t.targetId),a=t.view.applyChanges(s,e.isPrimaryClient,i,o);return Nu(e,t.targetId,a.au),a.snapshot}(e,t,n,r);const i=await wc(e.localStore,t,!0),o=new iu(t,i.Qs),a=o.ru(i.documents),c=mi.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),l=o.applyChanges(a,e.isPrimaryClient,c);Nu(e,n,l.au);const u=new au(t,n,o);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),l.snapshot}async function mu(e,t,n){const r=E(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(e=>!Xr(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await vc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&hl(r.remoteStore,s.targetId),Eu(r,s.targetId)}).catch(Ae)):(Eu(r,s.targetId),await vc(r.localStore,s.targetId,!0))}async function pu(e,t){const n=E(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),hl(n.remoteStore,r.targetId))}async function gu(e,t){const n=E(e);try{const e=await function(e,t){const n=E(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const o=[];t.targetChanges.forEach((i,a)=>{const c=s.get(a);if(!c)return;o.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,a)));let l=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?l=l.withResumeToken(gn.EMPTY_BYTE_STRING,le.min()).withLastLimboFreeSnapshotVersion(le.min()):i.resumeToken.approximateByteSize()>0&&(l=l.withResumeToken(i.resumeToken,r)),s=s.insert(a,l),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,l,i)&&o.push(n.Pi.updateTargetData(e,l))});let a=as(),c=gs();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(pc(e,i,t.documentUpdates).next(e=>{a=e.ks,c=e.qs})),!r.isEqual(le.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Ne.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,c)).next(()=>a)}).then(e=>(n.Ms=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(S(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?S(r.hu,14607):e.removedDocuments.size>0&&(S(r.hu,42227),r.hu=!1))}),await Cu(n,e,t)}catch(e){await Ae(e)}}function yu(e,t,n){const r=E(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=E(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&Jl(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function vu(e,t,n){const r=E(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let e=new cn(J.comparator);e=e.insert(i,cr.newNoDocument(i,le.min()));const n=gs().add(i),s=new fi(le.min(),new Map,new cn(L),e,n);await gu(r,s),r.du=r.du.remove(i),r.Au.delete(t),ku(r)}else await vc(r.localStore,t,!1).then(()=>Eu(r,t,n)).catch(Ae)}async function wu(e,t){const n=E(e),r=t.batch.batchId;try{const e=await function(e,t){const n=E(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=Ne.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);S(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=gs();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Su(n,r,null),xu(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cu(n,e)}catch(e){await Ae(e)}}async function bu(e,t,n){const r=E(e);try{const e=await function(e,t){const n=E(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(S(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Su(r,t,n),xu(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Cu(r,e)}catch(n){await Ae(n)}}function xu(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Su(e,t,n){const r=E(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function Eu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Au(e,t)})}function Au(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(hl(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),ku(e))}function Nu(e,t,n){for(const r of n)r instanceof ru?(e.Ru.addReference(r.key,t),Tu(e,r)):r instanceof su?(g(ou,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Au(e,r.key)):b(19791,{wu:r})}function Tu(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(g(ou,"New document in limbo: "+n),e.Eu.add(r),ku(e))}function ku(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new J(W.fromString(t)),r=e.fu.next();e.Au.set(r,new cu(n)),e.du=e.du.insert(n,r),ul(e.remoteStore,new ro(Qr(Gr(n.path)),r,"TargetPurposeLimboResolution",Be.ce))}}async function Cu(e,t,n){const r=E(e),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((e,a)=>{o.push(r.pu(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const s=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(a.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(a.targetId,s?"current":"not-current")}if(e){s.push(e);const t=ac.As(a.targetId,e);i.push(t)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(e,t){const n=E(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ne.forEach(t,t=>Ne.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ne.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!je(e))throw e;g(uc,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,i))}async function Iu(e,t){const n=E(e);if(!n.currentUser.isEqual(t)){g(ou,"User change. New user:",t.toKey());const e=await fc(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new N(A.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Cu(n,e.Ls)}}function _u(e,t){const n=E(e),r=n.Au.get(t);if(r&&r.hu)return gs().add(r.key);{let e=gs();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}async function Pu(e,t){const n=E(e),r=await wc(n.localStore,t.query,!0),s=t.view.cu(r);return n.isPrimaryClient&&Nu(n,t.targetId,s.au),s}async function ju(e,t){const n=E(e);return xc(n.localStore,t).then(e=>Cu(n,e))}async function Du(e,t,n,r){const s=E(e),i=await function(e,t){const n=E(e),r=E(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.er(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):Ne.resolve(null)))}(s.localStore,t);null!==i?("pending"===n?await Al(s.remoteStore):"acknowledged"===n||"rejected"===n?(Su(s,t,r||null),xu(s,t),function(e,t){E(E(e).mutationQueue).ir(t)}(s.localStore,t)):b(6720,"Unknown batchState",{Su:n}),await Cu(s,i)):g(ou,"Cannot apply mutation batch with id: "+t)}async function Mu(e,t,n){const r=E(e),s=[],i=[];for(const o of t){let e;const t=r.Iu.get(o);if(t&&0!==t.length){e=await yc(r.localStore,Qr(t[0]));for(const e of t){const t=r.Tu.get(e),n=await Pu(r,t);n.snapshot&&i.push(n.snapshot)}}else{const t=await bc(r.localStore,o);e=await yc(r.localStore,t),await fu(r,Ru(t),o,!1,e.resumeToken)}s.push(e)}return r.Pu.H_(i),s}function Ru(e){return zr(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ou(e){return function(e){return E(E(e).persistence).Ts()}(E(e).localStore)}async function Lu(e,t,n,r){const s=E(e);if(s.gu)return void g(ou,"Ignoring unexpected query state notification.");const i=s.Iu.get(t);if(i&&i.length>0)switch(n){case"current":case"not-current":{const e=await xc(s.localStore,ns(i[0])),r=fi.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,gn.EMPTY_BYTE_STRING);await Cu(s,e,r);break}case"rejected":await vc(s.localStore,t,!0),Eu(s,t,r);break;default:b(64155,n)}}async function Fu(e,t,n){const r=Uu(e);if(r.gu){for(const e of t){if(r.Iu.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){g(ou,"Adding an already active target "+e);continue}const t=await bc(r.localStore,e),n=await yc(r.localStore,t);await fu(r,Ru(t),n.targetId,!1,n.resumeToken),ul(r.remoteStore,n)}for(const e of n)r.Iu.has(e)&&await vc(r.localStore,e,!1).then(()=>{hl(r.remoteStore,e),Eu(r,e)}).catch(Ae)}}function Uu(e){const t=E(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gu.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=_u.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vu.bind(null,t),t.Pu.H_=Ql.bind(null,t.eventManager),t.Pu.yu=Kl.bind(null,t.eventManager),t}function Bu(e){const t=E(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=wu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bu.bind(null,t),t}class Vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return dc(this.persistence,new lc,e.initialUser,this.serializer)}Cu(e){return new Wa(Ka.mi,this.serializer)}Du(e){return new Lc}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vu.provider={build:()=>new Vu};class zu extends Vu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){S(this.persistence.referenceDelegate instanceof Ja,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new xa(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?sa.withCacheSize(this.cacheSizeBytes):sa.DEFAULT;return new Wa(e=>Ja.mi(e,t),this.serializer)}}class Gu extends Vu{constructor(e,t,n){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await Bu(this.xu.syncEngine),await Al(this.xu.remoteStore),await this.persistence.Ji(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){return dc(this.persistence,new lc,e.initialUser,this.serializer)}Fu(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new xa(n,e.asyncQueue,t)}Mu(e,t){const n=new Ue(t,this.persistence);return new Fe(e.asyncQueue,n)}Cu(e){const t=oc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?sa.withCacheSize(this.cacheSizeBytes):sa.DEFAULT;return new rc(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Jc(),Yc(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new Lc}}class Hu extends Gu{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.xu.syncEngine;this.sharedClientState instanceof Oc&&(this.sharedClientState.syncEngine={Co:Du.bind(null,t),vo:Lu.bind(null,t),Fo:Fu.bind(null,t),Ts:Ou.bind(null,t),Do:ju.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ji(async e=>{await async function(e,t){const n=E(e);if(Uu(n),Bu(n),!0===t&&!0!==n.gu){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Mu(n,e.toArray());n.gu=!0,await Ml(n.remoteStore,!0);for(const r of t)ul(n.remoteStore,r)}else if(!1===t&&!1!==n.gu){const e=[];let t=Promise.resolve();n.Iu.forEach((r,s)=>{n.sharedClientState.isLocalQueryTarget(s)?e.push(s):t=t.then(()=>(Eu(n,s),vc(n.localStore,s,!0))),hl(n.remoteStore,s)}),await t,await Mu(n,e),function(e){const t=E(e);t.Au.forEach((e,n)=>{hl(t.remoteStore,n)}),t.Ru.Jr(),t.Au=new Map,t.du=new cn(J.comparator)}(n),n.gu=!1,await Ml(n.remoteStore,!1)}}(this.xu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}Du(e){const t=Jc();if(!Oc.v(t))throw new N(A.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=oc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Oc(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class qu{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>yu(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Iu.bind(null,this.syncEngine),await Ml(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Gl}createDatastore(e){const t=Zc(e.databaseInfo.databaseId),n=function(e){return new Kc(e)}(e.databaseInfo);return function(e,t,n,r){return new sl(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new al(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>yu(this.syncEngine,e,0),Bc.v()?new Bc:new Fc)}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new lu(e,t,n,r,s,i);return o&&(a.gu=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=E(e);g(ol,"RemoteStore shutting down."),t.Ea.add(5),await ll(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function Wu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}qu.provider={build:()=>new qu};class Qu{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):y("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Ku{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new T,this.buffer=new Uint8Array,this.Lu=new TextDecoder("utf-8"),this.ku().then(e=>{e&&e.$a()?this.metadata.resolve(e.Qa.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null===e||void 0===e?void 0:e.Qa))))},e=>this.metadata.reject(e))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async bu(){return await this.getMetadata(),this.ku()}async ku(){const e=await this.qu();if(null===e)return null;const t=this.Lu.decode(e),n=Number(t);isNaN(n)&&this.Qu("length string (".concat(t,") is not valid number"));const r=await this.$u(n);return new $l(JSON.parse(r),e.length+n)}Uu(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async qu(){for(;this.Uu()<0&&!await this.Ku(););if(0===this.buffer.length)return null;const e=this.Uu();e<0&&this.Qu("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $u(e){for(;this.buffer.length<e;)await this.Ku()&&this.Qu("Reached the end of bundle when more is expected.");const t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Qu(e){throw this.Bu.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ku(){const e=await this.Bu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Ju{constructor(e,t){var n;this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let r=this.bu();if(!r||!r.$a())throw new Error("The first element of the bundle is not a metadata object, it is\n         ".concat(JSON.stringify(null===(n=r)||void 0===n?void 0:n.Qa)));this.metadata=r;do{r=this.bu(),null!==r&&this.elements.push(r)}while(null!==r)}getMetadata(){return this.metadata}Wu(){return this.elements}bu(){if(this.cursor===this.bundleData.length)return null;const e=this.qu(),t=this.$u(e);return new $l(JSON.parse(t),e)}$u(e){if(this.cursor+e>this.bundleData.length)throw new N(A.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}qu(){const e=this.cursor;let t=this.cursor;for(;t<this.bundleData.length;){if("{"===this.bundleData[t]){if(t===e)throw new Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw new Error("Reached the end of bundle when more is expected.")}}class Yu{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new N(A.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=E(e),r={documents:t.map(e=>Mi(n.serializer,e))},s=await n.Ho("BatchGetDocuments",n.serializer.databaseId,W.emptyPath(),r,t.length),i=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){S(!!t.found,43571),t.found.name,t.found.updateTime;const n=Ri(e,t.found.name),r=_i(t.found.updateTime),s=t.found.createTime?_i(t.found.createTime):le.min(),i=new or({mapValue:{fields:t.found.fields}});return cr.newFoundDocument(n,r,s,i)}(e,t):"missing"in t?function(e,t){S(!!t.missing,3894),S(!!t.readTime,22933);const n=Ri(e,t.missing),r=_i(t.readTime);return cr.newNoDocument(n,r)}(e,t):b(7234,{result:t})}(n.serializer,e);i.set(t.key.toString(),t)});const o=[];return t.forEach(e=>{const t=i.get(e.toString());S(!!t,55234,{key:e}),o.push(t)}),o}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Js(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=J.fromPath(t);this.mutations.push(new Ys(n,this.precondition(n)))}),await async function(e,t){const n=E(e),r={writes:t.map(e=>zi(n.serializer,e))};await n.Go("Commit",n.serializer.databaseId,W.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw b(50498,{Gu:e.constructor.name});t=le.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new N(A.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(le.min())?Os.exists(!1):Os.updateTime(t):Os.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(le.min()))throw new N(A.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Os.updateTime(t)}return Os.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Zu{constructor(e,t,n,r,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=s,this.zu=n.maxAttempts,this.M_=new Xc(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new Yu(this.datastore),t=this.Hu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Yu(e)}))}).catch(e=>{this.Yu(e)})})}Hu(e){try{const t=this.updateFunction(e);return!ze(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if("FirebaseError"===(null===e||void 0===e?void 0:e.name)){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!si(t)}return!1}}const Xu="FirestoreClient";class $u{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=d.UNAUTHENTICATED,this.clientId=O.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{g(Xu,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(g(Xu,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new T;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Fl(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function eh(e,t){e.asyncQueue.verifyOperationInProgress(),g(Xu,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await fc(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function th(e,t){e.asyncQueue.verifyOperationInProgress();const n=await nh(e);g(Xu,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Dl(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Dl(t.remoteStore,n)),e._onlineComponents=t}async function nh(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){g(Xu,"Using user provided OfflineComponentProvider");try{await eh(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===A.FAILED_PRECONDITION||e.code===A.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;v("Error using user provided cache. Falling back to memory cache: "+n),await eh(e,new Vu)}}else g(Xu,"Using default OfflineComponentProvider"),await eh(e,new zu(void 0));return e._offlineComponents}async function rh(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(g(Xu,"Using user provided OnlineComponentProvider"),await th(e,e._uninitializedComponentsProvider._online)):(g(Xu,"Using default OnlineComponentProvider"),await th(e,new qu))),e._onlineComponents}function sh(e){return nh(e).then(e=>e.persistence)}function ih(e){return nh(e).then(e=>e.localStore)}function oh(e){return rh(e).then(e=>e.remoteStore)}function ah(e){return rh(e).then(e=>e.syncEngine)}function ch(e){return rh(e).then(e=>e.datastore)}async function lh(e){const t=await rh(e),n=t.eventManager;return n.onListen=uu.bind(null,t.syncEngine),n.onUnlisten=mu.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=hu.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=pu.bind(null,t.syncEngine),n}function uh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new T;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Qu({next:a=>{i.Nu(),t.enqueueAndForget(()=>Wl(e,o));const c=a.docs.has(n);!c&&a.fromCache?s.reject(new N(A.UNAVAILABLE,"Failed to get document because the client is offline.")):c&&a.fromCache&&r&&"server"===r.source?s.reject(new N(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(a)},error:e=>s.reject(e)}),o=new Xl(Gr(n.path),i,{includeMetadataChanges:!0,qa:!0});return ql(e,o)}(await lh(e),e.asyncQueue,t,n,r)),r.promise}function hh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new T;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Qu({next:n=>{i.Nu(),t.enqueueAndForget(()=>Wl(e,o)),n.fromCache&&"server"===r.source?s.reject(new N(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new Xl(n,i,{includeMetadataChanges:!0,qa:!0});return ql(e,o)}(await lh(e),e.asyncQueue,t,n,r)),r.promise}function dh(e,t,n,r){const s=function(e,t){let n;return n="string"==typeof e?ai().encode(e):e,function(e,t){return new Ku(e,t)}(function(e,t){if(e instanceof Uint8Array)return Wu(e,t);if(e instanceof ArrayBuffer)return Wu(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Zc(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=E(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=E(e),r=_i(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Ii.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(nu(r));const s=new tu(r,t.serializer);let i=await t.bu();for(;i;){const e=await s.Ga(i);e&&n._updateProgress(e),i=await t.bu()}const o=await s.ja(e.localStore);return await Cu(e,o.Ha,void 0),await function(e,t){const n=E(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Ii.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Ja)}catch(e){return v(ou,"Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(await ah(e),s,r)})}function fh(e,t){return function(e,t){return new Ju(e,t)}(e,t)}function mh(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const ph=new Map,gh="firestore.googleapis.com",yh=!0;class vh{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new N(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=gh,this.ssl=yh}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:yh;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=ra;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<va)throw new N(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Z("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=mh(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new N(A.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new N(A.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new N(A.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class wh{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vh({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new N(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new N(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vh(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new C;switch(e.type){case"firstParty":return new j(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new N(A.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ph.get(e);t&&(g("ComponentProvider","Removing Datastore"),ph.delete(e),t.terminate())}(this),Promise.resolve()}}function bh(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=ne(e,wh);const i=a.isCloudWorkstation(t),o=e._getSettings(),c=r(r({},o),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);i&&(a.pingServer("https://".concat(l)),a.updateEmulatorBanner("Firestore",!0)),o.host!==gh&&o.host!==l&&v("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=r(r({},o),{},{host:l,ssl:i,emulatorOptions:s});if(!a.deepEqual(u,c)&&(e._setSettings(u),s.mockUserToken)){let t,n;if("string"==typeof s.mockUserToken)t=s.mockUserToken,n=d.MOCK_USER;else{var h;t=a.createMockUserToken(s.mockUserToken,null===(h=e._app)||void 0===h?void 0:h.options.projectId);const r=s.mockUserToken.sub||s.mockUserToken.user_id;if(!r)throw new N(A.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new d(r)}e._authCredentials=new I(new k(t,n))}}class xh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new xh(this.firestore,e,this._query)}}class Sh{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Eh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Sh(this.firestore,e,this._key)}toJSON(){return{type:Sh._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(ie(t,Sh._jsonSchema))return new Sh(e,n||null,new J(W.fromString(t.referencePath)))}}Sh._jsonSchemaVersion="firestore/documentReference/1.0",Sh._jsonSchema={type:se("string",Sh._jsonSchemaVersion),referencePath:se("string")};class Eh extends xh{constructor(e,t,n){super(e,t,Gr(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Sh(this.firestore,null,new J(e))}withConverter(e){return new Eh(this.firestore,e,this._path)}}function Ah(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=a.getModularInstance(e),1===arguments.length&&(t=O.newId()),Y("doc","path",t),e instanceof wh){const n=W.fromString(t,...r);return X(n),new Sh(e,null,new J(n))}{if(!(e instanceof Sh||e instanceof Eh))throw new N(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(W.fromString(t,...r));return X(n),new Sh(e.firestore,e instanceof Eh?e.converter:null,new J(n))}}function Nh(e,t){return e=a.getModularInstance(e),t=a.getModularInstance(t),e instanceof xh&&t instanceof xh&&e.firestore===t.firestore&&Xr(e._query,t._query)&&e.converter===t.converter}const Th="AsyncQueue";class kh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Xc(this,"async_queue_retry"),this._c=()=>{const e=Yc();e&&g(Th,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Yc();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Yc();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new T;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!je(e))throw e;g(Th,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,y("INTERNAL UNHANDLED ERROR: ",Ch(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Ll.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&b(47125,{Pc:Ch(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function Ch(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function Ih(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class _h{constructor(){this._progressObserver={},this._taskCompletionResolver=new T,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ph extends wh{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new kh,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new kh(e),this._firestoreClient=void 0,await e}}}function jh(e){if(e._terminated)throw new N(A.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Dh(e),e._firestoreClient}function Dh(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Cn(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,mh(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||null!==(n=s.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new $u(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function Mh(e,t,n){if((e=ne(e,Ph))._firestoreClient||e._terminated)throw new N(A.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new N(A.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},Dh(e)}function Rh(e,t){const n=jh(e=ne(e,Ph)),r=new _h;return dh(n,e._databaseId,t,r),r}function Oh(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=E(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Ii.getNamedQuery(e,t))}(await ih(e),t))}(jh(e=ne(e,Ph)),t).then(t=>t?new xh(e,null,t.query):null)}class Lh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class Fh{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Uh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Uh(gn.fromBase64String(e))}catch(e){throw new N(A.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Uh(gn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Uh._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ie(e,Uh._jsonSchema))return Uh.fromBase64String(e.bytes)}}Uh._jsonSchemaVersion="firestore/bytes/1.0",Uh._jsonSchema={type:se("string",Uh._jsonSchemaVersion),bytes:se("string")};class Bh{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new N(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new K(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Vh{constructor(e){this._methodName=e}}class zh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new N(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new N(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return L(this._lat,e._lat)||L(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:zh._jsonSchemaVersion}}static fromJSON(e){if(ie(e,zh._jsonSchema))return new zh(e.latitude,e.longitude)}}zh._jsonSchemaVersion="firestore/geoPoint/1.0",zh._jsonSchema={type:se("string",zh._jsonSchemaVersion),latitude:se("number"),longitude:se("number")};class Gh{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Gh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ie(e,Gh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Gh(e.vectorValues);throw new N(A.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Gh._jsonSchemaVersion="firestore/vectorValue/1.0",Gh._jsonSchema={type:se("string",Gh._jsonSchemaVersion),vectorValues:se("object")};const Hh=/^__.*__$/;class qh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new qs(e,this.data,this.fieldMask,t,this.fieldTransforms):new Hs(e,this.data,t,this.fieldTransforms)}}class Wh{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new qs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Qh(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw b(40011,{Ac:e})}}class Kh{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kh(r(r({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return md(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Qh(this.Ac)&&Hh.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Jh{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Zc(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Kh({Ac:e,methodName:t,Dc:n,path:K.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Yh(e){const t=e._freezeSettings(),n=Zc(e._databaseId);return new Jh(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Zh(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);ud("Data must be an object, but it was:",o,r);const a=cd(r,o);let c,l;if(i.merge)c=new mn(o.fieldMask),l=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=hd(t,r,n);if(!o.contains(s))throw new N(A.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));pd(e,s)||e.push(s)}c=new mn(e),l=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,l=o.fieldTransforms;return new qh(new or(a),c,l)}class Xh extends Vh{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xh}}function $h(e,t,n){return new Kh({Ac:3,Dc:t.settings.Dc,methodName:e._methodName,fc:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class ed extends Vh{_toFieldTransform(e){return new Ms(e.path,new Ts)}isEqual(e){return e instanceof ed}}class td extends Vh{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=$h(this,e,!0),n=this.vc.map(e=>ad(e,t)),r=new ks(n);return new Ms(e.path,r)}isEqual(e){return e instanceof td&&a.deepEqual(this.vc,e.vc)}}class nd extends Vh{constructor(e,t){super(e),this.vc=t}_toFieldTransform(e){const t=$h(this,e,!0),n=this.vc.map(e=>ad(e,t)),r=new Is(n);return new Ms(e.path,r)}isEqual(e){return e instanceof nd&&a.deepEqual(this.vc,e.vc)}}class rd extends Vh{constructor(e,t){super(e),this.Fc=t}_toFieldTransform(e){const t=new Ps(e.serializer,xs(e.serializer,this.Fc));return new Ms(e.path,t)}isEqual(e){return e instanceof rd&&this.Fc===e.Fc}}function sd(e,t,n,r){const s=e.Cc(1,t,n);ud("Data must be an object, but it was:",s,r);const i=[],o=or.empty();sn(r,(e,r)=>{const c=fd(t,e,n);r=a.getModularInstance(r);const l=s.yc(c);if(r instanceof Xh)i.push(c);else{const e=ad(r,l);null!=e&&(i.push(c),o.set(c,e))}});const c=new mn(i);return new Wh(o,c,s.fieldTransforms)}function id(e,t,n,r,s,i){const o=e.Cc(1,t,n),c=[hd(t,r,n)],l=[s];if(i.length%2!=0)throw new N(A.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let a=0;a<i.length;a+=2)c.push(hd(t,i[a])),l.push(i[a+1]);const u=[],h=or.empty();for(let f=c.length-1;f>=0;--f)if(!pd(u,c[f])){const e=c[f];let t=l[f];t=a.getModularInstance(t);const n=o.yc(e);if(t instanceof Xh)u.push(e);else{const r=ad(t,n);null!=r&&(u.push(e),h.set(e,r))}}const d=new mn(u);return new Wh(h,d,o.fieldTransforms)}function od(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ad(n,e.Cc(r?4:3,t))}function ad(e,t){if(ld(e=a.getModularInstance(e)))return ud("Unsupported field value:",t,e),cd(e,t);if(e instanceof Vh)return function(e,t){if(!Qh(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=ad(s,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=a.getModularInstance(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return xs(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ce.fromDate(e);return{timestampValue:ki(t.serializer,n)}}if(e instanceof ce){const n=new ce(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ki(t.serializer,n)}}if(e instanceof zh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Uh)return{bytesValue:Ci(t.serializer,e._byteString)};if(e instanceof Sh){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Pi(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Gh)return function(e,t){return{mapValue:{fields:{[Pn]:{stringValue:Mn},[Rn]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return ws(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(te(e)))}(e,t)}function cd(e,t){const n={};return an(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):sn(e,(e,r)=>{const s=ad(r,t.mc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function ld(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ce||e instanceof zh||e instanceof Uh||e instanceof Sh||e instanceof Vh||e instanceof Gh)}function ud(e,t,n){if(!ld(n)||!ee(n)){const r=te(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function hd(e,t,n){if((t=a.getModularInstance(t))instanceof Bh)return t._internalPath;if("string"==typeof t)return fd(e,t);throw md("Field path arguments must be of type string or ",e,!1,void 0,n)}const dd=new RegExp("[~\\*/\\[\\]]");function fd(e,t,n){if(t.search(dd)>=0)throw md("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Bh(...t.split("."))._internalPath}catch(r){throw md("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function md(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a="Function ".concat(t,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=" in field ".concat(r)),o&&(c+=" in document ".concat(s)),c+=")"),new N(A.INVALID_ARGUMENT,a+e+c)}function pd(e,t){return e.some(e=>e.isEqual(t))}class gd{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Sh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new yd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class yd extends gd{data(){return super.data()}}function vd(e,t){return"string"==typeof t?fd(e,t):t instanceof Bh?t._internalPath:t._delegate._internalPath}function wd(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new N(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bd{}class xd extends bd{}class Sd extends xd{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Sd(e,t,n)}_apply(e){const t=this._parse(e);return Pd(e._query,t),new xh(e.firestore,e.converter,Yr(e._query,t))}_parse(e){const t=Yh(e.firestore),n=function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new N(A.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){_d(o,i);const t=[];for(const n of o)t.push(Id(r,e,n));a={arrayValue:{values:t}}}else a=Id(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||_d(o,i),a=od(n,t,o,"in"===i||"not-in"===i);return pr.create(s,i,a)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class Ed extends bd{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ed(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:gr.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Pd(n,s),n=Yr(n,s)}(e._query,t),new xh(e.firestore,e.converter,Yr(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ad extends xd{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ad(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new N(A.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new N(A.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new dr(t,n)}(e._query,this._field,this._direction);return new xh(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Vr(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class Nd extends xd{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Nd(e,t,n)}_apply(e){return new xh(e.firestore,e.converter,Zr(e._query,this._limit,this._limitType))}}class Td extends xd{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Td(e,t,n)}_apply(e){const t=Cd(e,this.type,this._docOrFields,this._inclusive);return new xh(e.firestore,e.converter,function(e,t){return new Vr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class kd extends xd{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new kd(e,t,n)}_apply(e){const t=Cd(e,this.type,this._docOrFields,this._inclusive);return new xh(e.firestore,e.converter,function(e,t){return new Vr(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Cd(e,t,n,r){if(n[0]=a.getModularInstance(n[0]),n[0]instanceof gd)return function(e,t,n,r,s){if(!r)throw new N(A.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const i=[];for(const o of Wr(e))if(o.field.isKeyField())i.push(Wn(t,r.key));else{const e=r.data.field(o.field);if(Nn(e))throw new N(A.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new N(A.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}i.push(e)}return new lr(i,s)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const s=Yh(e.firestore);return function(e,t,n,r,s,i){const o=e.explicitOrderBy;if(s.length>o.length)throw new N(A.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const a=[];for(let c=0;c<s.length;c++){const i=s[c];if(o[c].field.isKeyField()){if("string"!=typeof i)throw new N(A.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof i));if(!qr(e)&&-1!==i.indexOf("/"))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(i,"' contains a slash."));const n=e.path.child(W.fromString(i));if(!J.isDocumentKey(n))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const s=new J(n);a.push(Wn(t,s))}else{const e=od(n,r,i);a.push(e)}}return new lr(a,i)}(e._query,e.firestore._databaseId,s,t,n,r)}}function Id(e,t,n){if("string"==typeof(n=a.getModularInstance(n))){if(""===n)throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qr(t)&&-1!==n.indexOf("/"))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(W.fromString(n));if(!J.isDocumentKey(r))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Wn(e,new J(r))}if(n instanceof Sh)return Wn(e,n._key);throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(te(n),"."))}function _d(e,t){if(!Array.isArray(e)||0===e.length)throw new N(A.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Pd(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new N(A.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new N(A.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function jd(e,t){if(!(t instanceof Sd||t instanceof Ed))throw new N(A.INVALID_ARGUMENT,"Function ".concat(e,"() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'."))}class Dd{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ln(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(bn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw b(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return sn(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Rn].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>wn(e.doubleValue));return new Gh(n)}convertGeoPoint(e){return new zh(wn(e.latitude),wn(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Tn(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(kn(e));default:return null}}convertTimestamp(e){const t=vn(e);return new ce(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=W.fromString(e);S(no(n),9688,{name:e});const r=new _n(n.get(1),n.get(3)),s=new J(n.popFirst(5));return r.isEqual(t)||y("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function Md(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Rd extends Dd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sh(this.firestore,null,t)}}function Od(){return new Lh("count")}const Ld="NOT SUPPORTED";class Fd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ud extends gd{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Bd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(vd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new N(A.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Ud._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Ud._jsonSchemaVersion="firestore/documentSnapshot/1.0",Ud._jsonSchema={type:se("string",Ud._jsonSchemaVersion),bundleSource:se("string","DocumentSnapshot"),bundleName:se("string"),bundle:se("string")};class Bd extends Ud{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Vd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Fd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Bd(this._firestore,this._userDataWriter,n.key,n,new Fd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new N(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Bd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Fd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Bd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Fd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:zd(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new N(A.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vd._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=O.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function zd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return b(61501,{type:e})}}Vd._jsonSchemaVersion="firestore/querySnapshot/1.0",Vd._jsonSchema={type:se("string",Vd._jsonSchemaVersion),bundleSource:se("string","QuerySnapshot"),bundleName:se("string"),bundle:se("string")};class Gd extends Dd{constructor(e){super(),this.firestore=e}convertBytes(e){return new Uh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Sh(this.firestore,null,t)}}function Hd(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=a.getModularInstance(e);let s={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof n[i]||Ih(n[i])||(s=n[i++]);const o={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(Ih(n[i])){var c,l,u;const e=n[i];n[i]=null===(c=e.next)||void 0===c?void 0:c.bind(e),n[i+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[i+2]=null===(u=e.complete)||void 0===u?void 0:u.bind(e)}let h,d,f;if(e instanceof Sh)d=ne(e.firestore,Ph),f=Gr(e._key.path),h={next:t=>{n[i]&&n[i](Wd(d,e,t))},error:n[i+1],complete:n[i+2]};else{const t=ne(e,xh);d=ne(t.firestore,Ph),f=t._query;const r=new Gd(d);h={next:e=>{n[i]&&n[i](new Vd(d,r,t,e))},error:n[i+1],complete:n[i+2]},wd(e._query)}return function(e,t,n,r){const s=new Qu(r),i=new Xl(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>ql(await lh(e),i)),()=>{s.Nu(),e.asyncQueue.enqueueAndForget(async()=>Wl(await lh(e),i))}}(jh(d),f,o,h)}function qd(e,t){return function(e,t){const n=new T;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Bu(e);try{const e=await function(e,t){const n=E(e),r=ce.now(),s=t.reduce((e,t)=>e.add(t.key),gs());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=as(),c=gs();return n.Ns.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{i=s;const o=[];for(const e of t){const t=zs(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new qs(e.key,t,ar(t.value.mapValue),Os.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(i,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:us(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new cn(L)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Cu(r,e.changes),await Al(r.remoteStore)}catch(e){const t=Fl(e,"Failed to persist write");n.reject(t)}}(await ah(e),t,n)),n.promise}(jh(e),t)}function Wd(e,t,n){const r=n.docs.get(t._key),s=new Gd(e);return new Ud(e,s,t._key,r,new Fd(n.hasPendingWrites,n.fromCache),t.converter)}function Qd(e,t){const n=ne(e.firestore,Ph),r=jh(n),s=on(t,(e,t)=>new ei(t,e.aggregateType,e._internalFieldPath));return function(e,t,n){const r=new T;return e.asyncQueue.enqueueAndForget(async()=>{try{const s=await ch(e);r.resolve(async function(e,t,n,r){const s=E(e),{request:i,gt:o,parent:a}=Wi(s.serializer,Kr(t),n);s.connection.$o||delete i.parent;const c=(await s.Ho("RunAggregationQuery",s.serializer.databaseId,a,i,1)).filter(e=>!!e.result);S(1===c.length,64727);const l=null===(r=c[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(l).reduce((e,t)=>(e[o[t]]=l[t],e),{})}(s,t,n))}catch(e){r.reject(e)}}),r.promise}(r,e._query,s).then(t=>function(e,t,n){const r=new Gd(e);return new Fh(t,r,n)}(n,e,t))}class Kd{constructor(e){this.kind="memory",this._onlineComponentProvider=qu.provider,this._offlineComponentProvider=null!==e&&void 0!==e&&e.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new zu(void 0)}}toJSON(){return{kind:this.kind}}}class Jd{constructor(e){let t;this.kind="persistent",null!==e&&void 0!==e&&e.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=ef(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class Yd{constructor(){this.kind="memoryEager",this._offlineComponentProvider=Vu.provider}toJSON(){return{kind:this.kind}}}class Zd{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new zu(e)}}toJSON(){return{kind:this.kind}}}class Xd{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=qu.provider,this._offlineComponentProvider={build:t=>new Gu(t,null===e||void 0===e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class $d{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=qu.provider,this._offlineComponentProvider={build:t=>new Hu(t,null===e||void 0===e?void 0:e.cacheSizeBytes)}}}function ef(e){return new Xd(null===e||void 0===e?void 0:e.forceOwnership)}const tf={maxAttempts:5};class nf{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Yh(e)}set(e,t,n){this._verifyNotCommitted();const r=rf(e,this._firestore),s=Md(r.converter,t,n),i=Zh(this._dataReader,"WriteBatch.set",r._key,s,null!==r.converter,n);return this._mutations.push(i.toMutation(r._key,Os.none())),this}update(e,t,n){this._verifyNotCommitted();const r=rf(e,this._firestore);let s;for(var i=arguments.length,o=new Array(i>3?i-3:0),c=3;c<i;c++)o[c-3]=arguments[c];return s="string"==typeof(t=a.getModularInstance(t))||t instanceof Bh?id(this._dataReader,"WriteBatch.update",r._key,t,n,o):sd(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(s.toMutation(r._key,Os.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=rf(e,this._firestore);return this._mutations=this._mutations.concat(new Js(t._key,Os.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new N(A.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function rf(e,t){if((e=a.getModularInstance(e)).firestore!==t)throw new N(A.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class sf{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Yh(e)}get(e){const t=rf(e,this._firestore),n=new Rd(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return b(24041);const r=e[0];if(r.isFoundDocument())return new gd(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new gd(this._firestore,n,t._key,null,t.converter);throw b(18433,{doc:r})})}set(e,t,n){const r=rf(e,this._firestore),s=Md(r.converter,t,n),i=Zh(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,n);return this._transaction.set(r._key,i),this}update(e,t,n){const r=rf(e,this._firestore);let s;for(var i=arguments.length,o=new Array(i>3?i-3:0),c=3;c<i;c++)o[c-3]=arguments[c];return s="string"==typeof(t=a.getModularInstance(t))||t instanceof Bh?id(this._dataReader,"Transaction.update",r._key,t,n,o):sd(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,s),this}delete(e){const t=rf(e,this._firestore);return this._transaction.delete(t._key),this}}class of extends sf{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=rf(e,this._firestore),n=new Gd(this._firestore);return super.get(e).then(e=>new Ud(this._firestore,n,t._key,e._document,new Fd(!1,!1),t.converter))}}function af(e,t){if("string"!=typeof e[t])throw new N(A.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}class cf{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function lf(e,t){(function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){E(e).Fs.Vs=t}(await ih(e),t))})(jh(e._firestore),t).then(e=>g("setting persistent cache index auto creation isEnabled=".concat(t," succeeded"))).catch(e=>v("setting persistent cache index auto creation isEnabled=".concat(t," failed"),e))}const uf=new WeakMap;class hf{constructor(){this.Mc=new Map}static get instance(){return df||(df=new hf,function(e){if(oi)throw new Error("a TestingHooksSpi instance is already set");oi=e}(df)),df}lt(e){this.Mc.forEach(t=>t(e))}onExistenceFilterMismatch(e){const t=Symbol(),n=this.Mc;return n.set(t,e),()=>n.delete(t)}}let df=null;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){f=e}(s.SDK_VERSION),s._registerComponent(new i.Component("firestore",(e,n)=>{let{instanceIdentifier:s,options:i}=n;const o=e.getProvider("app").getImmediate(),a=new Ph(new _(e.getProvider("auth-internal")),new M(o,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new N(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _n(e.options.projectId,t)}(o,s),o);return i=r({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),s.registerVersion(u,h,e),s.registerVersion(u,h,"cjs2020")}(),t.AbstractUserDataWriter=Dd,t.AggregateField=Lh,t.AggregateQuerySnapshot=Fh,t.Bytes=Uh,t.CACHE_SIZE_UNLIMITED=-1,t.CollectionReference=Eh,t.DocumentReference=Sh,t.DocumentSnapshot=Ud,t.FieldPath=Bh,t.FieldValue=Vh,t.Firestore=Ph,t.FirestoreError=N,t.GeoPoint=zh,t.LoadBundleTask=_h,t.PersistentCacheIndexManager=cf,t.Query=xh,t.QueryCompositeFilterConstraint=Ed,t.QueryConstraint=xd,t.QueryDocumentSnapshot=Bd,t.QueryEndAtConstraint=kd,t.QueryFieldFilterConstraint=Sd,t.QueryLimitConstraint=Nd,t.QueryOrderByConstraint=Ad,t.QuerySnapshot=Vd,t.QueryStartAtConstraint=Td,t.SnapshotMetadata=Fd,t.Timestamp=ce,t.Transaction=of,t.VectorValue=Gh,t.WriteBatch=nf,t._AutoId=O,t._ByteString=gn,t._DatabaseId=_n,t._DocumentKey=J,t._EmptyAppCheckTokenProvider=class{getToken(){return Promise.resolve(new D(""))}invalidateToken(){}start(e,t){}shutdown(){}},t._EmptyAuthCredentialsProvider=C,t._FieldPath=K,t._TestingHooks=class{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return hf.instance.onExistenceFilterMismatch(e)}},t._cast=ne,t._debugAssert=function(e,t){e||b(57014,t)},t._internalAggregationQueryToProtoRunAggregationQueryRequest=function(e,t){var n;const r=on(t,(e,t)=>new ei(t,e.aggregateType,e._internalFieldPath)),s=null===(n=jh(ne(e.firestore,Ph))._onlineComponents)||void 0===n?void 0:n.datastore.serializer;return void 0===s?null:Wi(s,Kr(e._query),r,!0).request},t._internalQueryToProtoQueryTarget=function(e){var t;const n=null===(t=jh(ne(e.firestore,Ph))._onlineComponents)||void 0===t?void 0:t.datastore.serializer;return void 0===n?null:qi(n,Qr(e._query)).ft},t._isBase64Available=function(){return"undefined"!=typeof atob},t._logWarn=v,t._validateIsNotUsedTogether=Z,t.addDoc=function(e,t){const n=ne(e.firestore,Ph),r=Ah(e),s=Md(e.converter,t);return qd(n,[Zh(Yh(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Os.exists(!1))]).then(()=>r)},t.aggregateFieldEqual=function(e,t){var n,r;return e instanceof Lh&&t instanceof Lh&&e.aggregateType===t.aggregateType&&(null===(n=e._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=t._internalFieldPath)||void 0===r?void 0:r.canonicalString())},t.aggregateQuerySnapshotEqual=function(e,t){return Nh(e.query,t.query)&&a.deepEqual(e.data(),t.data())},t.and=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>jd("and",e)),Ed._create("and",t)},t.arrayRemove=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new nd("arrayRemove",t)},t.arrayUnion=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new td("arrayUnion",t)},t.average=function(e){return new Lh("avg",hd("average",e))},t.clearIndexedDbPersistence=function(e){if(e._initialized&&!e._terminated)throw new N(A.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new T;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!Ce.v())return Promise.resolve();const t=e+nc;await Ce.delete(t)}(oc(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise},t.collection=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=a.getModularInstance(e),Y("collection","path",t),e instanceof wh){const n=W.fromString(t,...r);return $(n),new Eh(e,null,n)}{if(!(e instanceof Sh||e instanceof Eh))throw new N(A.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(W.fromString(t,...r));return $(n),new Eh(e.firestore,null,n)}},t.collectionGroup=function(e,t){if(e=ne(e,wh),Y("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new N(A.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new xh(e,null,function(e){return new Vr(W.emptyPath(),e)}(t))},t.connectFirestoreEmulator=bh,t.count=Od,t.deleteAllPersistentCacheIndexes=function(e){(function(e){return e.asyncQueue.enqueue(async()=>function(e){const t=E(e),n=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",e=>n.deleteAllFieldIndexes(e))}(await ih(e)))})(jh(e._firestore)).then(e=>g("deleting all persistent cache indexes succeeded")).catch(e=>v("deleting all persistent cache indexes failed",e))},t.deleteDoc=function(e){return qd(ne(e.firestore,Ph),[new Js(e._key,Os.none())])},t.deleteField=function(){return new Xh("deleteField")},t.disableNetwork=function(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await sh(e),n=await oh(e);return t.setNetworkEnabled(!1),async function(e){const t=E(e);t.Ea.add(0),await ll(t),t.Ra.set("Offline")}(n)})}(jh(e=ne(e,Ph)))},t.disablePersistentCacheIndexAutoCreation=function(e){lf(e,!1)},t.doc=Ah,t.documentId=function(){return new Bh(H)},t.documentSnapshotFromJSON=function(e,t,n){if(ie(t,Ud._jsonSchema)){if(t.bundle===Ld)throw new N(A.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Zc(e._databaseId),s=fh(t.bundle,r),i=s.Wu(),o=new tu(s.getMetadata(),r);for(const e of i)o.Ga(e);const a=o.documents;if(1!==a.length)throw new N(A.INVALID_ARGUMENT,"Expected bundle data to contain 1 document, but it contains ".concat(a.length," documents."));const c=Vi(r,a[0].document),l=new J(W.fromString(t.bundleName));return new Ud(e,new Rd(e),l,c,new Fd(!1,!1),n||null)}},t.enableIndexedDbPersistence=function(e,t){v("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return Mh(e,qu.provider,{build:e=>new Gu(e,n.cacheSizeBytes,null===t||void 0===t?void 0:t.forceOwnership)}),Promise.resolve()},t.enableMultiTabIndexedDbPersistence=async function(e){v("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();Mh(e,qu.provider,{build:e=>new Hu(e,t.cacheSizeBytes)})},t.enableNetwork=function(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await sh(e),n=await oh(e);return t.setNetworkEnabled(!0),function(e){const t=E(e);return t.Ea.delete(0),cl(t)}(n)})}(jh(e=ne(e,Ph)))},t.enablePersistentCacheIndexAutoCreation=function(e){lf(e,!0)},t.endAt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kd._create("endAt",t,!0)},t.endBefore=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return kd._create("endBefore",t,!1)},t.ensureFirestoreConfigured=jh,t.executeWrite=qd,t.getAggregateFromServer=Qd,t.getCountFromServer=function(e){return Qd(e,{count:Od()})},t.getDoc=function(e){e=ne(e,Sh);const t=ne(e.firestore,Ph);return uh(jh(t),e._key).then(n=>Wd(t,e,n))},t.getDocFromCache=function(e){e=ne(e,Sh);const t=ne(e.firestore,Ph),n=jh(t),r=new Gd(t);return function(e,t){const n=new T;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=E(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new N(A.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Fl(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await ih(e),t,n)),n.promise}(n,e._key).then(n=>new Ud(t,r,e._key,n,new Fd(null!==n&&n.hasLocalMutations,!0),e.converter))},t.getDocFromServer=function(e){e=ne(e,Sh);const t=ne(e.firestore,Ph);return uh(jh(t),e._key,{source:"server"}).then(n=>Wd(t,e,n))},t.getDocs=function(e){e=ne(e,xh);const t=ne(e.firestore,Ph),n=jh(t),r=new Gd(t);return wd(e._query),hh(n,e._query).then(n=>new Vd(t,r,e,n))},t.getDocsFromCache=function(e){e=ne(e,xh);const t=ne(e.firestore,Ph),n=jh(t),r=new Gd(t);return function(e,t){const n=new T;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await wc(e,t,!0),s=new iu(t,r.Qs),i=s.ru(r.documents),o=s.applyChanges(i,!1);n.resolve(o.snapshot)}catch(e){const r=Fl(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await ih(e),t,n)),n.promise}(n,e._query).then(n=>new Vd(t,r,e,n))},t.getDocsFromServer=function(e){e=ne(e,xh);const t=ne(e.firestore,Ph),n=jh(t),r=new Gd(t);return hh(n,e._query,{source:"server"}).then(n=>new Vd(t,r,e,n))},t.getFirestore=function(e,t){const n="object"==typeof e?e:s.getApp(),r="string"==typeof e?e:t||In,i=s._getProvider(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=a.getDefaultEmulatorHostnameAndPort("firestore");e&&bh(i,...e)}return i},t.getPersistentCacheIndexManager=function(e){var t;e=ne(e,Ph);const n=uf.get(e);if(n)return n;if("persistent"!==(null===(t=jh(e)._uninitializedComponentsProvider)||void 0===t?void 0:t._offline.kind))return null;const r=new cf(e);return uf.set(e,r),r},t.increment=function(e){return new rd("increment",e)},t.initializeFirestore=function(e,t,n){n||(n=In);const r=s._getProvider(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n}),s=r.getOptions(n);if(a.deepEqual(s,t))return e;throw new N(A.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new N(A.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<va)throw new N(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return t.host&&a.isCloudWorkstation(t.host)&&a.pingServer(t.host),r.initialize({options:t,instanceIdentifier:n})},t.limit=function(e){return re("limit",e),Nd._create("limit",e,"F")},t.limitToLast=function(e){return re("limitToLast",e),Nd._create("limitToLast",e,"L")},t.loadBundle=Rh,t.memoryEagerGarbageCollector=function(){return new Yd},t.memoryLocalCache=function(e){return new Kd(e)},t.memoryLruGarbageCollector=function(e){return new Zd(null===e||void 0===e?void 0:e.cacheSizeBytes)},t.namedQuery=Oh,t.onSnapshot=Hd,t.onSnapshotResume=function(e,t){const n=a.getModularInstance(e),r=function(e){const t={bundle:"",bundleName:"",bundleSource:""},n=["bundle","bundleName","bundleSource"];for(const r of n){if(!(r in e)){t.error="snapshotJson missing required field: ".concat(r);break}const n=e[r];if("string"!=typeof n){t.error="snapshotJson field '".concat(r,"' must be a string.");break}if(0===n.length){t.error="snapshotJson field '".concat(r,"' cannot be an empty string.");break}"bundle"===r?t.bundle=n:"bundleName"===r?t.bundleName=n:"bundleSource"===r&&(t.bundleSource=n)}return t}(t);if(r.error)throw new N(A.INVALID_ARGUMENT,r.error);let s,i=0;for(var o=arguments.length,c=new Array(o>2?o-2:0),l=2;l<o;l++)c[l-2]=arguments[l];if("object"!=typeof c[i]||Ih(c[i])||(s=c[i++]),"QuerySnapshot"===r.bundleSource){let e=null;if("object"==typeof c[i]&&Ih(c[i])){const t=c[i++];e={next:t.next,error:t.error,complete:t.complete}}else e={next:c[i++],error:c[i++],complete:c[i++]};return function(e,t,n,r,s){let i,o=!1;return Rh(e,t.bundle).then(()=>Oh(e,t.bundleName)).then(e=>{e&&!o&&(s&&e.withConverter(s),i=Hd(e,n||{},r))}).catch(e=>(r.error&&r.error(e),()=>{})),()=>{o||(o=!0,i&&i())}}(n,r,s,e,c[i])}if("DocumentSnapshot"===r.bundleSource){let e=null;if("object"==typeof c[i]&&Ih(c[i])){const t=c[i++];e={next:t.next,error:t.error,complete:t.complete}}else e={next:c[i++],error:c[i++],complete:c[i++]};return function(e,t,n,r,s){let i,o=!1;return Rh(e,t.bundle).then(()=>{if(!o){const o=new Sh(e,s||null,J.fromPath(t.bundleName));i=Hd(o,n||{},r)}}).catch(e=>(r.error&&r.error(e),()=>{})),()=>{o||(o=!0,i&&i())}}(n,r,s,e,c[i])}throw new N(A.INVALID_ARGUMENT,"unsupported bundle source: ".concat(r.bundleSource))},t.onSnapshotsInSync=function(e,t){return function(e,t){const n=new Qu(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){E(e).Ca.add(t),t.next()}(await lh(e),n)),()=>{n.Nu(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){E(e).Ca.delete(t)}(await lh(e),n))}}(jh(e=ne(e,Ph)),Ih(t)?t:{next:t})},t.or=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>jd("or",e)),Ed._create("or",t)},t.orderBy=function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=vd("orderBy",e);return Ad._create(n,t)},t.persistentLocalCache=function(e){return new Jd(e)},t.persistentMultipleTabManager=function(){return new $d},t.persistentSingleTabManager=ef,t.query=function(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof bd&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Ed).length,n=e.filter(e=>e instanceof Sd).length;if(t>1||t>0&&n>0)throw new N(A.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e},t.queryEqual=Nh,t.querySnapshotFromJSON=function(e,t,n){if(ie(t,Vd._jsonSchema)){if(t.bundle===Ld)throw new N(A.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");const r=Zc(e._databaseId),s=fh(t.bundle,r),i=s.Wu(),o=new tu(s.getMetadata(),r);for(const e of i)o.Ga(e);if(1!==o.queries.length)throw new N(A.INVALID_ARGUMENT,"Snapshot data expected 1 query but found ".concat(o.queries.length," queries."));const a=fo(o.queries[0].bundledQuery),c=o.documents;let l=new Ul;c.map(e=>{const t=Vi(r,e.document);l=l.add(t)});const u=Vl.fromInitialDocuments(a,l,gs(),!1,!1),h=new xh(e,n||null,a);return new Vd(e,new Rd(e),h,u)}},t.refEqual=function(e,t){return e=a.getModularInstance(e),t=a.getModularInstance(t),(e instanceof Sh||e instanceof Eh)&&(t instanceof Sh||t instanceof Eh)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter},t.runTransaction=function(e,t,n){e=ne(e,Ph);const s=r(r({},tf),n);return function(e){if(e.maxAttempts<1)throw new N(A.INVALID_ARGUMENT,"Max attempts must be at least 1")}(s),function(e,t,n){const r=new T;return e.asyncQueue.enqueueAndForget(async()=>{const s=await ch(e);new Zu(e.asyncQueue,s,n,t,r).ju()}),r.promise}(jh(e),n=>t(new of(e,n)),s)},t.serverTimestamp=function(){return new ed("serverTimestamp")},t.setDoc=function(e,t,n){e=ne(e,Sh);const r=ne(e.firestore,Ph),s=Md(e.converter,t,n);return qd(r,[Zh(Yh(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Os.none())])},t.setIndexConfiguration=function(e,t){const n=jh(e=ne(e,Ph));if(!n._uninitializedComponentsProvider||"memory"===n._uninitializedComponentsProvider._offline.kind)return v("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(e){const t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new N(A.INVALID_ARGUMENT,"Failed to parse JSON: "+(null===e||void 0===e?void 0:e.message))}}(e):e,n=[];if(Array.isArray(t.indexes))for(const r of t.indexes){const e=af(r,"collectionGroup"),t=[];if(Array.isArray(r.fields))for(const n of r.fields){const e=fd("setIndexConfiguration",af(n,"fieldPath"));"CONTAINS"===n.arrayConfig?t.push(new pe(e,2)):"ASCENDING"===n.order?t.push(new pe(e,0)):"DESCENDING"===n.order&&t.push(new pe(e,1))}n.push(new he(he.UNKNOWN_ID,e,t,ye.empty()))}return n}(t);return function(e,t){return e.asyncQueue.enqueue(async()=>async function(e,t){const n=E(e),r=n.indexManager,s=[];return n.persistence.runTransaction("Configure indexes","readwrite",e=>r.getFieldIndexes(e).next(n=>function(e,t,n,r,s){e=[...e],t=[...t],e.sort(n),t.sort(n);const i=e.length,o=t.length;let a=0,c=0;for(;a<o&&c<i;){const i=n(e[c],t[a]);i<0?s(e[c++]):i>0?r(t[a++]):(a++,c++)}for(;a<o;)r(t[a++]);for(;c<i;)s(e[c++])}(n,t,me,t=>{s.push(r.addFieldIndex(e,t))},t=>{s.push(r.deleteFieldIndex(e,t))})).next(()=>Ne.waitFor(s)))}(await ih(e),t))}(n,r)},t.setLogLevel=function(e){m.setLogLevel(e)},t.snapshotEqual=function(e,t){return e instanceof Ud&&t instanceof Ud?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Vd&&t instanceof Vd&&e._firestore===t._firestore&&Nh(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)},t.startAfter=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Td._create("startAfter",t,!1)},t.startAt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Td._create("startAt",t,!0)},t.sum=function(e){return new Lh("sum",hd("sum",e))},t.terminate=function(e){return s._removeServiceInstance(e.app,"firestore",e._databaseId.database),e._delete()},t.updateDoc=function(e,t,n){e=ne(e,Sh);const r=ne(e.firestore,Ph),s=Yh(r);let i;for(var o=arguments.length,c=new Array(o>3?o-3:0),l=3;l<o;l++)c[l-3]=arguments[l];return i="string"==typeof(t=a.getModularInstance(t))||t instanceof Bh?id(s,"updateDoc",e._key,t,n,c):sd(s,"updateDoc",e._key,t),qd(r,[i.toMutation(e._key,Os.exists(!0))])},t.vector=function(e){return new Gh(e)},t.waitForPendingWrites=function(e){return function(e){const t=new T;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=E(e);gl(n.remoteStore)||g(ou,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=E(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(e===Ve)return void t.resolve();const r=n.mu.get(e)||[];r.push(t),n.mu.set(e,r)}catch(e){const n=Fl(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await ah(e),t)),t.promise}(jh(e=ne(e,Ph)))},t.where=function(e,t,n){const r=t,s=vd("where",e);return Sd._create(s,r,n)},t.writeBatch=function(e){return jh(e=ne(e,Ph)),new nf(e,t=>qd(e,t))}},986:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}n.d(t,{A:()=>r})}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&s&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(i,o),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{OG:()=>ll,My:()=>el,Ph:()=>rl,lX:()=>sl,Id:()=>cl,fg:()=>dl,qj:()=>al,aT:()=>nl,lq:()=>il,z:()=>ol,Q5:()=>ml});var t={};n.r(t),n.d(t,{hasBrowserEnv:()=>op,hasStandardBrowserEnv:()=>cp,hasStandardBrowserWebWorkerEnv:()=>lp,navigator:()=>ap,origin:()=>up});var r,s=n(43),i=n.t(s,2),o=n(391),a=n(950),c=n.t(a,2);function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const u="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,r){return void 0===n&&(n=null),l({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?g(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function g(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function y(e,t,n,s){void 0===s&&(s={});let{window:i=document.defaultView,v5Compat:o=!1}=s,a=i.history,c=r.Pop,d=null,g=y();function y(){return(a.state||{idx:null}).idx}function v(){c=r.Pop;let e=y(),t=null==e?null:e-g;g=e,d&&d({action:c,location:b.location,delta:t})}function w(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,a.replaceState(l({},a.state,{idx:g}),""));let b={get action(){return c},get location(){return e(i,a)},listen(e){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener(u,v),d=e,()=>{i.removeEventListener(u,v),d=null}},createHref:e=>t(i,e),createURL:w,encodeLocation(e){let t=w(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){c=r.Push;let s=m(b.location,e,t);n&&n(s,e),g=y()+1;let l=f(s,g),u=b.createHref(s);try{a.pushState(l,"",u)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(u)}o&&d&&d({action:c,location:b.location,delta:1})},replace:function(e,t){c=r.Replace;let s=m(b.location,e,t);n&&n(s,e),g=y();let i=f(s,g),l=b.createHref(s);a.replaceState(i,"",l),o&&d&&d({action:c,location:b.location,delta:0})},go:e=>a.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,r){let s=M(("string"===typeof t?g(t):t).pathname||"/",n);if(null==s)return null;let i=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let a=0;null==o&&a<i.length;++a){let e=D(s);o=P(i[a],e,r)}return o}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};o.relativePath.startsWith("/")&&(h(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=U([r,o.relativePath]),c=n.concat(o);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),x(e.children,t,c,a)),(null!=e.path||e.index)&&t.push({path:a,score:_(a,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of S(e.path))s(e,t,r);else s(e,t)}),t}function S(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let o=S(r.join("/")),a=[];return a.push(...o.map(e=>""===e?i:[i,e].join("/"))),s&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const E=/^:[\w-]+$/,A=3,N=2,T=1,k=10,C=-2,I=e=>"*"===e;function _(e,t){let n=e.split("/"),r=n.length;return n.some(I)&&(r+=C),t&&(r+=N),n.filter(e=>!I(e)).reduce((e,t)=>e+(E.test(t)?A:""===t?T:k),r)}function P(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],c=a===r.length-1,l="/"===i?t:t.slice(i.length)||"/",u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:c},l),h=e.route;if(!u&&c&&n&&!r[r.length-1].route.index&&(u=j({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},l)),!u)return null;Object.assign(s,u.params),o.push({params:s,pathname:U([i,u.pathname]),pathnameBase:B(U([i,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(i=U([i,u.pathnameBase]))}return o}function j(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1),c=r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=a[n]||"";o=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const c=a[n];return e[r]=s&&!c?void 0:(c||"").replace(/%2F/g,"/"),e},{});return{params:c,pathname:i,pathnameBase:o,pattern:e}}function D(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function R(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function L(e,t){let n=O(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=g(e):(s=l({},e),h(!s.pathname||!s.pathname.includes("?"),R("?","pathname","search",s)),h(!s.pathname||!s.pathname.includes("#"),R("#","pathname","hash",s)),h(!s.search||!s.search.includes("#"),R("#","search","hash",s)));let i,o=""===e||""===s.pathname,a=o?"/":s.pathname;if(null==a)i=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let c=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?g(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:V(r),hash:z(s)}}(s,i),u=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return c.pathname.endsWith("/")||!u&&!d||(c.pathname+="/"),c}const U=e=>e.join("/").replace(/\/\/+/g,"/"),B=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function G(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],q=(new Set(H),["get",...H]);new Set(q),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function W(){return W=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W.apply(this,arguments)}const Q=s.createContext(null);const K=s.createContext(null);const J=s.createContext(null);const Y=s.createContext(null);const Z=s.createContext({outlet:null,matches:[],isDataRoute:!1});const X=s.createContext(null);function $(){return null!=s.useContext(Y)}function ee(){return $()||h(!1),s.useContext(Y).location}function te(e){s.useContext(J).static||s.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=s.useContext(Z);return e?function(){let{router:e}=de(ue.UseNavigateStable),t=me(he.UseNavigateStable),n=s.useRef(!1);te(()=>{n.current=!0});let r=s.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,W({fromRouteId:t},s)))},[e,t]);return r}():function(){$()||h(!1);let e=s.useContext(Q),{basename:t,future:n,navigator:r}=s.useContext(J),{matches:i}=s.useContext(Z),{pathname:o}=ee(),a=JSON.stringify(L(i,n.v7_relativeSplatPath)),c=s.useRef(!1);return te(()=>{c.current=!0}),s.useCallback(function(n,s){if(void 0===s&&(s={}),!c.current)return;if("number"===typeof n)return void r.go(n);let i=F(n,JSON.parse(a),o,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:U([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,a,o,e])}()}function re(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=s.useContext(J),{matches:i}=s.useContext(Z),{pathname:o}=ee(),a=JSON.stringify(L(i,r.v7_relativeSplatPath));return s.useMemo(()=>F(e,JSON.parse(a),o,"path"===n),[e,a,o,n])}function se(e,t,n,i){$()||h(!1);let{navigator:o}=s.useContext(J),{matches:a}=s.useContext(Z),c=a[a.length-1],l=c?c.params:{},u=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let d,f=ee();if(t){var m;let e="string"===typeof t?g(t):t;"/"===u||(null==(m=e.pathname)?void 0:m.startsWith(u))||h(!1),d=e}else d=f;let p=d.pathname||"/",y=p;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=w(e,{pathname:y});let b=le(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},l,e.params),pathname:U([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:U([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,i);return t&&b?s.createElement(Y.Provider,{value:{location:W({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:r.Pop}},b):b}function ie(){let e=function(){var e;let t=s.useContext(X),n=fe(he.UseRouteError),r=me(he.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=G(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return s.createElement(s.Fragment,null,s.createElement("h2",null,"Unexpected Application Error!"),s.createElement("h3",{style:{fontStyle:"italic"}},t),n?s.createElement("pre",{style:i},n):null,null)}const oe=s.createElement(ie,null);class ae extends s.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?s.createElement(Z.Provider,{value:this.props.routeContext},s.createElement(X.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ce(e){let{routeContext:t,match:n,children:r}=e,i=s.useContext(Q);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),s.createElement(Z.Provider,{value:t},r)}function le(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,c=null==(i=n)?void 0:i.errors;if(null!=c){let e=a.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||h(!1),a=a.slice(0,Math.min(a.length,e+1))}let l=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let s=0;s<a.length;s++){let e=a[s];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=s),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){l=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight((e,r,i)=>{let o,h=!1,d=null,f=null;var m;n&&(o=c&&r.route.id?c[r.route.id]:void 0,d=r.route.errorElement||oe,l&&(u<0&&0===i?(m="route-fallback",!1||pe[m]||(pe[m]=!0),h=!0,f=null):u===i&&(h=!0,f=r.route.hydrateFallbackElement||null)));let p=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=o?d:h?f:r.route.Component?s.createElement(r.route.Component,null):r.route.element?r.route.element:e,s.createElement(ce,{match:r,routeContext:{outlet:e,matches:p,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?s.createElement(ae,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):g()},null)}var ue=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ue||{}),he=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(he||{});function de(e){let t=s.useContext(Q);return t||h(!1),t}function fe(e){let t=s.useContext(K);return t||h(!1),t}function me(e){let t=function(){let e=s.useContext(Z);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const pe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}i.startTransition;function ye(e){h(!1)}function ve(e){let{basename:t="/",children:n=null,location:i,navigationType:o=r.Pop,navigator:a,static:c=!1,future:l}=e;$()&&h(!1);let u=t.replace(/^\/*/,"/"),d=s.useMemo(()=>({basename:u,navigator:a,static:c,future:W({v7_relativeSplatPath:!1},l)}),[u,l,a,c]);"string"===typeof i&&(i=g(i));let{pathname:f="/",search:m="",hash:p="",state:y=null,key:v="default"}=i,w=s.useMemo(()=>{let e=M(f,u);return null==e?null:{location:{pathname:e,search:m,hash:p,state:y,key:v},navigationType:o}},[u,f,m,p,y,v,o]);return null==w?null:s.createElement(J.Provider,{value:d},s.createElement(Y.Provider,{children:n,value:w}))}function we(e){let{children:t,location:n}=e;return se(be(t),n)}new Promise(()=>{});s.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return s.Children.forEach(e,(e,r)=>{if(!s.isValidElement(e))return;let i=[...t,r];if(e.type===s.Fragment)return void n.push.apply(n,be(e.props.children,i));e.type!==ye&&h(!1),e.props.index&&e.props.children&&h(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=be(e.props.children,i)),n.push(o)}),n}function xe(){return xe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xe.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ee=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(DN){}new Map;const Ae=i.startTransition;c.flushSync,i.useId;function Ne(e){let{basename:t,children:n,future:r,window:i}=e,o=s.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),y(function(e,t){let{pathname:n="/",search:r="",hash:s=""}=g(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),m("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:p(t))},function(e,t){d("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},a)));let c=o.current,[l,u]=s.useState({action:c.action,location:c.location}),{v7_startTransition:h}=r||{},f=s.useCallback(e=>{h&&Ae?Ae(()=>u(e)):u(e)},[u,h]);return s.useLayoutEffect(()=>c.listen(f),[c,f]),s.useEffect(()=>ge(r),[r]),s.createElement(ve,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:c,future:r})}const Te="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,ke=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ce=s.forwardRef(function(e,t){let n,{onClick:r,relative:i,reloadDocument:o,replace:a,state:c,target:l,to:u,preventScrollReset:d,viewTransition:f}=e,m=Se(e,Ee),{basename:g}=s.useContext(J),y=!1;if("string"===typeof u&&ke.test(u)&&(n=u,Te))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=M(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:y=!0}catch(DN){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;$()||h(!1);let{basename:r,navigator:i}=s.useContext(J),{hash:o,pathname:a,search:c}=re(e,{relative:n}),l=a;return"/"!==r&&(l="/"===a?r:U([r,a])),i.createHref({pathname:l,search:c,hash:o})}(u,{relative:i}),w=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,viewTransition:c}=void 0===t?{}:t,l=ne(),u=ee(),h=re(e,{relative:a});return s.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:p(u)===p(h);l(e,{replace:n,state:i,preventScrollReset:o,relative:a,viewTransition:c})}},[u,l,h,r,i,n,e,o,a,c])}(u,{replace:a,state:c,target:l,preventScrollReset:d,relative:i,viewTransition:f});return s.createElement("a",xe({},m,{href:n||v,onClick:y||o?r:function(e){r&&r(e),e.defaultPrevented||w(e)},ref:t,target:l}))});var Ie,_e;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ie||(Ie={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(_e||(_e={}));var Pe=n(579);const je=(0,s.createContext)(),De={en:{home:"Home",market:"Market",smartTrading:"Smart trading",loan:"Loan",account:"Account",language:"Language",marketTitle:"Market",forex:"Forex",crypto:"Crypto",stocks:"Stocks",etf:"ETF",futures:"Futures",smartTradingTitle:"Smart trading",spotPrice:"Spot price",chart:"Chart",accountTitle:"Account",balance:"Balance",totalBalance:"Total Balance",availableBalance:"Available Balance",pendingBalance:"Pending Balance",loanTitle:"Investment & Lending",borrowNow:"Borrow now",loading:"Loading...",error:"Error",retry:"Retry",close:"Close",save:"Save",cancel:"Cancel",products:"Products",company:"Company",policies:"Policies",aboutUs:"About Us",helpCenter:"Help Center",termsConditions:"Terms & Conditions",privacyPolicy:"Privacy Policy",copyright:"All rights reserved.",heroTitle:"Advanced Trading Platform",heroSubtitle:"Experience the future of trading with AI-powered algorithms, real-time market data, and comprehensive investment solutions.",getStarted:"Get Started",learnMore:"Learn More",statsTitle:"Trusted by Millions",featuresTitle:"Why Choose UBS Tokenize?",servicesTitle:"Our Services",heroDescription:"Join millions of traders worldwide who trust UBS Tokenize for their trading needs. Our platform offers cutting-edge technology, real-time data, and expert support.",startTradingNow:"Start Trading Now",viewMarkets:"View Markets",activeUsers:"Active Users",totalVolume:"Total Volume",countries:"Countries",satisfaction:"Satisfaction Rate",smartTradingFeature:"Smart Trading",smartTradingDesc:"Leverage AI-powered algorithms for optimal trading decisions.",investmentFeature:"Investment & Lending",investmentDesc:"Grow your assets with diverse investment options and flexible lending.",marketsFeature:"Markets",marketsDesc:"Access real-time data across various markets: crypto, forex, stocks, ETFs, futures.",securityFeature:"Security",securityDesc:"Bank-level security with advanced encryption and fraud protection.",supportFeature:"24/7 Support",supportDesc:"Round-the-clock customer support from our expert team.",mobileFeature:"Mobile Trading",mobileDesc:"Trade anywhere with our intuitive mobile application.",smartTradingService:"Smart Trading",smartTradingServiceDesc:"Leverage AI-powered algorithms for optimal trading decisions.",investmentService:"Investment & Lending",investmentServiceDesc:"Grow your assets with diverse investment options and flexible lending.",marketsService:"Markets",marketsServiceDesc:"Access real-time data across various markets: crypto, forex, stocks, ETFs, futures.",marketSubtitle:"Real-time market data across all asset classes",featuredMarkets:"Featured Markets",marketTable:"Market Data",loadingMarketData:"Loading market data...",failedToLoad:"Failed to load market data",accountSubtitle:"Manage your trading account and settings",accountSummary:"Account Summary",orders:"Orders",settings:"Settings",verification:"Account Verification",inviteFriends:"Invite Friends",liveChat:"Live Chat",notifications:"Notifications",loanSubtitle:"Flexible investment and lending solutions",loanAmount:"Loan Amount",currency:"Currency",loanTerm:"Loan Term",interestRate:"Interest Rate",monthlyPayment:"Monthly Payment",tradingOptions:"Trading Options",investment:"Investment",available:"Available",fee:"Fee",callUp:"Call (Up)",putDown:"Put (Down)",createPlan:"Create a plan to trade!",smartTradingInfo:"What is smart trading?",tradingStrategy:"Trading Strategy",marketAnalysis:"Market Analysis",riskWarning:"Risk Warning",createPlanTitle:"Create Trading Plan",amount:"Amount",timeframe:"Timeframe",amountLimit:"Amount Limit",dailyYield:"Daily Yield",product:"Product",create:"Create",faqTitle:"Smart Trading FAQ",name:"Name",price:"Price",change:"Change",volume:"Volume",high:"High",low:"Low",open:"Open",buy:"Buy",sell:"Sell",watchlist:"Watchlist",details:"Details"},vi:{home:"Trang ch\u1ee7",market:"Th\u1ecb tr\u01b0\u1eddng",smartTrading:"Giao d\u1ecbch th\xf4ng minh",loan:"Cho vay",account:"T\xe0i kho\u1ea3n",language:"Ng\xf4n ng\u1eef",marketTitle:"Th\u1ecb tr\u01b0\u1eddng",forex:"Ngo\u1ea1i h\u1ed1i",crypto:"Ti\u1ec1n \u0111i\u1ec7n t\u1eed",stocks:"C\u1ed5 phi\u1ebfu",etf:"ETF",futures:"H\u1ee3p \u0111\u1ed3ng t\u01b0\u01a1ng lai",smartTradingTitle:"Giao d\u1ecbch th\xf4ng minh",spotPrice:"Gi\xe1 giao ngay",chart:"Bi\u1ec3u \u0111\u1ed3",accountTitle:"T\xe0i kho\u1ea3n",balance:"S\u1ed1 d\u01b0",totalBalance:"T\u1ed5ng s\u1ed1 d\u01b0",availableBalance:"S\u1ed1 d\u01b0 kh\u1ea3 d\u1ee5ng",pendingBalance:"S\u1ed1 d\u01b0 ch\u1edd x\u1eed l\xfd",loanTitle:"\u0110\u1ea7u t\u01b0 & Cho vay",borrowNow:"Vay ngay",loading:"\u0110ang t\u1ea3i...",error:"L\u1ed7i",retry:"Th\u1eed l\u1ea1i",close:"\u0110\xf3ng",save:"L\u01b0u",cancel:"H\u1ee7y",products:"S\u1ea3n ph\u1ea9m",company:"C\xf4ng ty",policies:"Ch\xednh s\xe1ch",aboutUs:"V\u1ec1 ch\xfang t\xf4i",helpCenter:"Trung t\xe2m tr\u1ee3 gi\xfap",termsConditions:"\u0110i\u1ec1u kho\u1ea3n & \u0110i\u1ec1u ki\u1ec7n",privacyPolicy:"Ch\xednh s\xe1ch b\u1ea3o m\u1eadt",copyright:"B\u1ea3o l\u01b0u m\u1ecdi quy\u1ec1n.",heroTitle:"N\u1ec1n t\u1ea3ng giao d\u1ecbch ti\xean ti\u1ebfn",heroSubtitle:"Tr\u1ea3i nghi\u1ec7m t\u01b0\u01a1ng lai c\u1ee7a giao d\u1ecbch v\u1edbi thu\u1eadt to\xe1n AI, d\u1eef li\u1ec7u th\u1ecb tr\u01b0\u1eddng th\u1eddi gian th\u1ef1c v\xe0 gi\u1ea3i ph\xe1p \u0111\u1ea7u t\u01b0 to\xe0n di\u1ec7n.",getStarted:"B\u1eaft \u0111\u1ea7u",learnMore:"T\xecm hi\u1ec3u th\xeam",statsTitle:"\u0110\u01b0\u1ee3c tin t\u01b0\u1edfng b\u1edfi h\xe0ng tri\u1ec7u ng\u01b0\u1eddi",featuresTitle:"T\u1ea1i sao ch\u1ecdn UBS Tokenize?",servicesTitle:"D\u1ecbch v\u1ee5 c\u1ee7a ch\xfang t\xf4i",heroDescription:"Tham gia c\xf9ng h\xe0ng tri\u1ec7u nh\xe0 giao d\u1ecbch tr\xean to\xe0n th\u1ebf gi\u1edbi tin t\u01b0\u1edfng UBS Tokenize cho nhu c\u1ea7u giao d\u1ecbch c\u1ee7a h\u1ecd. N\u1ec1n t\u1ea3ng c\u1ee7a ch\xfang t\xf4i cung c\u1ea5p c\xf4ng ngh\u1ec7 ti\xean ti\u1ebfn, d\u1eef li\u1ec7u th\u1eddi gian th\u1ef1c v\xe0 h\u1ed7 tr\u1ee3 chuy\xean gia.",startTradingNow:"B\u1eaft \u0111\u1ea7u giao d\u1ecbch ngay",viewMarkets:"Xem th\u1ecb tr\u01b0\u1eddng",activeUsers:"Ng\u01b0\u1eddi d\xf9ng ho\u1ea1t \u0111\u1ed9ng",totalVolume:"T\u1ed5ng kh\u1ed1i l\u01b0\u1ee3ng",countries:"Qu\u1ed1c gia",satisfaction:"T\u1ef7 l\u1ec7 h\xe0i l\xf2ng",smartTradingFeature:"Giao d\u1ecbch th\xf4ng minh",smartTradingDesc:"T\u1eadn d\u1ee5ng thu\u1eadt to\xe1n AI \u0111\u1ec3 \u0111\u01b0a ra quy\u1ebft \u0111\u1ecbnh giao d\u1ecbch t\u1ed1i \u01b0u.",investmentFeature:"\u0110\u1ea7u t\u01b0 & Cho vay",investmentDesc:"T\u0103ng tr\u01b0\u1edfng t\xe0i s\u1ea3n v\u1edbi c\xe1c l\u1ef1a ch\u1ecdn \u0111\u1ea7u t\u01b0 \u0111a d\u1ea1ng v\xe0 cho vay linh ho\u1ea1t.",marketsFeature:"Th\u1ecb tr\u01b0\u1eddng",marketsDesc:"Truy c\u1eadp d\u1eef li\u1ec7u th\u1eddi gian th\u1ef1c tr\xean c\xe1c th\u1ecb tr\u01b0\u1eddng kh\xe1c nhau: ti\u1ec1n \u0111i\u1ec7n t\u1eed, ngo\u1ea1i h\u1ed1i, c\u1ed5 phi\u1ebfu, ETF, h\u1ee3p \u0111\u1ed3ng t\u01b0\u01a1ng lai.",securityFeature:"B\u1ea3o m\u1eadt",securityDesc:"B\u1ea3o m\u1eadt c\u1ea5p ng\xe2n h\xe0ng v\u1edbi m\xe3 h\xf3a ti\xean ti\u1ebfn v\xe0 b\u1ea3o v\u1ec7 ch\u1ed1ng gian l\u1eadn.",supportFeature:"H\u1ed7 tr\u1ee3 24/7",supportDesc:"H\u1ed7 tr\u1ee3 kh\xe1ch h\xe0ng su\u1ed1t ng\xe0y \u0111\xeam t\u1eeb \u0111\u1ed9i ng\u0169 chuy\xean gia c\u1ee7a ch\xfang t\xf4i.",mobileFeature:"Giao d\u1ecbch di \u0111\u1ed9ng",mobileDesc:"Giao d\u1ecbch m\u1ecdi n\u01a1i v\u1edbi \u1ee9ng d\u1ee5ng di \u0111\u1ed9ng tr\u1ef1c quan c\u1ee7a ch\xfang t\xf4i.",smartTradingService:"Giao d\u1ecbch th\xf4ng minh",smartTradingServiceDesc:"T\u1eadn d\u1ee5ng thu\u1eadt to\xe1n AI \u0111\u1ec3 \u0111\u01b0a ra quy\u1ebft \u0111\u1ecbnh giao d\u1ecbch t\u1ed1i \u01b0u.",investmentService:"\u0110\u1ea7u t\u01b0 & Cho vay",investmentServiceDesc:"T\u0103ng tr\u01b0\u1edfng t\xe0i s\u1ea3n v\u1edbi c\xe1c l\u1ef1a ch\u1ecdn \u0111\u1ea7u t\u01b0 \u0111a d\u1ea1ng v\xe0 cho vay linh ho\u1ea1t.",marketsService:"Th\u1ecb tr\u01b0\u1eddng",marketsServiceDesc:"Truy c\u1eadp d\u1eef li\u1ec7u th\u1eddi gian th\u1ef1c tr\xean c\xe1c th\u1ecb tr\u01b0\u1eddng kh\xe1c nhau: ti\u1ec1n \u0111i\u1ec7n t\u1eed, ngo\u1ea1i h\u1ed1i, c\u1ed5 phi\u1ebfu, ETF, h\u1ee3p \u0111\u1ed3ng t\u01b0\u01a1ng lai.",marketSubtitle:"D\u1eef li\u1ec7u th\u1ecb tr\u01b0\u1eddng th\u1eddi gian th\u1ef1c tr\xean t\u1ea5t c\u1ea3 c\xe1c lo\u1ea1i t\xe0i s\u1ea3n",featuredMarkets:"Th\u1ecb tr\u01b0\u1eddng n\u1ed5i b\u1eadt",marketTable:"D\u1eef li\u1ec7u th\u1ecb tr\u01b0\u1eddng",loadingMarketData:"\u0110ang t\u1ea3i d\u1eef li\u1ec7u th\u1ecb tr\u01b0\u1eddng...",failedToLoad:"Kh\xf4ng th\u1ec3 t\u1ea3i d\u1eef li\u1ec7u th\u1ecb tr\u01b0\u1eddng",accountSubtitle:"Qu\u1ea3n l\xfd t\xe0i kho\u1ea3n giao d\u1ecbch v\xe0 c\xe0i \u0111\u1eb7t c\u1ee7a b\u1ea1n",accountSummary:"T\xf3m t\u1eaft t\xe0i kho\u1ea3n",orders:"L\u1ec7nh",settings:"C\xe0i \u0111\u1eb7t",verification:"X\xe1c minh t\xe0i kho\u1ea3n",inviteFriends:"M\u1eddi b\u1ea1n b\xe8",liveChat:"Tr\xf2 chuy\u1ec7n tr\u1ef1c ti\u1ebfp",notifications:"Th\xf4ng b\xe1o",loanSubtitle:"Gi\u1ea3i ph\xe1p \u0111\u1ea7u t\u01b0 v\xe0 cho vay linh ho\u1ea1t",loanAmount:"S\u1ed1 ti\u1ec1n vay",currency:"Ti\u1ec1n t\u1ec7",loanTerm:"K\u1ef3 h\u1ea1n vay",interestRate:"L\xe3i su\u1ea5t",monthlyPayment:"Thanh to\xe1n h\xe0ng th\xe1ng",tradingOptions:"T\xf9y ch\u1ecdn giao d\u1ecbch",investment:"\u0110\u1ea7u t\u01b0",available:"C\xf3 s\u1eb5n",fee:"Ph\xed",callUp:"Mua (L\xean)",putDown:"B\xe1n (Xu\u1ed1ng)",createPlan:"T\u1ea1o k\u1ebf ho\u1ea1ch giao d\u1ecbch!",smartTradingInfo:"Giao d\u1ecbch th\xf4ng minh l\xe0 g\xec?",tradingStrategy:"Chi\u1ebfn l\u01b0\u1ee3c giao d\u1ecbch",marketAnalysis:"Ph\xe2n t\xedch th\u1ecb tr\u01b0\u1eddng",riskWarning:"C\u1ea3nh b\xe1o r\u1ee7i ro",createPlanTitle:"T\u1ea1o k\u1ebf ho\u1ea1ch giao d\u1ecbch",amount:"S\u1ed1 ti\u1ec1n",timeframe:"Khung th\u1eddi gian",amountLimit:"Gi\u1edbi h\u1ea1n s\u1ed1 ti\u1ec1n",dailyYield:"L\u1ee3i nhu\u1eadn h\xe0ng ng\xe0y",product:"S\u1ea3n ph\u1ea9m",create:"T\u1ea1o",faqTitle:"C\xe2u h\u1ecfi th\u01b0\u1eddng g\u1eb7p v\u1ec1 giao d\u1ecbch th\xf4ng minh",name:"T\xean",price:"Gi\xe1",change:"Thay \u0111\u1ed5i",volume:"Kh\u1ed1i l\u01b0\u1ee3ng",high:"Cao",low:"Th\u1ea5p",open:"M\u1edf",buy:"Mua",sell:"B\xe1n",watchlist:"Danh s\xe1ch theo d\xf5i",details:"Chi ti\u1ebft"},ja:{home:"\u30db\u30fc\u30e0",market:"\u30de\u30fc\u30b1\u30c3\u30c8",smartTrading:"\u30b9\u30de\u30fc\u30c8\u30c8\u30ec\u30fc\u30c7\u30a3\u30f3\u30b0",loan:"\u30ed\u30fc\u30f3",account:"\u30a2\u30ab\u30a6\u30f3\u30c8",language:"\u8a00\u8a9e",marketTitle:"\u30de\u30fc\u30b1\u30c3\u30c8",forex:"\u5916\u56fd\u70ba\u66ff",crypto:"\u6697\u53f7\u901a\u8ca8",stocks:"\u682a\u5f0f",etf:"ETF",futures:"\u5148\u7269",smartTradingTitle:"\u30b9\u30de\u30fc\u30c8\u30c8\u30ec\u30fc\u30c7\u30a3\u30f3\u30b0",spotPrice:"\u30b9\u30dd\u30c3\u30c8\u4fa1\u683c",chart:"\u30c1\u30e3\u30fc\u30c8",accountTitle:"\u30a2\u30ab\u30a6\u30f3\u30c8",balance:"\u6b8b\u9ad8",totalBalance:"\u7dcf\u6b8b\u9ad8",availableBalance:"\u5229\u7528\u53ef\u80fd\u6b8b\u9ad8",pendingBalance:"\u4fdd\u7559\u4e2d\u6b8b\u9ad8",loanTitle:"\u6295\u8cc7\u30fb\u878d\u8cc7",borrowNow:"\u4eca\u3059\u3050\u501f\u308a\u308b",loading:"\u8aad\u307f\u8fbc\u307f\u4e2d...",error:"\u30a8\u30e9\u30fc",retry:"\u518d\u8a66\u884c",close:"\u9589\u3058\u308b",save:"\u4fdd\u5b58",cancel:"\u30ad\u30e3\u30f3\u30bb\u30eb",products:"\u5546\u54c1",company:"\u4f1a\u793e",policies:"\u30dd\u30ea\u30b7\u30fc",aboutUs:"\u79c1\u305f\u3061\u306b\u3064\u3044\u3066",helpCenter:"\u30d8\u30eb\u30d7\u30bb\u30f3\u30bf\u30fc",termsConditions:"\u5229\u7528\u898f\u7d04",privacyPolicy:"\u30d7\u30e9\u30a4\u30d0\u30b7\u30fc\u30dd\u30ea\u30b7\u30fc",copyright:"\u5168\u8457\u4f5c\u6a29\u6240\u6709."},ko:{home:"\ud648",market:"\ub9c8\ucf13",smartTrading:"\uc2a4\ub9c8\ud2b8 \ud2b8\ub808\uc774\ub529",loan:"\ub300\ucd9c",account:"\uacc4\uc815",language:"\uc5b8\uc5b4",marketTitle:"\ub9c8\ucf13",forex:"\uc678\ud658",crypto:"\uc554\ud638\ud654\ud3d0",stocks:"\uc8fc\uc2dd",etf:"ETF",futures:"\uc120\ubb3c",smartTradingTitle:"\uc2a4\ub9c8\ud2b8 \ud2b8\ub808\uc774\ub529",spotPrice:"\ud604\ubb3c \uac00\uaca9",chart:"\ucc28\ud2b8",accountTitle:"\uacc4\uc815",balance:"\uc794\uc561",totalBalance:"\ucd1d \uc794\uc561",availableBalance:"\uc0ac\uc6a9 \uac00\ub2a5 \uc794\uc561",pendingBalance:"\ub300\uae30 \uc911 \uc794\uc561",loanTitle:"\ud22c\uc790 \ubc0f \ub300\ucd9c",borrowNow:"\uc9c0\uae08 \ub300\ucd9c\ubc1b\uae30",loading:"\ub85c\ub529 \uc911...",error:"\uc624\ub958",retry:"\ub2e4\uc2dc \uc2dc\ub3c4",close:"\ub2eb\uae30",save:"\uc800\uc7a5",cancel:"\ucde8\uc18c",products:"\uc0c1\ud488",company:"\ud68c\uc0ac",policies:"\uc815\ucc45",aboutUs:"\ud68c\uc0ac \uc18c\uac1c",helpCenter:"\ub3c4\uc6c0\ub9d0 \uc13c\ud130",termsConditions:"\uc774\uc6a9\uc57d\uad00",privacyPolicy:"\uac1c\uc778\uc815\ubcf4\ucc98\ub9ac\ubc29\uce68",copyright:"\ubaa8\ub4e0 \uad8c\ub9ac \ubcf4\uc720."},zh:{home:"\u9996\u9875",market:"\u5e02\u573a",smartTrading:"\u667a\u80fd\u4ea4\u6613",loan:"\u8d37\u6b3e",account:"\u8d26\u6237",language:"\u8bed\u8a00",marketTitle:"\u5e02\u573a",forex:"\u5916\u6c47",crypto:"\u52a0\u5bc6\u8d27\u5e01",stocks:"\u80a1\u7968",etf:"ETF",futures:"\u671f\u8d27",smartTradingTitle:"\u667a\u80fd\u4ea4\u6613",spotPrice:"\u73b0\u8d27\u4ef7\u683c",chart:"\u56fe\u8868",accountTitle:"\u8d26\u6237",balance:"\u4f59\u989d",totalBalance:"\u603b\u4f59\u989d",availableBalance:"\u53ef\u7528\u4f59\u989d",pendingBalance:"\u5f85\u5904\u7406\u4f59\u989d",loanTitle:"\u6295\u8d44\u4e0e\u8d37\u6b3e",borrowNow:"\u7acb\u5373\u501f\u6b3e",loading:"\u52a0\u8f7d\u4e2d...",error:"\u9519\u8bef",retry:"\u91cd\u8bd5",close:"\u5173\u95ed",save:"\u4fdd\u5b58",cancel:"\u53d6\u6d88",products:"\u4ea7\u54c1",company:"\u516c\u53f8",policies:"\u653f\u7b56",aboutUs:"\u5173\u4e8e\u6211\u4eec",helpCenter:"\u5e2e\u52a9\u4e2d\u5fc3",termsConditions:"\u6761\u6b3e\u548c\u6761\u4ef6",privacyPolicy:"\u9690\u79c1\u653f\u7b56",copyright:"\u7248\u6743\u6240\u6709."},es:{home:"Inicio",market:"Mercado",smartTrading:"Trading inteligente",loan:"Pr\xe9stamo",account:"Cuenta",language:"Idioma",marketTitle:"Mercado",forex:"Forex",crypto:"Criptomonedas",stocks:"Acciones",etf:"ETF",futures:"Futuros",smartTradingTitle:"Trading inteligente",spotPrice:"Precio spot",chart:"Gr\xe1fico",accountTitle:"Cuenta",balance:"Saldo",totalBalance:"Saldo total",availableBalance:"Saldo disponible",pendingBalance:"Saldo pendiente",loanTitle:"Inversi\xf3n y pr\xe9stamos",borrowNow:"Pedir pr\xe9stamo",loading:"Cargando...",error:"Error",retry:"Reintentar",close:"Cerrar",save:"Guardar",cancel:"Cancelar",products:"Productos",company:"Empresa",policies:"Pol\xedticas",aboutUs:"Acerca de nosotros",helpCenter:"Centro de ayuda",termsConditions:"T\xe9rminos y condiciones",privacyPolicy:"Pol\xedtica de privacidad",copyright:"Todos los derechos reservados."},fr:{home:"Accueil",market:"March\xe9",smartTrading:"Trading intelligent",loan:"Pr\xeat",account:"Compte",language:"Langue",marketTitle:"March\xe9",forex:"Forex",crypto:"Cryptomonnaies",stocks:"Actions",etf:"ETF",futures:"Futurs",smartTradingTitle:"Trading intelligent",spotPrice:"Prix au comptant",chart:"Graphique",accountTitle:"Compte",balance:"Solde",totalBalance:"Solde total",availableBalance:"Solde disponible",pendingBalance:"Solde en attente",loanTitle:"Investissement et pr\xeats",borrowNow:"Emprunter maintenant",loading:"Chargement...",error:"Erreur",retry:"R\xe9essayer",close:"Fermer",save:"Enregistrer",cancel:"Annuler",products:"Produits",company:"Entreprise",policies:"Politiques",aboutUs:"\xc0 propos de nous",helpCenter:"Centre d'aide",termsConditions:"Termes et conditions",privacyPolicy:"Politique de confidentialit\xe9",copyright:"Tous droits r\xe9serv\xe9s."},de:{home:"Startseite",market:"Markt",smartTrading:"Intelligenter Handel",loan:"Darlehen",account:"Konto",language:"Sprache",marketTitle:"Markt",forex:"Forex",crypto:"Kryptow\xe4hrungen",stocks:"Aktien",etf:"ETF",futures:"Terminkontrakte",smartTradingTitle:"Intelligenter Handel",spotPrice:"Kassakurs",chart:"Diagramm",accountTitle:"Konto",balance:"Guthaben",totalBalance:"Gesamtguthaben",availableBalance:"Verf\xfcgbares Guthaben",pendingBalance:"Ausstehendes Guthaben",loanTitle:"Investition und Darlehen",borrowNow:"Jetzt leihen",loading:"Laden...",error:"Fehler",retry:"Wiederholen",close:"Schlie\xdfen",save:"Speichern",cancel:"Abbrechen",products:"Produkte",company:"Unternehmen",policies:"Richtlinien",aboutUs:"\xdcber uns",helpCenter:"Hilfezentrum",termsConditions:"Gesch\xe4ftsbedingungen",privacyPolicy:"Datenschutzrichtlinie",copyright:"Alle Rechte vorbehalten."},pt:{home:"In\xedcio",market:"Mercado",smartTrading:"Trading inteligente",loan:"Empr\xe9stimo",account:"Conta",language:"Idioma",marketTitle:"Mercado",forex:"Forex",crypto:"Criptomoedas",stocks:"A\xe7\xf5es",etf:"ETF",futures:"Futuros",smartTradingTitle:"Trading inteligente",spotPrice:"Pre\xe7o \xe0 vista",chart:"Gr\xe1fico",accountTitle:"Conta",balance:"Saldo",totalBalance:"Saldo total",availableBalance:"Saldo dispon\xedvel",pendingBalance:"Saldo pendente",loanTitle:"Investimento e empr\xe9stimos",borrowNow:"Pegar empr\xe9stimo",loading:"Carregando...",error:"Erro",retry:"Tentar novamente",close:"Fechar",save:"Salvar",cancel:"Cancelar",products:"Produtos",company:"Empresa",policies:"Pol\xedticas",aboutUs:"Sobre n\xf3s",helpCenter:"Central de ajuda",termsConditions:"Termos e condi\xe7\xf5es",privacyPolicy:"Pol\xedtica de privacidade",copyright:"Todos os direitos reservados."},ru:{home:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f",market:"\u0420\u044b\u043d\u043e\u043a",smartTrading:"\u0423\u043c\u043d\u0430\u044f \u0442\u043e\u0440\u0433\u043e\u0432\u043b\u044f",loan:"\u041a\u0440\u0435\u0434\u0438\u0442",account:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442",language:"\u042f\u0437\u044b\u043a",marketTitle:"\u0420\u044b\u043d\u043e\u043a",forex:"\u0424\u043e\u0440\u0435\u043a\u0441",crypto:"\u041a\u0440\u0438\u043f\u0442\u043e\u0432\u0430\u043b\u044e\u0442\u044b",stocks:"\u0410\u043a\u0446\u0438\u0438",etf:"ETF",futures:"\u0424\u044c\u044e\u0447\u0435\u0440\u0441\u044b",smartTradingTitle:"\u0423\u043c\u043d\u0430\u044f \u0442\u043e\u0440\u0433\u043e\u0432\u043b\u044f",spotPrice:"\u0421\u043f\u043e\u0442 \u0446\u0435\u043d\u0430",chart:"\u0413\u0440\u0430\u0444\u0438\u043a",accountTitle:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442",balance:"\u0411\u0430\u043b\u0430\u043d\u0441",totalBalance:"\u041e\u0431\u0449\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441",availableBalance:"\u0414\u043e\u0441\u0442\u0443\u043f\u043d\u044b\u0439 \u0431\u0430\u043b\u0430\u043d\u0441",pendingBalance:"\u041e\u0436\u0438\u0434\u0430\u044e\u0449\u0438\u0439 \u0431\u0430\u043b\u0430\u043d\u0441",loanTitle:"\u0418\u043d\u0432\u0435\u0441\u0442\u0438\u0446\u0438\u0438 \u0438 \u043a\u0440\u0435\u0434\u0438\u0442\u044b",borrowNow:"\u0412\u0437\u044f\u0442\u044c \u043a\u0440\u0435\u0434\u0438\u0442",loading:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",error:"\u041e\u0448\u0438\u0431\u043a\u0430",retry:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c",close:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",save:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",cancel:"\u041e\u0442\u043c\u0435\u043d\u0430",products:"\u041f\u0440\u043e\u0434\u0443\u043a\u0442\u044b",company:"\u041a\u043e\u043c\u043f\u0430\u043d\u0438\u044f",policies:"\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0438",aboutUs:"\u041e \u043d\u0430\u0441",helpCenter:"\u0426\u0435\u043d\u0442\u0440 \u043f\u043e\u043c\u043e\u0449\u0438",termsConditions:"\u0423\u0441\u043b\u043e\u0432\u0438\u044f \u0438\u0441\u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f",privacyPolicy:"\u041f\u043e\u043b\u0438\u0442\u0438\u043a\u0430 \u043a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438",copyright:"\u0412\u0441\u0435 \u043f\u0440\u0430\u0432\u0430 \u0437\u0430\u0449\u0438\u0449\u0435\u043d\u044b."},th:{home:"\u0e2b\u0e19\u0e49\u0e32\u0e41\u0e23\u0e01",market:"\u0e15\u0e25\u0e32\u0e14",smartTrading:"\u0e01\u0e32\u0e23\u0e40\u0e17\u0e23\u0e14\u0e2d\u0e31\u0e08\u0e09\u0e23\u0e34\u0e22\u0e30",loan:"\u0e40\u0e07\u0e34\u0e19\u0e01\u0e39\u0e49",account:"\u0e1a\u0e31\u0e0d\u0e0a\u0e35",language:"\u0e20\u0e32\u0e29\u0e32",marketTitle:"\u0e15\u0e25\u0e32\u0e14",forex:"\u0e1f\u0e2d\u0e40\u0e23\u0e47\u0e01\u0e0b\u0e4c",crypto:"\u0e2a\u0e01\u0e38\u0e25\u0e40\u0e07\u0e34\u0e19\u0e14\u0e34\u0e08\u0e34\u0e17\u0e31\u0e25",stocks:"\u0e2b\u0e38\u0e49\u0e19",etf:"ETF",futures:"\u0e1f\u0e34\u0e27\u0e40\u0e08\u0e2d\u0e23\u0e4c\u0e2a",smartTradingTitle:"\u0e01\u0e32\u0e23\u0e40\u0e17\u0e23\u0e14\u0e2d\u0e31\u0e08\u0e09\u0e23\u0e34\u0e22\u0e30",spotPrice:"\u0e23\u0e32\u0e04\u0e32\u0e2a\u0e1b\u0e2d\u0e15",chart:"\u0e01\u0e23\u0e32\u0e1f",accountTitle:"\u0e1a\u0e31\u0e0d\u0e0a\u0e35",balance:"\u0e22\u0e2d\u0e14\u0e40\u0e07\u0e34\u0e19",totalBalance:"\u0e22\u0e2d\u0e14\u0e40\u0e07\u0e34\u0e19\u0e23\u0e27\u0e21",availableBalance:"\u0e22\u0e2d\u0e14\u0e40\u0e07\u0e34\u0e19\u0e17\u0e35\u0e48\u0e43\u0e0a\u0e49\u0e44\u0e14\u0e49",pendingBalance:"\u0e22\u0e2d\u0e14\u0e40\u0e07\u0e34\u0e19\u0e23\u0e2d\u0e14\u0e33\u0e40\u0e19\u0e34\u0e19\u0e01\u0e32\u0e23",loanTitle:"\u0e01\u0e32\u0e23\u0e25\u0e07\u0e17\u0e38\u0e19\u0e41\u0e25\u0e30\u0e40\u0e07\u0e34\u0e19\u0e01\u0e39\u0e49",borrowNow:"\u0e01\u0e39\u0e49\u0e40\u0e07\u0e34\u0e19\u0e15\u0e2d\u0e19\u0e19\u0e35\u0e49",loading:"\u0e01\u0e33\u0e25\u0e31\u0e07\u0e42\u0e2b\u0e25\u0e14...",error:"\u0e02\u0e49\u0e2d\u0e1c\u0e34\u0e14\u0e1e\u0e25\u0e32\u0e14",retry:"\u0e25\u0e2d\u0e07\u0e43\u0e2b\u0e21\u0e48",close:"\u0e1b\u0e34\u0e14",save:"\u0e1a\u0e31\u0e19\u0e17\u0e36\u0e01",cancel:"\u0e22\u0e01\u0e40\u0e25\u0e34\u0e01",products:"\u0e1c\u0e25\u0e34\u0e15\u0e20\u0e31\u0e13\u0e11\u0e4c",company:"\u0e1a\u0e23\u0e34\u0e29\u0e31\u0e17",policies:"\u0e19\u0e42\u0e22\u0e1a\u0e32\u0e22",aboutUs:"\u0e40\u0e01\u0e35\u0e48\u0e22\u0e27\u0e01\u0e31\u0e1a\u0e40\u0e23\u0e32",helpCenter:"\u0e28\u0e39\u0e19\u0e22\u0e4c\u0e0a\u0e48\u0e27\u0e22\u0e40\u0e2b\u0e25\u0e37\u0e2d",termsConditions:"\u0e02\u0e49\u0e2d\u0e01\u0e33\u0e2b\u0e19\u0e14\u0e41\u0e25\u0e30\u0e40\u0e07\u0e37\u0e48\u0e2d\u0e19\u0e44\u0e02",privacyPolicy:"\u0e19\u0e42\u0e22\u0e1a\u0e32\u0e22\u0e04\u0e27\u0e32\u0e21\u0e40\u0e1b\u0e47\u0e19\u0e2a\u0e48\u0e27\u0e19\u0e15\u0e31\u0e27",copyright:"\u0e2a\u0e07\u0e27\u0e19\u0e25\u0e34\u0e02\u0e2a\u0e34\u0e17\u0e18\u0e34\u0e4c."},id:{home:"Beranda",market:"Pasar",smartTrading:"Trading pintar",loan:"Pinjaman",account:"Akun",language:"Bahasa",marketTitle:"Pasar",forex:"Forex",crypto:"Kripto",stocks:"Saham",etf:"ETF",futures:"Berjangka",smartTradingTitle:"Trading pintar",spotPrice:"Harga spot",chart:"Grafik",accountTitle:"Akun",balance:"Saldo",totalBalance:"Total saldo",availableBalance:"Saldo tersedia",pendingBalance:"Saldo tertunda",loanTitle:"Investasi dan pinjaman",borrowNow:"Pinjam sekarang",loading:"Memuat...",error:"Kesalahan",retry:"Coba lagi",close:"Tutup",save:"Simpan",cancel:"Batal",products:"Produk",company:"Perusahaan",policies:"Kebijakan",aboutUs:"Tentang kami",helpCenter:"Pusat bantuan",termsConditions:"Syarat dan ketentuan",privacyPolicy:"Kebijakan privasi",copyright:"Semua hak dilindungi."},ms:{home:"Laman utama",market:"Pasaran",smartTrading:"Perdagangan pintar",loan:"Pinjaman",account:"Akaun",language:"Bahasa",marketTitle:"Pasaran",forex:"Forex",crypto:"Kripto",stocks:"Saham",etf:"ETF",futures:"Hadapan",smartTradingTitle:"Perdagangan pintar",spotPrice:"Harga spot",chart:"Carta",accountTitle:"Akaun",balance:"Baki",totalBalance:"Jumlah baki",availableBalance:"Baki tersedia",pendingBalance:"Baki tertunda",loanTitle:"Pelaburan dan pinjaman",borrowNow:"Pinjam sekarang",loading:"Memuatkan...",error:"Ralat",retry:"Cuba lagi",close:"Tutup",save:"Simpan",cancel:"Batal",products:"Produk",company:"Syarikat",policies:"Dasar",aboutUs:"Tentang kami",helpCenter:"Pusat bantuan",termsConditions:"Terma dan syarat",privacyPolicy:"Dasar privasi",copyright:"Hak cipta terpelihara."}},Me={en:"English",vi:"Ti\u1ebfng Vi\u1ec7t",ja:"\u65e5\u672c\u8a9e",ko:"\ud55c\uad6d\uc5b4",zh:"\u7b80\u4f53\u4e2d\u6587",es:"Espa\xf1ol",fr:"Fran\xe7ais",de:"Deutsch",pt:"Portugu\xeas",ru:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a",th:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22",id:"Indonesian",ms:"Melayu"},Re=e=>{let{children:t}=e;const[n,r]=(0,s.useState)(()=>localStorage.getItem("selectedLanguage")||"en");(0,s.useEffect)(()=>{localStorage.setItem("selectedLanguage",n)},[n]);const i={currentLanguage:n,changeLanguage:e=>{r(e)},t:e=>{var t;return(null===(t=De[n])||void 0===t?void 0:t[e])||De.en[e]||e},languageNames:Me,translations:De};return(0,Pe.jsx)(je.Provider,{value:i,children:t})},Oe=()=>{const e=(0,s.useContext)(je);if(!e)throw new Error("useLanguage must be used within a LanguageProvider");return e};function Le(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Fe(e,t,n){Le(e,t),t.set(e,n)}function Ue(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function Be(e,t){return e.get(Ue(e,t))}function Ve(e,t,n){return e.set(Ue(e,t),n),n}function ze(e,t,n){const r=t.split("|").map(e=>e.trim());for(let i=0;i<r.length;i++)switch(t){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof e===t)return}const s=new Error("invalid value for type ".concat(t));throw s.code="INVALID_ARGUMENT",s.argument="value.".concat(n),s.value=e,s}async function Ge(e){const t=Object.keys(e);return(await Promise.all(t.map(t=>Promise.resolve(e[t])))).reduce((e,n,r)=>(e[t[r]]=n,e),{})}function He(e,t,n){for(let r in t){let s=t[r];const i=n?n[r]:null;i&&ze(s,i,r),Object.defineProperty(e,r,{enumerable:!0,value:s,writable:!1})}}function qe(e,t){if(null==e)return"null";if(null==t&&(t=new Set),"object"===typeof e){if(t.has(e))return"[Circular]";t.add(e)}if(Array.isArray(e))return"[ "+e.map(e=>qe(e,t)).join(", ")+" ]";if(e instanceof Uint8Array){const t="0123456789abcdef";let n="0x";for(let r=0;r<e.length;r++)n+=t[e[r]>>4],n+=t[15&e[r]];return n}if("object"===typeof e&&"function"===typeof e.toJSON)return qe(e.toJSON(),t);switch(typeof e){case"boolean":case"number":case"symbol":return e.toString();case"bigint":return BigInt(e).toString();case"string":return JSON.stringify(e);case"object":{const n=Object.keys(e);return n.sort(),"{ "+n.map(n=>"".concat(qe(n,t),": ").concat(qe(e[n],t))).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function We(e,t){return e&&e.code===t}function Qe(e){return We(e,"CALL_EXCEPTION")}function Ke(e,t,n){let r,s=e;{const r=[];if(n){if("message"in n||"code"in n||"name"in n)throw new Error("value will overwrite populated values: ".concat(qe(n)));for(const e in n){if("shortMessage"===e)continue;const t=n[e];r.push(e+"="+qe(t))}}r.push("code=".concat(t)),r.push("version=".concat("6.15.0")),r.length&&(e+=" ("+r.join(", ")+")")}switch(t){case"INVALID_ARGUMENT":r=new TypeError(e);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":r=new RangeError(e);break;default:r=new Error(e)}return He(r,{code:t}),n&&Object.assign(r,n),null==r.shortMessage&&He(r,{shortMessage:s}),r}function Je(e,t,n,r){if(!e)throw Ke(t,n,r)}function Ye(e,t,n,r){Je(e,t,"INVALID_ARGUMENT",{argument:n,value:r})}function Ze(e,t,n){null==n&&(n=""),n&&(n=": "+n),Je(e>=t,"missing argument"+n,"MISSING_ARGUMENT",{count:e,expectedCount:t}),Je(e<=t,"too many arguments"+n,"UNEXPECTED_ARGUMENT",{count:e,expectedCount:t})}const Xe=["NFD","NFC","NFKD","NFKC"].reduce((e,t)=>{try{if("test"!=="test".normalize(t))throw new Error("bad");if("NFD"===t){const e=String.fromCharCode(233).normalize("NFD");if(e!==String.fromCharCode(101,769))throw new Error("broken")}e.push(t)}catch(n){}return e},[]);function $e(e,t,n){if(null==n&&(n=""),e!==t){let e=n,t="new";n&&(e+=".",t+=" "+n),Je(!1,"private constructor; use ".concat(e,"from* methods"),"UNSUPPORTED_OPERATION",{operation:t})}}function et(e,t){Le(e,t),t.add(e)}var tt=n(379),nt=n(705);function rt(e,t,n){if(e instanceof Uint8Array)return n?new Uint8Array(e):e;if("string"===typeof e&&e.match(/^0x(?:[0-9a-f][0-9a-f])*$/i)){const t=new Uint8Array((e.length-2)/2);let n=2;for(let r=0;r<t.length;r++)t[r]=parseInt(e.substring(n,n+2),16),n+=2;return t}Ye(!1,"invalid BytesLike value",t||"value",e)}function st(e,t){return rt(e,t,!1)}function it(e,t){return rt(e,t,!0)}function ot(e,t){return!("string"!==typeof e||!e.match(/^0x[0-9A-Fa-f]*$/))&&(("number"!==typeof t||e.length===2+2*t)&&(!0!==t||e.length%2===0))}function at(e){return ot(e,!0)||e instanceof Uint8Array}const ct="0123456789abcdef";function lt(e){const t=st(e);let n="0x";for(let r=0;r<t.length;r++){const e=t[r];n+=ct[(240&e)>>4]+ct[15&e]}return n}function ut(e){return"0x"+e.map(e=>lt(e).substring(2)).join("")}function ht(e){return ot(e,!0)?(e.length-2)/2:st(e).length}function dt(e,t,n){const r=st(e);return null!=n&&n>r.length&&Je(!1,"cannot slice beyond data bounds","BUFFER_OVERRUN",{buffer:r,length:r.length,offset:n}),lt(r.slice(null==t?0:t,null==n?r.length:n))}function ft(e,t,n){const r=st(e);Je(t>=r.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(r),length:t,offset:t+1});const s=new Uint8Array(t);return s.fill(0),n?s.set(r,t-r.length):s.set(r,0),lt(s)}function mt(e,t){return ft(e,t,!0)}const pt=BigInt(0),gt=BigInt(1),yt=9007199254740991;function vt(e,t){const n=St(e,"value"),r=BigInt(Nt(t,"width"));if(Je(n>>r===pt,"overflow","NUMERIC_FAULT",{operation:"fromTwos",fault:"overflow",value:e}),n>>r-gt){return-((~n&(gt<<r)-gt)+gt)}return n}function wt(e,t){let n=xt(e,"value");const r=BigInt(Nt(t,"width")),s=gt<<r-gt;if(n<pt){n=-n,Je(n<=s,"too low","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e});return(~n&(gt<<r)-gt)+gt}return Je(n<s,"too high","NUMERIC_FAULT",{operation:"toTwos",fault:"overflow",value:e}),n}function bt(e,t){const n=St(e,"value"),r=BigInt(Nt(t,"bits"));return n&(gt<<r)-gt}function xt(e,t){switch(typeof e){case"bigint":return e;case"number":return Ye(Number.isInteger(e),"underflow",t||"value",e),Ye(e>=-yt&&e<=yt,"overflow",t||"value",e),BigInt(e);case"string":try{if(""===e)throw new Error("empty string");return"-"===e[0]&&"-"!==e[1]?-BigInt(e.substring(1)):BigInt(e)}catch(DN){Ye(!1,"invalid BigNumberish string: ".concat(DN.message),t||"value",e)}}Ye(!1,"invalid BigNumberish value",t||"value",e)}function St(e,t){const n=xt(e,t);return Je(n>=pt,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:e}),n}const Et="0123456789abcdef";function At(e){if(e instanceof Uint8Array){let t="0x0";for(const n of e)t+=Et[n>>4],t+=Et[15&n];return BigInt(t)}return xt(e)}function Nt(e,t){switch(typeof e){case"bigint":return Ye(e>=-yt&&e<=yt,"overflow",t||"value",e),Number(e);case"number":return Ye(Number.isInteger(e),"underflow",t||"value",e),Ye(e>=-yt&&e<=yt,"overflow",t||"value",e),e;case"string":try{if(""===e)throw new Error("empty string");return Nt(BigInt(e),t)}catch(DN){Ye(!1,"invalid numeric string: ".concat(DN.message),t||"value",e)}}Ye(!1,"invalid numeric value",t||"value",e)}function Tt(e,t){let n=St(e,"value").toString(16);if(null==t)n.length%2&&(n="0"+n);else{const r=Nt(t,"width");for(Je(2*r>=n.length,"value exceeds width (".concat(r," bytes)"),"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:e});n.length<2*r;)n="0"+n}return"0x"+n}function kt(e){const t=St(e,"value");if(t===pt)return new Uint8Array([]);let n=t.toString(16);n.length%2&&(n="0"+n);const r=new Uint8Array(n.length/2);for(let s=0;s<r.length;s++){const e=2*s;r[s]=parseInt(n.substring(e,e+2),16)}return r}function Ct(e){let t=lt(at(e)?e:kt(e)).substring(2);for(;t.startsWith("0");)t=t.substring(1);return""===t&&(t="0"),"0x"+t}const It=32,_t=new Uint8Array(It),Pt=["then"],jt={},Dt=new WeakMap;function Mt(e){return Dt.get(e)}function Rt(e,t){Dt.set(e,t)}function Ot(e,t){const n=new Error("deferred error during ABI decoding triggered accessing ".concat(e));throw n.error=t,n}function Lt(e,t,n){return e.indexOf(null)>=0?t.map((e,t)=>e instanceof Ut?Lt(Mt(e),e,n):e):e.reduce((e,r,s)=>{let i=t.getValue(r);return r in e||(n&&i instanceof Ut&&(i=Lt(Mt(i),i,n)),e[r]=i),e},{})}var Ft=new WeakMap;class Ut extends Array{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=t[0];let s=t[1],i=(t[2]||[]).slice(),o=!0;r!==jt&&(s=t,i=[],o=!1),super(s.length),Fe(this,Ft,void 0),s.forEach((e,t)=>{this[t]=e});const a=i.reduce((e,t)=>("string"===typeof t&&e.set(t,(e.get(t)||0)+1),e),new Map);if(Rt(this,Object.freeze(s.map((e,t)=>{const n=i[t];return null!=n&&1===a.get(n)?n:null}))),Ve(Ft,this,[]),null==Be(Ft,this)&&Be(Ft,this),!o)return;Object.freeze(this);const c=new Proxy(this,{get:(e,t,n)=>{if("string"===typeof t){if(t.match(/^[0-9]+$/)){const n=Nt(t,"%index");if(n<0||n>=this.length)throw new RangeError("out of result range");const r=e[n];return r instanceof Error&&Ot("index ".concat(n),r),r}if(Pt.indexOf(t)>=0)return Reflect.get(e,t,n);const r=e[t];if(r instanceof Function)return function(){for(var t=arguments.length,s=new Array(t),i=0;i<t;i++)s[i]=arguments[i];return r.apply(this===n?e:this,s)};if(!(t in e))return e.getValue.apply(this===n?e:this,[t])}return Reflect.get(e,t,n)}});return Rt(c,Mt(this)),c}toArray(e){const t=[];return this.forEach((n,r)=>{n instanceof Error&&Ot("index ".concat(r),n),e&&n instanceof Ut&&(n=n.toArray(e)),t.push(n)}),t}toObject(e){const t=Mt(this);return t.reduce((n,r,s)=>(Je(null!=r,"value at index ".concat(s," unnamed"),"UNSUPPORTED_OPERATION",{operation:"toObject()"}),Lt(t,this,e)),{})}slice(e,t){null==e&&(e=0),e<0&&(e+=this.length)<0&&(e=0),null==t&&(t=this.length),t<0&&(t+=this.length)<0&&(t=0),t>this.length&&(t=this.length);const n=Mt(this),r=[],s=[];for(let i=e;i<t;i++)r.push(this[i]),s.push(n[i]);return new Ut(jt,r,s)}filter(e,t){const n=Mt(this),r=[],s=[];for(let i=0;i<this.length;i++){const o=this[i];o instanceof Error&&Ot("index ".concat(i),o),e.call(t,o,i,this)&&(r.push(o),s.push(n[i]))}return new Ut(jt,r,s)}map(e,t){const n=[];for(let r=0;r<this.length;r++){const s=this[r];s instanceof Error&&Ot("index ".concat(r),s),n.push(e.call(t,s,r,this))}return n}getValue(e){const t=Mt(this).indexOf(e);if(-1===t)return;const n=this[t];return n instanceof Error&&Ot("property ".concat(JSON.stringify(e)),n.error),n}static fromItems(e,t){return new Ut(jt,e,t)}}function Bt(e){let t=kt(e);return Je(t.length<=It,"value out-of-bounds","BUFFER_OVERRUN",{buffer:t,length:It,offset:t.length}),t.length!==It&&(t=it(ut([_t.slice(t.length%It),t]))),t}class Vt{constructor(e,t,n,r){(0,nt.A)(this,"name",void 0),(0,nt.A)(this,"type",void 0),(0,nt.A)(this,"localName",void 0),(0,nt.A)(this,"dynamic",void 0),He(this,{name:e,type:t,localName:n,dynamic:r},{name:"string",type:"string",localName:"string",dynamic:"boolean"})}_throwError(e,t){Ye(!1,e,this.localName,t)}}var zt=new WeakMap,Gt=new WeakMap,Ht=new WeakSet;class qt{constructor(){et(this,Ht),Fe(this,zt,void 0),Fe(this,Gt,void 0),Ve(zt,this,[]),Ve(Gt,this,0)}get data(){return ut(Be(zt,this))}get length(){return Be(Gt,this)}appendWriter(e){return Ue(Ht,this,Wt).call(this,it(e.data))}writeBytes(e){let t=it(e);const n=t.length%It;return n&&(t=it(ut([t,_t.slice(n)]))),Ue(Ht,this,Wt).call(this,t)}writeValue(e){return Ue(Ht,this,Wt).call(this,Bt(e))}writeUpdatableValue(){const e=Be(zt,this).length;return Be(zt,this).push(_t),Ve(Gt,this,Be(Gt,this)+It),t=>{Be(zt,this)[e]=Bt(t)}}}function Wt(e){return Be(zt,this).push(e),Ve(Gt,this,Be(Gt,this)+e.length),e.length}var Qt=new WeakMap,Kt=new WeakMap,Jt=new WeakMap,Yt=new WeakMap,Zt=new WeakMap,Xt=new WeakSet;class $t{constructor(e,t,n){et(this,Xt),(0,nt.A)(this,"allowLoose",void 0),Fe(this,Qt,void 0),Fe(this,Kt,void 0),Fe(this,Jt,void 0),Fe(this,Yt,void 0),Fe(this,Zt,void 0),He(this,{allowLoose:!!t}),Ve(Qt,this,it(e)),Ve(Jt,this,0),Ve(Yt,this,null),Ve(Zt,this,null!=n?n:1024),Ve(Kt,this,0)}get data(){return lt(Be(Qt,this))}get dataLength(){return Be(Qt,this).length}get consumed(){return Be(Kt,this)}get bytes(){return new Uint8Array(Be(Qt,this))}subReader(e){const t=new $t(Be(Qt,this).slice(Be(Kt,this)+e),this.allowLoose,Be(Zt,this));return Ve(Yt,t,this),t}readBytes(e,t){let n=Ue(Xt,this,tn).call(this,0,e,!!t);return Ue(Xt,this,en).call(this,e),Ve(Kt,this,Be(Kt,this)+n.length),n.slice(0,e)}readValue(){return At(this.readBytes(It))}readIndex(){return Nt(At(this.readBytes(It)))}}function en(e){var t;if(Be(Yt,this))return Ue(Xt,t=Be(Yt,this),en).call(t,e);Ve(Jt,this,Be(Jt,this)+e),Je(Be(Zt,this)<1||Be(Jt,this)<=Be(Zt,this)*this.dataLength,"compressed ABI data exceeds inflation ratio of ".concat(Be(Zt,this)," ( see: https://github.com/ethers-io/ethers.js/issues/4537 )"),"BUFFER_OVERRUN",{buffer:it(Be(Qt,this)),offset:Be(Kt,this),length:e,info:{bytesRead:Be(Jt,this),dataLength:this.dataLength}})}function tn(e,t,n){let r=Math.ceil(t/It)*It;return Be(Kt,this)+r>Be(Qt,this).length&&(this.allowLoose&&n&&Be(Kt,this)+t<=Be(Qt,this).length?r=t:Je(!1,"data out-of-bounds","BUFFER_OVERRUN",{buffer:it(Be(Qt,this)),length:Be(Qt,this).length,offset:Be(Kt,this)+r})),Be(Qt,this).slice(Be(Kt,this),Be(Kt,this)+r)}function nn(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("Wrong positive integer: ".concat(e))}function rn(e){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(n.length>0&&!n.includes(e.length))throw new Error("Expected Uint8Array of length ".concat(n,", not of length=").concat(e.length))}function sn(e){if("function"!==typeof e||"function"!==typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");nn(e.outputLen),nn(e.blockLen)}function on(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function an(e,t){rn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least ".concat(n))}const cn=BigInt(2**32-1),ln=BigInt(32);function un(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&cn),l:Number(e>>ln&cn)}:{h:0|Number(e>>ln&cn),l:0|Number(e&cn)}}function hn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:i,l:o}=un(e[s],t);[n[s],r[s]]=[i,o]}return[n,r]}const dn=(e,t,n)=>e<<n|t>>>32-n,fn=(e,t,n)=>t<<n|e>>>32-n,mn=(e,t,n)=>t<<n-32|e>>>64-n,pn=(e,t,n)=>e<<n-32|t>>>64-n;const gn={fromBig:un,split:hn,toBig:(e,t)=>BigInt(e>>>0)<<ln|BigInt(t>>>0),shrSH:(e,t,n)=>e>>>n,shrSL:(e,t,n)=>e<<32-n|t>>>n,rotrSH:(e,t,n)=>e>>>n|t<<32-n,rotrSL:(e,t,n)=>e<<32-n|t>>>n,rotrBH:(e,t,n)=>e<<64-n|t>>>n-32,rotrBL:(e,t,n)=>e>>>n-32|t<<64-n,rotr32H:(e,t)=>t,rotr32L:(e,t)=>e,rotlSH:dn,rotlSL:fn,rotlBH:mn,rotlBL:pn,add:function(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:0|s}},add3L:(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0),add3H:(e,t,n,r)=>t+n+r+(e/2**32|0)|0,add4L:(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0),add4H:(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0,add5H:(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0,add5L:(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0)},yn="object"===typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,vn=e=>e instanceof Uint8Array,wn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),bn=(e,t)=>e<<32-t|e>>>t;if(!(68===new Uint8Array(new Uint32Array([287454020]).buffer)[0]))throw new Error("Non little-endian hardware is not supported");function xn(e){if("string"===typeof e&&(e=function(e){if("string"!==typeof e)throw new Error("utf8ToBytes expected string, got ".concat(typeof e));return new Uint8Array((new TextEncoder).encode(e))}(e)),!vn(e))throw new Error("expected Uint8Array, got ".concat(typeof e));return e}class Sn{clone(){return this._cloneInto()}}function En(e){const t=t=>e().update(xn(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(yn&&"function"===typeof yn.getRandomValues)return yn.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}const[Nn,Tn,kn]=[[],[],[]],Cn=BigInt(0),In=BigInt(1),_n=BigInt(2),Pn=BigInt(7),jn=BigInt(256),Dn=BigInt(113);for(let n=0,RN=In,ON=1,LN=0;n<24;n++){[ON,LN]=[LN,(2*ON+3*LN)%5],Nn.push(2*(5*LN+ON)),Tn.push((n+1)*(n+2)/2%64);let e=Cn;for(let t=0;t<7;t++)RN=(RN<<In^(RN>>Pn)*Dn)%jn,RN&_n&&(e^=In<<(In<<BigInt(t))-In);kn.push(e)}const[Mn,Rn]=hn(kn,!0),On=(e,t,n)=>n>32?mn(e,t,n):dn(e,t,n),Ln=(e,t,n)=>n>32?pn(e,t,n):fn(e,t,n);class Fn extends Sn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:24;if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,nn(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");var i;this.state=new Uint8Array(200),this.state32=(i=this.state,new Uint32Array(i.buffer,i.byteOffset,Math.floor(i.byteLength/4)))}keccak(){!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24;const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let r=0;r<10;r++)n[r]=e[r]^e[r+10]^e[r+20]^e[r+30]^e[r+40];for(let r=0;r<10;r+=2){const t=(r+8)%10,s=(r+2)%10,i=n[s],o=n[s+1],a=On(i,o,1)^n[t],c=Ln(i,o,1)^n[t+1];for(let n=0;n<50;n+=10)e[r+n]^=a,e[r+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const r=Tn[n],i=On(t,s,r),o=Ln(t,s,r),a=Nn[n];t=e[a],s=e[a+1],e[a]=i,e[a+1]=o}for(let r=0;r<50;r+=10){for(let t=0;t<10;t++)n[t]=e[r+t];for(let t=0;t<10;t++)e[r+t]^=~n[(t+2)%10]&n[(t+4)%10]}e[0]^=Mn[r],e[1]^=Rn[r]}n.fill(0)}(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){on(this);const{blockLen:t,state:n}=this,r=(e=xn(e)).length;for(let s=0;s<r;){const i=Math.min(t-this.pos,r-s);for(let t=0;t<i;t++)n[this.pos++]^=e[s++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,0!==(128&t)&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){on(this,!1),rn(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return nn(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(an(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:s,enableXOF:i}=this;return e||(e=new Fn(t,n,r,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=r,e.enableXOF=i,e.destroyed=this.destroyed,e}}const Un=(e,t,n)=>En(()=>new Fn(t,e,n)),Bn=Un(1,136,32);let Vn=!1;const zn=function(e){return Bn(e)};let Gn=zn;function Hn(e){const t=st(e,"data");return lt(Gn(t))}Hn._=zn,Hn.lock=function(){Vn=!0},Hn.register=function(e){if(Vn)throw new TypeError("keccak256 is locked");Gn=e},Object.freeze(Hn);const qn=BigInt(0),Wn=BigInt(36);function Qn(e){const t=(e=e.toLowerCase()).substring(2).split(""),n=new Uint8Array(40);for(let s=0;s<40;s++)n[s]=t[s].charCodeAt(0);const r=st(Hn(n));for(let s=0;s<40;s+=2)r[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(15&r[s>>1])>=8&&(t[s+1]=t[s+1].toUpperCase());return"0x"+t.join("")}const Kn={};for(let n=0;n<10;n++)Kn[String(n)]=String(n);for(let n=0;n<26;n++)Kn[String.fromCharCode(65+n)]=String(10+n);function Jn(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>Kn[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let n=String(98-parseInt(t,10)%97);for(;n.length<2;)n="0"+n;return n}const Yn=function(){const e={};for(let t=0;t<36;t++){e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t)}return e}();function Zn(e){if(Ye("string"===typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);const t=Qn(e);return Ye(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){Ye(e.substring(2,4)===Jn(e),"bad icap checksum","address",e);let t=function(e){e=e.toLowerCase();let t=qn;for(let n=0;n<e.length;n++)t=t*Wn+Yn[e[n]];return t}(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return Qn("0x"+t)}Ye(!1,"invalid address","address",e)}const Xn={};function $n(e,t){let n=!1;return t<0&&(n=!0,t*=-1),new rr(Xn,"".concat(n?"":"u","int").concat(t),e,{signed:n,width:t})}function er(e,t){return new rr(Xn,"bytes".concat(t||""),e,{size:t})}const tr=Symbol.for("_ethers_typed");var nr=new WeakMap;class rr{constructor(e,t,n,r){(0,nt.A)(this,"type",void 0),(0,nt.A)(this,"value",void 0),Fe(this,nr,void 0),(0,nt.A)(this,"_typedSymbol",void 0),null==r&&(r=null),$e(Xn,e,"Typed"),He(this,{_typedSymbol:tr,type:t,value:n}),Ve(nr,this,r),this.format()}format(){if("array"===this.type)throw new Error("");if("dynamicArray"===this.type)throw new Error("");return"tuple"===this.type?"tuple(".concat(this.value.map(e=>e.format()).join(","),")"):this.type}defaultValue(){return 0}minValue(){return 0}maxValue(){return 0}isBigInt(){return!!this.type.match(/^u?int[0-9]+$/)}isData(){return this.type.startsWith("bytes")}isString(){return"string"===this.type}get tupleName(){if("tuple"!==this.type)throw TypeError("not a tuple");return Be(nr,this)}get arrayLength(){if("array"!==this.type)throw TypeError("not an array");return!0===Be(nr,this)?-1:!1===Be(nr,this)?this.value.length:null}static from(e,t){return new rr(Xn,e,t)}static uint8(e){return $n(e,8)}static uint16(e){return $n(e,16)}static uint24(e){return $n(e,24)}static uint32(e){return $n(e,32)}static uint40(e){return $n(e,40)}static uint48(e){return $n(e,48)}static uint56(e){return $n(e,56)}static uint64(e){return $n(e,64)}static uint72(e){return $n(e,72)}static uint80(e){return $n(e,80)}static uint88(e){return $n(e,88)}static uint96(e){return $n(e,96)}static uint104(e){return $n(e,104)}static uint112(e){return $n(e,112)}static uint120(e){return $n(e,120)}static uint128(e){return $n(e,128)}static uint136(e){return $n(e,136)}static uint144(e){return $n(e,144)}static uint152(e){return $n(e,152)}static uint160(e){return $n(e,160)}static uint168(e){return $n(e,168)}static uint176(e){return $n(e,176)}static uint184(e){return $n(e,184)}static uint192(e){return $n(e,192)}static uint200(e){return $n(e,200)}static uint208(e){return $n(e,208)}static uint216(e){return $n(e,216)}static uint224(e){return $n(e,224)}static uint232(e){return $n(e,232)}static uint240(e){return $n(e,240)}static uint248(e){return $n(e,248)}static uint256(e){return $n(e,256)}static uint(e){return $n(e,256)}static int8(e){return $n(e,-8)}static int16(e){return $n(e,-16)}static int24(e){return $n(e,-24)}static int32(e){return $n(e,-32)}static int40(e){return $n(e,-40)}static int48(e){return $n(e,-48)}static int56(e){return $n(e,-56)}static int64(e){return $n(e,-64)}static int72(e){return $n(e,-72)}static int80(e){return $n(e,-80)}static int88(e){return $n(e,-88)}static int96(e){return $n(e,-96)}static int104(e){return $n(e,-104)}static int112(e){return $n(e,-112)}static int120(e){return $n(e,-120)}static int128(e){return $n(e,-128)}static int136(e){return $n(e,-136)}static int144(e){return $n(e,-144)}static int152(e){return $n(e,-152)}static int160(e){return $n(e,-160)}static int168(e){return $n(e,-168)}static int176(e){return $n(e,-176)}static int184(e){return $n(e,-184)}static int192(e){return $n(e,-192)}static int200(e){return $n(e,-200)}static int208(e){return $n(e,-208)}static int216(e){return $n(e,-216)}static int224(e){return $n(e,-224)}static int232(e){return $n(e,-232)}static int240(e){return $n(e,-240)}static int248(e){return $n(e,-248)}static int256(e){return $n(e,-256)}static int(e){return $n(e,-256)}static bytes1(e){return er(e,1)}static bytes2(e){return er(e,2)}static bytes3(e){return er(e,3)}static bytes4(e){return er(e,4)}static bytes5(e){return er(e,5)}static bytes6(e){return er(e,6)}static bytes7(e){return er(e,7)}static bytes8(e){return er(e,8)}static bytes9(e){return er(e,9)}static bytes10(e){return er(e,10)}static bytes11(e){return er(e,11)}static bytes12(e){return er(e,12)}static bytes13(e){return er(e,13)}static bytes14(e){return er(e,14)}static bytes15(e){return er(e,15)}static bytes16(e){return er(e,16)}static bytes17(e){return er(e,17)}static bytes18(e){return er(e,18)}static bytes19(e){return er(e,19)}static bytes20(e){return er(e,20)}static bytes21(e){return er(e,21)}static bytes22(e){return er(e,22)}static bytes23(e){return er(e,23)}static bytes24(e){return er(e,24)}static bytes25(e){return er(e,25)}static bytes26(e){return er(e,26)}static bytes27(e){return er(e,27)}static bytes28(e){return er(e,28)}static bytes29(e){return er(e,29)}static bytes30(e){return er(e,30)}static bytes31(e){return er(e,31)}static bytes32(e){return er(e,32)}static address(e){return new rr(Xn,"address",e)}static bool(e){return new rr(Xn,"bool",!!e)}static bytes(e){return new rr(Xn,"bytes",e)}static string(e){return new rr(Xn,"string",e)}static array(e,t){throw new Error("not implemented yet")}static tuple(e,t){throw new Error("not implemented yet")}static overrides(e){return new rr(Xn,"overrides",Object.assign({},e))}static isTyped(e){return e&&"object"===typeof e&&"_typedSymbol"in e&&e._typedSymbol===tr}static dereference(e,t){if(rr.isTyped(e)){if(e.type!==t)throw new Error("invalid type: expecetd ".concat(t,", got ").concat(e.type));return e.value}return e}}class sr extends Vt{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,t){let n=rr.dereference(t,"string");try{n=Zn(n)}catch(r){return this._throwError(r.message,t)}return e.writeValue(n)}decode(e){return Zn(Tt(e.readValue(),20))}}class ir extends Vt{constructor(e){super(e.name,e.type,"_",e.dynamic),(0,nt.A)(this,"coder",void 0),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,t){return this.coder.encode(e,t)}decode(e){return this.coder.decode(e)}}function or(e,t,n){let r=[];if(Array.isArray(n))r=n;else if(n&&"object"===typeof n){let e={};r=t.map(t=>{const r=t.localName;return Je(r,"cannot encode object for signature with missing names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),Je(!e[r],"cannot encode object for signature with duplicate names","INVALID_ARGUMENT",{argument:"values",info:{coder:t},value:n}),e[r]=!0,n[r]})}else Ye(!1,"invalid tuple value","tuple",n);Ye(t.length===r.length,"types/value length mismatch","tuple",n);let s=new qt,i=new qt,o=[];t.forEach((e,t)=>{let n=r[t];if(e.dynamic){let t=i.length;e.encode(i,n);let r=s.writeUpdatableValue();o.push(e=>{r(e+t)})}else e.encode(s,n)}),o.forEach(e=>{e(s.length)});let a=e.appendWriter(s);return a+=e.appendWriter(i),a}function ar(e,t){let n=[],r=[],s=e.subReader(0);return t.forEach(t=>{let i=null;if(t.dynamic){let n=e.readIndex(),r=s.subReader(n);try{i=t.decode(r)}catch(o){if(We(o,"BUFFER_OVERRUN"))throw o;i=o,i.baseType=t.name,i.name=t.localName,i.type=t.type}}else try{i=t.decode(e)}catch(o){if(We(o,"BUFFER_OVERRUN"))throw o;i=o,i.baseType=t.name,i.name=t.localName,i.type=t.type}if(void 0==i)throw new Error("investigate");n.push(i),r.push(t.localName||null)}),Ut.fromItems(n,r)}class cr extends Vt{constructor(e,t,n){super("array",e.type+"["+(t>=0?t:"")+"]",n,-1===t||e.dynamic),(0,nt.A)(this,"coder",void 0),(0,nt.A)(this,"length",void 0),He(this,{coder:e,length:t})}defaultValue(){const e=this.coder.defaultValue(),t=[];for(let n=0;n<this.length;n++)t.push(e);return t}encode(e,t){const n=rr.dereference(t,"array");Array.isArray(n)||this._throwError("expected array value",n);let r=this.length;-1===r&&(r=n.length,e.writeValue(n.length)),Ze(n.length,r,"coder array"+(this.localName?" "+this.localName:""));let s=[];for(let i=0;i<n.length;i++)s.push(this.coder);return or(e,s,n)}decode(e){let t=this.length;-1===t&&(t=e.readIndex(),Je(t*It<=e.dataLength,"insufficient data length","BUFFER_OVERRUN",{buffer:e.bytes,offset:t*It,length:e.dataLength}));let n=[];for(let r=0;r<t;r++)n.push(new ir(this.coder));return ar(e,n)}}class lr extends Vt{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,t){const n=rr.dereference(t,"bool");return e.writeValue(n?1:0)}decode(e){return!!e.readValue()}}class ur extends Vt{constructor(e,t){super(e,e,t,!0)}defaultValue(){return"0x"}encode(e,t){t=it(t);let n=e.writeValue(t.length);return n+=e.writeBytes(t),n}decode(e){return e.readBytes(e.readIndex(),!0)}}class hr extends ur{constructor(e){super("bytes",e)}decode(e){return lt(super.decode(e))}}class dr extends Vt{constructor(e,t){let n="bytes"+String(e);super(n,n,t,!1),(0,nt.A)(this,"size",void 0),He(this,{size:e},{size:"number"})}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+2*this.size)}encode(e,t){let n=it(rr.dereference(t,this.type));return n.length!==this.size&&this._throwError("incorrect data length",t),e.writeBytes(n)}decode(e){return lt(e.readBytes(this.size))}}const fr=new Uint8Array([]);class mr extends Vt{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,t){return null!=t&&this._throwError("not null",t),e.writeBytes(fr)}decode(e){return e.readBytes(0),null}}const pr=BigInt(0),gr=BigInt(1),yr=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");class vr extends Vt{constructor(e,t,n){const r=(t?"int":"uint")+8*e;super(r,r,n,!1),(0,nt.A)(this,"size",void 0),(0,nt.A)(this,"signed",void 0),He(this,{size:e,signed:t},{size:"number",signed:"boolean"})}defaultValue(){return 0}encode(e,t){let n=xt(rr.dereference(t,this.type)),r=bt(yr,256);if(this.signed){let e=bt(r,8*this.size-1);(n>e||n<-(e+gr))&&this._throwError("value out-of-bounds",t),n=wt(n,256)}else(n<pr||n>bt(r,8*this.size))&&this._throwError("value out-of-bounds",t);return e.writeValue(n)}decode(e){let t=bt(e.readValue(),8*this.size);return this.signed&&(t=vt(t,8*this.size)),t}}function wr(e,t,n,r,s){if("BAD_PREFIX"===e||"UNEXPECTED_CONTINUE"===e){let e=0;for(let r=t+1;r<n.length&&n[r]>>6===2;r++)e++;return e}return"OVERRUN"===e?n.length-t-1:0}const br=Object.freeze({error:function(e,t,n,r,s){Ye(!1,"invalid codepoint at offset ".concat(t,"; ").concat(e),"bytes",n)},ignore:wr,replace:function(e,t,n,r,s){return"OVERLONG"===e?(Ye("number"===typeof s,"invalid bad code point for replacement","badCodepoint",s),r.push(s),0):(r.push(65533),wr(e,t,n))}});function xr(e,t){null==t&&(t=br.error);const n=st(e,"bytes"),r=[];let s=0;for(;s<n.length;){const e=n[s++];if(e>>7===0){r.push(e);continue}let i=null,o=null;if(192===(224&e))i=1,o=127;else if(224===(240&e))i=2,o=2047;else{if(240!==(248&e)){s+=t(128===(192&e)?"UNEXPECTED_CONTINUE":"BAD_PREFIX",s-1,n,r);continue}i=3,o=65535}if(s-1+i>=n.length){s+=t("OVERRUN",s-1,n,r);continue}let a=e&(1<<8-i-1)-1;for(let c=0;c<i;c++){let e=n[s];if(128!=(192&e)){s+=t("MISSING_CONTINUE",s,n,r),a=null;break}a=a<<6|63&e,s++}null!==a&&(a>1114111?s+=t("OUT_OF_RANGE",s-1-i,n,r,a):a>=55296&&a<=57343?s+=t("UTF16_SURROGATE",s-1-i,n,r,a):a<=o?s+=t("OVERLONG",s-1-i,n,r,a):r.push(a))}return r}function Sr(e,t){Ye("string"===typeof e,"invalid string value","str",e),null!=t&&(!function(e){Je(Xe.indexOf(e)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:e}})}(t),e=e.normalize(t));let n=[];for(let r=0;r<e.length;r++){const t=e.charCodeAt(r);if(t<128)n.push(t);else if(t<2048)n.push(t>>6|192),n.push(63&t|128);else if(55296==(64512&t)){r++;const s=e.charCodeAt(r);Ye(r<e.length&&56320===(64512&s),"invalid surrogate pair","str",e);const i=65536+((1023&t)<<10)+(1023&s);n.push(i>>18|240),n.push(i>>12&63|128),n.push(i>>6&63|128),n.push(63&i|128)}else n.push(t>>12|224),n.push(t>>6&63|128),n.push(63&t|128)}return new Uint8Array(n)}function Er(e,t){return xr(e,t).map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10&1023),56320+(1023&e)))).join("")}class Ar extends ur{constructor(e){super("string",e)}defaultValue(){return""}encode(e,t){return super.encode(e,Sr(rr.dereference(t,"string")))}decode(e){return Er(super.decode(e))}}class Nr extends Vt{constructor(e,t){let n=!1;const r=[];e.forEach(e=>{e.dynamic&&(n=!0),r.push(e.type)});super("tuple","tuple("+r.join(",")+")",t,n),(0,nt.A)(this,"coders",void 0),He(this,{coders:Object.freeze(e.slice())})}defaultValue(){const e=[];this.coders.forEach(t=>{e.push(t.defaultValue())});const t=this.coders.reduce((e,t)=>{const n=t.localName;return n&&(e[n]||(e[n]=0),e[n]++),e},{});return this.coders.forEach((n,r)=>{let s=n.localName;s&&1===t[s]&&("length"===s&&(s="_length"),null==e[s]&&(e[s]=e[r]))}),Object.freeze(e)}encode(e,t){const n=rr.dereference(t,"tuple");return or(e,this.coders,n)}decode(e){return ar(e,this.coders)}}function Tr(e){return Hn(Sr(e))}var kr;function Cr(e){const t=new Set;return e.forEach(e=>t.add(e)),Object.freeze(t)}const Ir=Cr("external public payable override".split(" ")),_r="constant external internal payable private public pure view override",Pr=Cr(_r.split(" ")),jr="constructor error event fallback function receive struct",Dr=Cr(jr.split(" ")),Mr="calldata memory storage payable indexed",Rr=Cr(Mr.split(" ")),Or=Cr([jr,Mr,"tuple returns",_r].join(" ").split(" ")),Lr={"(":"OPEN_PAREN",")":"CLOSE_PAREN","[":"OPEN_BRACKET","]":"CLOSE_BRACKET",",":"COMMA","@":"AT"},Fr=new RegExp("^(\\s*)"),Ur=new RegExp("^([0-9]+)"),Br=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)"),Vr=new RegExp("^([a-zA-Z$_][a-zA-Z0-9$_]*)$"),zr=new RegExp("^(address|bool|bytes([0-9]*)|string|u?int([0-9]*))$");var Gr=new WeakMap,Hr=new WeakMap,qr=new WeakSet;class Wr{get offset(){return Be(Gr,this)}get length(){return Be(Hr,this).length-Be(Gr,this)}constructor(e){et(this,qr),Fe(this,Gr,void 0),Fe(this,Hr,void 0),Ve(Gr,this,0),Ve(Hr,this,e.slice())}clone(){return new Wr(Be(Hr,this))}reset(){Ve(Gr,this,0)}popKeyword(e){const t=this.peek();if("KEYWORD"!==t.type||!e.has(t.text))throw new Error("expected keyword ".concat(t.text));return this.pop().text}popType(e){if(this.peek().type!==e){const t=this.peek();throw new Error("expected ".concat(e,"; got ").concat(t.type," ").concat(JSON.stringify(t.text)))}return this.pop().text}popParen(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=Ue(qr,this,Qr).call(this,Be(Gr,this)+1,e.match+1);return Ve(Gr,this,e.match+1),t}popParams(){const e=this.peek();if("OPEN_PAREN"!==e.type)throw new Error("bad start");const t=[];for(;Be(Gr,this)<e.match-1;){const e=this.peek().linkNext;t.push(Ue(qr,this,Qr).call(this,Be(Gr,this)+1,e)),Ve(Gr,this,e)}return Ve(Gr,this,e.match+1),t}peek(){if(Be(Gr,this)>=Be(Hr,this).length)throw new Error("out-of-bounds");return Be(Hr,this)[Be(Gr,this)]}peekKeyword(e){const t=this.peekType("KEYWORD");return null!=t&&e.has(t)?t:null}peekType(e){if(0===this.length)return null;const t=this.peek();return t.type===e?t.text:null}pop(){var e;const t=this.peek();return Ve(Gr,this,(e=Be(Gr,this),e++,e)),t}toString(){const e=[];for(let t=Be(Gr,this);t<Be(Hr,this).length;t++){const n=Be(Hr,this)[t];e.push("".concat(n.type,":").concat(n.text))}return"<TokenString ".concat(e.join(" "),">")}}function Qr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new kr(Be(Hr,this).slice(e,t).map(t=>Object.freeze(Object.assign({},t,{match:t.match-e,linkBack:t.linkBack-e,linkNext:t.linkNext-e}))))}function Kr(e){const t=[],n=t=>{const n=i<e.length?JSON.stringify(e[i]):"$EOI";throw new Error("invalid token ".concat(n," at ").concat(i,": ").concat(t))};let r=[],s=[],i=0;for(;i<e.length;){let o=e.substring(i),a=o.match(Fr);a&&(i+=a[1].length,o=e.substring(i));const c={depth:r.length,linkBack:-1,linkNext:-1,match:-1,type:"",text:"",offset:i,value:-1};t.push(c);let l=Lr[o[0]]||"";if(l){if(c.type=l,c.text=o[0],i++,"OPEN_PAREN"===l)r.push(t.length-1),s.push(t.length-1);else if("CLOSE_PAREN"==l)0===r.length&&n("no matching open bracket"),c.match=r.pop(),t[c.match].match=t.length-1,c.depth--,c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1;else if("COMMA"===l)c.linkBack=s.pop(),t[c.linkBack].linkNext=t.length-1,s.push(t.length-1);else if("OPEN_BRACKET"===l)c.type="BRACKET";else if("CLOSE_BRACKET"===l){let e=t.pop().text;if(t.length>0&&"NUMBER"===t[t.length-1].type){const n=t.pop().text;e=n+e,t[t.length-1].value=Nt(n)}if(0===t.length||"BRACKET"!==t[t.length-1].type)throw new Error("missing opening bracket");t[t.length-1].text+=e}}else if(a=o.match(Br),a){if(c.text=a[1],i+=c.text.length,Or.has(c.text)){c.type="KEYWORD";continue}if(c.text.match(zr)){c.type="TYPE";continue}c.type="ID"}else{if(a=o.match(Ur),!a)throw new Error("unexpected token ".concat(JSON.stringify(o[0])," at position ").concat(i));c.text=a[1],c.type="NUMBER",i+=c.text.length}}return new Wr(t.map(e=>Object.freeze(e)))}function Jr(e,t){let n=[];for(const r in t.keys())e.has(r)&&n.push(r);if(n.length>1)throw new Error("conflicting types: ".concat(n.join(", ")))}function Yr(e,t){if(t.peekKeyword(Dr)){const n=t.pop().text;if(n!==e)throw new Error("expected ".concat(e,", got ").concat(n))}return t.popType("ID")}function Zr(e,t){const n=new Set;for(;;){const r=e.peekType("KEYWORD");if(null==r||t&&!t.has(r))break;if(e.pop(),n.has(r))throw new Error("duplicate keywords: ".concat(JSON.stringify(r)));n.add(r)}return Object.freeze(n)}function Xr(e){let t=Zr(e,Pr);return Jr(t,Cr("constant payable nonpayable".split(" "))),Jr(t,Cr("pure view payable nonpayable".split(" "))),t.has("view")?"view":t.has("pure")?"pure":t.has("payable")?"payable":t.has("nonpayable")?"nonpayable":t.has("constant")?"view":"nonpayable"}function $r(e,t){return e.popParams().map(e=>ms.from(e,t))}function es(e){if(e.peekType("AT")){if(e.pop(),e.peekType("NUMBER"))return xt(e.pop().text);throw new Error("invalid gas")}return null}function ts(e){if(e.length)throw new Error("unexpected tokens at offset ".concat(e.offset,": ").concat(e.toString()))}kr=Wr;const ns=new RegExp(/^(.*)\[([0-9]*)\]$/);function rs(e){const t=e.match(zr);if(Ye(t,"invalid type","type",e),"uint"===e)return"uint256";if("int"===e)return"int256";if(t[2]){const n=parseInt(t[2]);Ye(0!==n&&n<=32,"invalid bytes length","type",e)}else if(t[3]){const n=parseInt(t[3]);Ye(0!==n&&n<=256&&n%8===0,"invalid numeric width","type",e)}return e}const ss={},is=Symbol.for("_ethers_internal"),os="_ParamTypeInternal",as="_ErrorInternal",cs="_EventInternal",ls="_ConstructorInternal",us="_FallbackInternal",hs="_FunctionInternal",ds="_StructInternal";var fs=new WeakSet;class ms{constructor(e,t,n,r,s,i,o,a){if(et(this,fs),(0,nt.A)(this,"name",void 0),(0,nt.A)(this,"type",void 0),(0,nt.A)(this,"baseType",void 0),(0,nt.A)(this,"indexed",void 0),(0,nt.A)(this,"components",void 0),(0,nt.A)(this,"arrayLength",void 0),(0,nt.A)(this,"arrayChildren",void 0),$e(e,ss,"ParamType"),Object.defineProperty(this,is,{value:os}),i&&(i=Object.freeze(i.slice())),"array"===r){if(null==o||null==a)throw new Error("")}else if(null!=o||null!=a)throw new Error("");if("tuple"===r){if(null==i)throw new Error("")}else if(null!=i)throw new Error("");He(this,{name:t,type:n,baseType:r,indexed:s,components:i,arrayLength:o,arrayChildren:a})}format(e){if(null==e&&(e="sighash"),"json"===e){const t=this.name||"";if(this.isArray()){const e=JSON.parse(this.arrayChildren.format("json"));return e.name=t,e.type+="[".concat(this.arrayLength<0?"":String(this.arrayLength),"]"),JSON.stringify(e)}const n={type:"tuple"===this.baseType?"tuple":this.type,name:t};return"boolean"===typeof this.indexed&&(n.indexed=this.indexed),this.isTuple()&&(n.components=this.components.map(t=>JSON.parse(t.format(e)))),JSON.stringify(n)}let t="";return this.isArray()?(t+=this.arrayChildren.format(e),t+="[".concat(this.arrayLength<0?"":String(this.arrayLength),"]")):this.isTuple()?t+="("+this.components.map(t=>t.format(e)).join("full"===e?", ":",")+")":t+=this.type,"sighash"!==e&&(!0===this.indexed&&(t+=" indexed"),"full"===e&&this.name&&(t+=" "+this.name)),t}isArray(){return"array"===this.baseType}isTuple(){return"tuple"===this.baseType}isIndexable(){return null!=this.indexed}walk(e,t){if(this.isArray()){if(!Array.isArray(e))throw new Error("invalid array value");if(-1!==this.arrayLength&&e.length!==this.arrayLength)throw new Error("array is wrong length");const n=this;return e.map(e=>n.arrayChildren.walk(e,t))}if(this.isTuple()){if(!Array.isArray(e))throw new Error("invalid tuple value");if(e.length!==this.components.length)throw new Error("array is wrong length");const n=this;return e.map((e,r)=>n.components[r].walk(e,t))}return t(this.type,e)}async walkAsync(e,t){const n=[],r=[e];return Ue(fs,this,ps).call(this,n,e,t,e=>{r[0]=e}),n.length&&await Promise.all(n),r[0]}static from(e,t){if(ms.isParamType(e))return e;if("string"===typeof e)try{return ms.from(Kr(e),t)}catch(o){Ye(!1,"invalid param type","obj",e)}else if(e instanceof Wr){let n="",r="",s=null;Zr(e,Cr(["tuple"])).has("tuple")||e.peekType("OPEN_PAREN")?(r="tuple",s=e.popParams().map(e=>ms.from(e)),n="tuple(".concat(s.map(e=>e.format()).join(","),")")):(n=rs(e.popType("TYPE")),r=n);let i=null,o=null;for(;e.length&&e.peekType("BRACKET");){const t=e.pop();i=new ms(ss,"",n,r,null,s,o,i),o=t.value,n+=t.text,r="array",s=null}let a=null;if(Zr(e,Rr).has("indexed")){if(!t)throw new Error("");a=!0}const c=e.peekType("ID")?e.pop().text:"";if(e.length)throw new Error("leftover tokens");return new ms(ss,c,n,r,a,s,o,i)}const n=e.name;Ye(!n||"string"===typeof n&&n.match(Vr),"invalid name","obj.name",n);let r=e.indexed;null!=r&&(Ye(t,"parameter cannot be indexed","obj.indexed",e.indexed),r=!!r);let s=e.type,i=s.match(ns);if(i){const t=parseInt(i[2]||"-1"),o=ms.from({type:i[1],components:e.components});return new ms(ss,n||"",s,"array",r,null,t,o)}if("tuple"===s||s.startsWith("tuple(")||s.startsWith("(")){const t=null!=e.components?e.components.map(e=>ms.from(e)):null;return new ms(ss,n||"",s,"tuple",r,t,null,null)}return s=rs(e.type),new ms(ss,n||"",s,s,r,null,null,null)}static isParamType(e){return e&&e[is]===os}}function ps(e,t,n,r){if(this.isArray()){if(!Array.isArray(t))throw new Error("invalid array value");if(-1!==this.arrayLength&&t.length!==this.arrayLength)throw new Error("array is wrong length");const s=this.arrayChildren,i=t.slice();return i.forEach((t,r)=>{Ue(fs,s,ps).call(s,e,t,n,e=>{i[r]=e})}),void r(i)}if(this.isTuple()){const s=this.components;let i;if(Array.isArray(t))i=t.slice();else{if(null==t||"object"!==typeof t)throw new Error("invalid tuple value");i=s.map(e=>{if(!e.name)throw new Error("cannot use object value with unnamed components");if(!(e.name in t))throw new Error("missing value for component ".concat(e.name));return t[e.name]})}if(i.length!==this.components.length)throw new Error("array is wrong length");return i.forEach((t,r)=>{var o;Ue(fs,o=s[r],ps).call(o,e,t,n,e=>{i[r]=e})}),void r(i)}const s=n(this.type,t);s.then?e.push(async function(){r(await s)}()):r(s)}class gs{constructor(e,t,n){(0,nt.A)(this,"type",void 0),(0,nt.A)(this,"inputs",void 0),$e(e,ss,"Fragment"),He(this,{type:t,inputs:n=Object.freeze(n.slice())})}static from(e){if("string"===typeof e){try{gs.from(JSON.parse(e))}catch(DN){}return gs.from(Kr(e))}if(e instanceof Wr){switch(e.peekKeyword(Dr)){case"constructor":return xs.from(e);case"error":return ws.from(e);case"event":return bs.from(e);case"fallback":case"receive":return Ss.from(e);case"function":return Es.from(e);case"struct":return As.from(e)}}else if("object"===typeof e){switch(e.type){case"constructor":return xs.from(e);case"error":return ws.from(e);case"event":return bs.from(e);case"fallback":case"receive":return Ss.from(e);case"function":return Es.from(e);case"struct":return As.from(e)}Je(!1,"unsupported type: ".concat(e.type),"UNSUPPORTED_OPERATION",{operation:"Fragment.from"})}Ye(!1,"unsupported frgament object","obj",e)}static isConstructor(e){return xs.isFragment(e)}static isError(e){return ws.isFragment(e)}static isEvent(e){return bs.isFragment(e)}static isFunction(e){return Es.isFragment(e)}static isStruct(e){return As.isFragment(e)}}class ys extends gs{constructor(e,t,n,r){super(e,t,r),(0,nt.A)(this,"name",void 0),Ye("string"===typeof n&&n.match(Vr),"invalid identifier","name",n),r=Object.freeze(r.slice()),He(this,{name:n})}}function vs(e,t){return"("+t.map(t=>t.format(e)).join("full"===e?", ":",")+")"}class ws extends ys{constructor(e,t,n){super(e,"error",t,n),Object.defineProperty(this,is,{value:as})}get selector(){return Tr(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});const t=[];return"sighash"!==e&&t.push("error"),t.push(this.name+vs(e,this.inputs)),t.join(" ")}static from(e){if(ws.isFragment(e))return e;if("string"===typeof e)return ws.from(Kr(e));if(e instanceof Wr){const t=Yr("error",e),n=$r(e);return ts(e),new ws(ss,t,n)}return new ws(ss,e.name,e.inputs?e.inputs.map(ms.from):[])}static isFragment(e){return e&&e[is]===as}}class bs extends ys{constructor(e,t,n,r){super(e,"event",t,n),(0,nt.A)(this,"anonymous",void 0),Object.defineProperty(this,is,{value:cs}),He(this,{anonymous:r})}get topicHash(){return Tr(this.format("sighash"))}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});const t=[];return"sighash"!==e&&t.push("event"),t.push(this.name+vs(e,this.inputs)),"sighash"!==e&&this.anonymous&&t.push("anonymous"),t.join(" ")}static getTopicHash(e,t){t=(t||[]).map(e=>ms.from(e));return new bs(ss,e,t,!1).topicHash}static from(e){if(bs.isFragment(e))return e;if("string"===typeof e)try{return bs.from(Kr(e))}catch(t){Ye(!1,"invalid event fragment","obj",e)}else if(e instanceof Wr){const t=Yr("event",e),n=$r(e,!0),r=!!Zr(e,Cr(["anonymous"])).has("anonymous");return ts(e),new bs(ss,t,n,r)}return new bs(ss,e.name,e.inputs?e.inputs.map(e=>ms.from(e,!0)):[],!!e.anonymous)}static isFragment(e){return e&&e[is]===cs}}class xs extends gs{constructor(e,t,n,r,s){super(e,t,n),(0,nt.A)(this,"payable",void 0),(0,nt.A)(this,"gas",void 0),Object.defineProperty(this,is,{value:ls}),He(this,{payable:r,gas:s})}format(e){if(Je(null!=e&&"sighash"!==e,"cannot format a constructor for sighash","UNSUPPORTED_OPERATION",{operation:"format(sighash)"}),"json"===e)return JSON.stringify({type:"constructor",stateMutability:this.payable?"payable":"undefined",payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e)))});const t=["constructor".concat(vs(e,this.inputs))];return this.payable&&t.push("payable"),null!=this.gas&&t.push("@".concat(this.gas.toString())),t.join(" ")}static from(e){if(xs.isFragment(e))return e;if("string"===typeof e)try{return xs.from(Kr(e))}catch(t){Ye(!1,"invalid constuctor fragment","obj",e)}else if(e instanceof Wr){Zr(e,Cr(["constructor"]));const t=$r(e),n=!!Zr(e,Ir).has("payable"),r=es(e);return ts(e),new xs(ss,"constructor",t,n,r)}return new xs(ss,"constructor",e.inputs?e.inputs.map(ms.from):[],!!e.payable,null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[is]===ls}}class Ss extends gs{constructor(e,t,n){super(e,"fallback",t),(0,nt.A)(this,"payable",void 0),Object.defineProperty(this,is,{value:us}),He(this,{payable:n})}format(e){const t=0===this.inputs.length?"receive":"fallback";if("json"===e){const e=this.payable?"payable":"nonpayable";return JSON.stringify({type:t,stateMutability:e})}return"".concat(t,"()").concat(this.payable?" payable":"")}static from(e){if(Ss.isFragment(e))return e;if("string"===typeof e)try{return Ss.from(Kr(e))}catch(t){Ye(!1,"invalid fallback fragment","obj",e)}else if(e instanceof Wr){const t=e.toString();Ye(e.peekKeyword(Cr(["fallback","receive"])),"type must be fallback or receive","obj",t);if("receive"===e.popKeyword(Cr(["fallback","receive"]))){const t=$r(e);return Ye(0===t.length,"receive cannot have arguments","obj.inputs",t),Zr(e,Cr(["payable"])),ts(e),new Ss(ss,[],!0)}let n=$r(e);n.length?Ye(1===n.length&&"bytes"===n[0].type,"invalid fallback inputs","obj.inputs",n.map(e=>e.format("minimal")).join(", ")):n=[ms.from("bytes")];const r=Xr(e);if(Ye("nonpayable"===r||"payable"===r,"fallback cannot be constants","obj.stateMutability",r),Zr(e,Cr(["returns"])).has("returns")){const t=$r(e);Ye(1===t.length&&"bytes"===t[0].type,"invalid fallback outputs","obj.outputs",t.map(e=>e.format("minimal")).join(", "))}return ts(e),new Ss(ss,n,"payable"===r)}if("receive"===e.type)return new Ss(ss,[],!0);if("fallback"===e.type){const t=[ms.from("bytes")],n="payable"===e.stateMutability;return new Ss(ss,t,n)}Ye(!1,"invalid fallback description","obj",e)}static isFragment(e){return e&&e[is]===us}}class Es extends ys{constructor(e,t,n,r,s,i){super(e,"function",t,r),(0,nt.A)(this,"constant",void 0),(0,nt.A)(this,"outputs",void 0),(0,nt.A)(this,"stateMutability",void 0),(0,nt.A)(this,"payable",void 0),(0,nt.A)(this,"gas",void 0),Object.defineProperty(this,is,{value:hs});He(this,{constant:"view"===n||"pure"===n,gas:i,outputs:s=Object.freeze(s.slice()),payable:"payable"===n,stateMutability:n})}get selector(){return Tr(this.format("sighash")).substring(0,10)}format(e){if(null==e&&(e="sighash"),"json"===e)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:"nonpayable"!==this.stateMutability?this.stateMutability:void 0,payable:this.payable,gas:null!=this.gas?this.gas:void 0,inputs:this.inputs.map(t=>JSON.parse(t.format(e))),outputs:this.outputs.map(t=>JSON.parse(t.format(e)))});const t=[];return"sighash"!==e&&t.push("function"),t.push(this.name+vs(e,this.inputs)),"sighash"!==e&&("nonpayable"!==this.stateMutability&&t.push(this.stateMutability),this.outputs&&this.outputs.length&&(t.push("returns"),t.push(vs(e,this.outputs))),null!=this.gas&&t.push("@".concat(this.gas.toString()))),t.join(" ")}static getSelector(e,t){t=(t||[]).map(e=>ms.from(e));return new Es(ss,e,"view",t,[],null).selector}static from(e){if(Es.isFragment(e))return e;if("string"===typeof e)try{return Es.from(Kr(e))}catch(n){Ye(!1,"invalid function fragment","obj",e)}else if(e instanceof Wr){const t=Yr("function",e),n=$r(e),r=Xr(e);let s=[];Zr(e,Cr(["returns"])).has("returns")&&(s=$r(e));const i=es(e);return ts(e),new Es(ss,t,r,n,s,i)}let t=e.stateMutability;return null==t&&(t="payable","boolean"===typeof e.constant?(t="view",e.constant||(t="payable","boolean"!==typeof e.payable||e.payable||(t="nonpayable"))):"boolean"!==typeof e.payable||e.payable||(t="nonpayable")),new Es(ss,e.name,t,e.inputs?e.inputs.map(ms.from):[],e.outputs?e.outputs.map(ms.from):[],null!=e.gas?e.gas:null)}static isFragment(e){return e&&e[is]===hs}}class As extends ys{constructor(e,t,n){super(e,"struct",t,n),Object.defineProperty(this,is,{value:ds})}format(){throw new Error("@TODO")}static from(e){if("string"===typeof e)try{return As.from(Kr(e))}catch(t){Ye(!1,"invalid struct fragment","obj",e)}else if(e instanceof Wr){const t=Yr("struct",e),n=$r(e);return ts(e),new As(ss,t,n)}return new As(ss,e.name,e.inputs?e.inputs.map(ms.from):[])}static isFragment(e){return e&&e[is]===ds}}const Ns=new Map;Ns.set(0,"GENERIC_PANIC"),Ns.set(1,"ASSERT_FALSE"),Ns.set(17,"OVERFLOW"),Ns.set(18,"DIVIDE_BY_ZERO"),Ns.set(33,"ENUM_RANGE_ERROR"),Ns.set(34,"BAD_STORAGE_DATA"),Ns.set(49,"STACK_UNDERFLOW"),Ns.set(50,"ARRAY_RANGE_ERROR"),Ns.set(65,"OUT_OF_MEMORY"),Ns.set(81,"UNINITIALIZED_FUNCTION_CALL");const Ts=new RegExp(/^bytes([0-9]*)$/),ks=new RegExp(/^(u?int)([0-9]*)$/);let Cs=null,Is=1024;var _s=new WeakSet;class Ps{constructor(){et(this,_s)}getDefaultValue(e){const t=e.map(e=>Ue(_s,this,js).call(this,ms.from(e)));return new Nr(t,"_").defaultValue()}encode(e,t){Ze(t.length,e.length,"types/values length mismatch");const n=e.map(e=>Ue(_s,this,js).call(this,ms.from(e))),r=new Nr(n,"_"),s=new qt;return r.encode(s,t),s.data}decode(e,t,n){const r=e.map(e=>Ue(_s,this,js).call(this,ms.from(e)));return new Nr(r,"_").decode(new $t(t,n,Is))}static _setDefaultMaxInflation(e){Ye("number"===typeof e&&Number.isInteger(e),"invalid defaultMaxInflation factor","value",e),Is=e}static defaultAbiCoder(){return null==Cs&&(Cs=new Ps),Cs}static getBuiltinCallException(e,t,n){return function(e,t,n,r){let s="missing revert data",i=null,o=null;if(n){s="execution reverted";const e=st(n);if(n=lt(n),0===e.length)s+=" (no data present; likely require(false) occurred",i="require(false)";else if(e.length%32!==4)s+=" (could not decode reason; invalid data length)";else if("0x08c379a0"===lt(e.slice(0,4)))try{i=r.decode(["string"],e.slice(4))[0],o={signature:"Error(string)",name:"Error",args:[i]},s+=": ".concat(JSON.stringify(i))}catch(c){s+=" (could not decode reason; invalid string data)"}else if("0x4e487b71"===lt(e.slice(0,4)))try{const t=Number(r.decode(["uint256"],e.slice(4))[0]);o={signature:"Panic(uint256)",name:"Panic",args:[t]},i="Panic due to ".concat(Ns.get(t)||"UNKNOWN","(").concat(t,")"),s+=": ".concat(i)}catch(c){s+=" (could not decode panic code)"}else s+=" (unknown custom error)"}const a={to:t.to?Zn(t.to):null,data:t.data||"0x"};return t.from&&(a.from=Zn(t.from)),Ke(s,"CALL_EXCEPTION",{action:e,data:n,reason:i,transaction:a,invocation:null,revert:o})}(e,t,n,Ps.defaultAbiCoder())}}function js(e){if(e.isArray())return new cr(Ue(_s,this,js).call(this,e.arrayChildren),e.arrayLength,e.name);if(e.isTuple())return new Nr(e.components.map(e=>Ue(_s,this,js).call(this,e)),e.name);switch(e.baseType){case"address":return new sr(e.name);case"bool":return new lr(e.name);case"string":return new Ar(e.name);case"bytes":return new hr(e.name);case"":return new mr(e.name)}let t=e.type.match(ks);if(t){let n=parseInt(t[2]||"256");return Ye(0!==n&&n<=256&&n%8===0,"invalid "+t[1]+" bit length","param",e),new vr(n/8,"int"===t[1],e.name)}if(t=e.type.match(Ts),t){let n=parseInt(t[1]);return Ye(0!==n&&n<=32,"invalid bytes length","param",e),new dr(n,e.name)}Ye(!1,"invalid type","type",e.type)}function Ds(e){return e&&"function"===typeof e.getAddress}async function Ms(e,t){const n=await t;return null!=n&&"0x0000000000000000000000000000000000000000"!==n||(Je("string"!==typeof e,"unconfigured name","UNCONFIGURED_NAME",{value:e}),Ye(!1,"invalid AddressLike value; did not resolve to a value address","target",e)),Zn(n)}function Rs(e,t){return"string"===typeof e?e.match(/^0x[0-9a-f]{40}$/i)?Zn(e):(Je(null!=t,"ENS resolution requires a provider","UNSUPPORTED_OPERATION",{operation:"resolveName"}),Ms(e,t.resolveName(e))):Ds(e)?Ms(e,e.getAddress()):e&&"function"===typeof e.then?Ms(e,e):void Ye(!1,"unsupported addressable value","target",e)}const Os=new Uint8Array(32);Os.fill(0);const Ls=BigInt(-1),Fs=BigInt(0),Us=BigInt(1),Bs=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");const Vs=Tt(Us,32),zs=Tt(Fs,32),Gs={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Hs=["name","version","chainId","verifyingContract","salt"];function qs(e){return function(t){return Ye("string"===typeof t,"invalid domain value for ".concat(JSON.stringify(e)),"domain.".concat(e),t),t}}const Ws={name:qs("name"),version:qs("version"),chainId:function(e){const t=xt(e,"domain.chainId");return Ye(t>=0,"invalid chain ID","domain.chainId",e),Number.isSafeInteger(t)?Number(t):Ct(t)},verifyingContract:function(e){try{return Zn(e).toLowerCase()}catch(t){}Ye(!1,'invalid domain value "verifyingContract"',"domain.verifyingContract",e)},salt:function(e){const t=st(e,"domain.salt");return Ye(32===t.length,'invalid domain value "salt"',"domain.salt",e),lt(t)}};function Qs(e){{const t=e.match(/^(u?)int(\d+)$/);if(t){const n=""===t[1],r=parseInt(t[2]);Ye(r%8===0&&0!==r&&r<=256&&t[2]===String(r),"invalid numeric width","type",e);const s=bt(Bs,n?r-1:r),i=n?(s+Us)*Ls:Fs;return function(t){const r=xt(t,"value");return Ye(r>=i&&r<=s,"value out-of-bounds for ".concat(e),"value",r),Tt(n?wt(r,256):r,32)}}}{const t=e.match(/^bytes(\d+)$/);if(t){const n=parseInt(t[1]);return Ye(0!==n&&n<=32&&t[1]===String(n),"invalid bytes width","type",e),function(t){return Ye(st(t).length===n,"invalid length for ".concat(e),"value",t),function(e){const t=st(e),n=t.length%32;return n?ut([t,Os.slice(n)]):lt(t)}(t)}}}switch(e){case"address":return function(e){return mt(Zn(e),32)};case"bool":return function(e){return e?Vs:zs};case"bytes":return function(e){return Hn(e)};case"string":return function(e){return Tr(e)}}return null}function Ks(e,t){return"".concat(e,"(").concat(t.map(e=>{let{name:t,type:n}=e;return n+" "+t}).join(","),")")}function Js(e){const t=e.match(/^([^\x5b]*)((\x5b\d*\x5d)*)(\x5b(\d*)\x5d)$/);return t?{base:t[1],index:t[2]+t[4],array:{base:t[1],prefix:t[1]+t[2],count:t[5]?parseInt(t[5]):-1}}:{base:e}}var Ys=new WeakMap,Zs=new WeakMap,Xs=new WeakMap,$s=new WeakSet;class ei{get types(){return JSON.parse(Be(Ys,this))}constructor(e){et(this,$s),(0,nt.A)(this,"primaryType",void 0),Fe(this,Ys,void 0),Fe(this,Zs,void 0),Fe(this,Xs,void 0),Ve(Zs,this,new Map),Ve(Xs,this,new Map);const t=new Map,n=new Map,r=new Map,s={};Object.keys(e).forEach(i=>{s[i]=e[i].map(t=>{let{name:n,type:r}=t,{base:s,index:i}=Js(r);return"int"!==s||e.int||(s="int256"),"uint"!==s||e.uint||(s="uint256"),{name:n,type:s+(i||"")}}),t.set(i,new Set),n.set(i,[]),r.set(i,new Set)}),Ve(Ys,this,JSON.stringify(s));for(const o in s){const r=new Set;for(const i of s[o]){Ye(!r.has(i.name),"duplicate variable name ".concat(JSON.stringify(i.name)," in ").concat(JSON.stringify(o)),"types",e),r.add(i.name);const s=Js(i.type).base;Ye(s!==o,"circular type reference to ".concat(JSON.stringify(s)),"types",e);Qs(s)||(Ye(n.has(s),"unknown type ".concat(JSON.stringify(s)),"types",e),n.get(s).push(o),t.get(o).add(s))}}const i=Array.from(n.keys()).filter(e=>0===n.get(e).length);Ye(0!==i.length,"missing primary type","types",e),Ye(1===i.length,"ambiguous primary types or unused types: ".concat(i.map(e=>JSON.stringify(e)).join(", ")),"types",e),He(this,{primaryType:i[0]}),function s(i,o){Ye(!o.has(i),"circular type reference to ".concat(JSON.stringify(i)),"types",e),o.add(i);for(const e of t.get(i))if(n.has(e)){s(e,o);for(const t of o)r.get(t).add(e)}o.delete(i)}(this.primaryType,new Set);for(const[o,a]of r){const e=Array.from(a);e.sort(),Be(Zs,this).set(o,Ks(o,s[o])+e.map(e=>Ks(e,s[e])).join(""))}}getEncoder(e){let t=Be(Xs,this).get(e);return t||(t=Ue($s,this,ti).call(this,e),Be(Xs,this).set(e,t)),t}encodeType(e){const t=Be(Zs,this).get(e);return Ye(t,"unknown type: ".concat(JSON.stringify(e)),"name",e),t}encodeData(e,t){return this.getEncoder(e)(t)}hashStruct(e,t){return Hn(this.encodeData(e,t))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,t,n){if(Qs(e))return n(e,t);const r=Js(e).array;if(r)return Ye(-1===r.count||r.count===t.length,"array length mismatch; expected length ".concat(r.count),"value",t),t.map(e=>this._visit(r.prefix,e,n));const s=this.types[e];if(s)return s.reduce((e,r)=>{let{name:s,type:i}=r;return e[s]=this._visit(i,t[s],n),e},{});Ye(!1,"unknown type: ".concat(e),"type",e)}visit(e,t){return this._visit(this.primaryType,e,t)}static from(e){return new ei(e)}static getPrimaryType(e){return ei.from(e).primaryType}static hashStruct(e,t,n){return ei.from(t).hashStruct(e,n)}static hashDomain(e){const t=[];for(const n in e){if(null==e[n])continue;const r=Gs[n];Ye(r,"invalid typed-data domain key: ".concat(JSON.stringify(n)),"domain",e),t.push({name:n,type:r})}return t.sort((e,t)=>Hs.indexOf(e.name)-Hs.indexOf(t.name)),ei.hashStruct("EIP712Domain",{EIP712Domain:t},e)}static encode(e,t,n){return ut(["0x1901",ei.hashDomain(e),ei.from(t).hash(n)])}static hash(e,t,n){return Hn(ei.encode(e,t,n))}static async resolveNames(e,t,n,r){e=Object.assign({},e);for(const o in e)null==e[o]&&delete e[o];const s={};e.verifyingContract&&!ot(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const i=ei.from(t);i.visit(n,(e,t)=>("address"!==e||ot(t,20)||(s[t]="0x"),t));for(const o in s)s[o]=await r(o);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),{domain:e,value:n=i.visit(n,(e,t)=>"address"===e&&s[t]?s[t]:t)}}static getPayload(e,t,n){ei.hashDomain(e);const r={},s=[];Hs.forEach(t=>{const n=e[t];null!=n&&(r[t]=Ws[t](n),s.push({name:t,type:Gs[t]}))});const i=ei.from(t);t=i.types;const o=Object.assign({},t);return Ye(null==o.EIP712Domain,"types must not contain EIP712Domain type","types.EIP712Domain",t),o.EIP712Domain=s,i.encode(n),{types:o,domain:r,primaryType:i.primaryType,message:i.visit(n,(e,t)=>{if(e.match(/^bytes(\d*)/))return lt(st(t));if(e.match(/^u?int/))return xt(t).toString();switch(e){case"address":return t.toLowerCase();case"bool":return!!t;case"string":return Ye("string"===typeof t,"invalid string","value",t),t}Ye(!1,"unsupported type","type",e)})}}}function ti(e){{const t=Qs(e);if(t)return t}const t=Js(e).array;if(t){const e=t.prefix,n=this.getEncoder(e);return r=>{Ye(-1===t.count||t.count===r.length,"array length mismatch; expected length ".concat(t.count),"value",r);let s=r.map(n);return Be(Zs,this).has(e)&&(s=s.map(Hn)),Hn(ut(s))}}const n=this.types[e];if(n){const t=Tr(Be(Zs,this).get(e));return e=>{const r=n.map(t=>{let{name:n,type:r}=t;const s=this.getEncoder(r)(e[n]);return Be(Zs,this).has(r)?Hn(s):s});return r.unshift(t),ut(r)}}Ye(!1,"unknown type: ".concat(e),"type",e)}function ni(e,t){return{address:Zn(e),storageKeys:t.map((e,t)=>(Ye(ot(e,32),"invalid slot","storageKeys[".concat(t,"]"),e),e.toLowerCase()))}}function ri(e){if(Array.isArray(e))return e.map((t,n)=>Array.isArray(t)?(Ye(2===t.length,"invalid slot set","value[".concat(n,"]"),t),ni(t[0],t[1])):(Ye(null!=t&&"object"===typeof t,"invalid address-slot set","value",e),ni(t.address,t.storageKeys)));Ye(null!=e&&"object"===typeof e,"invalid access list","value",e);const t=Object.keys(e).map(t=>{const n=e[t].reduce((e,t)=>(e[t]=!0,e),{});return ni(t,Object.keys(n).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}const si="0x0000000000000000000000000000000000000000000000000000000000000000",ii=BigInt(0),oi=BigInt(1),ai=BigInt(2),ci=BigInt(27),li=BigInt(28),ui=BigInt(35),hi={};function di(e){return mt(kt(e),32)}var fi=new WeakMap,mi=new WeakMap,pi=new WeakMap,gi=new WeakMap;class yi{get r(){return Be(fi,this)}set r(e){Ye(32===ht(e),"invalid r","value",e),Ve(fi,this,lt(e))}get s(){return Ye(parseInt(Be(mi,this).substring(0,3))<8,"non-canonical s; use ._s","s",Be(mi,this)),Be(mi,this)}set s(e){Ye(32===ht(e),"invalid s","value",e),Ve(mi,this,lt(e))}get _s(){return Be(mi,this)}isValid(){return parseInt(Be(mi,this).substring(0,3))<8}get v(){return Be(pi,this)}set v(e){const t=Nt(e,"value");Ye(27===t||28===t,"invalid v","v",e),Ve(pi,this,t)}get networkV(){return Be(gi,this)}get legacyChainId(){const e=this.networkV;return null==e?null:yi.getChainId(e)}get yParity(){return 27===this.v?0:1}get yParityAndS(){const e=st(this.s);return this.yParity&&(e[0]|=128),lt(e)}get compactSerialized(){return ut([this.r,this.yParityAndS])}get serialized(){return ut([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,n,r){Fe(this,fi,void 0),Fe(this,mi,void 0),Fe(this,pi,void 0),Fe(this,gi,void 0),$e(e,hi,"Signature"),Ve(fi,this,t),Ve(mi,this,n),Ve(pi,this,r),Ve(gi,this,null)}[Symbol.for("nodejs.util.inspect.custom")](){return'Signature { r: "'.concat(this.r,'", s: "').concat(this._s,'"').concat(this.isValid()?"":', valid: "false"',", yParity: ").concat(this.yParity,", networkV: ").concat(this.networkV," }")}clone(){const e=new yi(hi,this.r,this._s,this.v);return this.networkV&&Ve(gi,e,this.networkV),e}toJSON(){const e=this.networkV;return{_type:"signature",networkV:null!=e?e.toString():null,r:this.r,s:this._s,v:this.v}}static getChainId(e){const t=xt(e,"v");return t==ci||t==li?ii:(Ye(t>=ui,"invalid EIP-155 v","v",e),(t-ui)/ai)}static getChainIdV(e,t){return xt(e)*ai+BigInt(35+t-27)}static getNormalizedV(e){const t=xt(e);return t===ii||t===ci?27:t===oi||t===li?28:(Ye(t>=ui,"invalid v","v",e),t&oi?27:28)}static from(e){function t(t,n){Ye(t,n,"signature",e)}if(null==e)return new yi(hi,si,si,27);if("string"===typeof e){const n=st(e,"signature");if(64===n.length){const e=lt(n.slice(0,32)),t=n.slice(32,64),r=128&t[0]?28:27;return t[0]&=127,new yi(hi,e,lt(t),r)}if(65===n.length){const e=lt(n.slice(0,32)),t=lt(n.slice(32,64)),r=yi.getNormalizedV(n[64]);return new yi(hi,e,t,r)}t(!1,"invalid raw signature length")}if(e instanceof yi)return e.clone();const n=e.r;t(null!=n,"missing r");const r=di(n),s=function(e,n){if(null!=e)return di(e);if(null!=n){t(ot(n,32),"invalid yParityAndS");const e=st(n);return e[0]&=127,lt(e)}t(!1,"missing s")}(e.s,e.yParityAndS),{networkV:i,v:o}=function(e,n,r){if(null!=e){const t=xt(e);return{networkV:t>=ui?t:void 0,v:yi.getNormalizedV(t)}}if(null!=n)return t(ot(n,32),"invalid yParityAndS"),{v:128&st(n)[0]?28:27};if(null!=r){switch(Nt(r,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")}(e.v,e.yParityAndS,e.yParity),a=new yi(hi,r,s,o);return i&&Ve(gi,a,i),t(null==e.yParity||Nt(e.yParity,"sig.yParity")===a.yParity,"yParity mismatch"),t(null==e.yParityAndS||e.yParityAndS===a.yParityAndS,"yParityAndS mismatch"),a}}function vi(e){return{address:Zn(e.address),nonce:xt(null!=e.nonce?e.nonce:0),chainId:xt(null!=e.chainId?e.chainId:0),signature:yi.from(e.signature)}}function wi(e){return async function(t,n){Je(null==n||!n.cancelled,"request cancelled before sending","CANCELLED");const r=t.url.split(":")[0].toLowerCase();Je("http"===r||"https"===r,"unsupported protocol ".concat(r),"UNSUPPORTED_OPERATION",{info:{protocol:r},operation:"request"}),Je("https"===r||!t.credentials||t.allowInsecureAuthentication,"insecure authorized connections unsupported","UNSUPPORTED_OPERATION",{operation:"request"});let s=null;const i=new AbortController,o=setTimeout(()=>{s=Ke("request timeout","TIMEOUT"),i.abort()},t.timeout);n&&n.addListener(()=>{s=Ke("request cancelled","CANCELLED"),i.abort()});const a=Object.assign({},e,{method:t.method,headers:new Headers(Array.from(t)),body:t.body||void 0,signal:i.signal});let c;try{c=await fetch(t.url,a)}catch(to){if(clearTimeout(o),s)throw s;throw to}clearTimeout(o);const l={};c.headers.forEach((e,t)=>{l[t.toLowerCase()]=e});const u=await c.arrayBuffer(),h=null==u?null:new Uint8Array(u);return{statusCode:c.status,statusMessage:c.statusText,headers:l,body:h}}}wi({});let bi=wi();const xi=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),Si=new RegExp("^ipfs://(ipfs/)?(.*)$","i");let Ei=!1;async function Ai(e,t){try{const t=e.match(xi);if(!t)throw new Error("invalid data");return new no(200,"OK",{"content-type":t[1]||"text/plain"},t[2]?function(e){e=atob(e);const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return st(t)}(t[3]):Sr(t[3].replace(/%([0-9a-f][0-9a-f])/gi,(e,t)=>String.fromCharCode(parseInt(t,16)))))}catch(n){return new no(599,"BAD REQUEST (invalid data: URI)",{},null,new Ki(e))}}function Ni(e){return async function(t,n){try{const n=t.match(Si);if(!n)throw new Error("invalid link");return new Ki("".concat(e).concat(n[2]))}catch(r){return new no(599,"BAD REQUEST (invalid IPFS URI)",{},null,new Ki(t))}}}const Ti={data:Ai,ipfs:Ni("https://gateway.ipfs.io/ipfs/")},ki=new WeakMap;var Ci=new WeakMap,Ii=new WeakMap;class _i{constructor(e){Fe(this,Ci,void 0),Fe(this,Ii,void 0),Ve(Ci,this,[]),Ve(Ii,this,!1),ki.set(e,()=>{if(!Be(Ii,this)){Ve(Ii,this,!0);for(const e of Be(Ci,this))setTimeout(()=>{e()},0);Ve(Ci,this,[])}})}addListener(e){Je(!Be(Ii,this),"singal already cancelled","UNSUPPORTED_OPERATION",{operation:"fetchCancelSignal.addCancelListener"}),Be(Ci,this).push(e)}get cancelled(){return Be(Ii,this)}checkSignal(){Je(!this.cancelled,"cancelled","CANCELLED",{})}}function Pi(e){if(null==e)throw new Error("missing signal; should not happen");return e.checkSignal(),e}var ji=new WeakMap,Di=new WeakMap,Mi=new WeakMap,Ri=new WeakMap,Oi=new WeakMap,Li=new WeakMap,Fi=new WeakMap,Ui=new WeakMap,Bi=new WeakMap,Vi=new WeakMap,zi=new WeakMap,Gi=new WeakMap,Hi=new WeakMap,qi=new WeakMap,Wi=new WeakMap,Qi=new WeakSet;class Ki{get url(){return Be(Li,this)}set url(e){Ve(Li,this,String(e))}get body(){return null==Be(Fi,this)?null:new Uint8Array(Be(Fi,this))}set body(e){if(null==e)Ve(Fi,this,void 0),Ve(Ui,this,void 0);else if("string"===typeof e)Ve(Fi,this,Sr(e)),Ve(Ui,this,"text/plain");else if(e instanceof Uint8Array)Ve(Fi,this,e),Ve(Ui,this,"application/octet-stream");else{if("object"!==typeof e)throw new Error("invalid body");Ve(Fi,this,Sr(JSON.stringify(e))),Ve(Ui,this,"application/json")}}hasBody(){return null!=Be(Fi,this)}get method(){return Be(Ri,this)?Be(Ri,this):this.hasBody()?"POST":"GET"}set method(e){null==e&&(e=""),Ve(Ri,this,String(e).toUpperCase())}get headers(){const e=Object.assign({},Be(Mi,this));return Be(Bi,this)&&(e.authorization="Basic ".concat(function(e){const t=st(e);let n="";for(let r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);return btoa(n)}(Sr(Be(Bi,this))))),this.allowGzip&&(e["accept-encoding"]="gzip"),null==e["content-type"]&&Be(Ui,this)&&(e["content-type"]=Be(Ui,this)),this.body&&(e["content-length"]=String(this.body.length)),e}getHeader(e){return this.headers[e.toLowerCase()]}setHeader(e,t){Be(Mi,this)[String(e).toLowerCase()]=String(t)}clearHeaders(){Ve(Mi,this,{})}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const r=t[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}get credentials(){return Be(Bi,this)||null}setCredentials(e,t){Ye(!e.match(/:/),"invalid basic authentication username","username","[REDACTED]"),Ve(Bi,this,"".concat(e,":").concat(t))}get allowGzip(){return Be(Di,this)}set allowGzip(e){Ve(Di,this,!!e)}get allowInsecureAuthentication(){return!!Be(ji,this)}set allowInsecureAuthentication(e){Ve(ji,this,!!e)}get timeout(){return Be(Oi,this)}set timeout(e){Ye(e>=0,"timeout must be non-zero","timeout",e),Ve(Oi,this,e)}get preflightFunc(){return Be(Vi,this)||null}set preflightFunc(e){Ve(Vi,this,e)}get processFunc(){return Be(zi,this)||null}set processFunc(e){Ve(zi,this,e)}get retryFunc(){return Be(Gi,this)||null}set retryFunc(e){Ve(Gi,this,e)}get getUrlFunc(){return Be(Wi,this)||bi}set getUrlFunc(e){Ve(Wi,this,e)}constructor(e){et(this,Qi),Fe(this,ji,void 0),Fe(this,Di,void 0),Fe(this,Mi,void 0),Fe(this,Ri,void 0),Fe(this,Oi,void 0),Fe(this,Li,void 0),Fe(this,Fi,void 0),Fe(this,Ui,void 0),Fe(this,Bi,void 0),Fe(this,Vi,void 0),Fe(this,zi,void 0),Fe(this,Gi,void 0),Fe(this,Hi,void 0),Fe(this,qi,void 0),Fe(this,Wi,void 0),Ve(Li,this,String(e)),Ve(ji,this,!1),Ve(Di,this,!0),Ve(Mi,this,{}),Ve(Ri,this,""),Ve(Oi,this,3e5),Ve(qi,this,{slotInterval:250,maxAttempts:12}),Ve(Wi,this,null)}toString(){return"<FetchRequest method=".concat(JSON.stringify(this.method)," url=").concat(JSON.stringify(this.url)," headers=").concat(JSON.stringify(this.headers)," body=").concat(Be(Fi,this)?lt(Be(Fi,this)):"null",">")}setThrottleParams(e){null!=e.slotInterval&&(Be(qi,this).slotInterval=e.slotInterval),null!=e.maxAttempts&&(Be(qi,this).maxAttempts=e.maxAttempts)}send(){return Je(null==Be(Hi,this),"request already sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.send"}),Ve(Hi,this,new _i(this)),Ue(Qi,this,Ji).call(this,0,ro()+this.timeout,0,this,new no(0,"",{},null,this))}cancel(){Je(null!=Be(Hi,this),"request has not been sent","UNSUPPORTED_OPERATION",{operation:"fetchRequest.cancel"});const e=ki.get(this);if(!e)throw new Error("missing signal; should not happen");e()}redirect(e){const t=this.url.split(":")[0].toLowerCase(),n=e.split(":")[0].toLowerCase();Je("GET"===this.method&&("https"!==t||"http"!==n)&&e.match(/^https?:/),"unsupported redirect","UNSUPPORTED_OPERATION",{operation:"redirect(".concat(this.method," ").concat(JSON.stringify(this.url)," => ").concat(JSON.stringify(e),")")});const r=new Ki(e);return r.method="GET",r.allowGzip=this.allowGzip,r.timeout=this.timeout,Ve(Mi,r,Object.assign({},Be(Mi,this))),Be(Fi,this)&&Ve(Fi,r,new Uint8Array(Be(Fi,this))),Ve(Ui,r,Be(Ui,this)),r}clone(){const e=new Ki(this.url);return Ve(Ri,e,Be(Ri,this)),Be(Fi,this)&&Ve(Fi,e,Be(Fi,this)),Ve(Ui,e,Be(Ui,this)),Ve(Mi,e,Object.assign({},Be(Mi,this))),Ve(Bi,e,Be(Bi,this)),this.allowGzip&&(e.allowGzip=!0),e.timeout=this.timeout,this.allowInsecureAuthentication&&(e.allowInsecureAuthentication=!0),Ve(Vi,e,Be(Vi,this)),Ve(zi,e,Be(zi,this)),Ve(Gi,e,Be(Gi,this)),Ve(qi,e,Object.assign({},Be(qi,this))),Ve(Wi,e,Be(Wi,this)),e}static lockConfig(){Ei=!0}static getGateway(e){return Ti[e.toLowerCase()]||null}static registerGateway(e,t){if("http"===(e=e.toLowerCase())||"https"===e)throw new Error("cannot intercept ".concat(e,"; use registerGetUrl"));if(Ei)throw new Error("gateways locked");Ti[e]=t}static registerGetUrl(e){if(Ei)throw new Error("gateways locked");bi=e}static createGetUrlFunc(e){return wi(e)}static createDataGateway(){return Ai}static createIpfsGatewayFunc(e){return Ni(e)}}async function Ji(e,t,n,r,s){if(e>=Be(qi,this).maxAttempts)return s.makeServerError("exceeded maximum retry limit");Je(ro()<=t,"timeout","TIMEOUT",{operation:"request.send",reason:"timeout",request:r}),n>0&&await function(e){return new Promise(t=>setTimeout(t,e))}(n);let i=this.clone();const o=(i.url.split(":")[0]||"").toLowerCase();if(o in Ti){const e=await Ti[o](i.url,Pi(Be(Hi,r)));if(e instanceof no){let t=e;if(this.processFunc){Pi(Be(Hi,r));try{t=await this.processFunc(i,t)}catch(d){null!=d.throttle&&"number"===typeof d.stall||t.makeServerError("error in post-processing function",d).assertOk()}}return t}i=e}this.preflightFunc&&(i=await this.preflightFunc(i));const a=await this.getUrlFunc(i,Pi(Be(Hi,r)));let c=new no(a.statusCode,a.statusMessage,a.headers,a.body,r);if(301===c.statusCode||302===c.statusCode){try{var l;const n=c.headers.location||"";return Ue(Qi,l=i.redirect(n),Ji).call(l,e+1,t,0,r,c)}catch(d){}return c}if(429===c.statusCode&&(null==this.retryFunc||await this.retryFunc(i,c,e))){var u;const n=c.headers["retry-after"];let s=Be(qi,this).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return"string"===typeof n&&n.match(/^[1-9][0-9]*$/)&&(s=parseInt(n)),Ue(Qi,u=i.clone(),Ji).call(u,e+1,t,s,r,c)}if(this.processFunc){Pi(Be(Hi,r));try{c=await this.processFunc(i,c)}catch(d){var h;null!=d.throttle&&"number"===typeof d.stall||c.makeServerError("error in post-processing function",d).assertOk();let n=Be(qi,this).slotInterval*Math.trunc(Math.random()*Math.pow(2,e));return d.stall>=0&&(n=d.stall),Ue(Qi,h=i.clone(),Ji).call(h,e+1,t,n,r,c)}}return c}var Yi=new WeakMap,Zi=new WeakMap,Xi=new WeakMap,$i=new WeakMap,eo=new WeakMap,to=new WeakMap;class no{toString(){return"<FetchResponse status=".concat(this.statusCode," body=").concat(Be($i,this)?lt(Be($i,this)):"null",">")}get statusCode(){return Be(Yi,this)}get statusMessage(){return Be(Zi,this)}get headers(){return Object.assign({},Be(Xi,this))}get body(){return null==Be($i,this)?null:new Uint8Array(Be($i,this))}get bodyText(){try{return null==Be($i,this)?"":Er(Be($i,this))}catch(e){Je(!1,"response body is not valid UTF-8 data","UNSUPPORTED_OPERATION",{operation:"bodyText",info:{response:this}})}}get bodyJson(){try{return JSON.parse(this.bodyText)}catch(e){Je(!1,"response body is not valid JSON","UNSUPPORTED_OPERATION",{operation:"bodyJson",info:{response:this}})}}[Symbol.iterator](){const e=this.headers,t=Object.keys(e);let n=0;return{next:()=>{if(n<t.length){const r=t[n++];return{value:[r,e[r]],done:!1}}return{value:void 0,done:!0}}}}constructor(e,t,n,r,s){Fe(this,Yi,void 0),Fe(this,Zi,void 0),Fe(this,Xi,void 0),Fe(this,$i,void 0),Fe(this,eo,void 0),Fe(this,to,void 0),Ve(Yi,this,e),Ve(Zi,this,t),Ve(Xi,this,Object.keys(n).reduce((e,t)=>(e[t.toLowerCase()]=String(n[t]),e),{})),Ve($i,this,null==r?null:new Uint8Array(r)),Ve(eo,this,s||null),Ve(to,this,{message:""})}makeServerError(e,t){let n;e?n="CLIENT ESCALATED SERVER ERROR (".concat(this.statusCode," ").concat(this.statusMessage,"; ").concat(e,")"):(e="".concat(this.statusCode," ").concat(this.statusMessage),n="CLIENT ESCALATED SERVER ERROR (".concat(e,")"));const r=new no(599,n,this.headers,this.body,Be(eo,this)||void 0);return Ve(to,r,{message:e,error:t}),r}throwThrottleError(e,t){null==t?t=-1:Ye(Number.isInteger(t)&&t>=0,"invalid stall timeout","stall",t);const n=new Error(e||"throttling requests");throw He(n,{stall:t,throttle:!0}),n}getHeader(e){return this.headers[e.toLowerCase()]}hasBody(){return null!=Be($i,this)}get request(){return Be(eo,this)}ok(){return""===Be(to,this).message&&this.statusCode>=200&&this.statusCode<300}assertOk(){if(this.ok())return;let{message:e,error:t}=Be(to,this);""===e&&(e="server response ".concat(this.statusCode," ").concat(this.statusMessage));let n=null;this.request&&(n=this.request.url);let r=null;try{Be($i,this)&&(r=Er(Be($i,this)))}catch(DN){}Je(!1,e,"SERVER_ERROR",{request:this.request||"unknown request",response:this,error:t,info:{requestUrl:n,responseBody:r,responseStatus:"".concat(this.statusCode," ").concat(this.statusMessage)}})}}function ro(){return(new Date).getTime()}const so="0x0000000000000000000000000000000000000000";class io{constructor(e,t,n){(0,nt.A)(this,"fragment",void 0),(0,nt.A)(this,"name",void 0),(0,nt.A)(this,"signature",void 0),(0,nt.A)(this,"topic",void 0),(0,nt.A)(this,"args",void 0);const r=e.name,s=e.format();He(this,{fragment:e,name:r,signature:s,topic:t,args:n})}}class oo{constructor(e,t,n,r){(0,nt.A)(this,"fragment",void 0),(0,nt.A)(this,"name",void 0),(0,nt.A)(this,"args",void 0),(0,nt.A)(this,"signature",void 0),(0,nt.A)(this,"selector",void 0),(0,nt.A)(this,"value",void 0);const s=e.name,i=e.format();He(this,{fragment:e,name:s,args:n,signature:i,selector:t,value:r})}}class ao{constructor(e,t,n){(0,nt.A)(this,"fragment",void 0),(0,nt.A)(this,"name",void 0),(0,nt.A)(this,"args",void 0),(0,nt.A)(this,"signature",void 0),(0,nt.A)(this,"selector",void 0);const r=e.name,s=e.format();He(this,{fragment:e,name:r,args:n,signature:s,selector:t})}}class co{static isIndexed(e){return!(!e||!e._isIndexed)}constructor(e){(0,nt.A)(this,"hash",void 0),(0,nt.A)(this,"_isIndexed",void 0),He(this,{hash:e,_isIndexed:!0})}}const lo={0:"generic panic",1:"assert(false)",17:"arithmetic overflow",18:"division or modulo by zero",33:"enum overflow",34:"invalid encoded storage byte array accessed",49:"out-of-bounds array access; popping on an empty array",50:"out-of-bounds access of an array or bytesN",65:"out of memory",81:"uninitialized function"},uo={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:e=>"reverted with reason string ".concat(JSON.stringify(e))},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"],reason:e=>{let t="unknown panic code";return e>=0&&e<=255&&lo[e.toString()]&&(t=lo[e.toString()]),"reverted with panic code 0x".concat(e.toString(16)," (").concat(t,")")}}};var ho=new WeakMap,fo=new WeakMap,mo=new WeakMap,po=new WeakMap,go=new WeakSet;class yo{constructor(e){et(this,go),(0,nt.A)(this,"fragments",void 0),(0,nt.A)(this,"deploy",void 0),(0,nt.A)(this,"fallback",void 0),(0,nt.A)(this,"receive",void 0),Fe(this,ho,void 0),Fe(this,fo,void 0),Fe(this,mo,void 0),Fe(this,po,void 0);let t=[];t="string"===typeof e?JSON.parse(e):e,Ve(mo,this,new Map),Ve(ho,this,new Map),Ve(fo,this,new Map);const n=[];for(const o of t)try{n.push(gs.from(o))}catch(i){console.log("[Warning] Invalid Fragment ".concat(JSON.stringify(o),":"),i.message)}He(this,{fragments:Object.freeze(n)});let r=null,s=!1;Ve(po,this,this.getAbiCoder()),this.fragments.forEach((e,t)=>{let n;switch(e.type){case"constructor":return this.deploy?void console.log("duplicate definition - constructor"):void He(this,{deploy:e});case"fallback":return void(0===e.inputs.length?s=!0:(Ye(!r||e.payable!==r.payable,"conflicting fallback fragments","fragments[".concat(t,"]"),e),r=e,s=r.payable));case"function":n=Be(mo,this);break;case"event":n=Be(fo,this);break;case"error":n=Be(ho,this);break;default:return}const i=e.format();n.has(i)||n.set(i,e)}),this.deploy||He(this,{deploy:xs.from("constructor()")}),He(this,{fallback:r,receive:s})}format(e){const t=e?"minimal":"full";return this.fragments.map(e=>e.format(t))}formatJson(){const e=this.fragments.map(e=>e.format("json"));return JSON.stringify(e.map(e=>JSON.parse(e)))}getAbiCoder(){return Ps.defaultAbiCoder()}getFunctionName(e){const t=Ue(go,this,vo).call(this,e,null,!1);return Ye(t,"no matching function","key",e),t.name}hasFunction(e){return!!Ue(go,this,vo).call(this,e,null,!1)}getFunction(e,t){return Ue(go,this,vo).call(this,e,t||null,!0)}forEachFunction(e){const t=Array.from(Be(mo,this).keys());t.sort((e,t)=>e.localeCompare(t));for(let n=0;n<t.length;n++){const r=t[n];e(Be(mo,this).get(r),n)}}getEventName(e){const t=Ue(go,this,wo).call(this,e,null,!1);return Ye(t,"no matching event","key",e),t.name}hasEvent(e){return!!Ue(go,this,wo).call(this,e,null,!1)}getEvent(e,t){return Ue(go,this,wo).call(this,e,t||null,!0)}forEachEvent(e){const t=Array.from(Be(fo,this).keys());t.sort((e,t)=>e.localeCompare(t));for(let n=0;n<t.length;n++){const r=t[n];e(Be(fo,this).get(r),n)}}getError(e,t){if(ot(e)){const t=e.toLowerCase();if(uo[t])return ws.from(uo[t].signature);for(const e of Be(ho,this).values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const t=[];for(const[n,r]of Be(ho,this))n.split("(")[0]===e&&t.push(r);if(0===t.length)return"Error"===e?ws.from("error Error(string)"):"Panic"===e?ws.from("error Panic(uint256)"):null;if(t.length>1){const n=t.map(e=>JSON.stringify(e.format())).join(", ");Ye(!1,"ambiguous error description (i.e. ".concat(n,")"),"name",e)}return t[0]}if("Error(string)"===(e=ws.from(e).format()))return ws.from("error Error(string)");if("Panic(uint256)"===e)return ws.from("error Panic(uint256)");const n=Be(ho,this).get(e);return n||null}forEachError(e){const t=Array.from(Be(ho,this).keys());t.sort((e,t)=>e.localeCompare(t));for(let n=0;n<t.length;n++){const r=t[n];e(Be(ho,this).get(r),n)}}_decodeParams(e,t){return Be(po,this).decode(e,t)}_encodeParams(e,t){return Be(po,this).encode(e,t)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,t){if("string"===typeof e){const t=this.getError(e);Ye(t,"unknown error","fragment",e),e=t}return Ye(dt(t,0,4)===e.selector,"data signature does not match error ".concat(e.name,"."),"data",t),this._decodeParams(e.inputs,dt(t,4))}encodeErrorResult(e,t){if("string"===typeof e){const t=this.getError(e);Ye(t,"unknown error","fragment",e),e=t}return ut([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionData(e,t){if("string"===typeof e){const t=this.getFunction(e);Ye(t,"unknown function","fragment",e),e=t}return Ye(dt(t,0,4)===e.selector,"data signature does not match function ".concat(e.name,"."),"data",t),this._decodeParams(e.inputs,dt(t,4))}encodeFunctionData(e,t){if("string"===typeof e){const t=this.getFunction(e);Ye(t,"unknown function","fragment",e),e=t}return ut([e.selector,this._encodeParams(e.inputs,t||[])])}decodeFunctionResult(e,t){if("string"===typeof e){const t=this.getFunction(e);Ye(t,"unknown function","fragment",e),e=t}let n="invalid length for result data";const r=it(t);if(r.length%32===0)try{return Be(po,this).decode(e.outputs,r)}catch(s){n="could not decode result data"}Je(!1,n,"BAD_DATA",{value:lt(r),info:{method:e.name,signature:e.format()}})}makeError(e,t){const n=st(e,"data"),r=Ps.getBuiltinCallException("call",t,n);if(r.message.startsWith("execution reverted (unknown custom error)")){const e=lt(n.slice(0,4)),t=this.getError(e);if(t)try{const e=Be(po,this).decode(t.inputs,n.slice(4));r.revert={name:t.name,signature:t.format(),args:e},r.reason=r.revert.signature,r.message="execution reverted: ".concat(r.reason)}catch(DN){r.message="execution reverted (coult not decode custom error)"}}const s=this.parseTransaction(t);return s&&(r.invocation={method:s.name,signature:s.signature,args:s.args}),r}encodeFunctionResult(e,t){if("string"===typeof e){const t=this.getFunction(e);Ye(t,"unknown function","fragment",e),e=t}return lt(Be(po,this).encode(e.outputs,t||[]))}encodeFilterTopics(e,t){if("string"===typeof e){const t=this.getEvent(e);Ye(t,"unknown event","eventFragment",e),e=t}Je(t.length<=e.inputs.length,"too many arguments for ".concat(e.format()),"UNEXPECTED_ARGUMENT",{count:t.length,expectedCount:e.inputs.length});const n=[];e.anonymous||n.push(e.topicHash);const r=(e,t)=>"string"===e.type?Tr(t):"bytes"===e.type?Hn(lt(t)):("bool"===e.type&&"boolean"===typeof t?t=t?"0x01":"0x00":e.type.match(/^u?int/)?t=Tt(t):e.type.match(/^bytes/)?t=function(e,t){return ft(e,t,!1)}(t,32):"address"===e.type&&Be(po,this).encode(["address"],[t]),mt(lt(t),32));for(t.forEach((t,s)=>{const i=e.inputs[s];i.indexed?null==t?n.push(null):"array"===i.baseType||"tuple"===i.baseType?Ye(!1,"filtering with tuples or arrays not supported","contract."+i.name,t):Array.isArray(t)?n.push(t.map(e=>r(i,e))):n.push(r(i,t)):Ye(null==t,"cannot filter non-indexed parameters; must be null","contract."+i.name,t)});n.length&&null===n[n.length-1];)n.pop();return n}encodeEventLog(e,t){if("string"===typeof e){const t=this.getEvent(e);Ye(t,"unknown event","eventFragment",e),e=t}const n=[],r=[],s=[];return e.anonymous||n.push(e.topicHash),Ye(t.length===e.inputs.length,"event arguments/values mismatch","values",t),e.inputs.forEach((e,i)=>{const o=t[i];if(e.indexed)if("string"===e.type)n.push(Tr(o));else if("bytes"===e.type)n.push(Hn(o));else{if("tuple"===e.baseType||"array"===e.baseType)throw new Error("not implemented");n.push(Be(po,this).encode([e.type],[o]))}else r.push(e),s.push(o)}),{data:Be(po,this).encode(r,s),topics:n}}decodeEventLog(e,t,n){if("string"===typeof e){const t=this.getEvent(e);Ye(t,"unknown event","eventFragment",e),e=t}if(null!=n&&!e.anonymous){const t=e.topicHash;Ye(ot(n[0],32)&&n[0].toLowerCase()===t,"fragment/topic mismatch","topics[0]",n[0]),n=n.slice(1)}const r=[],s=[],i=[];e.inputs.forEach((e,t)=>{e.indexed?"string"===e.type||"bytes"===e.type||"tuple"===e.baseType||"array"===e.baseType?(r.push(ms.from({type:"bytes32",name:e.name})),i.push(!0)):(r.push(e),i.push(!1)):(s.push(e),i.push(!1))});const o=null!=n?Be(po,this).decode(r,ut(n)):null,a=Be(po,this).decode(s,t,!0),c=[],l=[];let u=0,h=0;return e.inputs.forEach((e,t)=>{let n=null;if(e.indexed)if(null==o)n=new co(null);else if(i[t])n=new co(o[h++]);else try{n=o[h++]}catch(r){n=r}else try{n=a[u++]}catch(r){n=r}c.push(n),l.push(e.name||null)}),Ut.fromItems(c,l)}parseTransaction(e){const t=st(e.data,"tx.data"),n=xt(null!=e.value?e.value:0,"tx.value"),r=this.getFunction(lt(t.slice(0,4)));if(!r)return null;const s=Be(po,this).decode(r.inputs,t.slice(4));return new oo(r,r.selector,s,n)}parseCallResult(e){throw new Error("@TODO")}parseLog(e){const t=this.getEvent(e.topics[0]);return!t||t.anonymous?null:new io(t,t.topicHash,this.decodeEventLog(t,e.data,e.topics))}parseError(e){const t=lt(e),n=this.getError(dt(t,0,4));if(!n)return null;const r=Be(po,this).decode(n.inputs,dt(t,4));return new ao(n,n.selector,r)}static from(e){return e instanceof yo?e:"string"===typeof e?new yo(JSON.parse(e)):"function"===typeof e.formatJson?new yo(e.formatJson()):"function"===typeof e.format?new yo(e.format("json")):new yo(e)}}function vo(e,t,n){if(ot(e)){const t=e.toLowerCase();for(const e of Be(mo,this).values())if(t===e.selector)return e;return null}if(-1===e.indexOf("(")){const r=[];for(const[t,n]of Be(mo,this))t.split("(")[0]===e&&r.push(n);if(t){const e=t.length>0?t[t.length-1]:null;let n=t.length,s=!0;rr.isTyped(e)&&"overrides"===e.type&&(s=!1,n--);for(let t=r.length-1;t>=0;t--){const e=r[t].inputs.length;e===n||s&&e===n-1||r.splice(t,1)}for(let i=r.length-1;i>=0;i--){const e=r[i].inputs;for(let n=0;n<t.length;n++)if(rr.isTyped(t[n])){if(n>=e.length){if("overrides"===t[n].type)continue;r.splice(i,1);break}if(t[n].type!==e[n].baseType){r.splice(i,1);break}}}}if(1===r.length&&t&&t.length!==r[0].inputs.length){const e=t[t.length-1];(null==e||Array.isArray(e)||"object"!==typeof e)&&r.splice(0,1)}if(0===r.length)return null;if(r.length>1&&n){const t=r.map(e=>JSON.stringify(e.format())).join(", ");Ye(!1,"ambiguous function description (i.e. matches ".concat(t,")"),"key",e)}return r[0]}const r=Be(mo,this).get(Es.from(e).format());return r||null}function wo(e,t,n){if(ot(e)){const t=e.toLowerCase();for(const e of Be(fo,this).values())if(t===e.topicHash)return e;return null}if(-1===e.indexOf("(")){const r=[];for(const[t,n]of Be(fo,this))t.split("(")[0]===e&&r.push(n);if(t){for(let e=r.length-1;e>=0;e--)r[e].inputs.length<t.length&&r.splice(e,1);for(let e=r.length-1;e>=0;e--){const n=r[e].inputs;for(let s=0;s<t.length;s++)if(rr.isTyped(t[s])&&t[s].type!==n[s].baseType){r.splice(e,1);break}}}if(0===r.length)return null;if(r.length>1&&n){const t=r.map(e=>JSON.stringify(e.format())).join(", ");Ye(!1,"ambiguous event description (i.e. matches ".concat(t,")"),"key",e)}return r[0]}const r=Be(fo,this).get(bs.from(e).format());return r||null}const bo=BigInt(0);function xo(e){return null==e?null:e}function So(e){return null==e?null:e.toString()}class Eo{constructor(e,t,n){(0,nt.A)(this,"gasPrice",void 0),(0,nt.A)(this,"maxFeePerGas",void 0),(0,nt.A)(this,"maxPriorityFeePerGas",void 0),He(this,{gasPrice:xo(e),maxFeePerGas:xo(t),maxPriorityFeePerGas:xo(n)})}toJSON(){const{gasPrice:e,maxFeePerGas:t,maxPriorityFeePerGas:n}=this;return{_type:"FeeData",gasPrice:So(e),maxFeePerGas:So(t),maxPriorityFeePerGas:So(n)}}}function Ao(e){const t={};e.to&&(t.to=e.to),e.from&&(t.from=e.from),e.data&&(t.data=lt(e.data));const n="chainId,gasLimit,gasPrice,maxFeePerBlobGas,maxFeePerGas,maxPriorityFeePerGas,value".split(/,/);for(const s of n)s in e&&null!=e[s]&&(t[s]=xt(e[s],"request.".concat(s)));const r="type,nonce".split(/,/);for(const s of r)s in e&&null!=e[s]&&(t[s]=Nt(e[s],"request.".concat(s)));return e.accessList&&(t.accessList=ri(e.accessList)),e.authorizationList&&(t.authorizationList=e.authorizationList.slice()),"blockTag"in e&&(t.blockTag=e.blockTag),"enableCcipRead"in e&&(t.enableCcipRead=!!e.enableCcipRead),"customData"in e&&(t.customData=e.customData),"blobVersionedHashes"in e&&e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.slice()),"kzg"in e&&(t.kzg=e.kzg),"blobs"in e&&e.blobs&&(t.blobs=e.blobs.map(e=>at(e)?lt(e):Object.assign({},e))),t}var No=new WeakMap;class To{constructor(e,t){(0,nt.A)(this,"provider",void 0),(0,nt.A)(this,"number",void 0),(0,nt.A)(this,"hash",void 0),(0,nt.A)(this,"timestamp",void 0),(0,nt.A)(this,"parentHash",void 0),(0,nt.A)(this,"parentBeaconBlockRoot",void 0),(0,nt.A)(this,"nonce",void 0),(0,nt.A)(this,"difficulty",void 0),(0,nt.A)(this,"gasLimit",void 0),(0,nt.A)(this,"gasUsed",void 0),(0,nt.A)(this,"stateRoot",void 0),(0,nt.A)(this,"receiptsRoot",void 0),(0,nt.A)(this,"blobGasUsed",void 0),(0,nt.A)(this,"excessBlobGas",void 0),(0,nt.A)(this,"miner",void 0),(0,nt.A)(this,"prevRandao",void 0),(0,nt.A)(this,"extraData",void 0),(0,nt.A)(this,"baseFeePerGas",void 0),Fe(this,No,void 0),Ve(No,this,e.transactions.map(e=>"string"!==typeof e?new Po(e,t):e)),He(this,{provider:t,hash:xo(e.hash),number:e.number,timestamp:e.timestamp,parentHash:e.parentHash,parentBeaconBlockRoot:e.parentBeaconBlockRoot,nonce:e.nonce,difficulty:e.difficulty,gasLimit:e.gasLimit,gasUsed:e.gasUsed,blobGasUsed:e.blobGasUsed,excessBlobGas:e.excessBlobGas,miner:e.miner,prevRandao:xo(e.prevRandao),extraData:e.extraData,baseFeePerGas:xo(e.baseFeePerGas),stateRoot:e.stateRoot,receiptsRoot:e.receiptsRoot})}get transactions(){return Be(No,this).map(e=>"string"===typeof e?e:e.hash)}get prefetchedTransactions(){const e=Be(No,this).slice();return 0===e.length?[]:(Je("object"===typeof e[0],"transactions were not prefetched with block request","UNSUPPORTED_OPERATION",{operation:"transactionResponses()"}),e)}toJSON(){const{baseFeePerGas:e,difficulty:t,extraData:n,gasLimit:r,gasUsed:s,hash:i,miner:o,prevRandao:a,nonce:c,number:l,parentHash:u,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:f,timestamp:m,transactions:p}=this;return{_type:"Block",baseFeePerGas:So(e),difficulty:So(t),extraData:n,gasLimit:So(r),gasUsed:So(s),blobGasUsed:So(this.blobGasUsed),excessBlobGas:So(this.excessBlobGas),hash:i,miner:o,prevRandao:a,nonce:c,number:l,parentHash:u,timestamp:m,parentBeaconBlockRoot:h,stateRoot:d,receiptsRoot:f,transactions:p}}[Symbol.iterator](){let e=0;const t=this.transactions;return{next:()=>e<this.length?{value:t[e++],done:!1}:{value:void 0,done:!0}}}get length(){return Be(No,this).length}get date(){return null==this.timestamp?null:new Date(1e3*this.timestamp)}async getTransaction(e){let t;if("number"===typeof e)t=Be(No,this)[e];else{const n=e.toLowerCase();for(const e of Be(No,this)){if("string"===typeof e){if(e!==n)continue;t=e;break}if(e.hash===n){t=e;break}}}if(null==t)throw new Error("no such tx");return"string"===typeof t?await this.provider.getTransaction(t):t}getPrefetchedTransaction(e){const t=this.prefetchedTransactions;if("number"===typeof e)return t[e];e=e.toLowerCase();for(const n of t)if(n.hash===e)return n;Ye(!1,"no matching transaction","indexOrHash",e)}isMined(){return!!this.hash}isLondon(){return!!this.baseFeePerGas}orphanedEvent(){if(!this.isMined())throw new Error("");return{orphan:"drop-block",hash:(e=this).hash,number:e.number};var e}}class ko{constructor(e,t){(0,nt.A)(this,"provider",void 0),(0,nt.A)(this,"transactionHash",void 0),(0,nt.A)(this,"blockHash",void 0),(0,nt.A)(this,"blockNumber",void 0),(0,nt.A)(this,"removed",void 0),(0,nt.A)(this,"address",void 0),(0,nt.A)(this,"data",void 0),(0,nt.A)(this,"topics",void 0),(0,nt.A)(this,"index",void 0),(0,nt.A)(this,"transactionIndex",void 0),this.provider=t;const n=Object.freeze(e.topics.slice());He(this,{transactionHash:e.transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,removed:e.removed,address:e.address,data:e.data,topics:n,index:e.index,transactionIndex:e.transactionIndex})}toJSON(){const{address:e,blockHash:t,blockNumber:n,data:r,index:s,removed:i,topics:o,transactionHash:a,transactionIndex:c}=this;return{_type:"log",address:e,blockHash:t,blockNumber:n,data:r,index:s,removed:i,topics:o,transactionHash:a,transactionIndex:c}}async getBlock(){const e=await this.provider.getBlock(this.blockHash);return Je(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransaction(){const e=await this.provider.getTransaction(this.transactionHash);return Je(!!e,"failed to find transaction","UNKNOWN_ERROR",{}),e}async getTransactionReceipt(){const e=await this.provider.getTransactionReceipt(this.transactionHash);return Je(!!e,"failed to find transaction receipt","UNKNOWN_ERROR",{}),e}removedEvent(){return{orphan:"drop-log",log:{transactionHash:(e=this).transactionHash,blockHash:e.blockHash,blockNumber:e.blockNumber,address:e.address,data:e.data,topics:Object.freeze(e.topics.slice()),index:e.index}};var e}}var Co=new WeakMap;class Io{constructor(e,t){(0,nt.A)(this,"provider",void 0),(0,nt.A)(this,"to",void 0),(0,nt.A)(this,"from",void 0),(0,nt.A)(this,"contractAddress",void 0),(0,nt.A)(this,"hash",void 0),(0,nt.A)(this,"index",void 0),(0,nt.A)(this,"blockHash",void 0),(0,nt.A)(this,"blockNumber",void 0),(0,nt.A)(this,"logsBloom",void 0),(0,nt.A)(this,"gasUsed",void 0),(0,nt.A)(this,"blobGasUsed",void 0),(0,nt.A)(this,"cumulativeGasUsed",void 0),(0,nt.A)(this,"gasPrice",void 0),(0,nt.A)(this,"blobGasPrice",void 0),(0,nt.A)(this,"type",void 0),(0,nt.A)(this,"status",void 0),(0,nt.A)(this,"root",void 0),Fe(this,Co,void 0),Ve(Co,this,Object.freeze(e.logs.map(e=>new ko(e,t))));let n=bo;null!=e.effectiveGasPrice?n=e.effectiveGasPrice:null!=e.gasPrice&&(n=e.gasPrice),He(this,{provider:t,to:e.to,from:e.from,contractAddress:e.contractAddress,hash:e.hash,index:e.index,blockHash:e.blockHash,blockNumber:e.blockNumber,logsBloom:e.logsBloom,gasUsed:e.gasUsed,cumulativeGasUsed:e.cumulativeGasUsed,blobGasUsed:e.blobGasUsed,gasPrice:n,blobGasPrice:e.blobGasPrice,type:e.type,status:e.status,root:e.root})}get logs(){return Be(Co,this)}toJSON(){const{to:e,from:t,contractAddress:n,hash:r,index:s,blockHash:i,blockNumber:o,logsBloom:a,logs:c,status:l,root:u}=this;return{_type:"TransactionReceipt",blockHash:i,blockNumber:o,contractAddress:n,cumulativeGasUsed:So(this.cumulativeGasUsed),from:t,gasPrice:So(this.gasPrice),blobGasUsed:So(this.blobGasUsed),blobGasPrice:So(this.blobGasPrice),gasUsed:So(this.gasUsed),hash:r,index:s,logs:c,logsBloom:a,root:u,status:l,to:e}}get length(){return this.logs.length}[Symbol.iterator](){let e=0;return{next:()=>e<this.length?{value:this.logs[e++],done:!1}:{value:void 0,done:!0}}}get fee(){return this.gasUsed*this.gasPrice}async getBlock(){const e=await this.provider.getBlock(this.blockHash);if(null==e)throw new Error("TODO");return e}async getTransaction(){const e=await this.provider.getTransaction(this.hash);if(null==e)throw new Error("TODO");return e}async getResult(){return await this.provider.getTransactionResult(this.hash)}async confirmations(){return await this.provider.getBlockNumber()-this.blockNumber+1}removedEvent(){return Do(this)}reorderedEvent(e){return Je(!e||e.isMined(),"unmined 'other' transction cannot be orphaned","UNSUPPORTED_OPERATION",{operation:"reorderedEvent(other)"}),jo(this,e)}}var _o=new WeakMap;class Po{constructor(e,t){(0,nt.A)(this,"provider",void 0),(0,nt.A)(this,"blockNumber",void 0),(0,nt.A)(this,"blockHash",void 0),(0,nt.A)(this,"index",void 0),(0,nt.A)(this,"hash",void 0),(0,nt.A)(this,"type",void 0),(0,nt.A)(this,"to",void 0),(0,nt.A)(this,"from",void 0),(0,nt.A)(this,"nonce",void 0),(0,nt.A)(this,"gasLimit",void 0),(0,nt.A)(this,"gasPrice",void 0),(0,nt.A)(this,"maxPriorityFeePerGas",void 0),(0,nt.A)(this,"maxFeePerGas",void 0),(0,nt.A)(this,"maxFeePerBlobGas",void 0),(0,nt.A)(this,"data",void 0),(0,nt.A)(this,"value",void 0),(0,nt.A)(this,"chainId",void 0),(0,nt.A)(this,"signature",void 0),(0,nt.A)(this,"accessList",void 0),(0,nt.A)(this,"blobVersionedHashes",void 0),(0,nt.A)(this,"authorizationList",void 0),Fe(this,_o,void 0),this.provider=t,this.blockNumber=null!=e.blockNumber?e.blockNumber:null,this.blockHash=null!=e.blockHash?e.blockHash:null,this.hash=e.hash,this.index=e.index,this.type=e.type,this.from=e.from,this.to=e.to||null,this.gasLimit=e.gasLimit,this.nonce=e.nonce,this.data=e.data,this.value=e.value,this.gasPrice=e.gasPrice,this.maxPriorityFeePerGas=null!=e.maxPriorityFeePerGas?e.maxPriorityFeePerGas:null,this.maxFeePerGas=null!=e.maxFeePerGas?e.maxFeePerGas:null,this.maxFeePerBlobGas=null!=e.maxFeePerBlobGas?e.maxFeePerBlobGas:null,this.chainId=e.chainId,this.signature=e.signature,this.accessList=null!=e.accessList?e.accessList:null,this.blobVersionedHashes=null!=e.blobVersionedHashes?e.blobVersionedHashes:null,this.authorizationList=null!=e.authorizationList?e.authorizationList:null,Ve(_o,this,-1)}toJSON(){const{blockNumber:e,blockHash:t,index:n,hash:r,type:s,to:i,from:o,nonce:a,data:c,signature:l,accessList:u,blobVersionedHashes:h}=this;return{_type:"TransactionResponse",accessList:u,blockNumber:e,blockHash:t,blobVersionedHashes:h,chainId:So(this.chainId),data:c,from:o,gasLimit:So(this.gasLimit),gasPrice:So(this.gasPrice),hash:r,maxFeePerGas:So(this.maxFeePerGas),maxPriorityFeePerGas:So(this.maxPriorityFeePerGas),maxFeePerBlobGas:So(this.maxFeePerBlobGas),nonce:a,signature:l,to:i,index:n,type:s,value:So(this.value)}}async getBlock(){let e=this.blockNumber;if(null==e){const t=await this.getTransaction();t&&(e=t.blockNumber)}if(null==e)return null;const t=this.provider.getBlock(e);if(null==t)throw new Error("TODO");return t}async getTransaction(){return this.provider.getTransaction(this.hash)}async confirmations(){if(null==this.blockNumber){const{tx:e,blockNumber:t}=await Ge({tx:this.getTransaction(),blockNumber:this.provider.getBlockNumber()});return null==e||null==e.blockNumber?0:t-e.blockNumber+1}return await this.provider.getBlockNumber()-this.blockNumber+1}async wait(e,t){const n=null==e?1:e,r=null==t?0:t;let s=Be(_o,this),i=-1,o=-1===s;const a=async()=>{if(o)return null;const{blockNumber:e,nonce:t}=await Ge({blockNumber:this.provider.getBlockNumber(),nonce:this.provider.getTransactionCount(this.from)});if(t<this.nonce)return void(s=e);if(o)return null;const r=await this.getTransaction();if(!r||null==r.blockNumber)for(-1===i&&(i=s-3,i<Be(_o,this)&&(i=Be(_o,this)));i<=e;){if(o)return null;const t=await this.provider.getBlock(i,!0);if(null==t)return;for(const e of t)if(e===this.hash)return;for(let r=0;r<t.length;r++){const i=await t.getTransaction(r);if(i.from===this.from&&i.nonce===this.nonce){if(o)return null;const t=await this.provider.getTransactionReceipt(i.hash);if(null==t)return;if(e-t.blockNumber+1<n)return;let r="replaced";i.data===this.data&&i.to===this.to&&i.value===this.value?r="repriced":"0x"===i.data&&i.from===i.to&&i.value===bo&&(r="cancelled"),Je(!1,"transaction was replaced","TRANSACTION_REPLACED",{cancelled:"replaced"===r||"cancelled"===r,reason:r,replacement:i.replaceableTransaction(s),hash:i.hash,receipt:t})}}i++}},c=e=>{if(null==e||0!==e.status)return e;Je(!1,"transaction execution reverted","CALL_EXCEPTION",{action:"sendTransaction",data:null,reason:null,invocation:null,revert:null,transaction:{to:e.to,from:e.from,data:""},receipt:e})},l=await this.provider.getTransactionReceipt(this.hash);if(0===n)return c(l);if(l){if(1===n||await l.confirmations()>=n)return c(l)}else if(await a(),0===n)return null;const u=new Promise((e,t)=>{const i=[],l=()=>{i.forEach(e=>e())};if(i.push(()=>{o=!0}),r>0){const e=setTimeout(()=>{l(),t(Ke("wait for transaction timeout","TIMEOUT"))},r);i.push(()=>{clearTimeout(e)})}const u=async r=>{if(await r.confirmations()>=n){l();try{e(c(r))}catch(s){t(s)}}};if(i.push(()=>{this.provider.off(this.hash,u)}),this.provider.on(this.hash,u),s>=0){const e=async()=>{try{await a()}catch(n){if(We(n,"TRANSACTION_REPLACED"))return l(),void t(n)}o||this.provider.once("block",e)};i.push(()=>{this.provider.off("block",e)}),this.provider.once("block",e)}});return await u}isMined(){return null!=this.blockHash}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}removedEvent(){return Je(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Do(this)}reorderedEvent(e){return Je(this.isMined(),"unmined transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),Je(!e||e.isMined(),"unmined 'other' transaction canot be orphaned","UNSUPPORTED_OPERATION",{operation:"removeEvent()"}),jo(this,e)}replaceableTransaction(e){Ye(Number.isInteger(e)&&e>=0,"invalid startBlock","startBlock",e);const t=new Po(this,this.provider);return Ve(_o,t,e),t}}function jo(e,t){return{orphan:"reorder-transaction",tx:e,other:t}}function Do(e){return{orphan:"drop-transaction",tx:e}}var Mo=new WeakMap;class Ro{constructor(e,t,n){(0,nt.A)(this,"filter",void 0),(0,nt.A)(this,"emitter",void 0),Fe(this,Mo,void 0),Ve(Mo,this,t),He(this,{emitter:e,filter:n})}async removeListener(){null!=Be(Mo,this)&&await this.emitter.off(this.filter,Be(Mo,this))}}class Oo extends ko{constructor(e,t,n){super(e,e.provider),(0,nt.A)(this,"interface",void 0),(0,nt.A)(this,"fragment",void 0),(0,nt.A)(this,"args",void 0);He(this,{args:t.decodeEventLog(n,e.data,e.topics),fragment:n,interface:t})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}class Lo extends ko{constructor(e,t){super(e,e.provider),(0,nt.A)(this,"error",void 0),He(this,{error:t})}}var Fo=new WeakMap;class Uo extends Io{constructor(e,t,n){super(n,t),Fe(this,Fo,void 0),Ve(Fo,this,e)}get logs(){return super.logs.map(e=>{const t=e.topics.length?Be(Fo,this).getEvent(e.topics[0]):null;if(t)try{return new Oo(e,Be(Fo,this),t)}catch(n){return new Lo(e,n)}return e})}}var Bo=new WeakMap;class Vo extends Po{constructor(e,t,n){super(n,t),Fe(this,Bo,void 0),Ve(Bo,this,e)}async wait(e,t){const n=await super.wait(e,t);return null==n?null:new Uo(Be(Bo,this),this.provider,n)}}class zo extends Ro{constructor(e,t,n,r){super(e,t,n),(0,nt.A)(this,"log",void 0),He(this,{log:r})}async getBlock(){return await this.log.getBlock()}async getTransaction(){return await this.log.getTransaction()}async getTransactionReceipt(){return await this.log.getTransactionReceipt()}}class Go extends zo{constructor(e,t,n,r,s){super(e,t,n,new Oo(s,e.interface,r));He(this,{args:e.interface.decodeEventLog(r,this.log.data,this.log.topics),fragment:r})}get eventName(){return this.fragment.name}get eventSignature(){return this.fragment.format()}}const Ho=BigInt(0);function qo(e){return e&&"function"===typeof e.call}function Wo(e){return e&&"function"===typeof e.estimateGas}function Qo(e){return e&&"function"===typeof e.resolveName}function Ko(e){return e&&"function"===typeof e.sendTransaction}function Jo(e){if(null!=e){if(Qo(e))return e;if(e.provider)return e.provider}}var Yo=new WeakMap;class Zo{constructor(e,t,n){if(Fe(this,Yo,void 0),(0,nt.A)(this,"fragment",void 0),He(this,{fragment:t}),t.inputs.length<n.length)throw new Error("too many arguments");const r=Xo(e.runner,"resolveName"),s=Qo(r)?r:null;Ve(Yo,this,async function(){const r=await Promise.all(t.inputs.map((e,t)=>null==n[t]?null:e.walkAsync(n[t],(e,t)=>"address"===e?Array.isArray(t)?Promise.all(t.map(e=>Rs(e,s))):Rs(t,s):t)));return e.interface.encodeFilterTopics(t,r)}())}getTopicFilter(){return Be(Yo,this)}}function Xo(e,t){return null==e?null:"function"===typeof e[t]?e:e.provider&&"function"===typeof e.provider[t]?e.provider:null}function $o(e){return null==e?null:e.provider||null}async function ea(e,t){const n=rr.dereference(e,"overrides");Ye("object"===typeof n,"invalid overrides parameter","overrides",e);const r=Ao(n);return Ye(null==r.to||(t||[]).indexOf("to")>=0,"cannot override to","overrides.to",r.to),Ye(null==r.data||(t||[]).indexOf("data")>=0,"cannot override data","overrides.data",r.data),r.from&&(r.from=r.from),r}function ta(e){const t=async function(t){const n=await ea(t,["data"]);n.to=await e.getAddress(),n.from&&(n.from=await Rs(n.from,Jo(e.runner)));const r=e.interface,s=xt(n.value||Ho,"overrides.value")===Ho,i="0x"===(n.data||"0x");!r.fallback||r.fallback.payable||!r.receive||i||s||Ye(!1,"cannot send data to receive or send value to non-payable fallback","overrides",t),Ye(r.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data);return Ye(r.receive||r.fallback&&r.fallback.payable||s,"cannot send value to non-payable fallback","overrides.value",n.value),Ye(r.fallback||i,"cannot send data to receive-only contract","overrides.data",n.data),n},n=async function(n){const r=e.runner;Je(Ko(r),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const s=await r.sendTransaction(await t(n)),i=$o(e.runner);return new Vo(e.interface,i,s)},r=async e=>await n(e);return He(r,{_contract:e,estimateGas:async function(n){const r=Xo(e.runner,"estimateGas");return Je(Wo(r),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await r.estimateGas(await t(n))},populateTransaction:t,send:n,staticCall:async function(n){const r=Xo(e.runner,"call");Je(qo(r),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const s=await t(n);try{return await r.call(s)}catch(i){if(Qe(i)&&i.data)throw e.interface.makeError(i.data,s);throw i}}}),r}function na(e,t){const n=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];const i=e.interface.getFunction(t,r);return Je(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),i},r=async function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];const i=n(...r);let o={};if(i.inputs.length+1===r.length&&(o=await ea(r.pop()),o.from&&(o.from=await Rs(o.from,Jo(e.runner)))),i.inputs.length!==r.length)throw new Error("internal error: fragment inputs doesn't match arguments; should not happen");const a=await async function(e,t,n){const r=Xo(e,"resolveName"),s=Qo(r)?r:null;return await Promise.all(t.map((e,t)=>e.walkAsync(n[t],(e,t)=>(t=rr.dereference(t,e),"address"===e?Rs(t,s):t))))}(e.runner,i.inputs,r);return Object.assign({},o,await Ge({to:e.getAddress(),data:e.interface.encodeFunctionData(i,a)}))},s=async function(){const e=await o(...arguments);return 1===e.length?e[0]:e},i=async function(){const t=e.runner;Je(Ko(t),"contract runner does not support sending transactions","UNSUPPORTED_OPERATION",{operation:"sendTransaction"});const n=await t.sendTransaction(await r(...arguments)),s=$o(e.runner);return new Vo(e.interface,s,n)},o=async function(){const t=Xo(e.runner,"call");Je(qo(t),"contract runner does not support calling","UNSUPPORTED_OPERATION",{operation:"call"});const s=await r(...arguments);let i="0x";try{i=await t.call(s)}catch(a){if(Qe(a)&&a.data)throw e.interface.makeError(a.data,s);throw a}const o=n(...arguments);return e.interface.decodeFunctionResult(o,i)},a=async function(){return n(...arguments).constant?await s(...arguments):await i(...arguments)};return He(a,{name:e.interface.getFunctionName(t),_contract:e,_key:t,getFragment:n,estimateGas:async function(){const t=Xo(e.runner,"estimateGas");return Je(Wo(t),"contract runner does not support gas estimation","UNSUPPORTED_OPERATION",{operation:"estimateGas"}),await t.estimateGas(await r(...arguments))},populateTransaction:r,send:i,staticCall:s,staticCallResult:o}),Object.defineProperty(a,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getFunction(t);return Je(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),a}const ra=Symbol.for("_ethersInternal_contract"),sa=new WeakMap;function ia(e){return sa.get(e[ra])}async function oa(e,t){let n,r=null;if(Array.isArray(t)){const r=function(t){if(ot(t,32))return t;const n=e.interface.getEvent(t);return Ye(n,"unknown fragment","name",t),n.topicHash};n=t.map(e=>null==e?null:Array.isArray(e)?e.map(r):r(e))}else"*"===t?n=[null]:"string"===typeof t?ot(t,32)?n=[t]:(r=e.interface.getEvent(t),Ye(r,"unknown fragment","event",t),n=[r.topicHash]):(s=t)&&"object"===typeof s&&"getTopicFilter"in s&&"function"===typeof s.getTopicFilter&&s.fragment?n=await t.getTopicFilter():"fragment"in t?(r=t.fragment,n=[r.topicHash]):Ye(!1,"unknown event name","event",t);var s;n=n.map(e=>{if(null==e)return null;if(Array.isArray(e)){const t=Array.from(new Set(e.map(e=>e.toLowerCase())).values());return 1===t.length?t[0]:(t.sort(),t)}return e.toLowerCase()});return{fragment:r,tag:n.map(e=>null==e?"null":Array.isArray(e)?e.join("|"):e).join("&"),topics:n}}async function aa(e,t){const{subs:n}=ia(e);return n.get((await oa(e,t)).tag)||null}async function ca(e,t,n){const r=$o(e.runner);Je(r,"contract runner does not support subscribing","UNSUPPORTED_OPERATION",{operation:t});const{fragment:s,tag:i,topics:o}=await oa(e,n),{addr:a,subs:c}=ia(e);let l=c.get(i);if(!l){const t={address:a||e,topics:o},u=t=>{let r=s;if(null==r)try{r=e.interface.getEvent(t.topics[0])}catch(i){}if(r){const i=r,o=s?e.interface.decodeEventLog(s,t.data,t.topics):[];ua(e,n,o,r=>new Go(e,r,n,i,t))}else ua(e,n,[],r=>new zo(e,r,n,t))};let h=[];l={tag:i,listeners:[],start:()=>{h.length||h.push(r.on(t,u))},stop:async()=>{if(0==h.length)return;let e=h;h=[],await Promise.all(e),r.off(t,u)}},c.set(i,l)}return l}let la=Promise.resolve();async function ua(e,t,n,r){try{await la}catch(i){}const s=async function(e,t,n,r){await la;const s=await aa(e,t);if(!s)return!1;const o=s.listeners.length;return s.listeners=s.listeners.filter(t=>{let{listener:s,once:o}=t;const a=Array.from(n);r&&a.push(r(o?null:s));try{s.call(e,...a)}catch(i){}return!o}),0===s.listeners.length&&(s.stop(),ia(e).subs.delete(s.tag)),o>0}(e,t,n,r);return la=s,await s}const ha=["then"];class da{constructor(e,t,n,r){(0,nt.A)(this,"target",void 0),(0,nt.A)(this,"interface",void 0),(0,nt.A)(this,"runner",void 0),(0,nt.A)(this,"filters",void 0),(0,nt.A)(this,ra,void 0),(0,nt.A)(this,"fallback",void 0),Ye("string"===typeof e||Ds(e),"invalid value for Contract target","target",e),null==n&&(n=null);const s=yo.from(t);let i;He(this,{target:e,runner:n,interface:s}),Object.defineProperty(this,ra,{value:{}});let o=null,a=null;if(r){const e=$o(n);a=new Vo(this.interface,e,r)}let c=new Map;if("string"===typeof e)if(ot(e))o=e,i=Promise.resolve(e);else{const t=Xo(n,"resolveName");if(!Qo(t))throw Ke("contract runner does not support name resolution","UNSUPPORTED_OPERATION",{operation:"resolveName"});i=t.resolveName(e).then(t=>{if(null==t)throw Ke("an ENS name used for a contract target must be correctly configured","UNCONFIGURED_NAME",{value:e});return ia(this).addr=t,t})}else i=e.getAddress().then(e=>{if(null==e)throw new Error("TODO");return ia(this).addr=e,e});var l,u;l=this,u={addrPromise:i,addr:o,deployTx:a,subs:c},sa.set(l[ra],u);const h=new Proxy({},{get:(e,t,n)=>{if("symbol"===typeof t||ha.indexOf(t)>=0)return Reflect.get(e,t,n);try{return this.getEvent(t)}catch(r){if(!We(r,"INVALID_ARGUMENT")||"key"!==r.argument)throw r}},has:(e,t)=>ha.indexOf(t)>=0?Reflect.has(e,t):Reflect.has(e,t)||this.interface.hasEvent(String(t))});return He(this,{filters:h}),He(this,{fallback:s.receive||s.fallback?ta(this):null}),new Proxy(this,{get:(e,t,n)=>{if("symbol"===typeof t||t in e||ha.indexOf(t)>=0)return Reflect.get(e,t,n);try{return e.getFunction(t)}catch(r){if(!We(r,"INVALID_ARGUMENT")||"key"!==r.argument)throw r}},has:(e,t)=>"symbol"===typeof t||t in e||ha.indexOf(t)>=0?Reflect.has(e,t):e.interface.hasFunction(t)})}connect(e){return new da(this.target,this.interface,e)}attach(e){return new da(e,this.interface,this.runner)}async getAddress(){return await ia(this).addrPromise}async getDeployedCode(){const e=$o(this.runner);Je(e,"runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"getDeployedCode"});const t=await e.getCode(await this.getAddress());return"0x"===t?null:t}async waitForDeployment(){const e=this.deploymentTransaction();if(e)return await e.wait(),this;if(null!=await this.getDeployedCode())return this;const t=$o(this.runner);return Je(null!=t,"contract runner does not support .provider","UNSUPPORTED_OPERATION",{operation:"waitForDeployment"}),new Promise((e,n)=>{const r=async()=>{try{if(null!=await this.getDeployedCode())return e(this);t.once("block",r)}catch(s){n(s)}};r()})}deploymentTransaction(){return ia(this).deployTx}getFunction(e){"string"!==typeof e&&(e=e.format());return na(this,e)}getEvent(e){return"string"!==typeof e&&(e=e.format()),function(e,t){const n=function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];const i=e.interface.getEvent(t,r);return Je(i,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t,args:r}}),i},r=function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return new Zo(e,n(...r),r)};return He(r,{name:e.interface.getEventName(t),_contract:e,_key:t,getFragment:n}),Object.defineProperty(r,"fragment",{configurable:!1,enumerable:!0,get:()=>{const n=e.interface.getEvent(t);return Je(n,"no matching fragment","UNSUPPORTED_OPERATION",{operation:"fragment",info:{key:t}}),n}}),r}(this,e)}async queryTransaction(e){throw new Error("@TODO")}async queryFilter(e,t,n){null==t&&(t=0),null==n&&(n="latest");const{addr:r,addrPromise:s}=ia(this),i=r||await s,{fragment:o,topics:a}=await oa(this,e),c={address:i,topics:a,fromBlock:t,toBlock:n},l=$o(this.runner);return Je(l,"contract runner does not have a provider","UNSUPPORTED_OPERATION",{operation:"queryFilter"}),(await l.getLogs(c)).map(e=>{let t=o;if(null==t)try{t=this.interface.getEvent(e.topics[0])}catch(n){}if(t)try{return new Oo(e,this.interface,t)}catch(n){return new Lo(e,n)}return new ko(e,l)})}async on(e,t){const n=await ca(this,"on",e);return n.listeners.push({listener:t,once:!1}),n.start(),this}async once(e,t){const n=await ca(this,"once",e);return n.listeners.push({listener:t,once:!0}),n.start(),this}async emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return await ua(this,e,n,null)}async listenerCount(e){if(e){const t=await aa(this,e);return t?t.listeners.length:0}const{subs:t}=ia(this);let n=0;for(const{listeners:r}of t.values())n+=r.length;return n}async listeners(e){if(e){const t=await aa(this,e);return t?t.listeners.map(e=>{let{listener:t}=e;return t}):[]}const{subs:t}=ia(this);let n=[];for(const{listeners:r}of t.values())n=n.concat(r.map(e=>{let{listener:t}=e;return t}));return n}async off(e,t){const n=await aa(this,e);if(!n)return this;if(t){const e=n.listeners.map(e=>{let{listener:t}=e;return t}).indexOf(t);e>=0&&n.listeners.splice(e,1)}return null!=t&&0!==n.listeners.length||(n.stop(),ia(this).subs.delete(n.tag)),this}async removeAllListeners(e){if(e){const t=await aa(this,e);if(!t)return this;t.stop(),ia(this).subs.delete(t.tag)}else{const{subs:e}=ia(this);for(const{tag:t,stop:n}of e.values())n(),e.delete(t)}return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return await this.off(e,t)}static buildClass(e){return class extends da{constructor(t){super(t,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)}}}static from(e,t,n){null==n&&(n=null);return new this(e,t,n)}}class fa extends(function(){return da}()){}const ma=new Map([[8217,"apostrophe"],[8260,"fraction slash"],[12539,"middle dot"]]);function pa(e){return function(e){let t=0;return()=>e[t++]}(function(e){let t=0;function n(){return e[t++]<<8|e[t++]}let r=n(),s=1,i=[0,1];for(let b=1;b<r;b++)i.push(s+=n());let o=n(),a=t;t+=o;let c=0,l=0;function u(){return 0==c&&(l=l<<8|e[t++],c=8),l>>--c&1}const h=2**31,d=h>>>1,f=d>>1,m=h-1;let p=0;for(let b=0;b<31;b++)p=p<<1|u();let g=[],y=0,v=h;for(;;){let e=Math.floor(((p-y+1)*s-1)/v),t=0,n=r;for(;n-t>1;){let r=t+n>>>1;e<i[r]?n=r:t=r}if(0==t)break;g.push(t);let o=y+Math.floor(v*i[t]/s),a=y+Math.floor(v*i[t+1]/s)-1;for(;0==((o^a)&d);)p=p<<1&m|u(),o=o<<1&m,a=a<<1&m|1;for(;o&~a&f;)p=p&d|p<<1&m>>>1|u(),o=o<<1^d,a=(a^d)<<1|d|1;y=o,v=1+a-o}let w=r-4;return g.map(t=>{switch(t-w){case 3:return w+65792+(e[a++]<<16|e[a++]<<8|e[a++]);case 2:return w+256+(e[a++]<<8|e[a++]);case 1:return w+e[a++];default:return t-1}})}(function(e){let t=[];[..."ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"].forEach((e,n)=>t[e.charCodeAt(0)]=n);let n=e.length,r=new Uint8Array(6*n>>3);for(let s=0,i=0,o=0,a=0;s<n;s++)a=a<<6|t[e.charCodeAt(s)],o+=6,o>=8&&(r[i++]=a>>(o-=8));return r}(e)))}function ga(e){return 1&e?~e>>1:e>>1}function ya(e,t){let n=Array(e);for(let r=0,s=0;r<e;r++)n[r]=s+=ga(t());return n}function va(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[];for(;;){let r=e(),s=e();if(!s)break;t+=r;for(let e=0;e<s;e++)n.push(t+e);t+=s+1}return n}function wa(e){return xa(()=>{let t=va(e);if(t.length)return t})}function ba(e){let t=[];for(;;){let n=e();if(0==n)break;t.push(Ea(n,e))}for(;;){let n=e()-1;if(n<0)break;t.push(Aa(n,e))}return t.flat()}function xa(e){let t=[];for(;;){let n=e(t.length);if(!n)break;t.push(n)}return t}function Sa(e,t,n){let r=Array(e).fill().map(()=>[]);for(let s=0;s<t;s++)ya(e,n).forEach((e,t)=>r[t].push(e));return r}function Ea(e,t){let n=1+t(),r=t(),s=xa(t);return Sa(s.length,1+e,t).flatMap((e,t)=>{let[i,...o]=e;return Array(s[t]).fill().map((e,t)=>{let s=t*r;return[i+t*n,o.map(e=>e+s)]})})}function Aa(e,t){return Sa(1+t(),1+e,t).map(e=>[e[0],e.slice(1)])}function Na(e){return"{".concat(function(e){return e.toString(16).toUpperCase().padStart(2,"0")}(e),"}")}function Ta(e){let t=[];for(let n=0,r=e.length;n<r;){let r=e.codePointAt(n);n+=r<65536?1:2,t.push(r)}return t}function ka(e){let t=e.length;if(t<4096)return String.fromCodePoint(...e);let n=[];for(let r=0;r<t;)n.push(String.fromCodePoint(...e.slice(r,r+=4096)));return n.join("")}function Ca(e,t){let n=e.length,r=n-t.length;for(let s=0;0==r&&s<n;s++)r=e[s]-t[s];return r}const Ia=44032,_a=4352,Pa=4449,ja=4519,Da=28,Ma=588;function Ra(e){return e>>24&255}function Oa(e){return 16777215&e}let La,Fa,Ua,Ba;function Va(e){return e>=Ia&&e<55204}function za(e,t){if(e>=_a&&e<4371&&t>=Pa&&t<4470)return Ia+(e-_a)*Ma+(t-Pa)*Da;if(Va(e)&&t>ja&&t<4547&&(e-Ia)%Da==0)return e+(t-ja);{let n=Ba.get(e);return n&&(n=n.get(t),n)?n:-1}}function Ga(e){La||function(){let e=pa("AEUDTAHBCFQATQDRADAAcgAgADQAFAAsABQAHwAOACQADQARAAoAFwAHABIACAAPAAUACwAFAAwABAAQAAMABwAEAAoABQAIAAIACgABAAQAFAALAAIACwABAAIAAQAHAAMAAwAEAAsADAAMAAwACgANAA0AAwAKAAkABAAdAAYAZwDSAdsDJgC0CkMB8xhZAqfoC190UGcThgBurwf7PT09Pb09AjgJum8OjDllxHYUKXAPxzq6tABAxgK8ysUvWAgMPT09PT09PSs6LT2HcgWXWwFLoSMEEEl5RFVMKvO0XQ8ExDdJMnIgsj26PTQyy8FfEQ8AY8IPAGcEbwRwBHEEcgRzBHQEdQR2BHcEeAR6BHsEfAR+BIAEgfndBQoBYgULAWIFDAFiBNcE2ATZBRAFEQUvBdALFAsVDPcNBw13DYcOMA4xDjMB4BllHI0B2grbAMDpHLkQ7QHVAPRNQQFnGRUEg0yEB2uaJF8AJpIBpob5AERSMAKNoAXqaQLUBMCzEiACnwRZEkkVsS7tANAsBG0RuAQLEPABv9HICTUBXigPZwRBApMDOwAamhtaABqEAY8KvKx3LQ4ArAB8UhwEBAVSagD8AEFZADkBIadVj2UMUgx5Il4ANQC9AxIB1BlbEPMAs30CGxlXAhwZKQIECBc6EbsCoxngzv7UzRQA8M0BawL6ZwkN7wABAD33OQRcsgLJCjMCjqUChtw/km+NAsXPAoP2BT84PwURAK0RAvptb6cApQS/OMMey5HJS84UdxpxTPkCogVFITaTOwERAK5pAvkNBOVyA7q3BKlOJSALAgUIBRcEdASpBXqzABXFSWZOawLCOqw//AolCZdvv3dSBkEQGyelEPcMMwG1ATsN7UvYBPEGOwTJH30ZGQ/NlZwIpS3dDO0m4y6hgFoj9SqDBe1L9DzdC01RaA9ZC2UJ4zpjgU4DIQENIosK3Q05CG0Q8wrJaw3lEUUHOQPVSZoApQcBCxEdNRW1JhBirAsJOXcG+xr2C48mrxMpevwF0xohBk0BKRr/AM8u54WwWjFcHE9fBgMLJSPHFKhQIA0lQLd4SBobBxUlqQKRQ3BKh1E2HpMh9jw9DWYuE1F8B/U8BRlPC4E8nkarRQ4R0j6NPUgiSUwsBDV/LC8niwnPD4UMuXxyAVkJIQmxDHETMREXN8UIOQcZLZckJxUIIUaVYJoE958D8xPRAwsFPwlBBxMDtRwtEy4VKQUNgSTXAvM21S6zAo9WgAEXBcsPJR/fEFBH4A7pCJsCZQODJesALRUhABcimwhDYwBfj9hTBS7LCMdqbCN0A2cU52ERcweRDlcHpxwzFb8c4XDIXguGCCijrwlbAXUJmQFfBOMICTVbjKAgQWdTi1gYmyBhQT9d/AIxDGUVn0S9h3gCiw9rEhsBNQFzBzkNAQJ3Ee0RaxCVCOuGBDW1M/g6JQRPIYMgEQonA09szgsnJvkM+GkBoxJiAww0PXfuZ6tgtiQX/QcZMsVBYCHxC5JPzQycGsEYQlQuGeQHvwPzGvMn6kFXBf8DowMTOk0z7gS9C2kIiwk/AEkOoxcH1xhqCnGM0AExiwG3mQNXkYMCb48GNwcLAGcLhwV55QAdAqcIowAFAM8DVwA5Aq0HnQAZAIVBAT0DJy8BIeUCjwOTCDHLAZUvAfMpBBvDDBUA9zduSgLDsQKAamaiBd1YAo4CSTUBTSUEBU5HUQOvceEA2wBLBhPfRwEVq0rLGuNDAd9vKwDHAPsABTUHBUEBzQHzbQC3AV8LMQmis7UBTekpAIMAFWsB1wKJAN0ANQB/8QFTAE0FWfkF0wJPSQERMRgrV2EBuwMfATMBDQB5BsuNpckHHwRtB9MCEBsV4QLvLge1AQMi3xPNQsUCvd5VoWACZIECYkJbTa9bNyACofcCaJgCZgkCn4Q4GwsCZjsCZiYEbgR/A38TA36SOQY5dxc5gjojIwJsHQIyNjgKAm3HAm2u74ozZ0UrAWcA3gDhAEoFB5gMjQD+C8IADbUCdy8CdqI/AnlLQwJ4uh1c20WuRtcCfD8CesgCfQkCfPAFWQUgSABIfWMkAoFtAoAAAoAFAn+uSVhKWxUXSswC0QEC0MxLJwOITwOH5kTFkTIC8qFdAwMDrkvOTC0lA89NTE2vAos/AorYwRsHHUNnBbcCjjcCjlxAl4ECjtkCjlx4UbRTNQpS1FSFApP7ApMMAOkAHFUeVa9V0AYsGymVhjLheGZFOzkCl58C77JYIagAWSUClo8ClnycAKlZrFoJgU0AOwKWtQKWTlxEXNECmcsCmWRcyl0HGQKcmznCOp0CnBYCn5sCnriKAB0PMSoPAp3xAp6SALU9YTRh7wKe0wKgbgGpAp6fHwKeTqVjyGQnJSsCJ68CJn4CoPsCoEwCot0CocQCpi8Cpc4Cp/8AfQKn8mh8aLEAA0lqHGrRAqzjAqyuAq1nAq0CAlcdAlXcArHh1wMfTmyXArK9DQKy6Bds4G1jbUhfAyXNArZcOz9ukAMpRQK4XgK5RxUCuSp3cDZw4QK9GQK72nCWAzIRAr6IcgIDM3ECvhpzInNPAsPLAsMEc4J0SzVFdOADPKcDPJoDPb8CxXwCxkcCxhCJAshpUQLIRALJTwLJLgJknQLd0nh5YXiueSVL0AMYo2cCAmH0GfOVJHsLXpJeuxECz2sCz2wvS1PS8xOfAMatAs9zASnqA04SfksFAtwnAtuKAtJPA1JcA1NfAQEDVYyAiT8AyxbtYEWCHILTgs6DjQLaxwLZ3oQQhEmnPAOGpQAvA2QOhnFZ+QBVAt9lAt64c3cC4i/tFAHzMCcB9JsB8tKHAuvzAulweQLq+QLq5AD5RwG5Au6JAuuclqqXAwLuPwOF4Jh5cOBxoQLzAwBpA44WmZMC9xMDkW4DkocC95gC+dkC+GaaHJqruzebHgOdgwL++gEbADmfHJ+zAwWNA6ZqA6bZANHFAwZqoYiiBQkDDEkCwAA/AwDhQRdTARHzA2sHl2cFAJMtK7evvdsBiZkUfxEEOQH7KQUhDp0JnwCS/SlXxQL3AZ0AtwW5AG8LbUEuFCaNLgFDAYD8AbUmAHUDDgRtACwCFgyhAAAKAj0CagPdA34EkQEgRQUhfAoABQBEABMANhICdwEABdUDa+8KxQIA9wqfJ7+xt+UBkSFBQgHpFH8RNMCJAAQAGwBaAkUChIsABjpTOpSNbQC4Oo860ACNOME63AClAOgAywE6gTo7Ofw5+Tt2iTpbO56JOm85GAFWATMBbAUvNV01njWtNWY1dTW2NcU1gjWRNdI14TWeNa017jX9NbI1wTYCNhE1xjXVNhY2JzXeNe02LjY9Ni41LSE2OjY9Njw2yTcIBJA8VzY4Nt03IDcPNsogN4k3MAoEsDxnNiQ3GTdsOo03IULUQwdC4EMLHA8PCZsobShRVQYA6X8A6bABFCnXAukBowC9BbcAbwNzBL8MDAMMAQgDAAkKCwsLCQoGBAVVBI/DvwDz9b29kaUCb0QtsRTNLt4eGBcSHAMZFhYZEhYEARAEBUEcQRxBHEEcQRxBHEEaQRxBHEFCSTxBPElISUhBNkM2QTYbNklISVmBVIgBFLWZAu0BhQCjBcEAbykBvwGJAaQcEZ0ePCklMAAhMvAIMAL54gC7Bm8EescjzQMpARQpKgDUABavAj626xQAJP0A3etzuf4NNRA7efy2Z9NQrCnC0OSyANz5BBIbJ5IFDR6miIavYS6tprjjmuKebxm5C74Q225X1pkaYYPb6f1DK4k3xMEBb9S2WMjEibTNWhsRJIA+vwNVEiXTE5iXs/wezV66oFLfp9NZGYW+Gk19J2+bCT6Ye2w6LDYdgzKMUabk595eLBCXANz9HUpWbATq9vqXVx9XDg+Pc9Xp4+bsS005SVM/BJBM4687WUuf+Uj9dEi8aDNaPxtpbDxcG1THTImUMZq4UCaaNYpsVqraNyKLJXDYsFZ/5jl7bLRtO88t7P3xZaAxhb5OdPMXqsSkp1WCieG8jXm1U99+blvLlXzPCS+M93VnJCiK+09LfaSaBAVBomyDgJua8dfUzR7ga34IvR2Nvj+A9heJ6lsl1KG4NkI1032Cnff1m1wof2B9oHJK4bi6JkEdSqeNeiuo6QoZZincoc73/TH9SXF8sCE7XyuYyW8WSgbGFCjPV0ihLKhdPs08Tx82fYAkLLc4I2wdl4apY7GU5lHRFzRWJep7Ww3wbeA3qmd59/86P4xuNaqDpygXt6M85glSBHOCGgJDnt+pN9bK7HApMguX6+06RZNjzVmcZJ+wcUrJ9//bpRNxNuKpNl9uFds+S9tdx7LaM5ZkIrPj6nIU9mnbFtVbs9s/uLgl8MVczAwet+iOEzzBlYW7RCMgE6gyNLeq6+1tIx4dpgZnd0DksJS5f+JNDpwwcPNXaaVspq1fbQajOrJgK0ofKtJ1Ne90L6VO4MOl5S886p7u6xo7OLjG8TGL+HU1JXGJgppg4nNbNJ5nlzSpuPYy21JUEcUA94PoFiZfjZue+QnyQ80ekOuZVkxx4g+cvhJfHgNl4hy1/a6+RKcKlar/J29y//EztlbVPHVUeQ1zX86eQVAjR/M3dA9w4W8LfaXp4EgM85wOWasli837PzVMOnsLzR+k3o75/lRPAJSE1xAKQzEi5v10ke+VBvRt1cwQRMd+U5mLCTGVd6XiZtgBG5cDi0w22GKcVNvHiu5LQbZEDVtz0onn7k5+heuKXVsZtSzilkLRAUmjMXEMB3J9YC50XBxPiz53SC+EhnPl9WsKCv92SM/OFFIMJZYfl0WW8tIO3UxYcwdMAj7FSmgrsZ2aAZO03BOhP1bNNZItyXYQFTpC3SG1VuPDqH9GkiCDmE+JwxyIVSO5siDErAOpEXFgjy6PQtOVDj+s6e1r8heWVvmZnTciuf4EiNZzCAd7SOMhXERIOlsHIMG399i9aLTy3m2hRLZjJVDNLS53iGIK11dPqQt0zBDyg6qc7YqkDm2M5Ve6dCWCaCbTXX2rToaIgz6+zh4lYUi/+6nqcFMAkQJKHYLK0wYk5N9szV6xihDbDDFr45lN1K4aCXBq/FitPSud9gLt5ZVn+ZqGX7cwm2z5EGMgfFpIFyhGGuDPmso6TItTMwny+7uPnLCf4W6goFQFV0oQSsc9VfMmVLcLr6ZetDZbaSFTLqnSO/bIPjA3/zAUoqgGFAEQS4IhuMzEp2I3jJzbzkk/IEmyax+rhZTwd6f+CGtwPixu8IvzACquPWPREu9ZvGkUzpRwvRRuaNN6cr0W1wWits9ICdYJ7ltbgMiSL3sTPeufgNcVqMVWFkCPDH4jG2jA0XcVgQj62Cb29v9f/z/+2KbYvIv/zzjpQAPkliaVDzNrW57TZ/ZOyZD0nlfMmAIBIAGAI0D3k/mdN4xr9v85ZbZbbqfH2jGd5hUqNZWwl5SPfoGmfElmazUIeNL1j/mkF7VNAzTq4jNt8JoQ11NQOcmhprXoxSxfRGJ9LDEOAQ+dmxAQH90iti9e2u/MoeuaGcDTHoC+xsmEeWmxEKefQuIzHbpw5Tc5cEocboAD09oipWQhtTO1wivf/O+DRe2rpl/E9wlrzBorjJsOeG1B/XPW4EaJEFdNlECEZga5ZoGRHXgYouGRuVkm8tDESiEyFNo+3s5M5puSdTyUL2llnINVHEt91XUNW4ewdMgJ4boJfEyt/iY5WXqbA+A2Fkt5Z0lutiWhe9nZIyIUjyXDC3UsaG1t+eNx6z4W/OYoTB7A6x+dNSTOi9AInctbESqm5gvOLww7OWXPrmHwVZasrl4eD113pm+JtT7JVOvnCXqdzzdTRHgJ0PiGTFYW5Gvt9R9LD6Lzfs0v/TZZHSmyVNq7viIHE6DBK7Qp07Iz55EM8SYtQvZf/obBniTWi5C2/ovHfw4VndkE5XYdjOhCMRjDeOEfXeN/CwfGduiUIfsoFeUxXeQXba7c7972XNv8w+dTjjUM0QeNAReW+J014dKAD/McQYXT7c0GQPIkn3Ll6R7gGjuiQoZD0TEeEqQpKoZ15g/0OPQI17QiSv9AUROa/V/TQN3dvLArec3RrsYlvBm1b8LWzltdugsC50lNKYLEp2a+ZZYqPejULRlOJh5zj/LVMyTDvwKhMxxwuDkxJ1QpoNI0OTWLom4Z71SNzI9TV1iXJrIu9Wcnd+MCaAw8o1jSXd94YU/1gnkrC9BUEOtQvEIQ7g0i6h+KL2JKk8Ydl7HruvgWMSAmNe+LshGhV4qnWHhO9/RIPQzY1tHRj2VqOyNsDpK0cww+56AdDC4gsWwY0XxoucIWIqs/GcwnWqlaT0KPr8mbK5U94/301i1WLt4YINTVvCFBrFZbIbY8eycOdeJ2teD5IfPLCRg7jjcFTwlMFNl9zdh/o3E/hHPwj7BWg0MU09pPrBLbrCgm54A6H+I6v27+jL5gkjWg/iYdks9jbfVP5y/n0dlgWEMlKasl7JvFZd56LfybW1eeaVO0gxTfXZwD8G4SI116yx7UKVRgui6Ya1YpixqXeNLc8IxtAwCU5IhwQgn+NqHnRaDv61CxKhOq4pOX7M6pkA+Pmpd4j1vn6ACUALoLLc4vpXci8VidLxzm7qFBe7s+quuJs6ETYmnpgS3LwSZxPIltgBDXz8M1k/W2ySNv2f9/NPhxLGK2D21dkHeSGmenRT3Yqcdl0m/h3OYr8V+lXNYGf8aCCpd4bWjE4QIPj7vUKN4Nrfs7ML6Y2OyS830JCnofg/k7lpFpt4SqZc5HGg1HCOrHvOdC8bP6FGDbE/VV0mX4IakzbdS/op+Kt3G24/8QbBV7y86sGSQ/vZzU8FXs7u6jIvwchsEP2BpIhW3G8uWNwa3HmjfH/ZjhhCWvluAcF+nMf14ClKg5hGgtPLJ98ueNAkc5Hs2WZlk2QHvfreCK1CCGO6nMZVSb99VM/ajr8WHTte9JSmkXq/i/U943HEbdzW6Re/S88dKgg8pGOLlAeNiqrcLkUR3/aClFpMXcOUP3rmETcWSfMXZE3TUOi8i+fqRnTYLflVx/Vb/6GJ7eIRZUA6k3RYR3iFSK9c4iDdNwJuZL2FKz/IK5VimcNWEqdXjSoxSgmF0UPlDoUlNrPcM7ftmA8Y9gKiqKEHuWN+AZRIwtVSxye2Kf8rM3lhJ5XcBXU9n4v0Oy1RU2M+4qM8AQPVwse8ErNSob5oFPWxuqZnVzo1qB/IBxkM3EVUKFUUlO3e51259GgNcJbCmlvrdjtoTW7rChm1wyCKzpCTwozUUEOIcWLneRLgMXh+SjGSFkAllzbGS5HK7LlfCMRNRDSvbQPjcXaenNYxCvu2Qyznz6StuxVj66SgI0T8B6/sfHAJYZaZ78thjOSIFumNWLQbeZixDCCC+v0YBtkxiBB3jefHqZ/dFHU+crbj6OvS1x/JDD7vlm7zOVPwpUC01nhxZuY/63E7g");La=new Map(wa(e).flatMap((e,t)=>e.map(e=>[e,t+1<<24]))),Fa=new Set(va(e)),Ua=new Map,Ba=new Map;for(let[t,n]of ba(e)){if(!Fa.has(t)&&2==n.length){let[e,r]=n,s=Ba.get(e);s||(s=new Map,Ba.set(e,s)),s.set(r,t)}Ua.set(t,n.reverse())}}();let t=[],n=[],r=!1;function s(e){let n=La.get(e);n&&(r=!0,e|=n),t.push(e)}for(let i of e)for(;;){if(i<128)t.push(i);else if(Va(i)){let e=i-Ia,t=e%Ma/Da|0,n=e%Da;s(_a+(e/Ma|0)),s(Pa+t),n>0&&s(ja+n)}else{let e=Ua.get(i);e?n.push(...e):s(i)}if(!n.length)break;i=n.pop()}if(r&&t.length>1){let e=Ra(t[0]);for(let n=1;n<t.length;n++){let r=Ra(t[n]);if(0==r||e<=r){e=r;continue}let s=n-1;for(;;){let n=t[s+1];if(t[s+1]=t[s],t[s]=n,!s)break;if(e=Ra(t[--s]),e<=r)break}e=Ra(t[n])}}return t}function Ha(e){return Ga(e).map(Oa)}function qa(e){return function(e){let t=[],n=[],r=-1,s=0;for(let i of e){let e=Ra(i),o=Oa(i);if(-1==r)0==e?r=o:t.push(o);else if(s>0&&s>=e)0==e?(t.push(r,...n),n.length=0,r=o):n.push(o),s=e;else{let i=za(r,o);i>=0?r=i:0==s&&0==e?(t.push(r),r=o):(n.push(o),s=e)}}return r>=0&&t.push(r,...n),t}(Ga(e))}const Wa=".",Qa=e=>Array.from(e);function Ka(e,t){return e.P.has(t)||e.Q.has(t)}class Ja extends Array{get is_emoji(){return!0}}let Ya,Za,Xa,$a,ec,tc,nc,rc,sc,ic,oc,ac;function cc(){if(Ya)return;let e=pa("AEEUdwmgDS8BxQKKAP4BOgDjATAAngDUAIMAoABoAOAAagCOAEQAhABMAHIAOwA9ACsANgAmAGIAHgAuACgAJwAXAC0AGgAjAB8ALwAUACkAEgAeAAkAGwARABkAFgA5ACgALQArADcAFQApABAAHgAiABAAGgAeABMAGAUhBe8BFxREN8sF2wC5AK5HAW8ArQkDzQCuhzc3NzcBP68NEfMABQdHBuw5BV8FYAA9MzkI9r4ZBg7QyQAWA9CeOwLNCjcCjqkChuA/lm+RAsXTAoP6ASfnEQDytQFJAjWVCkeXAOsA6godAB/cwdAUE0WlBCN/AQUCQRjFD/MRBjHxDQSJbw0jBzUAswBxme+tnIcAYwabAysG8QAjAEMMmxcDqgPKQyDXCMMxA7kUQwD3NXOrAKmFIAAfBC0D3x4BJQDBGdUFAhEgVD8JnwmQJiNWYUzrg0oAGwAUAB0AFnNcACkAFgBP9h3gPfsDOWDKneY2ChglX1UDYD30ABsAFAAdABZzIGRAnwDD8wAjAEEMzRbDqgMB2sAFYwXqAtCnAsS4AwpUJKRtFHsadUz9AMMVbwLpABM1NJEX0ZkCgYMBEyMAxRVvAukAEzUBUFAtmUwSAy4DBTER33EftQHfSwB5MxJ/AjkWKQLzL8E/cwBB6QH9LQDPDtO9ASNriQC5DQANAwCK21EFI91zHwCoL9kBqQcHBwcHKzUDowBvAQohPvU3fAQgHwCyAc8CKQMA5zMSezr7ULgFmDp/LzVQBgEGAi8FYQVgt8AFcTtlQhpCWEmfe5tmZ6IAExsDzQ8t+X8rBKtTAltbAn0jsy8Bl6utPWMDTR8Ei2kRANkDBrNHNysDBzECQWUAcwFpJ3kAiyUhAJ0BUb8AL3EfAbfNAz81KUsFWwF3YQZtAm0A+VEfAzEJDQBRSQCzAQBlAHsAM70GD/v3IZWHBwARKQAxALsjTwHZAeMPEzmXgIHwABIAGQA8AEUAQDt3gdvIEGcQZAkGTRFMdEIVEwK0D64L7REdDNkq09PgADSxB/MDWwfzA1sDWwfzB/MDWwfzA1sDWwNbA1scEvAi28gQZw9QBHUFlgWTBN4IiyZREYkHMAjaVBV0JhxPA00BBCMtSSQ7mzMTJUpMFE0LCAQ2SmyvfUADTzGzVP2QqgPTMlc5dAkGHnkSqAAyD3skNb1OhnpPcagKU0+2tYdJak5vAsY6sEAACikJm2/Dd1YGRRAfJ6kQ+ww3AbkBPw3xS9wE9QY/BM0fgRkdD9GVoAipLeEM8SbnLqWAXiP5KocF8Uv4POELUVFsD10LaQnnOmeBUgMlAREijwrhDT0IcRD3Cs1vDekRSQc9A9lJngCpBwULFR05FbkmFGKwCw05ewb/GvoLkyazEy17AAXXGiUGUQEtGwMA0y7rhbRaNVwgT2MGBwspI8sUrFAkDSlAu3hMGh8HGSWtApVDdEqLUToelyH6PEENai4XUYAH+TwJGVMLhTyiRq9FEhHWPpE9TCJNTDAEOYMsMyePCdMPiQy9fHYBXQklCbUMdRM1ERs3yQg9Bx0xlygnGQglRplgngT7owP3E9UDDwVDCUUHFwO5HDETMhUtBRGBKNsC9zbZLrcCk1aEARsFzw8pH+MQVEfkDu0InwJpA4cl7wAxFSUAGyKfCEdnAGOP3FMJLs8Iy2pwI3gDaxTrZRF3B5UOWwerHDcVwxzlcMxeD4YMKKezCV8BeQmdAWME5wgNNV+MpCBFZ1eLXBifIGVBQ14AAjUMaRWjRMGHfAKPD28SHwE5AXcHPQ0FAnsR8RFvEJkI74YINbkz/DopBFMhhyAVCisDU2zSCysm/Qz8bQGnEmYDEDRBd/Jnr2C6KBgBBx0yyUFkIfULlk/RDKAaxRhGVDIZ6AfDA/ca9yfuQVsGAwOnBxc6UTPyBMELbQiPCUMATQ6nGwfbGG4KdYzUATWPAbudA1uVhwJzkwY7Bw8Aaw+LBX3pACECqwinAAkA0wNbAD0CsQehAB0AiUUBQQMrMwEl6QKTA5cINc8BmTMB9y0EH8cMGQD7O25OAsO1AoBuZqYF4VwCkgJNOQFRKQQJUktVA7N15QDfAE8GF+NLARmvTs8e50cB43MvAMsA/wAJOQcJRQHRAfdxALsBYws1Caa3uQFR7S0AhwAZbwHbAo0A4QA5AIP1AVcAUQVd/QXXAlNNARU1HC9bZQG/AyMBNwERAH0Gz5GpzQsjBHEH1wIQHxXlAu8yB7kFAyLjE9FCyQK94lkAMhoKPAqrCqpgX2Q3CjV2PVQAEh+sPss/UgVVO1c7XDtXO1w7VztcO1c7XDtXO1wDm8Pmw+YKcF9JYe8Mqg3YRMw6TRPfYFVgNhPMLbsUxRXSJVoZQRrAJwkl6FUNDwgt12Y0CDA0eRfAAEMpbINFY4oeNApPHOtTlVT8LR8AtUumM7MNsBsZREQFS3XxYi4WEgomAmSFAmJGX1GzAV83JAKh+wJonAJmDQKfiDgfDwJmPwJmKgRyBIMDfxcDfpY5Cjl7GzmGOicnAmwhAjI6OA4CbcsCbbLzjgM3a0kvAWsA4gDlAE4JB5wMkQECD8YAEbkCdzMCdqZDAnlPRwJ4viFg30WyRvcCfEMCeswCfQ0CfPRIBEiBZygALxlJXEpfGRtK0ALRBQLQ0EsrA4hTA4fqRMmRNgLypV0HAwOyS9JMMSkH001QTbMCi0MCitzFHwshR2sJuwKOOwKOYESbhQKO3QKOYHxRuFM5AQ5S2FSJApP/ApMQAO0AIFUiVbNV1AosHymZijLleGpFPz0Cl6MC77ZYJawAXSkClpMCloCgAK1ZsFoNhVEAPwKWuQKWUlxIXNUCmc8CmWhczl0LHQKcnznGOqECnBoCn58CnryOACETNS4TAp31Ap6WALlBYThh8wKe1wKgcgGtAp6jIwKeUqljzGQrKS8CJ7MCJoICoP8CoFDbAqYzAqXSAqgDAIECp/ZogGi1AAdNaiBq1QKs5wKssgKtawKtBgJXIQJV4AKx5dsDH1JsmwKywRECsuwbbORtZ21MYwMl0QK2YD9DbpQDKUkCuGICuUsZArkue3A6cOUCvR0DLbYDMhUCvoxyBgMzdQK+HnMmc1MCw88CwwhzhnRPOUl05AM8qwEDPJ4DPcMCxYACxksCxhSNAshtVQLISALJUwLJMgJkoQLd1nh9ZXiyeSlL1AMYp2cGAmH4GfeVKHsPXpZevxUCz28Cz3AzT1fW9xejAMqxAs93AS3uA04Wfk8JAtwrAtuOAtJTA1JgA1NjAQUDVZCAjUMEzxrxZEl5A4LSg5EC2ssC2eKEFIRNp0ADhqkAMwNkEoZ1Xf0AWQLfaQLevHd7AuIz7RgB8zQrAfSfAfLWiwLr9wLpdH0DAur9AuroAP1LAb0C7o0C66CWrpcHAu5DA4XkmH1w5HGlAvMHAG0DjhqZlwL3FwORcgOSiwL3nAL53QL4apogmq+/O5siA52HAv7+AR8APZ8gAZ+3AwWRA6ZuA6bdANXJAwZuoYyiCQ0DDE0BEwEjB3EGZb1rCQC/BG/DFY8etxEAG3k9ACcDNxJRA42DAWcrJQCM8wAlAOanC6OVCLsGI6fJBgCvBRnDBvElRUYFFoAFcD9GSDNCKUK8X3kZX8QAls0FOgCQVCGbwTsuYDoZutcONxjOGJHJ/gVfBWAFXwVgBWsFYAVfBWAFXwVgBV8FYAVfBWBOHQjfjW8KCgoKbF7xMwTRA7kGN8PDAMMEr8MA70gxFroFTj5xPnhCR0K+X30/X/AAWBkzswCNBsxzzASm70aCRS4rDDMeLz49fnXfcsH5GcoscQFz13Y4HwVnBXLJycnACNdRYwgICAqEXoWTxgA7P4kACxbZBu21Kw0AjMsTAwkVAOVtJUUsJ1JCuULESUArXy9gPi9AKwnJRQYKTD9LPoA+iT54PnkCkULEUUpDX9NWV3JVEjQAc1w3A3IBE3YnX+g7QiMJb6MKaiszRCUuQrNCxDPMCcwEX9EWJzYREBEEBwIHKn6l33JCNVIfybPJtAltydPUCmhBZw/tEKsZAJOVJU1CLRuxbUHOQAo7P0s+eEJHHA8SJVRPdGM0NVrpvBoKhfUlM0JHHGUQUhEWO1xLSj8MO0ucNAqJIzVCRxv9EFsqKyA4OQgNj2nwZgp5ZNFgE2A1K3YHS2AhQQojJmC7DgpzGG1WYFUZCQYHZO9gHWCdYIVgu2BTYJlwFh8GvRbcXbG8YgtDHrMBwzPVyQonHQgkCyYBgQJ0Ajc4nVqIAwGSCsBPIgDsK3SWEtIVBa5N8gGjAo+kVwVIZwD/AEUSCDweX4ITrRQsJ8K3TwBXFDwEAB0TvzVcAtoTS20RIwDgVgZ9BBImYgA5AL4Coi8LFnezOkCnIQFjAY4KBAPh9RcGsgZSBsEAJctdsWIRu2kTkQstRw7DAcMBKgpPBGIGMDAwKCYnKTQaLg4AKRSVAFwCdl+YUZ0JdicFD3lPAdt1F9ZZKCGxuE3yBxkFVGcA/wBFEgiCBwAOLHQSjxOtQDg1z7deFRMAZ8QTAGtKb1ApIiPHADkAvgKiLy1DFtYCmBiDAlDDWNB0eo7fpaMO/aEVRRv0ATEQZBIODyMEAc8JQhCbDRgzFD4TAEMAu9YBCgCsAOkAm5I3ABwAYxvONnR+MhXJAxgKQyxL2+kkJhMbhQKDBMkSsvF0AD9BNQ6uQC7WqSQHwxEAEEIu1hkhAH2z4iQPwyJPHNWpdyYBRSpnJALzoBAEVPPsH20MxA0CCEQKRgAFyAtFAlMNwwjEDUQJRArELtapMg7DDZgJIw+TGukEIwvDFkMAqAtDEMMMBhioe+QAO3MMRAACrgnEBSPY9Q0FDnbSBoMAB8MSYxkSxAEJAPIJAAB8FWMOFtMc/HcXwxhDAC7DAvOowwAewwJdKDKHAAHDAALrFUQVwwAbwyvzpWMWv8wA/ABpAy++bcYDUKPD0KhDCwKmJ1MAAmMA5+UZwxAagwipBRL/eADfw6fDGOMCGsOjk3l6BwOpo4sAEsMOGxMAA5sAbcMOAAvDp0MJGkMDwgipnNIPAwfIqUMGAOGDAAPzABXDAAcDAAnDAGmTABrDAA7DChjDjnEWAwABYwAOcwAuUyYABsMAF8MIKQANUgC6wy4AA8MADqMq8wCyYgAcIwAB8wqpAAXOCx0V4wAHowBCwwEKAGnDAAuDAB3DAAjDCakABdIAbqcZ3QCZCCkABdIAAAFDAAfjAB2jCCkABqIACYMAGzMAbSMA5sOIAAhjAAhDABTDBAkpAAbSAOOTAAlDC6kOzPtnAAdDAG6kQFAATwAKwwwAA0MACbUDPwAHIwAZgwACE6cDAAojAApDAAoDp/MGwwAJIwADEwAQQwgAFEMAEXMAD5MADfMADcMAGRMOFiMAFUMAbqMWuwHDAMIAE0MLAGkzEgDhUwACQwAEWgAXgwUjAAbYABjDBSYBgzBaAEFNALcQBxUMegAwMngBrA0IZgJ0KxQHBREPd1N0ZzKRJwaIHAZqNT4DqQq8BwngAB4DAwt2AX56T1ocKQNXAh1GATQGC3tOxYNagkgAMQA5CQADAQEAWxLjAIOYNAEzAH7tFRk6TglSAF8NAAlYAQ+S1ACAQwQorQBiAN4dAJ1wPyeTANVzuQDX3AIeEMp9eyMgXiUAEdkBkJizKltbVVAaRMqRAAEAhyQ/SDEz6BmfVwB6ATEsOClKIRcDOF0E/832AFNt5AByAnkCRxGCOs94NjXdAwINGBonDBwPALW2AwICAgAAAAAAAAYDBQMDARrUAwAtAAAAAgEGBgYGBgYFBQUFBQUEBQYHCAkEBQUFBQQAAAICAAAAIgCNAJAAlT0A6gC7ANwApEQAwgCyAK0AqADuAKYA2gCjAOcBCAEDAMcAgQBiANIA1AEDAN4A8gCQAKkBMQDqAN8A3AsBCQ8yO9ra2tq8xuLT1tRJOB0BUgFcNU0BWgFpAWgBWwFMUUlLbhMBUxsNEAs6PhMOACcUKy0vMj5AQENDQ0RFFEYGJFdXV1dZWVhZL1pbXVxcI2NnZ2ZoZypsbnZ1eHh4eHh4enp6enp6enp6enp8fH18e2IARPIASQCaAHgAMgBm+ACOAFcAVwA3AnbvAIsABfj4AGQAk/IAnwBPAGIAZP//sACFAIUAaQBWALEAJAC2AIMCQAJDAPwA5wD+AP4A6AD/AOkA6QDoAOYALwJ7AVEBQAE+AVQBPgE+AT4BOQE4ATgBOAEcAVgXADEQCAEAUx8SHgsdHhYAjgCWAKYAUQBqIAIxAHYAbwCXAxUDJzIDIUlGTzEAkQJPAMcCVwKkAMAClgKWApYClgKWApYCiwKWApYClgKWApYClgKVApUCmAKgApcClgKWApQClAKUApQCkgKVAnUB1AKXAp8ClgKWApUeAIETBQD+DQOfAmECOh8BVBg9AuIZEjMbAU4/G1WZAXusRAFpYQEFA0FPAQYAmTEeIJdyADFoAHEANgCRA5zMk/C2jGINwjMWygIZCaXdfDILBCs5dAE7YnQBugDlhoiHhoiGiYqKhouOjIaNkI6Ij4qQipGGkoaThpSSlYaWhpeKmIaZhpqGm4aci52QnoqfhuIC4XTpAt90AIp0LHSoAIsAdHQEQwRABEIERQRDBEkERgRBBEcESQRIBEQERgRJAJ5udACrA490ALxuAQ10ANFZdHQA13QCFHQA/mJ0AP4BIQD+APwA/AD9APwDhGZ03ASMK23HAP4A/AD8AP0A/CR0dACRYnQA/gCRASEA/gCRAvQA/gCRA4RmdNwEjCttxyR0AP9idAEhAP4A/gD8APwA/QD8AP8A/AD8AP0A/AOEZnTcBIwrbcckdHQAkWJ0ASEA/gCRAP4AkQL0AP4AkQOEZnTcBIwrbcckdAJLAT50AlIBQXQCU8l0dAJfdHQDpgL0A6YDpgOnA6cDpwOnA4RmdNwEjCttxyR0dACRYnQBIQOmAJEDpgCRAvQDpgCRA4RmdNwEjCttxyR0BDh0AJEEOQCRDpU5dSgCADR03gV2CwArdAEFAM5iCnR0AF1iAAYcOgp0dACRCnQAXAEIwWZ0CnRmdHQAkWZ0CnRmdEXgAFF03gp0dEY0tlT2u3SOAQTwscwhjZZKrhYcBSfFp9XNbKiVDOD2b+cpe4/Z17mQnbtzzhaeQtE2GGj0IDNTjRUSyTxxw/RPHW/+vS7d1NfRt9z9QPZg4X7QFfhCnkvgNPIItOsC2eV6hPannZNHlZ9xrwZXIMOlu3jSoQSq78WEjwLjw1ELSlF1aBvfzwk5ZX7AUvQzjPQKbDuQ+sm4wNOp4A6AdVuRS0t1y/DZpg4R6m7FNjM9HgvW7Bi88zaMjOo6lM8wtBBdj8LP4ylv3zCXPhebMKJc066o9sF71oFW/8JXu86HJbwDID5lzw5GWLR/LhT0Qqnp2JQxNZNfcbLIzPy+YypqRm/lBmGmex+82+PisxUumSeJkALIT6rJezxMH+CTJmQtt5uwTVbL3ptmjDUQzlSIvWi8Tl7ng1NpuRn1Ng4n14Qc+3Iil7OwkvNWogLSPkn3pihIFytyIGmMhOe3n1tWsuMy9BdKyqF4Z3v2SgggTL9KVvMXPnCbRe+oOuFFP3HejBG/w9gvmfNYvg6JuWia2lcSSN1uIjBktzoIazOHPJZ7kKHPz8mRWVdW3lA8WGF9dQF6Bm673boov3BUWDU2JNcahR23GtfHKLOz/viZ+rYnZFaIznXO67CYEJ1fXuTRpZhYZkKe54xeoagkNGLs+NTZHE0rX45/XvQ2RGADX6vcAvdxIUBV27wxGm2zjZo4X3ILgAlrOFheuZ6wtsvaIj4yLY7qqawlliaIcrz2G+c3vscAnCkCuMzMmZvMfu9lLwTvfX+3cVSyPdN9ZwgDZhfjRgNJcLiJ67b9xx8JHswprbiE3v9UphotAPIgnXVIN5KmMc0piXhc6cChPnN+MRhG9adtdttQTTwSIpl8I4/j//d3sz1326qTBTpPRM/Hgh3kzqEXs8ZAk4ErQhNO8hzrQ0DLkWMA/N+91tn2MdOJnWC2FCZehkQrwzwbKOjhvZsbM95QoeL9skYyMf4srVPVJSgg7pOLUtr/n9eT99oe9nLtFRpjA9okV2Kj8h9k5HaC0oivRD8VyXkJ81tcd4fHNXPCfloIQasxsuO18/46dR2jgul/UIet2G0kRvnyONMKhHs6J26FEoqSqd+rfYjeEGwHWVDpX1fh1jBBcKGMqRepju9Y00mDVHC+Xdij/j44rKfvfjGinNs1jO/0F3jB83XCDINN/HB84axlP+3E/klktRo+vl3U/aiyMJbIodE1XSsDn6UAzIoMtUObY2+k/4gY/l+AkZJ5Sj2vQrkyLm3FoxjhDX+31UXBFf9XrAH31fFqoBmDEZvhvvpnZ87N+oZEu7U9O/nnk+QWj3x8uyoRbEnf+O5UMr9i0nHP38IF5AvzrBW8YWBUR0mIAzIvndQq9N3v/Jto3aPjPXUPl8ASdPPyAp7jENf8bk7VMM9ol9XGmlBmeDMuGqt+WzuL6CXAxXjIhCPM5vACchgMJ/8XBGLO/D1isVvGhwwHHr1DLaI5mn2Jr/b1pUD90uciDaS8cXNDzCWvNmT/PhQe5e8nTnnnkt8Ds/SIjibcum/fqDhKopxAY8AkSrPn+IGDEKOO+U3XOP6djFs2H5N9+orhOahiQk5KnEUWa+CzkVzhp8bMHRbg81qhjjXuIKbHjSLSIBKWqockGtKinY+z4/RdBUF6pcc3JmnlxVcNgrI4SEzKUZSwcD2QCyxzKve+gAmg6ZuSRkpPFa6mfThu7LJNu3H5K42uCpNvPAsoedolKV/LHe/eJ+BbaG5MG0NaSGVPRUmNFMFFSSpXEcXwbVh7UETOZZtoVNRGOIbbkig3McEtR68cG0RZAoJevWYo7Dg/lZ1CQzblWeUvVHmr8fY4Nqd9JJiH/zEX24mJviH60fAyFr0A3c4bC1j3yZU60VgJxXn8JgJXLUIsiBnmKmMYz+7yBQFBvqb2eYnuW59joZBf56/wXvWIR4R8wTmV80i1mZy+S4+BUES+hzjk0uXpC///z/IlqHZ1monzlXp8aCfhGKMti73FI1KbL1q6IKO4fuBuZ59gagjn5xU79muMpHXg6S+e+gDM/U9BKLHbl9l6o8czQKl4RUkJJiqftQG2i3BMg/TQlUYFkJDYBOOvAugYuzYSDnZbDDd/aSd9x0Oe6F+bJcHfl9+gp6L5/TgA+BdFFovbfCrQ40s5vMPw8866pNX8zyFGeFWdxIpPVp9Rg1UPOVFbFZrvaFq/YAzHQgqMWpahMYfqHpmwXfHL1/kpYmGuHFwT55mQu0dylfNuq2Oq0hTMCPwqfxnuBIPLXfci4Y1ANy+1CUipQxld/izVh16WyG2Q0CQQ9NqtAnx1HCHwDj7sYxOSB0wopZSnOzxQOcExmxrVTF2BkOthVpGfuhaGECfCJpJKpjnihY+xOT2QJxN61+9K6QSqtv2Shr82I3jgJrqBg0wELFZPjvHpvzTtaJnLK6Vb97Yn933koO/saN7fsjwNKzp4l2lJVx2orjCGzC/4ZL4zCver6aQYtC5sdoychuFE6ufOiog+VWi5UDkbmvmtah/3aArEBIi39s5ILUnlFLgilcGuz9CQshEY7fw2ouoILAYPVT/gyAIq3TFAIwVsl+ktkRz/qGfnCDGrm5gsl/l9QdvCWGsjPz3dU7XuqKfdUrr/6XIgjp4rey6AJBmCmUJMjITHVdFb5m1p+dLMCL8t55zD42cmftmLEJC0Da04YiRCVUBLLa8D071/N5UBNBXDh0LFsmhV/5B5ExOB4j3WVG/S3lfK5o+V6ELHvy6RR9n4ac+VsK4VE4yphPvV+kG9FegTBH4ZRXL2HytUHCduJazB/KykjfetYxOXTLws267aGOd+I+JhKP//+VnXmS90OD/jvLcVu0asyqcuYN1mSb6XTlCkqv1vigZPIYwNF/zpWcT1GR/6aEIRjkh0yhg4LXJfaGobYJTY4JI58KiAKgmmgAKWdl5nYCeLqavRJGQNuYuZtZFGx+IkI4w4NS2xwbetNMunOjBu/hmKCI/w7tfiiyUd//4rbTeWt4izBY8YvGIN6vyKYmP/8X8wHKCeN+WRcKM70+tXKNGyevU9H2Dg5BsljnTf8YbsJ1TmMs74Ce2XlHisleguhyeg44rQOHZuw/6HTkhnnurK2d62q6yS7210SsAIaR+jXMQA+svkrLpsUY+F30Uw89uOdGAR6vo4FIME0EfVVeHTu6eKicfhSqOeXJhbftcd08sWEnNUL1C9fnprTgd83IMut8onVUF0hvqzZfHduPjbjwEXIcoYmy+P6tcJZHmeOv6VrvEdkHDJecjHuHeWANe79VG662qTjA/HCvumVv3qL+LrOcpqGps2ZGwQdFJ7PU4iuyRlBrwfO+xnPyr47s2cXVbWzAyznDiBGjCM3ksxjjqM62GE9C8f5U38kB3VjtabKp/nRdvMESPGDG90bWRLAt1Qk5DyLuazRR1YzdC1c+hZXvAWV8xA72S4A8B67vjVhbba3MMop293FeEXpe7zItMWrJG/LOH9ByOXmYnNJfjmfuX9KbrpgLOba4nZ+fl8Gbdv/ihv+6wFGKHCYrVwmhFC0J3V2bn2tIB1wCc1CST3d3X2OyxhguXcs4sm679UngzofuSeBewMFJboIQHbUh/m2JhW2hG9DIvG2t7yZIzKBTz9wBtnNC+2pCRYhSIuQ1j8xsz5VvqnyUIthvuoyyu7fNIrg/KQUVmGQaqkqZk/Vx5b33/gsEs8yX7SC1J+NV4icz6bvIE7C5G6McBaI8rVg56q5QBJWxn/87Q1sPK4+sQa8fLU5gXo4paaq4cOcQ4wR0VBHPGjKh+UlPCbA1nLXyEUX45qZ8J7/Ln4FPJE2TdzD0Z8MLSNQiykMMmSyOCiFfy84Rq60emYB2vD09KjYwsoIpeDcBDTElBbXxND72yhd9pC/1CMid/5HUMvAL27OtcIJDzNKpRPNqPOpyt2aPGz9QWIs9hQ9LiX5s8m9hjTUu/f7MyIatjjd+tSfQ3ufZxPpmJhTaBtZtKLUcfOCUqADuO+QoH8B9v6U+P0HV1GLQmtoNFTb3s74ivZgjES0qfK+8RdGgBbcCMSy8eBvh98+et1KIFqSe1KQPyXULBMTsIYnysIwiZBJYdI20vseV+wuJkcqGemehKjaAb9L57xZm3g2zX0bZ2xk/fU+bCo7TlnbW7JuF1YdURo/2Gw7VclDG1W7LOtas2LX4upifZ/23rzpsnY/ALfRgrcWP5hYmV9VxVOQA1fZvp9F2UNU+7d7xRyVm5wiLp3/0dlV7vdw1PMiZrbDAYzIVqEjRY2YU03sJhPnlwIPcZUG5ltL6S8XCxU1eYS5cjr34veBmXAvy7yN4ZjArIG0dfD/5UpBNlX1ZPoxJOwyqRi3wQWtOzd4oNKh0LkoTm8cwqgIfKhqqGOhwo71I+zXnMemTv2B2AUzABWyFztGgGULjDDzWYwJUVBTjKCn5K2QGMK1CQT7SzziOjo+BhAmqBjzuc3xYym2eedGeOIRJVyTwDw37iCMe4g5Vbnsb5ZBdxOAnMT7HU4DHpxWGuQ7GeiY30Cpbvzss55+5Km1YsbD5ea3NI9QNYIXol5apgSu9dZ8f8xS5dtHpido5BclDuLWY4lhik0tbJa07yJhH0BOyEut/GRbYTS6RfiTYWGMCkNpfSHi7HvdiTglEVHKZXaVhezH4kkXiIvKopYAlPusftpE4a5IZwvw1x/eLvoDIh/zpo9FiQInsTb2SAkKHV42XYBjpJDg4374XiVb3ws4qM0s9eSQ5HzsMU4OZJKuopFjBM+dAZEl8RUMx5uU2N486Kr141tVsGQfGjORYMCJAMsxELeNT4RmWjRcpdTGBwcx6XN9drWqPmJzcrGrH4+DRc7+n1w3kPZwu0BkNr6hQrqgo7JTB9A5kdJ/H7P4cWBMwsmuixAzJB3yrQpnGIq90lxAXLzDCdn1LPibsRt7rHNjgQBklRgPZ8vTbjXdgXrTWQsK5MdrXXQVPp0Rinq3frzZKJ0qD6Qhc40VzAraUXlob1gvkhK3vpmHgI6FRlQZNx6eRqkp0zy4AQlX813fAPtL3jMRaitGFFjo0zmErloC+h+YYdVQ6k4F/epxAoF0BmqEoKNTt6j4vQZNQ2BoqF9Vj53TOIoNmDiu9Xp15RkIgQIGcoLpfoIbenzpGUAtqFJp5W+LLnx38jHeECTJ/navKY1NWfN0sY1T8/pB8kIH3DU3DX+u6W3YwpypBMYOhbSxGjq84RZ84fWJow8pyHqn4S/9J15EcCMsXqrfwyd9mhiu3+rEo9pPpoJkdZqHjra4NvzFwuThNKy6hao/SlLw3ZADUcUp3w3SRVfW2rhl80zOgTYnKE0Hs2qp1J6H3xqPqIkvUDRMFDYyRbsFI3M9MEyovPk8rlw7/0a81cDVLmBsR2ze2pBuKb23fbeZC0uXoIvDppfTwIDxk1Oq2dGesGc+oJXWJLGkOha3CX+DUnzgAp9HGH9RsPZN63Hn4RMA5eSVhPHO+9RcRb/IOgtW31V1Q5IPGtoxPjC+MEJbVlIMYADd9aHYWUIQKopuPOHmoqSkubnAKnzgKHqgIOfW5RdAgotN6BN+O2ZYHkuemLnvQ8U9THVrS1RtLmKbcC7PeeDsYznvqzeg6VCNwmr0Yyx1wnLjyT84BZz3EJyCptD3yeueAyDWIs0L2qs/VQ3HUyqfrja0V1LdDzqAikeWuV4sc7RLIB69jEIBjCkyZedoUHqCrOvShVzyd73OdrJW0hPOuQv2qOoHDc9xVb6Yu6uq3Xqp2ZaH46A7lzevbxQEmfrzvAYSJuZ4WDk1Hz3QX1LVdiUK0EvlAGAYlG3Md30r7dcPN63yqBCIj25prpvZP0nI4+EgWoFG95V596CurXpKRBGRjQlHCvy5Ib/iW8nZJWwrET3mgd6mEhfP4KCuaLjopWs7h+MdXFdIv8dHQJgg1xi1eYqB0uDYjxwVmri0Sv5XKut/onqapC+FQiC2C1lvYJ9MVco6yDYsS3AANUfMtvtbYI2hfwZatiSsnoUeMZd34GVjkMMKA+XnjJpXgRW2SHTZplVowPmJsvXy6w3cfO1AK2dvtZEKTkC/TY9LFiKHCG0DnrMQdGm2lzlBHM9iEYynH2UcVMhUEjsc0oDBTgo2ZSQ1gzkAHeWeBXYFjYLuuf8yzTCy7/RFR81WDjXMbq2BOH5dURnxo6oivmxL3cKzKInlZkD31nvpHB9Kk7GfcfE1t+1V64b9LtgeJGlpRFxQCAqWJ5DoY77ski8gsOEOr2uywZaoO/NGa0X0y1pNQHBi3b2SUGNpcZxDT7rLbBf1FSnQ8guxGW3W+36BW0gBje4DOz6Ba6SVk0xiKgt+q2JOFyr4SYfnu+Ic1QZYIuwHBrgzr6UvOcSCzPTOo7D6IC4ISeS7zkl4h+2VoeHpnG/uWR3+ysNgPcOIXQbv0n4mr3BwQcdKJxgPSeyuP/z1Jjg4e9nUvoXegqQVIE30EHx5GHv+FAVUNTowYDJgyFhf5IvlYmEqRif6+WN1MkEJmDcQITx9FX23a4mxy1AQRsOHO/+eImX9l8EMJI3oPWzVXxSOeHU1dUWYr2uAA7AMb+vAEZSbU3qob9ibCyXeypEMpZ6863o6QPqlqGHZkuWABSTVNd4cOh9hv3qEpSx2Zy/DJMP6cItEmiBJ5PFqQnDEIt3NrA3COlOSgz43D7gpNFNJ5MBh4oFzhDPiglC2ypsNU4ISywY2erkyb1NC3Qh/IfWj0eDgZI4/ln8WPfBsT3meTjq1Uqt1E7Zl/qftqkx6aM9KueMCekSnMrcHj1CqTWWzEzPsZGcDe3Ue4Ws+XFYVxNbOFF8ezkvQGR6ZOtOLU2lQEnMBStx47vE6Pb7AYMBRj2OOfZXfisjJnpTfSNjo6sZ6qSvNxZNmDeS7Gk3yYyCk1HtKN2UnhMIjOXUzAqDv90lx9O/q/AT1ZMnit5XQe9wmQxnE/WSH0CqZ9/2Hy+Sfmpeg8RwsHI5Z8kC8H293m/LHVVM/BA7HaTJYg5Enk7M/xWpq0192ACfBai2LA/qrCjCr6Dh1BIMzMXINBmX96MJ5Hn2nxln/RXPFhwHxUmSV0EV2V0jm86/dxxuYSU1W7sVkEbN9EzkG0QFwPhyHKyb3t+Fj5WoUUTErcazE/N6EW6Lvp0d//SDPj7EV9UdJN+Amnf3Wwk3A0SlJ9Z00yvXZ7n3z70G47Hfsow8Wq1JXcfwnA+Yxa5mFsgV464KKP4T31wqIgzFPd3eCe3j5ory5fBF2hgCFyVFrLzI9eetNXvM7oQqyFgDo4CTp/hDV9NMX9JDHQ/nyHTLvZLNLF6ftn2OxjGm8+PqOwhxnPHWipkE/8wbtyri80Sr7pMNkQGMfo4ZYK9OcCC4ESVFFbLMIvlxSoRqWie0wxqnLfcLSXMSpMMQEJYDVObYsXIQNv4TGNwjq1kvT1UOkicTrG3IaBZ3XdScS3u8sgeZPVpOLkbiF940FjbCeNRINNvDbd01EPBrTCPpm12m43ze1bBB59Ia6Ovhnur/Nvx3IxwSWol+3H2qfCJR8df6aQf4v6WiONxkK+IqT4pKQrZK/LplgDI/PJZbOep8dtbV7oCr6CgfpWa8NczOkPx81iSHbsNhVSJBOtrLIMrL31LK9TqHqAbAHe0RLmmV806kRLDLNEhUEJfm9u0sxpkL93Zgd6rw+tqBfTMi59xqXHLXSHwSbSBl0EK0+loECOPtrl+/nsaFe197di4yUgoe4jKoAJDXc6DGDjrQOoFDWZJ9HXwt8xDrQP+7aRwWKWI1GF8s8O4KzxWBBcwnl3vnl1Oez3oh6Ea1vjR7/z7DDTrFtqU2W/KAEzAuXDNZ7MY73MF216dzdSbWmUp4lcm7keJfWaMHgut9x5C9mj66Z0lJ+yhsjVvyiWrfk1lzPOTdhG15Y7gQlXtacvI7qv/XNSscDwqkgwHT/gUsD5yB7LdRRvJxQGYINn9hTpodKFVSTPrtGvyQw+HlRFXIkodErAGu9Iy1YpfSPc3jkFh5CX3lPxv7aqjE/JAfTIpEjGb/H7MO0e2vsViSW1qa/Lmi4/n4DEI3g7lYrcanspDfEpKkdV1OjSLOy0BCUqVoECaB55vs06rXl4jqmLsPsFM/7vYJ0vrBhDCm/00A/H81l1uekJ/6Lml3Hb9+NKiLqATJmDpyzfYZFHumEjC662L0Bwkxi7E9U4cQA0XMVDuMYAIeLMPgQaMVOd8fmt5SflFIfuBoszeAw7ow5gXPE2Y/yBc/7jExARUf/BxIHQBF5Sn3i61w4z5xJdCyO1F1X3+3ax+JSvMeZ7S6QSKp1Fp/sjYz6Z+VgCZzibGeEoujryfMulH7Rai5kAft9ebcW50DyJr2uo2z97mTWIu45YsSnNSMrrNUuG1XsYBtD9TDYzQffKB87vWbkM4EbPAFgoBV4GQS+vtFDUqOFAoi1nTtmIOvg38N4hT2Sn8r8clmBCXspBlMBYTnrqFJGBT3wZOzAyJDre9dHH7+x7qaaKDOB4UQALD5ecS0DE4obubQEiuJZ0EpBVpLuYcce8Aa4PYd/V4DLDAJBYKQPCWTcrEaZ5HYbJi11Gd6hjGom1ii18VHYnG28NKpkz2UKVPxlhYSp8uZr367iOmoy7zsxehW9wzcy2zG0a80PBMCRQMb32hnaHeOR8fnNDzZhaNYhkOdDsBUZ3loDMa1YP0uS0cjUP3b/6DBlqmZOeNABDsLl5BI5QJups8uxAuWJdkUB/pO6Zax6tsg7fN5mjjDgMGngO+DPcKqiHIDbFIGudxtPTIyDi9SFMKBDcfdGQRv41q1AqmxgkVfJMnP8w/Bc7N9/TR6C7mGObFqFkIEom8sKi2xYqJLTCHK7cxzaZvqODo22c3wisBCP4HeAgcRbNPAsBkNRhSmD48dHupdBRw4mIvtS5oeF6zeT1KMCyhMnmhpkFAGWnGscoNkwvQ8ZM5lE/vgTHFYL99OuNxdFBxTEDd5v2qLR8y9WkXsWgG6kZNndFG+pO/UAkOCipqIhL3hq7cRSdrCq7YhUsTocEcnaFa6nVkhnSeRYUA1YO0z5itF9Sly3VlxYDw239TJJH6f3EUfYO5lb7bcFcz8Bp7Oo8QmnsUHOz/fagVUBtKEw1iT88j+aKkv8cscKNkMxjYr8344D1kFoZ7/td1W6LCNYN594301tUGRmFjAzeRg5vyoM1F6+bJZ/Q54jN/k8SFd3DxPTYaAUsivsBfgTn7Mx8H2SpPt4GOdYRnEJOH6jHM2p6SgB0gzIRq6fHxGMmSmqaPCmlfwxiuloaVIitLGN8wie2CDWhkzLoCJcODh7KIOAqbHEvXdUxaS4TTTs07Clzj/6GmVs9kiZDerMxEnhUB6QQPlcfqkG9882RqHoLiHGBoHfQuXIsAG8GTAtao2KVwRnvvam8jo1e312GQAKWEa4sUVEAMG4G6ckcONDwRcg1e2D3+ohXgY4UAWF8wHKQMrSnzCgfFpsxh+aHXMGtPQroQasRY4U6UdG0rz1Vjbka0MekOGRZQEvqQFlxseFor8zWFgHek3v29+WqN6gaK5gZOTOMZzpQIC1201LkMCXild3vWXSc5UX9xcFYfbRPzGFa1FDcPfPB/jUEq/FeGt419CI3YmBlVoHsa4KdcwQP5ZSwHHhFJ7/Ph/Rap/4vmG91eDwPP0lDfCDRCLszTqfzM71xpmiKi2HwS4WlqvGNwtvwF5Dqpn6KTq8ax00UMPkxDcZrEEEsIvHiUXXEphdb4GB4FymlPwBz4Gperqq5pW7TQ6/yNRhW8VT5NhuP0udlxo4gILq5ZxAZk8ZGh3g4CqxJlPKY7AQxupfUcVpWT5VItp1+30UqoyP4wWsRo3olRRgkWZZ2ZN6VC3OZFeXB8NbnUrSdikNptD1QiGuKkr8EmSR/AK9Rw+FF3s5uwuPbvHGiPeFOViltMK7AUaOsq9+x9cndk3iJEE5LKZRlWJbKOZweROzmPNVPkjE3K/TyA57Rs68TkZ3MR8akKpm7cFjnjPd/DdkWjgYoKHSr5Wu5ssoBYU4acRs5g2DHxUmdq8VXOXRbunD8QN0LhgkssgahcdoYsNvuXGUK/KXD/7oFb+VGdhqIn02veuM5bLudJOc2Ky0GMaG4W/xWBxIJcL7yliJOXOpx0AkBqUgzlDczmLT4iILXDxxtRR1oZa2JWFgiAb43obrJnG/TZC2KSK2wqOzRZTXavZZFMb1f3bXvVaNaK828w9TO610gk8JNf3gMfETzXXsbcvRGCG9JWQZ6+cDPqc4466Yo2RcKH+PILeKOqtnlbInR3MmBeGG3FH10yzkybuqEC2HSQwpA0An7d9+73BkDUTm30bZmoP/RGbgFN+GrCOfADgqr0WbI1a1okpFms8iHYw9hm0zUvlEMivBRxModrbJJ+9/p3jUdQQ9BCtQdxnOGrT5dzRUmw0593/mbRSdBg0nRvRZM5/E16m7ZHmDEtWhwvfdZCZ8J8M12W0yRMszXamWfQTwIZ4ayYktrnscQuWr8idp3PjT2eF/jmtdhIfcpMnb+IfZY2FebW6UY/AK3jP4u3Tu4zE4qlnQgLFbM19EBIsNf7KhjdbqQ/D6yiDb+NlEi2SKD+ivXVUK8ib0oBo366gXkR8ZxGjpJIDcEgZPa9TcYe0TIbiPl/rPUQDu3XBJ9X/GNq3FAUsKsll57DzaGMrjcT+gctp+9MLYXCq+sqP81eVQ0r9lt+gcQfZbACRbEjvlMskztZG8gbC8Qn9tt26Q7y7nDrbZq/LEz7kR6Jc6pg3N9rVX8Y5MJrGlML9p9lU4jbTkKqCveeZUJjHB03m2KRKR2TytoFkTXOLg7keU1s1lrPMQJpoOKLuAAC+y1HlJucU6ysB5hsXhvSPPLq5J7JtnqHKZ4vYjC4Vy8153QY+6780xDuGARsGbOs1WqzH0QS765rnSKEbbKlkO8oI/VDwUd0is13tKpqILu1mDJFNy/iJAWcvDgjxvusIT+PGz3ST/J9r9Mtfd0jpaGeiLYIqXc7DiHSS8TcjFVksi66PEkxW1z6ujbLLUGNNYnzOWpH8BZGK4bCK7iR+MbIv8ncDAz1u4StN3vTTzewr9IQjk9wxFxn+6N1ddKs0vffJiS08N3a4G1SVrlZ97Q/M+8G9fe5AP6d9/Qq4WRnORVhofPIKEdCr3llspUfE0oKIIYoByBRPh+bX1HLS3JWGJRhIvE1aW4NTd8ePi4Z+kXb+Z8snYfSNcqijhAgVsx4RCM54cXUiYkjeBmmC4ajOHrChoELscJJC7+9jjMjw5BagZKlgRMiSNYz7h7vvZIoQqbtQmspc0cUk1G/73iXtSpROl5wtLgQi0mW2Ex8i3WULhcggx6E1LMVHUsdc9GHI1PH3U2Ko0PyGdn9KdVOLm7FPBui0i9a0HpA60MsewVE4z8CAt5d401Gv6zXlIT5Ybit1VIA0FCs7wtvYreru1fUyW3oLAZ/+aTnZrOcYRNVA8spoRtlRoWflsRClFcgzkqiHOrf0/SVw+EpVaFlJ0g4Kxq1MMOmiQdpMNpte8lMMQqm6cIFXlnGbfJllysKDi+0JJMotkqgIxOSQgU9dn/lWkeVf8nUm3iwX2Nl3WDw9i6AUK3vBAbZZrcJpDQ/N64AVwjT07Jef30GSSmtNu2WlW7YoyW2FlWfZFQUwk867EdLYKk9VG6JgEnBiBxkY7LMo4YLQJJlAo9l/oTvJkSARDF/XtyAzM8O2t3eT/iXa6wDN3WewNmQHdPfsxChU/KtLG2Mn8i4ZqKdSlIaBZadxJmRzVS/o4yA65RTSViq60oa395Lqw0pzY4SipwE0SXXsKV+GZraGSkr/RW08wPRvqvSUkYBMA9lPx4m24az+IHmCbXA+0faxTRE9wuGeO06DIXa6QlKJ3puIyiuAVfPr736vzo2pBirS+Vxel3TMm3JKhz9o2ZoRvaFVpIkykb0Hcm4oHFBMcNSNj7/4GJt43ogonY2Vg4nsDQIWxAcorpXACzgBqQPjYsE/VUpXpwNManEru4NwMCFPkXvMoqvoeLN3qyu/N1eWEHttMD65v19l/0kH2mR35iv/FI+yjoHJ9gPMz67af3Mq/BoWXqu3rphiWMXVkmnPSEkpGpUI2h1MThideGFEOK6YZHPwYzMBvpNC7+ZHxPb7epfefGyIB4JzO9DTNEYnDLVVHdQyvOEVefrk6Uv5kTQYVYWWdqrdcIl7yljwwIWdfQ/y+2QB3eR/qxYObuYyB4gTbo2in4PzarU1sO9nETkmj9/AoxDA+JM3GMqQtJR4jtduHtnoCLxd1gQUscHRB/MoRYIEsP2pDZ9KvHgtlk1iTbWWbHhohwFEYX7y51fUV2nuUmnoUcqnWIQAAgl9LTVX+Bc0QGNEhChxHR4YjfE51PUdGfsSFE6ck7BL3/hTf9jLq4G1IafINxOLKeAtO7quulYvH5YOBc+zX7CrMgWnW47/jfRsWnJjYYoE7xMfWV2HN2iyIqLI");const t=()=>va(e),n=()=>new Set(t()),r=(e,t)=>t.forEach(t=>e.add(t));Ya=new Map(ba(e)),Za=n(),Xa=t(),$a=new Set(t().map(e=>Xa[e])),Xa=new Set(Xa),ec=n(),tc=n();let s=wa(e),i=e();const o=()=>{let e=new Set;return t().forEach(t=>r(e,s[t])),r(e,t()),e};nc=xa(t=>{let n=xa(e).map(e=>e+96);if(n.length){let r=t>=i;return n[0]-=32,n=ka(n),r&&(n="Restricted[".concat(n,"]")),{N:n,P:o(),Q:o(),M:!e(),R:r}}}),rc=n(),sc=new Map;let a=t().concat(Qa(rc)).sort((e,t)=>e-t);a.forEach((t,n)=>{let r=e(),s=a[n]=r?a[n-r]:{V:[],M:new Map};s.V.push(t),rc.has(t)||sc.set(t,s)});for(let{V:u,M:h}of new Set(sc.values())){let e=[];for(let n of u){let t=nc.filter(e=>Ka(e,n)),s=e.find(e=>{let{G:n}=e;return t.some(e=>n.has(e))});s||(s={G:new Set,V:[]},e.push(s)),s.V.push(n),r(s.G,t)}let t=e.flatMap(e=>Qa(e.G));for(let{G:n,V:r}of e){let e=new Set(t.filter(e=>!n.has(e)));for(let t of r)h.set(t,e)}}ic=new Set;let c=new Set;const l=e=>ic.has(e)?c.add(e):ic.add(e);for(let u of nc){for(let e of u.P)l(e);for(let e of u.Q)l(e)}for(let u of ic)sc.has(u)||c.has(u)||sc.set(u,1);r(ic,Ha(ic)),oc=function(e){let t=[],n=va(e);return function e(n,r,s){let{S:i,B:o}=n;if(!(4&i&&s===r[r.length-1])){2&i&&(s=r[r.length-1]),1&i&&t.push(r);for(let t of o)for(let n of t.Q)e(t,[...r,n],s)}}(function t(r){return{S:e(),B:xa(()=>{let r=va(e).map(e=>n[e]);if(r.length)return t(r)}),Q:r}}([]),[]),t}(e).map(e=>Ja.from(e)).sort(Ca),ac=new Map;for(let u of oc){let e=[ac];for(let t of u){let n=e.map(e=>{let n=e.get(t);return n||(n=new Map,e.set(t,n)),n});65039===t?e.push(...n):e=n}for(let t of e)t.V=u}}function lc(e){return(dc(e)?"":"".concat(uc(hc([e]))," "))+Na(e)}function uc(e){return'"'.concat(e,'"\u200e')}function hc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Na,r=[];var s;s=e[0],cc(),Xa.has(s)&&r.push("\u25cc"),e.length>t&&(t>>=1,e=[...e.slice(0,t),8230,...e.slice(-t)]);let i=0,o=e.length;for(let a=0;a<o;a++){let t=e[a];dc(t)&&(r.push(ka(e.slice(i,a))),r.push(n(t)),i=a+1)}return r.push(ka(e.slice(i,o))),r.join("")}function dc(e){return cc(),ec.has(e)}function fc(e,t,n){if(!e)return[];cc();let r=0;return e.split(Wa).map(e=>{let s=Ta(e),i={input:s,offset:r};r+=s.length+1;try{let e,r=i.tokens=vc(s,t,n),o=r.length;if(!o)throw new Error("empty label");let a=i.output=r.flat();if(function(e){for(let t=e.lastIndexOf(95);t>0;)if(95!==e[--t])throw new Error("underscore allowed only at start")}(a),!(i.emoji=o>1||r[0].is_emoji)&&a.every(e=>e<128))!function(e){if(e.length>=4&&45==e[2]&&45==e[3])throw new Error('invalid label extension: "'.concat(ka(e.slice(0,4)),'"'))}(a),e="ASCII";else{let t=r.flatMap(e=>e.is_emoji?[]:e);if(t.length){if(Xa.has(a[0]))throw yc("leading combining mark");for(let e=1;e<o;e++){let t=r[e];if(!t.is_emoji&&Xa.has(t[0]))throw yc('emoji + combining mark: "'.concat(ka(r[e-1])," + ").concat(hc([t[0]]),'"'))}!function(e){let t=e[0],n=ma.get(t);if(n)throw yc("leading ".concat(n));let r=e.length,s=-1;for(let i=1;i<r;i++){t=e[i];let r=ma.get(t);if(r){if(s==i)throw yc("".concat(n," + ").concat(r));s=i+1,n=r}}if(s==r)throw yc("trailing ".concat(n))}(a);let n=Qa(new Set(t)),[s]=function(e){let t=nc;for(let n of e){let e=t.filter(e=>Ka(e,n));if(!e.length)throw nc.some(e=>Ka(e,n))?gc(t[0],n):pc(n);if(t=e,1==e.length)break}return t}(n);!function(e,t){for(let n of t)if(!Ka(e,n))throw gc(e,n);if(e.M){let e=Ha(t);for(let t=1,n=e.length;t<n;t++)if($a.has(e[t])){let r=t+1;for(let s;r<n&&$a.has(s=e[r]);r++)for(let n=t;n<r;n++)if(e[n]==s)throw new Error("duplicate non-spacing marks: ".concat(lc(s)));if(r-t>4)throw new Error("excessive non-spacing marks: ".concat(uc(hc(e.slice(t-1,r)))," (").concat(r-t,"/").concat(4,")"));t=r}}}(s,t),function(e,t){let n,r=[];for(let s of t){let e=sc.get(s);if(1===e)return;if(e){let t=e.M.get(s);if(n=n?n.filter(e=>t.has(e)):Qa(t),!n.length)return}else r.push(s)}if(n)for(let s of n)if(r.every(e=>Ka(s,e)))throw new Error("whole-script confusable: ".concat(e.N,"/").concat(s.N))}(s,n),e=s.N}else e="Emoji"}i.type=e}catch(o){i.error=o}return i})}function mc(e){return e.map(t=>{let{input:n,error:r,output:s}=t;if(r){let t=r.message;throw new Error(1==e.length?t:"Invalid label ".concat(uc(hc(n,63)),": ").concat(t))}return ka(s)}).join(Wa)}function pc(e){return new Error("disallowed character: ".concat(lc(e)))}function gc(e,t){let n=lc(t),r=nc.find(e=>e.P.has(t));return r&&(n="".concat(r.N," ").concat(n)),new Error("illegal mixture: ".concat(e.N," + ").concat(n))}function yc(e){return new Error("illegal placement: ".concat(e))}function vc(e,t,n){let r=[],s=[];for(e=e.slice().reverse();e.length;){let i=bc(e);if(i)s.length&&(r.push(t(s)),s=[]),r.push(n(i));else{let t=e.pop();if(ic.has(t))s.push(t);else{let e=Ya.get(t);if(e)s.push(...e);else if(!Za.has(t))throw pc(t)}}}return s.length&&r.push(t(s)),r}function wc(e){return e.filter(e=>65039!=e)}function bc(e,t){let n,r=ac,s=e.length;for(;s&&(r=r.get(e[--s]),r);){let{V:i}=r;i&&(n=i,t&&t.push(...e.slice(s).reverse()),e.length=s)}return n}const xc=new Uint8Array(32);function Sc(e){return Ye(0!==e.length,"invalid ENS name; empty component","comp",e),e}function Ec(e){const t=Sr(function(e){try{if(0===e.length)throw new Error("empty label");return function(e){return mc(fc(e,qa,wc))}(e)}catch(t){Ye(!1,"invalid ENS name (".concat(t.message,")"),"name",e)}}(e)),n=[];if(0===e.length)return n;let r=0;for(let s=0;s<t.length;s++){46===t[s]&&(n.push(Sc(t.slice(r,s))),r=s+1)}return Ye(r<t.length,"invalid ENS name; empty component","name",e),n.push(Sc(t.slice(r))),n}function Ac(e){Ye("string"===typeof e,"invalid ENS name; not a string","name",e),Ye(e.length,"invalid ENS name (empty label)","name",e);let t=xc;const n=Ec(e);for(;n.length;)t=Hn(ut([t,Hn(n.pop())]));return lt(t)}function Nc(e,t){const n=null!=t?t:63;return Ye(n<=255,"DNS encoded label cannot exceed 255","length",n),lt(ut(Ec(e).map(t=>{Ye(t.length<=n,"label ".concat(JSON.stringify(e)," exceeds ").concat(n," bytes"),"name",e);const r=new Uint8Array(t.length+1);return r.set(t,1),r[0]=r.length-1,r})))+"00"}xc.fill(0);class Tc extends Sn{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=wn(this.buffer)}update(e){on(this);const{view:t,buffer:n,blockLen:r}=this,s=(e=xn(e)).length;for(let i=0;i<s;){const o=Math.min(r-this.pos,s-i);if(o===r){const t=wn(e);for(;r<=s-i;i+=r)this.process(t,i);continue}n.set(e.subarray(i,i+o),this.pos),this.pos+=o,i+=o,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){on(this),an(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:r,isLE:s}=this;let{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let u=i;u<r;u++)t[u]=0;!function(e,t,n,r){if("function"===typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),o=Number(n>>s&i),a=Number(n&i),c=r?4:0,l=r?0:4;e.setUint32(t+c,o,r),e.setUint32(t+l,a,r)}(n,r-8,BigInt(8*this.length),s),this.process(n,0);const o=wn(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=a/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let u=0;u<c;u++)o.setUint32(4*u,l[u],s)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:o}=this;return e.length=r,e.pos=o,e.finished=s,e.destroyed=i,r%t&&e.buffer.set(n),e}}const kc=(e,t,n)=>e&t^~e&n,Cc=(e,t,n)=>e&t^e&n^t&n,Ic=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),_c=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pc=new Uint32Array(64);class jc extends Tc{constructor(){super(64,32,8,!1),this.A=0|_c[0],this.B=0|_c[1],this.C=0|_c[2],this.D=0|_c[3],this.E=0|_c[4],this.F=0|_c[5],this.G=0|_c[6],this.H=0|_c[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:o,H:a}=this;return[e,t,n,r,s,i,o,a]}set(e,t,n,r,s,i,o,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|o,this.H=0|a}process(e,t){for(let u=0;u<16;u++,t+=4)Pc[u]=e.getUint32(t,!1);for(let u=16;u<64;u++){const e=Pc[u-15],t=Pc[u-2],n=bn(e,7)^bn(e,18)^e>>>3,r=bn(t,17)^bn(t,19)^t>>>10;Pc[u]=r+Pc[u-7]+n+Pc[u-16]|0}let{A:n,B:r,C:s,D:i,E:o,F:a,G:c,H:l}=this;for(let u=0;u<64;u++){const e=l+(bn(o,6)^bn(o,11)^bn(o,25))+kc(o,a,c)+Ic[u]+Pc[u]|0,t=(bn(n,2)^bn(n,13)^bn(n,22))+Cc(n,r,s)|0;l=c,c=a,a=o,o=i+e|0,i=s,s=r,r=n,n=e+t|0}n=n+this.A|0,r=r+this.B|0,s=s+this.C|0,i=i+this.D|0,o=o+this.E|0,a=a+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,r,s,i,o,a,c,l)}roundClean(){Pc.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const Dc=En(()=>new jc),[Mc,Rc]=(()=>gn.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))))(),Oc=new Uint32Array(80),Lc=new Uint32Array(80);class Fc extends Tc{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:i,Dh:o,Dl:a,Eh:c,El:l,Fh:u,Fl:h,Gh:d,Gl:f,Hh:m,Hl:p}=this;return[e,t,n,r,s,i,o,a,c,l,u,h,d,f,m,p]}set(e,t,n,r,s,i,o,a,c,l,u,h,d,f,m,p){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|i,this.Dh=0|o,this.Dl=0|a,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|f,this.Hh=0|m,this.Hl=0|p}process(e,t){for(let v=0;v<16;v++,t+=4)Oc[v]=e.getUint32(t),Lc[v]=e.getUint32(t+=4);for(let v=16;v<80;v++){const e=0|Oc[v-15],t=0|Lc[v-15],n=gn.rotrSH(e,t,1)^gn.rotrSH(e,t,8)^gn.shrSH(e,t,7),r=gn.rotrSL(e,t,1)^gn.rotrSL(e,t,8)^gn.shrSL(e,t,7),s=0|Oc[v-2],i=0|Lc[v-2],o=gn.rotrSH(s,i,19)^gn.rotrBH(s,i,61)^gn.shrSH(s,i,6),a=gn.rotrSL(s,i,19)^gn.rotrBL(s,i,61)^gn.shrSL(s,i,6),c=gn.add4L(r,a,Lc[v-7],Lc[v-16]),l=gn.add4H(c,n,o,Oc[v-7],Oc[v-16]);Oc[v]=0|l,Lc[v]=0|c}let{Ah:n,Al:r,Bh:s,Bl:i,Ch:o,Cl:a,Dh:c,Dl:l,Eh:u,El:h,Fh:d,Fl:f,Gh:m,Gl:p,Hh:g,Hl:y}=this;for(let v=0;v<80;v++){const e=gn.rotrSH(u,h,14)^gn.rotrSH(u,h,18)^gn.rotrBH(u,h,41),t=gn.rotrSL(u,h,14)^gn.rotrSL(u,h,18)^gn.rotrBL(u,h,41),w=u&d^~u&m,b=h&f^~h&p,x=gn.add5L(y,t,b,Rc[v],Lc[v]),S=gn.add5H(x,g,e,w,Mc[v],Oc[v]),E=0|x,A=gn.rotrSH(n,r,28)^gn.rotrBH(n,r,34)^gn.rotrBH(n,r,39),N=gn.rotrSL(n,r,28)^gn.rotrBL(n,r,34)^gn.rotrBL(n,r,39),T=n&s^n&o^s&o,k=r&i^r&a^i&a;g=0|m,y=0|p,m=0|d,p=0|f,d=0|u,f=0|h,({h:u,l:h}=gn.add(0|c,0|l,0|S,0|E)),c=0|o,l=0|a,o=0|s,a=0|i,s=0|n,i=0|r;const C=gn.add3L(E,N,k);n=gn.add3H(C,S,A,T),r=0|C}({h:n,l:r}=gn.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:s,l:i}=gn.add(0|this.Bh,0|this.Bl,0|s,0|i)),({h:o,l:a}=gn.add(0|this.Ch,0|this.Cl,0|o,0|a)),({h:c,l:l}=gn.add(0|this.Dh,0|this.Dl,0|c,0|l)),({h:u,l:h}=gn.add(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:f}=gn.add(0|this.Fh,0|this.Fl,0|d,0|f)),({h:m,l:p}=gn.add(0|this.Gh,0|this.Gl,0|m,0|p)),({h:g,l:y}=gn.add(0|this.Hh,0|this.Hl,0|g,0|y)),this.set(n,r,s,i,o,a,c,l,u,h,d,f,m,p,g,y)}roundClean(){Oc.fill(0),Lc.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Uc=En(()=>new Fc);const Bc=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof global)return global;throw new Error("unable to locate global object")}();Bc.crypto||Bc.msCrypto;function Vc(e){switch(e){case"sha256":return Dc.create();case"sha512":return Uc.create()}Ye(!1,"invalid hashing algorithm name","algorithm",e)}const zc=function(e){return Vc("sha256").update(e).digest()},Gc=function(e){return Vc("sha512").update(e).digest()};let Hc=zc,qc=Gc,Wc=!1,Qc=!1;function Kc(e){const t=st(e,"data");return lt(Hc(t))}function Jc(e){const t=st(e,"data");return lt(qc(t))}Kc._=zc,Kc.lock=function(){Wc=!0},Kc.register=function(e){if(Wc)throw new Error("sha256 is locked");Hc=e},Object.freeze(Kc),Jc._=Gc,Jc.lock=function(){Qc=!0},Jc.register=function(e){if(Qc)throw new Error("sha512 is locked");qc=e},Object.freeze(Kc);BigInt(0);const Yc=BigInt(1),Zc=BigInt(2),Xc=e=>e instanceof Uint8Array,$c=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function el(e){if(!Xc(e))throw new Error("Uint8Array expected");let t="";for(let n=0;n<e.length;n++)t+=$c[e[n]];return t}function tl(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":"0x".concat(e))}function nl(e){if("string"!==typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const n=new Uint8Array(t/2);for(let r=0;r<n.length;r++){const t=2*r,s=e.slice(t,t+2),i=Number.parseInt(s,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");n[r]=i}return n}function rl(e){return tl(el(e))}function sl(e){if(!Xc(e))throw new Error("Uint8Array expected");return tl(el(Uint8Array.from(e).reverse()))}function il(e,t){return nl(e.toString(16).padStart(2*t,"0"))}function ol(e,t){return il(e,t).reverse()}function al(e,t,n){let r;if("string"===typeof t)try{r=nl(t)}catch(DN){throw new Error("".concat(e,' must be valid hex string, got "').concat(t,'". Cause: ').concat(DN))}else{if(!Xc(t))throw new Error("".concat(e," must be hex string or Uint8Array"));r=Uint8Array.from(t)}const s=r.length;if("number"===typeof n&&s!==n)throw new Error("".concat(e," expected ").concat(n," bytes, got ").concat(s));return r}function cl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce((e,t)=>e+t.length,0));let s=0;return t.forEach(e=>{if(!Xc(e))throw new Error("Uint8Array expected");r.set(e,s),s+=e.length}),r}const ll=e=>(Zc<<BigInt(e-1))-Yc,ul=e=>new Uint8Array(e),hl=e=>Uint8Array.from(e);function dl(e,t,n){if("number"!==typeof e||e<2)throw new Error("hashLen must be a number");if("number"!==typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!==typeof n)throw new Error("hmacFn must be a function");let r=ul(e),s=ul(e),i=0;const o=()=>{r.fill(1),s.fill(0),i=0},a=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return n(s,r,...t)},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ul();s=a(hl([0]),e),r=a(),0!==e.length&&(s=a(hl([1]),e),r=a())},l=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return cl(...n)};return(e,t)=>{let n;for(o(),c(e);!(n=t(l()));)c();return o(),n}}const fl={bigint:e=>"bigint"===typeof e,function:e=>"function"===typeof e,boolean:e=>"boolean"===typeof e,string:e=>"string"===typeof e,stringOrUint8Array:e=>"string"===typeof e||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"===typeof e&&Number.isSafeInteger(e.outputLen)};function ml(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(t,n,r)=>{const s=fl[n];if("function"!==typeof s)throw new Error('Invalid validator "'.concat(n,'", expected function'));const i=e[t];if((!r||void 0!==i)&&!s(i,e))throw new Error("Invalid param ".concat(String(t),"=").concat(i," (").concat(typeof i,"), expected ").concat(n))};for(const[s,i]of Object.entries(t))r(s,i,!1);for(const[s,i]of Object.entries(n))r(s,i,!0);return e}const pl=BigInt(0),gl=BigInt(1),yl=BigInt(2),vl=BigInt(3),wl=BigInt(4),bl=BigInt(5),xl=BigInt(8);BigInt(9),BigInt(16);function Sl(e,t){const n=e%t;return n>=pl?n:t+n}function El(e,t,n){if(n<=pl||t<pl)throw new Error("Expected power/modulo > 0");if(n===gl)return pl;let r=gl;for(;t>pl;)t&gl&&(r=r*e%n),e=e*e%n,t>>=gl;return r}function Al(e,t,n){let r=e;for(;t-- >pl;)r*=r,r%=n;return r}function Nl(e,t){if(e===pl||t<=pl)throw new Error("invert: expected positive integers, got n=".concat(e," mod=").concat(t));let n=Sl(e,t),r=t,s=pl,i=gl,o=gl,a=pl;for(;n!==pl;){const e=r/n,t=r%n,c=s-o*e,l=i-a*e;r=n,n=t,s=o,i=a,o=c,a=l}if(r!==gl)throw new Error("invert: does not exist");return Sl(s,t)}function Tl(e){if(e%wl===vl){const t=(e+gl)/wl;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%xl===bl){const t=(e-bl)/xl;return function(e,n){const r=e.mul(n,yl),s=e.pow(r,t),i=e.mul(n,s),o=e.mul(e.mul(i,yl),s),a=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(a),n))throw new Error("Cannot find square root");return a}}return function(e){const t=(e-gl)/yl;let n,r,s;for(n=e-gl,r=0;n%yl===pl;n/=yl,r++);for(s=yl;s<e&&El(s,t,e)!==e-gl;s++);if(1===r){const t=(e+gl)/wl;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const i=(n+gl)/yl;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,c=e.pow(e.mul(e.ONE,s),n),l=e.pow(o,i),u=e.pow(o,n);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<a&&!e.eql(r,e.ONE);t++)r=e.sqr(r);const n=e.pow(c,gl<<BigInt(a-t-1));c=e.sqr(n),l=e.mul(l,n),u=e.mul(u,c),a=t}return l}}(e)}const kl=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Cl(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function Il(e){if("bigint"!==typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function _l(e){const t=Il(e);return t+Math.ceil(t/2)}class Pl extends Sn{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,sn(e);const n=xn(t);if(this.iHash=e.create(),"function"!==typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(n.length>r?e.create().update(n).digest():n);for(let i=0;i<s.length;i++)s[i]^=54;this.iHash.update(s),this.oHash=e.create();for(let i=0;i<s.length;i++)s[i]^=106;this.oHash.update(s),s.fill(0)}update(e){return on(this),this.iHash.update(e),this}digestInto(e){on(this),rn(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:o}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const jl=(e,t,n)=>new Pl(e,t).update(n).digest();jl.create=(e,t)=>new Pl(e,t);const Dl=BigInt(0),Ml=BigInt(1);function Rl(e){return ml(e.Fp,kl.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"})),ml(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze((0,tt.A)((0,tt.A)((0,tt.A)({},Cl(e.n,e.nBitLength)),e),{p:e.Fp.ORDER}))}const{Ph:Ol,aT:Ll}=e,Fl={Err:class extends Error{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")}},_parseInt(e){const{Err:t}=Fl;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const n=e[1],r=e.subarray(2,n+2);if(!n||r.length!==n)throw new t("Invalid signature integer: wrong length");if(128&r[0])throw new t("Invalid signature integer: negative");if(0===r[0]&&!(128&r[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Ol(r),l:e.subarray(n+2)}},toSig(e){const{Err:t}=Fl,n="string"===typeof e?Ll(e):e;if(!(n instanceof Uint8Array))throw new Error("ui8a expected");let r=n.length;if(r<2||48!=n[0])throw new t("Invalid signature tag");if(n[1]!==r-2)throw new t("Invalid signature: incorrect length");const{d:s,l:i}=Fl._parseInt(n.subarray(2)),{d:o,l:a}=Fl._parseInt(i);if(a.length)throw new t("Invalid signature: left bytes after parsing");return{r:s,s:o}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?"0".concat(t):t},r=t(n(e.s)),s=t(n(e.r)),i=r.length/2,o=s.length/2,a=n(i),c=n(o);return"30".concat(n(o+i+4),"02").concat(c).concat(s,"02").concat(a).concat(r)}},Ul=BigInt(0),Bl=BigInt(1),Vl=(BigInt(2),BigInt(3));BigInt(4);function zl(e){const t=function(e){const t=Rl(e);ml(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!==typeof n||"bigint"!==typeof n.beta||"function"!==typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze((0,tt.A)({},t))}(e),{Fp:n}=t,r=t.toBytes||((e,t,r)=>{const s=t.toAffine();return cl(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),s=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function i(e){const{a:r,b:s}=t,i=n.sqr(e),o=n.mul(i,e);return n.add(n.add(o,n.mul(e,r)),s)}if(!n.eql(n.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function o(e){return"bigint"===typeof e&&Ul<e&&e<t.n}function a(e){if(!o(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function c(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:s,n:i}=t;if(n&&"bigint"!==typeof e){if(e instanceof Uint8Array&&(e=el(e)),"string"!==typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let o;try{o="bigint"===typeof e?e:rl(al("private key",e,r))}catch(c){throw new Error("private key must be ".concat(r," bytes, hex or bigint, not ").concat(typeof e))}return s&&(o=Sl(o,i)),a(o),o}const l=new Map;function u(e){if(!(e instanceof h))throw new Error("ProjectivePoint expected")}class h{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof h)throw new Error("projective point not allowed");const s=e=>n.eql(e,n.ZERO);return s(t)&&s(r)?h.ZERO:new h(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(h.fromAffine)}static fromHex(e){const t=h.fromAffine(s(al("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(c(e))}_setWindowSize(e){this._WINDOW_SIZE=e,l.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const s=n.sqr(r),o=i(e);if(!n.eql(s,o))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){u(e);const{px:t,py:r,pz:s}=this,{px:i,py:o,pz:a}=e,c=n.eql(n.mul(t,a),n.mul(i,s)),l=n.eql(n.mul(r,a),n.mul(o,s));return c&&l}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,s=n.mul(r,Vl),{px:i,py:o,pz:a}=this;let c=n.ZERO,l=n.ZERO,u=n.ZERO,d=n.mul(i,i),f=n.mul(o,o),m=n.mul(a,a),p=n.mul(i,o);return p=n.add(p,p),u=n.mul(i,a),u=n.add(u,u),c=n.mul(e,u),l=n.mul(s,m),l=n.add(c,l),c=n.sub(f,l),l=n.add(f,l),l=n.mul(c,l),c=n.mul(p,c),u=n.mul(s,u),m=n.mul(e,m),p=n.sub(d,m),p=n.mul(e,p),p=n.add(p,u),u=n.add(d,d),d=n.add(u,d),d=n.add(d,m),d=n.mul(d,p),l=n.add(l,d),m=n.mul(o,a),m=n.add(m,m),d=n.mul(m,p),c=n.sub(c,d),u=n.mul(m,f),u=n.add(u,u),u=n.add(u,u),new h(c,l,u)}add(e){u(e);const{px:r,py:s,pz:i}=this,{px:o,py:a,pz:c}=e;let l=n.ZERO,d=n.ZERO,f=n.ZERO;const m=t.a,p=n.mul(t.b,Vl);let g=n.mul(r,o),y=n.mul(s,a),v=n.mul(i,c),w=n.add(r,s),b=n.add(o,a);w=n.mul(w,b),b=n.add(g,y),w=n.sub(w,b),b=n.add(r,i);let x=n.add(o,c);return b=n.mul(b,x),x=n.add(g,v),b=n.sub(b,x),x=n.add(s,i),l=n.add(a,c),x=n.mul(x,l),l=n.add(y,v),x=n.sub(x,l),f=n.mul(m,b),l=n.mul(p,v),f=n.add(l,f),l=n.sub(y,f),f=n.add(y,f),d=n.mul(l,f),y=n.add(g,g),y=n.add(y,g),v=n.mul(m,v),b=n.mul(p,b),y=n.add(y,v),v=n.sub(g,v),v=n.mul(m,v),b=n.add(b,v),g=n.mul(y,b),d=n.add(d,g),g=n.mul(x,b),l=n.mul(w,l),l=n.sub(l,g),g=n.mul(w,y),f=n.mul(x,f),f=n.add(f,g),new h(l,d,f)}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return f.wNAFCached(this,l,e,e=>{const t=n.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(h.fromAffine)})}multiplyUnsafe(e){const r=h.ZERO;if(e===Ul)return r;if(a(e),e===Bl)return this;const{endo:s}=t;if(!s)return f.unsafeLadder(this,e);let{k1neg:i,k1:o,k2neg:c,k2:l}=s.splitScalar(e),u=r,d=r,m=this;for(;o>Ul||l>Ul;)o&Bl&&(u=u.add(m)),l&Bl&&(d=d.add(m)),m=m.double(),o>>=Bl,l>>=Bl;return i&&(u=u.negate()),c&&(d=d.negate()),d=new h(n.mul(d.px,s.beta),d.py,d.pz),u.add(d)}multiply(e){a(e);let r,s,i=e;const{endo:o}=t;if(o){const{k1neg:e,k1:t,k2neg:a,k2:c}=o.splitScalar(i);let{p:l,f:u}=this.wNAF(t),{p:d,f:m}=this.wNAF(c);l=f.constTimeNegate(e,l),d=f.constTimeNegate(a,d),d=new h(n.mul(d.px,o.beta),d.py,d.pz),r=l.add(d),s=u.add(m)}else{const{p:e,f:t}=this.wNAF(i);r=e,s=t}return h.normalizeZ([r,s])[0]}multiplyAndAddUnsafe(e,t,n){const r=h.BASE,s=(e,t)=>t!==Ul&&t!==Bl&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=s(this,t).add(s(e,n));return i.is0()?void 0:i}toAffine(e){const{px:t,py:r,pz:s}=this,i=this.is0();null==e&&(e=i?n.ONE:n.inv(s));const o=n.mul(t,e),a=n.mul(r,e),c=n.mul(s,e);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:o,y:a}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===Bl)return!0;if(n)return n(h,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===Bl?this:n?n(h,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.assertValidity(),r(h,this,e)}toHex(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return el(this.toRawBytes(e))}}h.BASE=new h(t.Gx,t.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);const d=t.nBitLength,f=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,s=t;for(;n>Dl;)n&Ml&&(r=r.add(s)),s=s.double(),n>>=Ml;return r},precomputeWindow(e,t){const{windows:n,windowSize:s}=r(t),i=[];let o=e,a=o;for(let r=0;r<n;r++){a=o,i.push(a);for(let e=1;e<s;e++)a=a.add(o),i.push(a);o=a.double()}return i},wNAF(t,s,i){const{windows:o,windowSize:a}=r(t);let c=e.ZERO,l=e.BASE;const u=BigInt(2**t-1),h=2**t,d=BigInt(t);for(let e=0;e<o;e++){const t=e*a;let r=Number(i&u);i>>=d,r>a&&(r-=h,i+=Ml);const o=t,f=t+Math.abs(r)-1,m=e%2!==0,p=r<0;0===r?l=l.add(n(m,s[o])):c=c.add(n(p,s[f]))}return{p:c,f:l}},wNAFCached(e,t,n,r){const s=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,s),1!==s&&t.set(e,r(i))),this.wNAF(s,i,n)}}}(h,t.endo?Math.ceil(d/2):d);return{CURVE:t,ProjectivePoint:h,normPrivateKeyToScalar:c,weierstrassEquation:i,isWithinCurveOrder:o}}function Gl(e){const t=function(e){const t=Rl(e);return ml(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze((0,tt.A)({lowS:!0},t))}(e),{Fp:n,n:r}=t,s=n.BYTES+1,i=2*n.BYTES+1;function o(e){return Sl(e,r)}function a(e){return Nl(e,r)}const{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:u,isWithinCurveOrder:h}=zl((0,tt.A)((0,tt.A)({},t),{},{toBytes(e,t,r){const s=t.toAffine(),i=n.toBytes(s.x),o=cl;return r?o(Uint8Array.from([t.hasEvenY()?2:3]),i):o(Uint8Array.from([4]),i,n.toBytes(s.y))},fromBytes(e){const t=e.length,r=e[0],o=e.subarray(1);if(t!==s||2!==r&&3!==r){if(t===i&&4===r){return{x:n.fromBytes(o.subarray(0,n.BYTES)),y:n.fromBytes(o.subarray(n.BYTES,2*n.BYTES))}}throw new Error("Point of length ".concat(t," was invalid. Expected ").concat(s," compressed bytes or ").concat(i," uncompressed bytes"))}{const e=rl(o);if(!(Ul<(a=e)&&a<n.ORDER))throw new Error("Point is not on curve");const t=u(e);let s=n.sqrt(t);return 1===(1&r)!==((s&Bl)===Bl)&&(s=n.neg(s)),{x:e,y:s}}var a}})),d=e=>el(il(e,t.nByteLength));function f(e){return e>r>>Bl}const m=(e,t,n)=>rl(e.slice(t,n));class p{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=al("compactSignature",e,2*n),new p(m(e,0,n),m(e,n,2*n))}static fromDER(e){const{r:t,s:n}=Fl.toSig(al("DER",e));return new p(t,n)}assertValidity(){if(!h(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!h(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new p(this.r,this.s,e)}recoverPublicKey(e){const{r:r,s:s,recovery:i}=this,l=w(al("msgHash",e));if(null==i||![0,1,2,3].includes(i))throw new Error("recovery id invalid");const u=2===i||3===i?r+t.n:r;if(u>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const h=0===(1&i)?"02":"03",f=c.fromHex(h+d(u)),m=a(u),p=o(-l*m),g=o(s*m),y=c.BASE.multiplyAndAddUnsafe(f,p,g);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return f(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,o(-this.s),this.recovery):this}toDERRawBytes(){return nl(this.toDERHex())}toDERHex(){return Fl.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return nl(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}const g={isValidPrivateKey(e){try{return l(e),!0}catch(t){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{const e=_l(t.n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=e.length,s=Il(t),i=_l(t);if(r<16||r<i||r>1024)throw new Error("expected ".concat(i,"-1024 bytes of input, got ").concat(r));const o=Sl(n?rl(e):sl(e),t-gl)+gl;return n?ol(o,s):il(o,s)}(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}};function y(e){const t=e instanceof Uint8Array,n="string"===typeof e,r=(t||n)&&e.length;return t?r===s||r===i:n?r===2*s||r===2*i:e instanceof c}const v=t.bits2int||function(e){const n=rl(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},w=t.bits2int_modN||function(e){return o(v(e))},b=ll(t.nBitLength);function x(e){if("bigint"!==typeof e)throw new Error("bigint expected");if(!(Ul<=e&&e<b))throw new Error("bigint expected < 2^".concat(t.nBitLength));return il(e,t.nByteLength)}function S(e,r){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;if(["recovered","canonical"].some(e=>e in s))throw new Error("sign() legacy options not supported");const{hash:i,randomBytes:u}=t;let{lowS:d,prehash:m,extraEntropy:g}=s;null==d&&(d=!0),e=al("msgHash",e),m&&(e=al("prehashed msgHash",i(e)));const y=w(e),b=l(r),S=[x(b),x(y)];if(null!=g){const e=!0===g?u(n.BYTES):g;S.push(al("extraEntropy",e))}const A=cl(...S),N=y;return{seed:A,k2sig:function(e){const t=v(e);if(!h(t))return;const n=a(t),r=c.BASE.multiply(t).toAffine(),s=o(r.x);if(s===Ul)return;const i=o(n*o(N+s*b));if(i===Ul)return;let l=(r.x===s?0:2)|Number(r.y&Bl),u=i;return d&&f(i)&&(u=function(e){return f(e)?o(-e):e}(i),l^=1),new p(s,u,l)}}}const E={lowS:t.lowS,prehash:!1},A={lowS:t.lowS,prehash:!1};return c.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return c.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(y(e))throw new Error("first arg must be private key");if(!y(t))throw new Error("second arg must be public key");return c.fromHex(t).multiply(l(e)).toRawBytes(n)},sign:function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:E;const{seed:s,k2sig:i}=S(e,n,r),o=t;return dl(o.hash.outputLen,o.nByteLength,o.hmac)(s,i)},verify:function(e,n,r){var s;let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:A;const l=e;if(n=al("msgHash",n),r=al("publicKey",r),"strict"in i)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:h}=i;let d,f;try{if("string"===typeof l||l instanceof Uint8Array)try{d=p.fromDER(l)}catch(E){if(!(E instanceof Fl.Err))throw E;d=p.fromCompact(l)}else{if("object"!==typeof l||"bigint"!==typeof l.r||"bigint"!==typeof l.s)throw new Error("PARSE");{const{r:e,s:t}=l;d=new p(e,t)}}f=c.fromHex(r)}catch(N){if("PARSE"===N.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&d.hasHighS())return!1;h&&(n=t.hash(n));const{r:m,s:g}=d,y=w(n),v=a(g),b=o(y*v),x=o(m*v),S=null===(s=c.BASE.multiplyAndAddUnsafe(f,b,x))||void 0===s?void 0:s.toAffine();return!!S&&o(S.x)===m},ProjectivePoint:c,Signature:p,utils:g}}function Hl(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return jl(e,t,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=new Uint8Array(t.reduce((e,t)=>e+t.length,0));let s=0;return t.forEach(e=>{if(!vn(e))throw new Error("Uint8Array expected");r.set(e,s),s+=e.length}),r}(...r))},randomBytes:An}}const ql=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Wl=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ql=BigInt(1),Kl=BigInt(2),Jl=(e,t)=>(e+t/Kl)/t;function Yl(e){const t=ql,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),o=BigInt(23),a=BigInt(44),c=BigInt(88),l=e*e*e%t,u=l*l*e%t,h=Al(u,n,t)*u%t,d=Al(h,n,t)*u%t,f=Al(d,Kl,t)*l%t,m=Al(f,s,t)*f%t,p=Al(m,i,t)*m%t,g=Al(p,a,t)*p%t,y=Al(g,c,t)*g%t,v=Al(y,a,t)*p%t,w=Al(v,n,t)*u%t,b=Al(w,o,t)*m%t,x=Al(b,r,t)*l%t,S=Al(x,Kl,t);if(!Zl.eql(Zl.sqr(S),e))throw new Error("Cannot find square root");return S}const Zl=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=pl)throw new Error("Expected Field ORDER > 0, got ".concat(e));const{nBitLength:s,nByteLength:i}=Cl(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");const o=Tl(e),a=Object.freeze({ORDER:e,BITS:s,BYTES:i,MASK:ll(s),ZERO:pl,ONE:gl,create:t=>Sl(t,e),isValid:t=>{if("bigint"!==typeof t)throw new Error("Invalid field element: expected bigint, got ".concat(typeof t));return pl<=t&&t<e},is0:e=>e===pl,isOdd:e=>(e&gl)===gl,neg:t=>Sl(-t,e),eql:(e,t)=>e===t,sqr:t=>Sl(t*t,e),add:(t,n)=>Sl(t+n,e),sub:(t,n)=>Sl(t-n,e),mul:(t,n)=>Sl(t*n,e),pow:(e,t)=>function(e,t,n){if(n<pl)throw new Error("Expected power > 0");if(n===pl)return e.ONE;if(n===gl)return t;let r=e.ONE,s=t;for(;n>pl;)n&gl&&(r=e.mul(r,s)),s=e.sqr(s),n>>=gl;return r}(a,e,t),div:(t,n)=>Sl(t*Nl(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>Nl(t,e),sqrt:r.sqrt||(e=>o(a,e)),invertBatch:e=>function(e,t){const n=new Array(t.length),r=t.reduce((t,r,s)=>e.is0(r)?t:(n[s]=t,e.mul(t,r)),e.ONE),s=e.inv(r);return t.reduceRight((t,r,s)=>e.is0(r)?t:(n[s]=e.mul(t,n[s]),e.mul(t,r)),s),n}(a,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?ol(e,i):il(e,i),fromBytes:e=>{if(e.length!==i)throw new Error("Fp.fromBytes: expected ".concat(i,", got ").concat(e.length));return n?sl(e):rl(e)}});return Object.freeze(a)}(ql,void 0,void 0,{sqrt:Yl}),Xl=function(e,t){const n=t=>Gl((0,tt.A)((0,tt.A)({},e),Hl(t)));return Object.freeze((0,tt.A)((0,tt.A)({},n(t)),{},{create:n}))}({a:BigInt(0),b:BigInt(7),Fp:Zl,n:Wl,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Wl,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ql*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,o=BigInt("0x100000000000000000000000000000000"),a=Jl(i*e,t),c=Jl(-r*e,t);let l=Sl(e-a*n-c*s,t),u=Sl(-a*r-c*i,t);const h=l>o,d=u>o;if(h&&(l=t-l),d&&(u=t-u),l>o||u>o)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:h,k1:l,k2neg:d,k2:u}}}},Dc);BigInt(0);Xl.ProjectivePoint;var $l=new WeakMap;class eu{constructor(e){Fe(this,$l,void 0),Ye(32===ht(e),"invalid private key","privateKey","[REDACTED]"),Ve($l,this,lt(e))}get privateKey(){return Be($l,this)}get publicKey(){return eu.computePublicKey(Be($l,this))}get compressedPublicKey(){return eu.computePublicKey(Be($l,this),!0)}sign(e){Ye(32===ht(e),"invalid digest length","digest",e);const t=Xl.sign(it(e),it(Be($l,this)),{lowS:!0});return yi.from({r:Tt(t.r,32),s:Tt(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){const t=eu.computePublicKey(e);return lt(Xl.getSharedSecret(it(Be($l,this)),st(t),!1))}static computePublicKey(e,t){let n=st(e,"key");if(32===n.length){return lt(Xl.getPublicKey(n,!!t))}if(64===n.length){const e=new Uint8Array(65);e[0]=4,e.set(n,1),n=e}return lt(Xl.ProjectivePoint.fromHex(n).toRawBytes(t))}static recoverPublicKey(e,t){Ye(32===ht(e),"invalid digest length","digest",e);const n=yi.from(t);let r=Xl.Signature.fromCompact(it(ut([n.r,n.s])));r=r.addRecoveryBit(n.yParity);const s=r.recoverPublicKey(it(e));return Ye(null!=s,"invalid signature for digest","signature",t),"0x"+s.toHex(!1)}static addPoints(e,t,n){const r=Xl.ProjectivePoint.fromHex(eu.computePublicKey(e).substring(2)),s=Xl.ProjectivePoint.fromHex(eu.computePublicKey(t).substring(2));return"0x"+r.add(s).toHex(!!n)}}function tu(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}function nu(e,t,n){let r=0;for(let s=0;s<n;s++)r=256*r+e[t+s];return r}function ru(e,t,n,r){const s=[];for(;n<t+1+r;){const i=su(e,n);s.push(i.result),Je((n+=i.consumed)<=t+1+r,"child data too short","BUFFER_OVERRUN",{buffer:e,length:r,offset:t})}return{consumed:1+r,result:s}}function su(e,t){Je(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});const n=t=>{Je(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){const r=e[t]-247;n(t+1+r);const s=nu(e,t+1,r);return n(t+1+r+s),ru(e,t,t+1+r,r+s)}if(e[t]>=192){const r=e[t]-192;return n(t+1+r),ru(e,t,t+1,r)}if(e[t]>=184){const r=e[t]-183;n(t+1+r);const s=nu(e,t+1,r);n(t+1+r+s);return{consumed:1+r+s,result:lt(e.slice(t+1+r,t+1+r+s))}}if(e[t]>=128){const r=e[t]-128;n(t+1+r);return{consumed:1+r,result:lt(e.slice(t+1,t+1+r))}}return{consumed:1,result:tu(e[t])}}function iu(e){const t=st(e,"data"),n=su(t,0);return Ye(n.consumed===t.length,"unexpected junk after rlp payload","data",e),n.result}function ou(e){const t=[];for(;e;)t.unshift(255&e),e>>=8;return t}function au(e){if(Array.isArray(e)){let t=[];if(e.forEach(function(e){t=t.concat(au(e))}),t.length<=55)return t.unshift(192+t.length),t;const n=ou(t.length);return n.unshift(247+n.length),n.concat(t)}const t=Array.prototype.slice.call(st(e,"object"));if(1===t.length&&t[0]<=127)return t;if(t.length<=55)return t.unshift(128+t.length),t;const n=ou(t.length);return n.unshift(183+n.length),n.concat(t)}const cu="0123456789abcdef";function lu(e){let t="0x";for(const n of au(e))t+=cu[n>>4],t+=cu[15&n];return t}function uu(e,t){return function(e){let t;return t="string"===typeof e?eu.computePublicKey(e,!1):e.publicKey,Zn(Hn("0x"+t.substring(4)).substring(26))}(eu.recoverPublicKey(e,t))}const hu=BigInt(0),du=BigInt(2),fu=BigInt(27),mu=BigInt(28),pu=BigInt(35),gu=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),yu=131072;function vu(e,t){let n=e.toString(16);for(;n.length<2;)n="0"+n;return n+=Kc(t).substring(4),"0x"+n}function wu(e){return"0x"===e?null:Zn(e)}function bu(e,t){try{return ri(e)}catch(n){Ye(!1,n.message,t,e)}}function xu(e,t){try{if(!Array.isArray(e))throw new Error("authorizationList: invalid array");const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(!Array.isArray(r))throw new Error("authorization[".concat(n,"]: invalid array"));if(6!==r.length)throw new Error("authorization[".concat(n,"]: wrong length"));if(!r[1])throw new Error("authorization[".concat(n,"]: null address"));t.push({address:wu(r[1]),nonce:Eu(r[2],"nonce"),chainId:Eu(r[0],"chainId"),signature:yi.from({yParity:Su(r[3],"yParity"),r:mt(r[4],32),s:mt(r[5],32)})})}return t}catch(n){Ye(!1,n.message,t,e)}}function Su(e,t){return"0x"===e?0:Nt(e,t)}function Eu(e,t){if("0x"===e)return hu;const n=xt(e,t);return Ye(n<=gu,"value exceeds uint size",t,n),n}function Au(e,t){const n=xt(e,"value"),r=kt(n);return Ye(r.length<=32,"value too large","tx.".concat(t),n),r}function Nu(e){return ri(e).map(e=>[e.address,e.storageKeys])}function Tu(e,t){Ye(Array.isArray(e),"invalid ".concat(t),"value",e);for(let n=0;n<e.length;n++)Ye(ot(e[n],32),"invalid ${ param } hash","value[".concat(n,"]"),e[n]);return e}function ku(e,t){let n;try{if(n=Su(t[0],"yParity"),0!==n&&1!==n)throw new Error("bad yParity")}catch(o){Ye(!1,"invalid yParity","yParity",t[0])}const r=mt(t[1],32),s=mt(t[2],32),i=yi.from({r:r,s:s,yParity:n});e.signature=i}var Cu=new WeakMap,Iu=new WeakMap,_u=new WeakMap,Pu=new WeakMap,ju=new WeakMap,Du=new WeakMap,Mu=new WeakMap,Ru=new WeakMap,Ou=new WeakMap,Lu=new WeakMap,Fu=new WeakMap,Uu=new WeakMap,Bu=new WeakMap,Vu=new WeakMap,zu=new WeakMap,Gu=new WeakMap,Hu=new WeakMap,qu=new WeakSet;class Wu{get type(){return Be(Cu,this)}set type(e){switch(e){case null:Ve(Cu,this,null);break;case 0:case"legacy":Ve(Cu,this,0);break;case 1:case"berlin":case"eip-2930":Ve(Cu,this,1);break;case 2:case"london":case"eip-1559":Ve(Cu,this,2);break;case 3:case"cancun":case"eip-4844":Ve(Cu,this,3);break;case 4:case"pectra":case"eip-7702":Ve(Cu,this,4);break;default:Ye(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844";case 4:return"eip-7702"}return null}get to(){const e=Be(Iu,this);return null==e&&3===this.type?so:e}set to(e){Ve(Iu,this,null==e?null:Zn(e))}get nonce(){return Be(Pu,this)}set nonce(e){Ve(Pu,this,Nt(e,"value"))}get gasLimit(){return Be(ju,this)}set gasLimit(e){Ve(ju,this,xt(e))}get gasPrice(){const e=Be(Du,this);return null!=e||0!==this.type&&1!==this.type?e:hu}set gasPrice(e){Ve(Du,this,null==e?null:xt(e,"gasPrice"))}get maxPriorityFeePerGas(){const e=Be(Mu,this);return null==e?2===this.type||3===this.type?hu:null:e}set maxPriorityFeePerGas(e){Ve(Mu,this,null==e?null:xt(e,"maxPriorityFeePerGas"))}get maxFeePerGas(){const e=Be(Ru,this);return null==e?2===this.type||3===this.type?hu:null:e}set maxFeePerGas(e){Ve(Ru,this,null==e?null:xt(e,"maxFeePerGas"))}get data(){return Be(_u,this)}set data(e){Ve(_u,this,lt(e))}get value(){return Be(Ou,this)}set value(e){Ve(Ou,this,xt(e,"value"))}get chainId(){return Be(Lu,this)}set chainId(e){Ve(Lu,this,xt(e))}get signature(){return Be(Fu,this)||null}set signature(e){Ve(Fu,this,null==e?null:yi.from(e))}get accessList(){const e=Be(Uu,this)||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){Ve(Uu,this,null==e?null:ri(e))}get authorizationList(){const e=Be(Hu,this)||null;return null==e&&4===this.type?[]:e}set authorizationList(e){Ve(Hu,this,null==e?null:e.map(e=>vi(e)))}get maxFeePerBlobGas(){const e=Be(Bu,this);return null==e&&3===this.type?hu:e}set maxFeePerBlobGas(e){Ve(Bu,this,null==e?null:xt(e,"maxFeePerBlobGas"))}get blobVersionedHashes(){let e=Be(Vu,this);return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){Ye(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)Ye(ot(e[t],32),"invalid blobVersionedHash","value[".concat(t,"]"),e[t])}Ve(Vu,this,e)}get blobs(){return null==Be(Gu,this)?null:Be(Gu,this).map(e=>Object.assign({},e))}set blobs(e){if(null==e)return void Ve(Gu,this,null);const t=[],n=[];for(let r=0;r<e.length;r++){const s=e[r];if(at(s)){Je(Be(zu,this),"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=st(s);if(Ye(e.length<=yu,"blob is too large","blobs[".concat(r,"]"),s),e.length!==yu){const t=new Uint8Array(yu);t.set(e),e=t}const i=Be(zu,this).blobToKzgCommitment(e),o=lt(Be(zu,this).computeBlobKzgProof(e,i));t.push({data:lt(e),commitment:lt(i),proof:o}),n.push(vu(1,i))}else{const e=lt(s.commitment);t.push({data:lt(s.data),commitment:e,proof:lt(s.proof)}),n.push(vu(1,e))}}Ve(Gu,this,t),Ve(Vu,this,n)}get kzg(){return Be(zu,this)}set kzg(e){Ve(zu,this,null==e?null:function(e){return{blobToKzgCommitment:t=>{if("computeBlobProof"in e){if("blobToKzgCommitment"in e&&"function"===typeof e.blobToKzgCommitment)return st(e.blobToKzgCommitment(lt(t)))}else if("blobToKzgCommitment"in e&&"function"===typeof e.blobToKzgCommitment)return st(e.blobToKzgCommitment(t));if("blobToKZGCommitment"in e&&"function"===typeof e.blobToKZGCommitment)return st(e.blobToKZGCommitment(lt(t)));Ye(!1,"unsupported KZG library","kzg",e)},computeBlobKzgProof:(t,n)=>"computeBlobProof"in e&&"function"===typeof e.computeBlobProof?st(e.computeBlobProof(lt(t),lt(n))):"computeBlobKzgProof"in e&&"function"===typeof e.computeBlobKzgProof?e.computeBlobKzgProof(t,n):"computeBlobKZGProof"in e&&"function"===typeof e.computeBlobKZGProof?st(e.computeBlobKZGProof(lt(t),lt(n))):void Ye(!1,"unsupported KZG library","kzg",e)}}(e))}constructor(){et(this,qu),Fe(this,Cu,void 0),Fe(this,Iu,void 0),Fe(this,_u,void 0),Fe(this,Pu,void 0),Fe(this,ju,void 0),Fe(this,Du,void 0),Fe(this,Mu,void 0),Fe(this,Ru,void 0),Fe(this,Ou,void 0),Fe(this,Lu,void 0),Fe(this,Fu,void 0),Fe(this,Uu,void 0),Fe(this,Bu,void 0),Fe(this,Vu,void 0),Fe(this,zu,void 0),Fe(this,Gu,void 0),Fe(this,Hu,void 0),Ve(Cu,this,null),Ve(Iu,this,null),Ve(Pu,this,0),Ve(ju,this,hu),Ve(Du,this,null),Ve(Mu,this,null),Ve(Ru,this,null),Ve(_u,this,"0x"),Ve(Ou,this,hu),Ve(Lu,this,hu),Ve(Fu,this,null),Ve(Uu,this,null),Ve(Bu,this,null),Ve(Vu,this,null),Ve(zu,this,null),Ve(Gu,this,null),Ve(Hu,this,null)}get hash(){return null==this.signature?null:Hn(Ue(qu,this,Qu).call(this,!0,!1))}get unsignedHash(){return Hn(this.unsignedSerialized)}get from(){return null==this.signature?null:uu(this.unsignedHash,this.signature)}get fromPublicKey(){return null==this.signature?null:eu.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}get serialized(){return Ue(qu,this,Qu).call(this,!0,!0)}get unsignedSerialized(){return Ue(qu,this,Qu).call(this,!1,!1)}inferType(){const e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){const e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,n=null!=this.accessList,r=null!=Be(Bu,this)||Be(Vu,this);null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&Je(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),Je(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),Je(0!==this.type||!n,"legacy transaction cannot have accessList","BAD_DATA",{value:this});const s=[];return null!=this.type?s.push(this.type):this.authorizationList&&this.authorizationList.length?s.push(4):t?s.push(2):e?(s.push(1),n||s.push(0)):n?(s.push(1),s.push(2)):(r&&this.to||(s.push(0),s.push(1),s.push(2)),s.push(3)),s.sort(),s}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return Wu.from(this)}toJSON(){const e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new Wu;if("string"===typeof e){const t=st(e);if(t[0]>=127)return Wu.from(function(e){const t=iu(e);Ye(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);const n={type:0,nonce:Su(t[0],"nonce"),gasPrice:Eu(t[1],"gasPrice"),gasLimit:Eu(t[2],"gasLimit"),to:wu(t[3]),value:Eu(t[4],"value"),data:lt(t[5]),chainId:hu};if(6===t.length)return n;const r=Eu(t[6],"v"),s=Eu(t[7],"r"),i=Eu(t[8],"s");if(s===hu&&i===hu)n.chainId=r;else{let e=(r-pu)/du;e<hu&&(e=hu),n.chainId=e,Ye(e!==hu||r===fu||r===mu,"non-canonical legacy v","v",t[6]),n.signature=yi.from({r:mt(t[7],32),s:mt(t[8],32),v:r})}return n}(t));switch(t[0]){case 1:return Wu.from(function(e){const t=iu(st(e).slice(1));Ye(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",lt(e));const n={type:1,chainId:Eu(t[0],"chainId"),nonce:Su(t[1],"nonce"),gasPrice:Eu(t[2],"gasPrice"),gasLimit:Eu(t[3],"gasLimit"),to:wu(t[4]),value:Eu(t[5],"value"),data:lt(t[6]),accessList:bu(t[7],"accessList")};return 8===t.length||ku(n,t.slice(8)),n}(t));case 2:return Wu.from(function(e){const t=iu(st(e).slice(1));Ye(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",lt(e));const n={type:2,chainId:Eu(t[0],"chainId"),nonce:Su(t[1],"nonce"),maxPriorityFeePerGas:Eu(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Eu(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Eu(t[4],"gasLimit"),to:wu(t[5]),value:Eu(t[6],"value"),data:lt(t[7]),accessList:bu(t[8],"accessList")};return 9===t.length||ku(n,t.slice(9)),n}(t));case 3:return Wu.from(function(e){let t=iu(st(e).slice(1)),n="3",r=null;if(4===t.length&&Array.isArray(t[0])){n="3 (network format)";const e=t[1],s=t[2],i=t[3];Ye(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),Ye(Array.isArray(s),"invalid network format: commitments not an array","fields[2]",s),Ye(Array.isArray(i),"invalid network format: proofs not an array","fields[3]",i),Ye(e.length===s.length,"invalid network format: blobs/commitments length mismatch","fields",t),Ye(e.length===i.length,"invalid network format: blobs/proofs length mismatch","fields",t),r=[];for(let n=0;n<t[1].length;n++)r.push({data:e[n],commitment:s[n],proof:i[n]});t=t[0]}Ye(Array.isArray(t)&&(11===t.length||14===t.length),"invalid field count for transaction type: ".concat(n),"data",lt(e));const s={type:3,chainId:Eu(t[0],"chainId"),nonce:Su(t[1],"nonce"),maxPriorityFeePerGas:Eu(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Eu(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Eu(t[4],"gasLimit"),to:wu(t[5]),value:Eu(t[6],"value"),data:lt(t[7]),accessList:bu(t[8],"accessList"),maxFeePerBlobGas:Eu(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};r&&(s.blobs=r),Ye(null!=s.to,"invalid address for transaction type: ".concat(n),"data",e),Ye(Array.isArray(s.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let i=0;i<s.blobVersionedHashes.length;i++)Ye(ot(s.blobVersionedHashes[i],32),"invalid blobVersionedHash at index ".concat(i,": must be length 32"),"data",e);return 11===t.length||ku(s,t.slice(11)),s}(t));case 4:return Wu.from(function(e){const t=iu(st(e).slice(1));Ye(Array.isArray(t)&&(10===t.length||13===t.length),"invalid field count for transaction type: 4","data",lt(e));const n={type:4,chainId:Eu(t[0],"chainId"),nonce:Su(t[1],"nonce"),maxPriorityFeePerGas:Eu(t[2],"maxPriorityFeePerGas"),maxFeePerGas:Eu(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:Eu(t[4],"gasLimit"),to:wu(t[5]),value:Eu(t[6],"value"),data:lt(t[7]),accessList:bu(t[8],"accessList"),authorizationList:xu(t[9],"authorizationList")};return 10===t.length||ku(n,t.slice(10)),n}(t))}Je(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}const t=new Wu;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=yi.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.authorizationList&&(t.authorizationList=e.authorizationList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&(Ye(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),Ye(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&(Ye(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),Ye(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}function Qu(e,t){Je(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});const n=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){const n=[Au(e.nonce,"nonce"),Au(e.gasPrice||0,"gasPrice"),Au(e.gasLimit,"gasLimit"),e.to||"0x",Au(e.value,"value"),e.data];let r=hu;if(e.chainId!=hu)r=xt(e.chainId,"tx.chainId"),Ye(!t||null==t.networkV||t.legacyChainId===r,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){const t=e.signature.legacyChainId;null!=t&&(r=t)}if(!t)return r!==hu&&(n.push(kt(r)),n.push("0x"),n.push("0x")),lu(n);let s=BigInt(27+t.yParity);return r!==hu?s=yi.getChainIdV(r,t.v):BigInt(t.v)!==s&&Ye(!1,"tx.chainId/sig.v mismatch","sig",t),n.push(kt(s)),n.push(kt(t.r)),n.push(kt(t.s)),lu(n)}(this,n);case 1:return function(e,t){const n=[Au(e.chainId,"chainId"),Au(e.nonce,"nonce"),Au(e.gasPrice||0,"gasPrice"),Au(e.gasLimit,"gasLimit"),e.to||"0x",Au(e.value,"value"),e.data,Nu(e.accessList||[])];return t&&(n.push(Au(t.yParity,"recoveryParam")),n.push(kt(t.r)),n.push(kt(t.s))),ut(["0x01",lu(n)])}(this,n);case 2:return function(e,t){const n=[Au(e.chainId,"chainId"),Au(e.nonce,"nonce"),Au(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Au(e.maxFeePerGas||0,"maxFeePerGas"),Au(e.gasLimit,"gasLimit"),e.to||"0x",Au(e.value,"value"),e.data,Nu(e.accessList||[])];return t&&(n.push(Au(t.yParity,"yParity")),n.push(kt(t.r)),n.push(kt(t.s))),ut(["0x02",lu(n)])}(this,n);case 3:return function(e,t,n){const r=[Au(e.chainId,"chainId"),Au(e.nonce,"nonce"),Au(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Au(e.maxFeePerGas||0,"maxFeePerGas"),Au(e.gasLimit,"gasLimit"),e.to||so,Au(e.value,"value"),e.data,Nu(e.accessList||[]),Au(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),Tu(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(r.push(Au(t.yParity,"yParity")),r.push(kt(t.r)),r.push(kt(t.s)),n)?ut(["0x03",lu([r,n.map(e=>e.data),n.map(e=>e.commitment),n.map(e=>e.proof)])]):ut(["0x03",lu(r)])}(this,n,t?this.blobs:null);case 4:return function(e,t){const n=[Au(e.chainId,"chainId"),Au(e.nonce,"nonce"),Au(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),Au(e.maxFeePerGas||0,"maxFeePerGas"),Au(e.gasLimit,"gasLimit"),e.to||"0x",Au(e.value,"value"),e.data,Nu(e.accessList||[]),(r=e.authorizationList||[],r.map(e=>[Au(e.chainId,"chainId"),e.address,Au(e.nonce,"nonce"),Au(e.signature.yParity,"yParity"),kt(e.signature.r),kt(e.signature.s)]))];var r;return t&&(n.push(Au(t.yParity,"yParity")),n.push(kt(t.r)),n.push(kt(t.s))),ut(["0x04",lu(n)])}(this,n)}Je(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}const Ku="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";BigInt(0);const Ju=BigInt(58);var Yu;function Zu(e){return e.match(/^ipfs:\/\/ipfs\//i)?e=e.substring(12):e.match(/^ipfs:\/\//i)?e=e.substring(7):Ye(!1,"unsupported IPFS format","link",e),"https://gateway.ipfs.io/ipfs/".concat(e)}class Xu{constructor(e){(0,nt.A)(this,"name",void 0),He(this,{name:e})}connect(e){return this}supportsCoinType(e){return!1}async encodeAddress(e,t){throw new Error("unsupported coin")}async decodeAddress(e,t){throw new Error("unsupported coin")}}const $u=new RegExp("^(ipfs)://(.*)$","i"),eh=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),$u,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];var th=new WeakMap,nh=new WeakMap,rh=new WeakSet;class sh{constructor(e,t,n){et(this,rh),(0,nt.A)(this,"provider",void 0),(0,nt.A)(this,"address",void 0),(0,nt.A)(this,"name",void 0),Fe(this,th,void 0),Fe(this,nh,void 0),He(this,{provider:e,address:t,name:n}),Ve(th,this,null),Ve(nh,this,new fa(t,["function supportsInterface(bytes4) view returns (bool)","function resolve(bytes, bytes) view returns (bytes)","function addr(bytes32) view returns (address)","function addr(bytes32, uint) view returns (bytes)","function text(bytes32, string) view returns (string)","function contenthash(bytes32) view returns (bytes)"],e))}async supportsWildcard(){return null==Be(th,this)&&Ve(th,this,(async()=>{try{return await Be(nh,this).supportsInterface("0x9061b923")}catch(e){if(We(e,"CALL_EXCEPTION"))return!1;throw Ve(th,this,null),e}})()),await Be(th,this)}async getAddress(e){if(null==e&&(e=60),60===e)try{const e=await Ue(rh,this,ih).call(this,"addr(bytes32)");return null==e||e===so?null:e}catch(s){if(We(s,"CALL_EXCEPTION"))return null;throw s}if(e>=0&&e<2147483648){let t=e+2147483648;const n=await Ue(rh,this,ih).call(this,"addr(bytes32,uint)",[t]);if(ot(n,20))return Zn(n)}let t=null;for(const i of this.provider.plugins)if(i instanceof Xu&&i.supportsCoinType(e)){t=i;break}if(null==t)return null;const n=await Ue(rh,this,ih).call(this,"addr(bytes32,uint)",[e]);if(null==n||"0x"===n)return null;const r=await t.decodeAddress(e,n);if(null!=r)return r;Je(!1,"invalid coin data","UNSUPPORTED_OPERATION",{operation:"getAddress(".concat(e,")"),info:{coinType:e,data:n}})}async getText(e){const t=await Ue(rh,this,ih).call(this,"text(bytes32,string)",[e]);return null==t||"0x"===t?null:t}async getContentHash(){const e=await Ue(rh,this,ih).call(this,"contenthash(bytes32)");if(null==e||"0x"===e)return null;const t=e.match(/^0x(e3010170|e5010172)(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(t){const e="e3010170"===t[1]?"ipfs":"ipns",n=parseInt(t[4],16);if(t[5].length===2*n)return"".concat(e,"://").concat(function(e){const t=st(e);let n=At(t),r="";for(;n;)r=Ku[Number(n%Ju)]+r,n/=Ju;for(let s=0;s<t.length&&!t[s];s++)r=Ku[0]+r;return r}("0x"+t[2]))}const n=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(n&&64===n[1].length)return"bzz://".concat(n[1]);Je(!1,"invalid or unsupported content hash data","UNSUPPORTED_OPERATION",{operation:"getContentHash()",info:{data:e}})}async getAvatar(){return(await this._getAvatar()).url}async _getAvatar(){const e=[{type:"name",value:this.name}];try{const n=await this.getText("avatar");if(null==n)return e.push({type:"!avatar",value:""}),{url:null,linkage:e};e.push({type:"avatar",value:n});for(let r=0;r<eh.length;r++){const s=n.match(eh[r]);if(null==s)continue;const i=s[1].toLowerCase();switch(i){case"https":case"data":return e.push({type:"url",value:n}),{linkage:e,url:n};case"ipfs":{const t=Zu(n);return e.push({type:"ipfs",value:n}),e.push({type:"url",value:t}),{linkage:e,url:t}}case"erc721":case"erc1155":{const r="erc721"===i?"tokenURI(uint256)":"uri(uint256)";e.push({type:i,value:n});const o=await this.getAddress();if(null==o)return e.push({type:"!owner",value:""}),{url:null,linkage:e};const a=(s[2]||"").split("/");if(2!==a.length)return e.push({type:"!".concat(i,"caip"),value:s[2]||""}),{url:null,linkage:e};const c=a[1],l=new fa(a[0],["function tokenURI(uint) view returns (string)","function ownerOf(uint) view returns (address)","function uri(uint) view returns (string)","function balanceOf(address, uint256) view returns (uint)"],this.provider);if("erc721"===i){const t=await l.ownerOf(c);if(o!==t)return e.push({type:"!owner",value:t}),{url:null,linkage:e};e.push({type:"owner",value:t})}else if("erc1155"===i){const t=await l.balanceOf(o,c);if(!t)return e.push({type:"!balance",value:"0"}),{url:null,linkage:e};e.push({type:"balance",value:t.toString()})}let u=await l[r](c);if(null==u||"0x"===u)return e.push({type:"!metadata-url",value:""}),{url:null,linkage:e};e.push({type:"metadata-url-base",value:u}),"erc1155"===i&&(u=u.replace("{id}",Tt(c,32).substring(2)),e.push({type:"metadata-url-expanded",value:u})),u.match(/^ipfs:/i)&&(u=Zu(u)),e.push({type:"metadata-url",value:u});let h={};const d=await new Ki(u).send();d.assertOk();try{h=d.bodyJson}catch(t){try{e.push({type:"!metadata",value:d.bodyText})}catch(t){const n=d.body;return n&&e.push({type:"!metadata",value:lt(n)}),{url:null,linkage:e}}return{url:null,linkage:e}}if(!h)return e.push({type:"!metadata",value:""}),{url:null,linkage:e};e.push({type:"metadata",value:JSON.stringify(h)});let f=h.image;if("string"!==typeof f)return e.push({type:"!imageUrl",value:""}),{url:null,linkage:e};if(f.match(/^(https:\/\/|data:)/i));else{if(null==f.match($u))return e.push({type:"!imageUrl-ipfs",value:f}),{url:null,linkage:e};e.push({type:"imageUrl-ipfs",value:f}),f=Zu(f)}return e.push({type:"url",value:f}),{linkage:e,url:f}}}}}catch(t){}return{linkage:e,url:null}}static async getEnsAddress(e){const t=await e.getNetwork(),n=t.getPlugin("org.ethers.plugins.network.Ens");return Je(n,"network does not support ENS","UNSUPPORTED_OPERATION",{operation:"getEnsAddress",info:{network:t}}),n.address}static async fromName(e,t){let n=t;for(;;){if(""===n||"."===n)return null;if("eth"!==t&&"eth"===n)return null;const r=await oh.call(sh,e,n);if(null!=r){const s=new sh(e,r,t);return n===t||await s.supportsWildcard()?s:null}n=n.split(".").slice(1).join(".")}}}async function ih(e,t){t=(t||[]).slice();const n=Be(nh,this).interface;t.unshift(Ac(this.name));let r=null;await this.supportsWildcard()&&(r=n.getFunction(e),Je(r,"missing fragment","UNKNOWN_ERROR",{info:{funcName:e}}),t=[Nc(this.name,255),n.encodeFunctionData(r,t)],e="resolve(bytes,bytes)"),t.push({enableCcipRead:!0});try{const s=await Be(nh,this)[e](...t);return r?n.decodeFunctionResult(r,s)[0]:s}catch(s){if(!We(s,"CALL_EXCEPTION"))throw s}return null}async function oh(e,t){const n=await Yu.getEnsAddress(e);try{const r=new fa(n,["function resolver(bytes32) view returns (address)"],e),s=await r.resolver(Ac(t),{enableCcipRead:!0});return s===so?null:s}catch(r){throw r}}Yu=sh;const ah=BigInt(0);function ch(e,t){return function(n){return null==n?t:e(n)}}function lh(e,t){return n=>{if(t&&null==n)return null;if(!Array.isArray(n))throw new Error("not an array");return n.map(t=>e(t))}}function uh(e,t){return n=>{const r={};for(const i in e){let o=i;if(t&&i in t&&!(o in n))for(const e of t[i])if(e in n){o=e;break}try{const t=e[i](n[o]);void 0!==t&&(r[i]=t)}catch(s){const e=s instanceof Error?s.message:"not-an-error";Je(!1,"invalid value for value.".concat(i," (").concat(e,")"),"BAD_DATA",{value:n})}}return r}}function hh(e){return Ye(ot(e,!0),"invalid data","value",e),e}function dh(e){return Ye(ot(e,32),"invalid hash","value",e),e}const fh=uh({address:Zn,blockHash:dh,blockNumber:Nt,data:hh,index:Nt,removed:ch(function(e){switch(e){case!0:case"true":return!0;case!1:case"false":return!1}Ye(!1,"invalid boolean; ".concat(JSON.stringify(e)),"value",e)},!1),topics:lh(dh),transactionHash:dh,transactionIndex:Nt},{index:["logIndex"]});const mh=uh({hash:ch(dh),parentHash:dh,parentBeaconBlockRoot:ch(dh,null),number:Nt,timestamp:Nt,nonce:ch(hh),difficulty:xt,gasLimit:xt,gasUsed:xt,stateRoot:ch(dh,null),receiptsRoot:ch(dh,null),blobGasUsed:ch(xt,null),excessBlobGas:ch(xt,null),miner:ch(Zn),prevRandao:ch(dh,null),extraData:hh,baseFeePerGas:ch(xt)},{prevRandao:["mixHash"]});const ph=uh({transactionIndex:Nt,blockNumber:Nt,transactionHash:dh,address:Zn,topics:lh(dh),data:hh,index:Nt,blockHash:dh},{index:["logIndex"]});const gh=uh({to:ch(Zn,null),from:ch(Zn,null),contractAddress:ch(Zn,null),index:Nt,root:ch(lt),gasUsed:xt,blobGasUsed:ch(xt,null),logsBloom:ch(hh),blockHash:dh,hash:dh,logs:lh(function(e){return ph(e)}),blockNumber:Nt,cumulativeGasUsed:xt,effectiveGasPrice:ch(xt),blobGasPrice:ch(xt,null),status:ch(Nt),type:ch(Nt,0)},{effectiveGasPrice:["gasPrice"],hash:["transactionHash"],index:["transactionIndex"]});function yh(e){e.to&&xt(e.to)===ah&&(e.to="0x0000000000000000000000000000000000000000");const t=uh({hash:dh,index:ch(Nt,void 0),type:e=>"0x"===e||null==e?0:Nt(e),accessList:ch(ri,null),blobVersionedHashes:ch(lh(dh,!0),null),authorizationList:ch(lh(e=>{let t;if(e.signature)t=e.signature;else{let n=e.yParity;"0x1b"===n?n=0:"0x1c"===n&&(n=1),t=Object.assign({},e,{yParity:n})}return{address:Zn(e.address),chainId:xt(e.chainId),nonce:xt(e.nonce),signature:yi.from(t)}},!1),null),blockHash:ch(dh,null),blockNumber:ch(Nt,null),transactionIndex:ch(Nt,null),from:Zn,gasPrice:ch(xt),maxPriorityFeePerGas:ch(xt),maxFeePerGas:ch(xt),maxFeePerBlobGas:ch(xt,null),gasLimit:xt,to:ch(Zn,null),value:xt,nonce:Nt,data:hh,creates:ch(Zn,null),chainId:ch(xt,null)},{data:["input"],gasLimit:["gas"],index:["transactionIndex"]})(e);if(null==t.to&&null==t.creates&&(t.creates=function(e){const t=Zn(e.from);let n=xt(e.nonce,"tx.nonce").toString(16);return n="0"===n?"0x":n.length%2?"0x0"+n:"0x"+n,Zn(dt(Hn(lu([t,n])),12))}(t)),1!==e.type&&2!==e.type||null!=e.accessList||(t.accessList=[]),e.signature?t.signature=yi.from(e.signature):t.signature=yi.from(e),null==t.chainId){const e=t.signature.legacyChainId;null!=e&&(t.chainId=e)}return t.blockHash&&xt(t.blockHash)===ah&&(t.blockHash=null),t}class vh{constructor(e){(0,nt.A)(this,"name",void 0),He(this,{name:e})}clone(){return new vh(this.name)}}class wh extends vh{constructor(e,t){null==e&&(e=0),super("org.ethers.network.plugins.GasCost#".concat(e||0)),(0,nt.A)(this,"effectiveBlock",void 0),(0,nt.A)(this,"txBase",void 0),(0,nt.A)(this,"txCreate",void 0),(0,nt.A)(this,"txDataZero",void 0),(0,nt.A)(this,"txDataNonzero",void 0),(0,nt.A)(this,"txAccessListStorageKey",void 0),(0,nt.A)(this,"txAccessListAddress",void 0);const n={effectiveBlock:e};function r(e,r){let s=(t||{})[e];null==s&&(s=r),Ye("number"===typeof s,"invalud value for ".concat(e),"costs",t),n[e]=s}r("txBase",21e3),r("txCreate",32e3),r("txDataZero",4),r("txDataNonzero",16),r("txAccessListStorageKey",1900),r("txAccessListAddress",2400),He(this,n)}clone(){return new wh(this.effectiveBlock,this)}}class bh extends vh{constructor(e,t){super("org.ethers.plugins.network.Ens"),(0,nt.A)(this,"address",void 0),(0,nt.A)(this,"targetNetwork",void 0),He(this,{address:e||"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",targetNetwork:null==t?1:t})}clone(){return new bh(this.address,this.targetNetwork)}}var xh=new WeakMap,Sh=new WeakMap;class Eh extends vh{get url(){return Be(xh,this)}get processFunc(){return Be(Sh,this)}constructor(e,t){super("org.ethers.plugins.network.FetchUrlFeeDataPlugin"),Fe(this,xh,void 0),Fe(this,Sh,void 0),Ve(xh,this,e),Ve(Sh,this,t)}clone(){return this}}const Ah=new Map;var Nh=new WeakMap,Th=new WeakMap,kh=new WeakMap;class Ch{constructor(e,t){Fe(this,Nh,void 0),Fe(this,Th,void 0),Fe(this,kh,void 0),Ve(Nh,this,e),Ve(Th,this,xt(t)),Ve(kh,this,new Map)}toJSON(){return{name:this.name,chainId:String(this.chainId)}}get name(){return Be(Nh,this)}set name(e){Ve(Nh,this,e)}get chainId(){return Be(Th,this)}set chainId(e){Ve(Th,this,xt(e,"chainId"))}matches(e){if(null==e)return!1;if("string"===typeof e){try{return this.chainId===xt(e)}catch(t){}return this.name===e}if("number"===typeof e||"bigint"===typeof e){try{return this.chainId===xt(e)}catch(t){}return!1}if("object"===typeof e){if(null!=e.chainId){try{return this.chainId===xt(e.chainId)}catch(t){}return!1}return null!=e.name&&this.name===e.name}return!1}get plugins(){return Array.from(Be(kh,this).values())}attachPlugin(e){if(Be(kh,this).get(e.name))throw new Error("cannot replace existing plugin: ".concat(e.name," "));return Be(kh,this).set(e.name,e.clone()),this}getPlugin(e){return Be(kh,this).get(e)||null}getPlugins(e){return this.plugins.filter(t=>t.name.split("#")[0]===e)}clone(){const e=new Ch(this.name,this.chainId);return this.plugins.forEach(t=>{e.attachPlugin(t.clone())}),e}computeIntrinsicGas(e){const t=this.getPlugin("org.ethers.plugins.network.GasCost")||new wh;let n=t.txBase;if(null==e.to&&(n+=t.txCreate),e.data)for(let r=2;r<e.data.length;r+=2)"00"===e.data.substring(r,r+2)?n+=t.txDataZero:n+=t.txDataNonzero;if(e.accessList){const r=ri(e.accessList);for(const e in r)n+=t.txAccessListAddress+t.txAccessListStorageKey*r[e].storageKeys.length}return n}static from(e){if(function(){if(Ph)return;function e(e,t,n){const r=function(){const r=new Ch(e,t);return null!=n.ensNetwork&&r.attachPlugin(new bh(null,n.ensNetwork)),r.attachPlugin(new wh),(n.plugins||[]).forEach(e=>{r.attachPlugin(e)}),r};Ch.register(e,r),Ch.register(t,r),n.altNames&&n.altNames.forEach(e=>{Ch.register(e,r)})}Ph=!0,e("mainnet",1,{ensNetwork:1,altNames:["homestead"]}),e("ropsten",3,{ensNetwork:3}),e("rinkeby",4,{ensNetwork:4}),e("goerli",5,{ensNetwork:5}),e("kovan",42,{ensNetwork:42}),e("sepolia",11155111,{ensNetwork:11155111}),e("holesky",17e3,{ensNetwork:17e3}),e("classic",61,{}),e("classicKotti",6,{}),e("arbitrum",42161,{ensNetwork:1}),e("arbitrum-goerli",421613,{}),e("arbitrum-sepolia",421614,{}),e("base",8453,{ensNetwork:1}),e("base-goerli",84531,{}),e("base-sepolia",84532,{}),e("bnb",56,{ensNetwork:1}),e("bnbt",97,{}),e("linea",59144,{ensNetwork:1}),e("linea-goerli",59140,{}),e("linea-sepolia",59141,{}),e("matic",137,{ensNetwork:1,plugins:[_h("https://gasstation.polygon.technology/v2")]}),e("matic-amoy",80002,{}),e("matic-mumbai",80001,{altNames:["maticMumbai","maticmum"],plugins:[_h("https://gasstation-testnet.polygon.technology/v2")]}),e("optimism",10,{ensNetwork:1,plugins:[]}),e("optimism-goerli",420,{}),e("optimism-sepolia",11155420,{}),e("xdai",100,{ensNetwork:1})}(),null==e)return Ch.from("mainnet");if("number"===typeof e&&(e=BigInt(e)),"string"===typeof e||"bigint"===typeof e){const t=Ah.get(e);if(t)return t();if("bigint"===typeof e)return new Ch("unknown",e);Ye(!1,"unknown network","network",e)}if("function"===typeof e.clone){return e.clone()}if("object"===typeof e){Ye("string"===typeof e.name&&"number"===typeof e.chainId,"invalid network object name or chainId","network",e);const t=new Ch(e.name,e.chainId);return(e.ensAddress||null!=e.ensNetwork)&&t.attachPlugin(new bh(e.ensAddress,e.ensNetwork)),t}Ye(!1,"invalid network","network",e)}static register(e,t){"number"===typeof e&&(e=BigInt(e));const n=Ah.get(e);n&&Ye(!1,"conflicting network for ".concat(JSON.stringify(n.name)),"nameOrChainId",e),Ah.set(e,t)}}function Ih(e,t){const n=String(e);if(!n.match(/^[0-9.]+$/))throw new Error("invalid gwei value: ".concat(e));const r=n.split(".");if(1===r.length&&r.push(""),2!==r.length)throw new Error("invalid gwei value: ".concat(e));for(;r[1].length<t;)r[1]+="0";if(r[1].length>9){let e=BigInt(r[1].substring(0,9));r[1].substring(9).match(/^0+$/)||e++,r[1]=e.toString()}return BigInt(r[0]+r[1])}function _h(e){return new Eh(e,async(e,t,n)=>{let r;n.setHeader("User-Agent","ethers");try{const[t,s]=await Promise.all([n.send(),e()]);r=t;const i=r.bodyJson.standard;return{gasPrice:s.gasPrice,maxFeePerGas:Ih(i.maxFee,9),maxPriorityFeePerGas:Ih(i.maxPriorityFee,9)}}catch(s){Je(!1,"error encountered with polygon gas station (".concat(JSON.stringify(n.url),")"),"SERVER_ERROR",{request:n,response:r,error:s})}})}let Ph=!1;function jh(e){return JSON.parse(JSON.stringify(e))}var Dh=new WeakMap,Mh=new WeakMap,Rh=new WeakMap,Oh=new WeakMap,Lh=new WeakSet;class Fh{constructor(e){et(this,Lh),Fe(this,Dh,void 0),Fe(this,Mh,void 0),Fe(this,Rh,void 0),Fe(this,Oh,void 0),Ve(Dh,this,e),Ve(Mh,this,null),Ve(Rh,this,4e3),Ve(Oh,this,-2)}get pollingInterval(){return Be(Rh,this)}set pollingInterval(e){Ve(Rh,this,e)}start(){Be(Mh,this)||(Ve(Mh,this,Be(Dh,this)._setTimeout(Ue(Lh,this,Uh).bind(this),Be(Rh,this))),Ue(Lh,this,Uh).call(this))}stop(){Be(Mh,this)&&(Be(Dh,this)._clearTimeout(Be(Mh,this)),Ve(Mh,this,null))}pause(e){this.stop(),e&&Ve(Oh,this,-2)}resume(){this.start()}}async function Uh(){try{const e=await Be(Dh,this).getBlockNumber();if(-2===Be(Oh,this))return void Ve(Oh,this,e);if(e!==Be(Oh,this)){for(let t=Be(Oh,this)+1;t<=e;t++){if(null==Be(Mh,this))return;await Be(Dh,this).emit("block",t)}Ve(Oh,this,e)}}catch(e){}null!=Be(Mh,this)&&Ve(Mh,this,Be(Dh,this)._setTimeout(Ue(Lh,this,Uh).bind(this),Be(Rh,this)))}var Bh=new WeakMap,Vh=new WeakMap,zh=new WeakMap;class Gh{constructor(e){Fe(this,Bh,void 0),Fe(this,Vh,void 0),Fe(this,zh,void 0),Ve(Bh,this,e),Ve(zh,this,!1),Ve(Vh,this,e=>{this._poll(e,Be(Bh,this))})}async _poll(e,t){throw new Error("sub-classes must override this")}start(){Be(zh,this)||(Ve(zh,this,!0),Be(Vh,this).call(this,-2),Be(Bh,this).on("block",Be(Vh,this)))}stop(){Be(zh,this)&&(Ve(zh,this,!1),Be(Bh,this).off("block",Be(Vh,this)))}pause(e){this.stop()}resume(){this.start()}}var Hh=new WeakMap,qh=new WeakMap;class Wh extends Gh{constructor(e,t){super(e),Fe(this,Hh,void 0),Fe(this,qh,void 0),Ve(Hh,this,t),Ve(qh,this,-2)}pause(e){e&&Ve(qh,this,-2),super.pause(e)}async _poll(e,t){const n=await t.getBlock(Be(Hh,this));null!=n&&(-2===Be(qh,this)?Ve(qh,this,n.number):n.number>Be(qh,this)&&(t.emit(Be(Hh,this),n.number),Ve(qh,this,n.number)))}}var Qh=new WeakMap;class Kh extends Gh{constructor(e,t){super(e),Fe(this,Qh,void 0),Ve(Qh,this,jh(t))}async _poll(e,t){throw new Error("@TODO")}}var Jh=new WeakMap;class Yh extends Gh{constructor(e,t){super(e),Fe(this,Jh,void 0),Ve(Jh,this,t)}async _poll(e,t){const n=await t.getTransactionReceipt(Be(Jh,this));n&&t.emit(Be(Jh,this),n)}}var Zh=new WeakMap,Xh=new WeakMap,$h=new WeakMap,ed=new WeakMap,td=new WeakMap,nd=new WeakSet;class rd{constructor(e,t){et(this,nd),Fe(this,Zh,void 0),Fe(this,Xh,void 0),Fe(this,$h,void 0),Fe(this,ed,void 0),Fe(this,td,void 0),Ve(Zh,this,e),Ve(Xh,this,jh(t)),Ve($h,this,Ue(nd,this,sd).bind(this)),Ve(ed,this,!1),Ve(td,this,-2)}start(){Be(ed,this)||(Ve(ed,this,!0),-2===Be(td,this)&&Be(Zh,this).getBlockNumber().then(e=>{Ve(td,this,e)}),Be(Zh,this).on("block",Be($h,this)))}stop(){Be(ed,this)&&(Ve(ed,this,!1),Be(Zh,this).off("block",Be($h,this)))}pause(e){this.stop(),e&&Ve(td,this,-2)}resume(){this.start()}}async function sd(e){if(-2===Be(td,this))return;const t=jh(Be(Xh,this));t.fromBlock=Be(td,this)+1,t.toBlock=e;const n=await Be(Zh,this).getLogs(t);if(0!==n.length)for(const r of n)Be(Zh,this).emit(Be(Xh,this),r),Ve(td,this,r.blockNumber);else Be(td,this)<e-60&&Ve(td,this,e-60)}const id=BigInt(2);function od(e){return e&&"function"===typeof e.then}function ad(e,t){return e+":"+JSON.stringify(t,(e,t)=>{if(null==t)return"null";if("bigint"===typeof t)return"bigint:".concat(t.toString());if("string"===typeof t)return t.toLowerCase();if("object"===typeof t&&!Array.isArray(t)){const e=Object.keys(t);return e.sort(),e.reduce((e,n)=>(e[n]=t[n],e),{})}return t})}class cd{constructor(e){(0,nt.A)(this,"name",void 0),He(this,{name:e})}start(){}stop(){}pause(e){}resume(){}}function ld(e){return(e=Array.from(new Set(e).values())).sort(),e}async function ud(e,t){if(null==e)throw new Error("invalid event");if(Array.isArray(e)&&(e={topics:e}),"string"===typeof e)switch(e){case"block":case"debug":case"error":case"finalized":case"network":case"pending":case"safe":return{type:e,tag:e}}if(ot(e,32)){const t=e.toLowerCase();return{type:"transaction",tag:ad("tx",{hash:t}),hash:t}}if(e.orphan){const t=e;return{type:"orphan",tag:ad("orphan",t),filter:(n=t,JSON.parse(JSON.stringify(n)))}}var n;if(e.address||e.topics){const n=e,r={topics:(n.topics||[]).map(e=>null==e?null:Array.isArray(e)?ld(e.map(e=>e.toLowerCase())):e.toLowerCase())};if(n.address){const e=[],s=[],i=n=>{ot(n)?e.push(n):s.push((async()=>{e.push(await Rs(n,t))})())};Array.isArray(n.address)?n.address.forEach(i):i(n.address),s.length&&await Promise.all(s),r.address=ld(e.map(e=>e.toLowerCase()))}return{filter:r,tag:ad("event",r),type:"event"}}Ye(!1,"unknown ProviderEvent","event",e)}function hd(){return(new Date).getTime()}const dd={cacheTimeout:250,pollingInterval:4e3};var fd=new WeakMap,md=new WeakMap,pd=new WeakMap,gd=new WeakMap,yd=new WeakMap,vd=new WeakMap,wd=new WeakMap,bd=new WeakMap,xd=new WeakMap,Sd=new WeakMap,Ed=new WeakMap,Ad=new WeakMap,Nd=new WeakSet;class Td{constructor(e,t){if(et(this,Nd),Fe(this,fd,void 0),Fe(this,md,void 0),Fe(this,pd,void 0),Fe(this,gd,void 0),Fe(this,yd,void 0),Fe(this,vd,void 0),Fe(this,wd,void 0),Fe(this,bd,void 0),Fe(this,xd,void 0),Fe(this,Sd,void 0),Fe(this,Ed,void 0),Fe(this,Ad,void 0),Ve(Ad,this,Object.assign({},dd,t||{})),"any"===e)Ve(vd,this,!0),Ve(yd,this,null);else if(e){const t=Ch.from(e);Ve(vd,this,!1),Ve(yd,this,Promise.resolve(t)),setTimeout(()=>{this.emit("network",t,null)},0)}else Ve(vd,this,!1),Ve(yd,this,null);Ve(bd,this,-1),Ve(wd,this,new Map),Ve(fd,this,new Map),Ve(md,this,new Map),Ve(pd,this,null),Ve(gd,this,!1),Ve(xd,this,1),Ve(Sd,this,new Map),Ve(Ed,this,!1)}get pollingInterval(){return Be(Ad,this).pollingInterval}get provider(){return this}get plugins(){return Array.from(Be(md,this).values())}attachPlugin(e){if(Be(md,this).get(e.name))throw new Error("cannot replace existing plugin: ".concat(e.name," "));return Be(md,this).set(e.name,e.connect(this)),this}getPlugin(e){return Be(md,this).get(e)||null}get disableCcipRead(){return Be(Ed,this)}set disableCcipRead(e){Ve(Ed,this,!!e)}async ccipReadFetch(e,t,n){if(this.disableCcipRead||0===n.length||null==e.to)return null;const r=e.to.toLowerCase(),s=t.toLowerCase(),i=[];for(let a=0;a<n.length;a++){const t=n[a],c=t.replace("{sender}",r).replace("{data}",s),l=new Ki(c);-1===t.indexOf("{data}")&&(l.body={data:s,sender:r}),this.emit("debug",{action:"sendCcipReadFetchRequest",request:l,index:a,urls:n});let u,h="unknown error";try{u=await l.send()}catch(o){i.push(o.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:{error:o}});continue}try{const e=u.bodyJson;if(e.data)return this.emit("debug",{action:"receiveCcipReadFetchResult",request:l,result:e}),e.data;e.message&&(h=e.message),this.emit("debug",{action:"receiveCcipReadFetchError",request:l,result:e})}catch(o){}Je(u.statusCode<400||u.statusCode>=500,"response not found during CCIP fetch: ".concat(h),"OFFCHAIN_FAULT",{reason:"404_MISSING_RESOURCE",transaction:e,info:{url:t,errorMessage:h}}),i.push(h)}Je(!1,"error encountered during CCIP fetch: ".concat(i.map(e=>JSON.stringify(e)).join(", ")),"OFFCHAIN_FAULT",{reason:"500_SERVER_ERROR",transaction:e,info:{urls:n,errorMessages:i}})}_wrapBlock(e,t){return new To(function(e){const t=mh(e);return t.transactions=e.transactions.map(e=>"string"===typeof e?e:yh(e)),t}(e),this)}_wrapLog(e,t){return new ko(function(e){return fh(e)}(e),this)}_wrapTransactionReceipt(e,t){return new Io(function(e){return gh(e)}(e),this)}_wrapTransactionResponse(e,t){return new Po(yh(e),this)}_detectNetwork(){Je(!1,"sub-classes must implement this","UNSUPPORTED_OPERATION",{operation:"_detectNetwork"})}async _perform(e){Je(!1,"unsupported method: ".concat(e.method),"UNSUPPORTED_OPERATION",{operation:e.method,info:e})}async getBlockNumber(){const e=Nt(await Ue(Nd,this,kd).call(this,{method:"getBlockNumber"}),"%response");return Be(bd,this)>=0&&Ve(bd,this,e),e}_getAddress(e){return Rs(e,this)}_getBlockTag(e){if(null==e)return"latest";switch(e){case"earliest":return"0x0";case"finalized":case"latest":case"pending":case"safe":return e}return ot(e)?ot(e,32)?e:Ct(e):("bigint"===typeof e&&(e=Nt(e,"blockTag")),"number"===typeof e?e>=0?Ct(e):Be(bd,this)>=0?Ct(Be(bd,this)+e):this.getBlockNumber().then(t=>Ct(t+e)):void Ye(!1,"invalid blockTag","blockTag",e))}_getFilter(e){const t=(e.topics||[]).map(e=>null==e?null:Array.isArray(e)?ld(e.map(e=>e.toLowerCase())):e.toLowerCase()),n="blockHash"in e?e.blockHash:void 0,r=(e,r,s)=>{let i;switch(e.length){case 0:break;case 1:i=e[0];break;default:e.sort(),i=e}if(n&&(null!=r||null!=s))throw new Error("invalid filter");const o={};return i&&(o.address=i),t.length&&(o.topics=t),r&&(o.fromBlock=r),s&&(o.toBlock=s),n&&(o.blockHash=n),o};let s,i,o=[];if(e.address)if(Array.isArray(e.address))for(const a of e.address)o.push(this._getAddress(a));else o.push(this._getAddress(e.address));return"fromBlock"in e&&(s=this._getBlockTag(e.fromBlock)),"toBlock"in e&&(i=this._getBlockTag(e.toBlock)),o.filter(e=>"string"!==typeof e).length||null!=s&&"string"!==typeof s||null!=i&&"string"!==typeof i?Promise.all([Promise.all(o),s,i]).then(e=>r(e[0],e[1],e[2])):r(o,s,i)}_getTransactionRequest(e){const t=Ao(e),n=[];if(["to","from"].forEach(e=>{if(null==t[e])return;const r=Rs(t[e],this);od(r)?n.push(async function(){t[e]=await r}()):t[e]=r}),null!=t.blockTag){const e=this._getBlockTag(t.blockTag);od(e)?n.push(async function(){t.blockTag=await e}()):t.blockTag=e}return n.length?async function(){return await Promise.all(n),t}():t}async getNetwork(){if(null==Be(yd,this)){const e=(async()=>{try{const e=await this._detectNetwork();return this.emit("network",e,null),e}catch(t){throw Be(yd,this)===e&&Ve(yd,this,null),t}})();return Ve(yd,this,e),(await e).clone()}const e=Be(yd,this),[t,n]=await Promise.all([e,this._detectNetwork()]);return t.chainId!==n.chainId&&(Be(vd,this)?(this.emit("network",n,t),Be(yd,this)===e&&Ve(yd,this,Promise.resolve(n))):Je(!1,"network changed: ".concat(t.chainId," => ").concat(n.chainId," "),"NETWORK_ERROR",{event:"changed"})),t.clone()}async getFeeData(){const e=await this.getNetwork(),t=async()=>{const{_block:t,gasPrice:n,priorityFee:r}=await Ge({_block:Ue(Nd,this,Pd).call(this,"latest",!1),gasPrice:(async()=>{try{return xt(await Ue(Nd,this,kd).call(this,{method:"getGasPrice"}),"%response")}catch(e){}return null})(),priorityFee:(async()=>{try{return xt(await Ue(Nd,this,kd).call(this,{method:"getPriorityFee"}),"%response")}catch(e){}return null})()});let s=null,i=null;const o=this._wrapBlock(t,e);return o&&o.baseFeePerGas&&(i=null!=r?r:BigInt("1000000000"),s=o.baseFeePerGas*id+i),new Eo(n,s,i)},n=e.getPlugin("org.ethers.plugins.network.FetchUrlFeeDataPlugin");if(n){const e=new Ki(n.url),r=await n.processFunc(t,this,e);return new Eo(r.gasPrice,r.maxFeePerGas,r.maxPriorityFeePerGas)}return await t()}async estimateGas(e){let t=this._getTransactionRequest(e);return od(t)&&(t=await t),xt(await Ue(Nd,this,kd).call(this,{method:"estimateGas",transaction:t}),"%response")}async call(e){const{tx:t,blockTag:n}=await Ge({tx:this._getTransactionRequest(e),blockTag:this._getBlockTag(e.blockTag)});return await Ue(Nd,this,Id).call(this,Ue(Nd,this,Cd).call(this,t,n,e.enableCcipRead?0:-1))}async getBalance(e,t){return xt(await Ue(Nd,this,_d).call(this,{method:"getBalance"},e,t),"%response")}async getTransactionCount(e,t){return Nt(await Ue(Nd,this,_d).call(this,{method:"getTransactionCount"},e,t),"%response")}async getCode(e,t){return lt(await Ue(Nd,this,_d).call(this,{method:"getCode"},e,t))}async getStorage(e,t,n){const r=xt(t,"position");return lt(await Ue(Nd,this,_d).call(this,{method:"getStorage",position:r},e,n))}async broadcastTransaction(e){const{blockNumber:t,hash:n,network:r}=await Ge({blockNumber:this.getBlockNumber(),hash:this._perform({method:"broadcastTransaction",signedTransaction:e}),network:this.getNetwork()}),s=Wu.from(e);if(s.hash!==n)throw new Error("@TODO: the returned hash did not match");return this._wrapTransactionResponse(s,r).replaceableTransaction(t)}async getBlock(e,t){const{network:n,params:r}=await Ge({network:this.getNetwork(),params:Ue(Nd,this,Pd).call(this,e,!!t)});return null==r?null:this._wrapBlock(r,n)}async getTransaction(e){const{network:t,params:n}=await Ge({network:this.getNetwork(),params:Ue(Nd,this,kd).call(this,{method:"getTransaction",hash:e})});return null==n?null:this._wrapTransactionResponse(n,t)}async getTransactionReceipt(e){const{network:t,params:n}=await Ge({network:this.getNetwork(),params:Ue(Nd,this,kd).call(this,{method:"getTransactionReceipt",hash:e})});if(null==n)return null;if(null==n.gasPrice&&null==n.effectiveGasPrice){const t=await Ue(Nd,this,kd).call(this,{method:"getTransaction",hash:e});if(null==t)throw new Error("report this; could not find tx or effectiveGasPrice");n.effectiveGasPrice=t.gasPrice}return this._wrapTransactionReceipt(n,t)}async getTransactionResult(e){const{result:t}=await Ge({network:this.getNetwork(),result:Ue(Nd,this,kd).call(this,{method:"getTransactionResult",hash:e})});return null==t?null:lt(t)}async getLogs(e){let t=this._getFilter(e);od(t)&&(t=await t);const{network:n,params:r}=await Ge({network:this.getNetwork(),params:Ue(Nd,this,kd).call(this,{method:"getLogs",filter:t})});return r.map(e=>this._wrapLog(e,n))}_getProvider(e){Je(!1,"provider cannot connect to target network","UNSUPPORTED_OPERATION",{operation:"_getProvider()"})}async getResolver(e){return await sh.fromName(this,e)}async getAvatar(e){const t=await this.getResolver(e);return t?await t.getAvatar():null}async resolveName(e){const t=await this.getResolver(e);return t?await t.getAddress():null}async lookupAddress(e){const t=Ac((e=Zn(e)).substring(2).toLowerCase()+".addr.reverse");try{const n=await sh.getEnsAddress(this),r=new fa(n,["function resolver(bytes32) view returns (address)"],this),s=await r.resolver(t);if(null==s||s===so)return null;const i=new fa(s,["function name(bytes32) view returns (string)"],this),o=await i.name(t);return await this.resolveName(o)!==e?null:o}catch(n){if(We(n,"BAD_DATA")&&"0x"===n.value)return null;if(We(n,"CALL_EXCEPTION"))return null;throw n}}async waitForTransaction(e,t,n){const r=null!=t?t:1;return 0===r?this.getTransactionReceipt(e):new Promise(async(t,s)=>{let i=null;const o=async n=>{try{const s=await this.getTransactionReceipt(e);if(null!=s&&n-s.blockNumber+1>=r)return t(s),void(i&&(clearTimeout(i),i=null))}catch(s){console.log("EEE",s)}this.once("block",o)};null!=n&&(i=setTimeout(()=>{null!=i&&(i=null,this.off("block",o),s(Ke("timeout","TIMEOUT",{reason:"timeout"})))},n)),o(await this.getBlockNumber())})}async waitForBlock(e){Je(!1,"not implemented yet","NOT_IMPLEMENTED",{operation:"waitForBlock"})}_clearTimeout(e){const t=Be(Sd,this).get(e);t&&(t.timer&&clearTimeout(t.timer),Be(Sd,this).delete(e))}_setTimeout(e,t){var n,r;null==t&&(t=0);const s=(Ve(xd,this,(n=Be(xd,this),r=n++,n)),r),i=()=>{Be(Sd,this).delete(s),e()};if(this.paused)Be(Sd,this).set(s,{timer:null,func:i,time:t});else{const e=setTimeout(i,t);Be(Sd,this).set(s,{timer:e,func:i,time:hd()})}return s}_forEachSubscriber(e){for(const t of Be(fd,this).values())e(t.subscriber)}_getSubscriber(e){switch(e.type){case"debug":case"error":case"network":return new cd(e.type);case"block":{const e=new Fh(this);return e.pollingInterval=this.pollingInterval,e}case"safe":case"finalized":return new Wh(this,e.type);case"event":return new rd(this,e.filter);case"transaction":return new Yh(this,e.hash);case"orphan":return new Kh(this,e.filter)}throw new Error("unsupported event: ".concat(e.type))}_recoverSubscriber(e,t){for(const n of Be(fd,this).values())if(n.subscriber===e){n.started&&n.subscriber.stop(),n.subscriber=t,n.started&&t.start(),null!=Be(pd,this)&&t.pause(Be(pd,this));break}}async on(e,t){const n=await Ue(Nd,this,Dd).call(this,e);return n.listeners.push({listener:t,once:!1}),n.started||(n.subscriber.start(),n.started=!0,null!=Be(pd,this)&&n.subscriber.pause(Be(pd,this))),this}async once(e,t){const n=await Ue(Nd,this,Dd).call(this,e);return n.listeners.push({listener:t,once:!0}),n.started||(n.subscriber.start(),n.started=!0,null!=Be(pd,this)&&n.subscriber.pause(Be(pd,this))),this}async emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=await Ue(Nd,this,jd).call(this,e,n);if(!s||0===s.listeners.length)return!1;const i=s.listeners.length;return s.listeners=s.listeners.filter(t=>{let{listener:r,once:s}=t;const i=new Ro(this,s?null:r,e);try{r.call(this,...n,i)}catch(o){}return!s}),0===s.listeners.length&&(s.started&&s.subscriber.stop(),Be(fd,this).delete(s.tag)),i>0}async listenerCount(e){if(e){const t=await Ue(Nd,this,jd).call(this,e);return t?t.listeners.length:0}let t=0;for(const{listeners:n}of Be(fd,this).values())t+=n.length;return t}async listeners(e){if(e){const t=await Ue(Nd,this,jd).call(this,e);return t?t.listeners.map(e=>{let{listener:t}=e;return t}):[]}let t=[];for(const{listeners:n}of Be(fd,this).values())t=t.concat(n.map(e=>{let{listener:t}=e;return t}));return t}async off(e,t){const n=await Ue(Nd,this,jd).call(this,e);if(!n)return this;if(t){const e=n.listeners.map(e=>{let{listener:t}=e;return t}).indexOf(t);e>=0&&n.listeners.splice(e,1)}return t&&0!==n.listeners.length||(n.started&&n.subscriber.stop(),Be(fd,this).delete(n.tag)),this}async removeAllListeners(e){if(e){const{tag:t,started:n,subscriber:r}=await Ue(Nd,this,Dd).call(this,e);n&&r.stop(),Be(fd,this).delete(t)}else for(const[t,{started:n,subscriber:r}]of Be(fd,this))n&&r.stop(),Be(fd,this).delete(t);return this}async addListener(e,t){return await this.on(e,t)}async removeListener(e,t){return this.off(e,t)}get destroyed(){return Be(gd,this)}destroy(){this.removeAllListeners();for(const e of Be(Sd,this).keys())this._clearTimeout(e);Ve(gd,this,!0)}get paused(){return null!=Be(pd,this)}set paused(e){!!e!==this.paused&&(this.paused?this.resume():this.pause(!1))}pause(e){if(Ve(bd,this,-1),null!=Be(pd,this)){if(Be(pd,this)==!!e)return;Je(!1,"cannot change pause type; resume first","UNSUPPORTED_OPERATION",{operation:"pause"})}this._forEachSubscriber(t=>t.pause(e)),Ve(pd,this,!!e);for(const t of Be(Sd,this).values())t.timer&&clearTimeout(t.timer),t.time=hd()-t.time}resume(){if(null!=Be(pd,this)){this._forEachSubscriber(e=>e.resume()),Ve(pd,this,null);for(const e of Be(Sd,this).values()){let t=e.time;t<0&&(t=0),e.time=hd(),setTimeout(e.func,t)}}}}async function kd(e){const t=Be(Ad,this).cacheTimeout;if(t<0)return await this._perform(e);const n=ad(e.method,e);let r=Be(wd,this).get(n);return r||(r=this._perform(e),Be(wd,this).set(n,r),setTimeout(()=>{Be(wd,this).get(n)===r&&Be(wd,this).delete(n)},t)),await r}async function Cd(e,t,n){Je(n<10,"CCIP read exceeded maximum redirections","OFFCHAIN_FAULT",{reason:"TOO_MANY_REDIRECTS",transaction:Object.assign({},e,{blockTag:t,enableCcipRead:!0})});const r=Ao(e);try{return lt(await this._perform({method:"call",transaction:r,blockTag:t}))}catch(s){if(!this.disableCcipRead&&Qe(s)&&s.data&&n>=0&&"latest"===t&&null!=r.to&&"0x556f1830"===dt(s.data,0,4)){const e=s.data,i=await Rs(r.to,this);let o;try{o=function(e){const t={sender:"",urls:[],calldata:"",selector:"",extraData:"",errorArgs:[]};Je(ht(e)>=160,"insufficient OffchainLookup data","OFFCHAIN_FAULT",{reason:"insufficient OffchainLookup data"});const n=dt(e,0,32);Je(dt(n,0,12)===dt(Bd,0,12),"corrupt OffchainLookup sender","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup sender"}),t.sender=dt(n,12);try{const n=[],r=Nt(dt(e,32,64)),s=Nt(dt(e,r,r+32)),i=dt(e,r+32);for(let e=0;e<s;e++){const t=Md(i,32*e);if(null==t)throw new Error("abort");n.push(t)}t.urls=n}catch(s){Je(!1,"corrupt OffchainLookup urls","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup urls"})}try{const n=Rd(e,64);if(null==n)throw new Error("abort");t.calldata=n}catch(s){Je(!1,"corrupt OffchainLookup calldata","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup calldata"})}Je(dt(e,100,128)===dt(Bd,0,28),"corrupt OffchainLookup callbaackSelector","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup callbaackSelector"}),t.selector=dt(e,96,100);try{const n=Rd(e,128);if(null==n)throw new Error("abort");t.extraData=n}catch(s){Je(!1,"corrupt OffchainLookup extraData","OFFCHAIN_FAULT",{reason:"corrupt OffchainLookup extraData"})}return t.errorArgs="sender,urls,calldata,selector,extraData".split(/,/).map(e=>t[e]),t}(dt(s.data,4))}catch(s){Je(!1,s.message,"OFFCHAIN_FAULT",{reason:"BAD_DATA",transaction:r,info:{data:e}})}Je(o.sender.toLowerCase()===i.toLowerCase(),"CCIP Read sender mismatch","CALL_EXCEPTION",{action:"call",data:e,reason:"OffchainLookup",transaction:r,invocation:null,revert:{signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",name:"OffchainLookup",args:o.errorArgs}});const a=await this.ccipReadFetch(r,o.calldata,o.urls);Je(null!=a,"CCIP Read failed to fetch data","OFFCHAIN_FAULT",{reason:"FETCH_FAILED",transaction:r,info:{data:s.data,errorArgs:o.errorArgs}});const c={to:i,data:ut([o.selector,Ud([a,o.extraData])])};this.emit("debug",{action:"sendCcipReadCall",transaction:c});try{const e=await Ue(Nd,this,Cd).call(this,c,t,n+1);return this.emit("debug",{action:"receiveCcipReadCallResult",transaction:Object.assign({},c),result:e}),e}catch(s){throw this.emit("debug",{action:"receiveCcipReadCallError",transaction:Object.assign({},c),error:s}),s}}throw s}}async function Id(e){const{value:t}=await Ge({network:this.getNetwork(),value:e});return t}async function _d(e,t,n){let r=this._getAddress(t),s=this._getBlockTag(n);return"string"===typeof r&&"string"===typeof s||([r,s]=await Promise.all([r,s])),await Ue(Nd,this,Id).call(this,Ue(Nd,this,kd).call(this,Object.assign(e,{address:r,blockTag:s})))}async function Pd(e,t){if(ot(e,32))return await Ue(Nd,this,kd).call(this,{method:"getBlock",blockHash:e,includeTransactions:t});let n=this._getBlockTag(e);return"string"!==typeof n&&(n=await n),await Ue(Nd,this,kd).call(this,{method:"getBlock",blockTag:n,includeTransactions:t})}async function jd(e,t){let n=await ud(e,this);return"event"===n.type&&t&&t.length>0&&!0===t[0].removed&&(n=await ud({orphan:"drop-log",log:t[0]},this)),Be(fd,this).get(n.tag)||null}async function Dd(e){const t=await ud(e,this),n=t.tag;let r=Be(fd,this).get(n);if(!r){r={subscriber:this._getSubscriber(t),tag:n,addressableMap:new WeakMap,nameMap:new Map,started:!1,listeners:[]},Be(fd,this).set(n,r)}return r}function Md(e,t){try{const n=Rd(e,t);if(n)return Er(n)}catch(n){}return null}function Rd(e,t){if("0x"===e)return null;try{const n=Nt(dt(e,t,t+32)),r=Nt(dt(e,n,n+32));return dt(e,n+32,n+32+r)}catch(n){}return null}function Od(e){const t=kt(e);if(t.length>32)throw new Error("internal; should not happen");const n=new Uint8Array(32);return n.set(t,32-t.length),n}function Ld(e){if(e.length%32===0)return e;const t=new Uint8Array(32*Math.ceil(e.length/32));return t.set(e),t}const Fd=new Uint8Array([]);function Ud(e){const t=[];let n=0;for(let r=0;r<e.length;r++)t.push(Fd),n+=32;for(let r=0;r<e.length;r++){const s=st(e[r]);t[r]=Od(n),t.push(Od(s.length)),t.push(Ld(s)),n+=32+32*Math.ceil(s.length/32)}return ut(t)}const Bd="0x0000000000000000000000000000000000000000000000000000000000000000";function Vd(e,t){if(e.provider)return e.provider;Je(!1,"missing provider","UNSUPPORTED_OPERATION",{operation:t})}async function zd(e,t){let n=Ao(t);if(null!=n.to&&(n.to=Rs(n.to,e)),null!=n.from){const t=n.from;n.from=Promise.all([e.getAddress(),Rs(t,e)]).then(e=>{let[t,n]=e;return Ye(t.toLowerCase()===n.toLowerCase(),"transaction from mismatch","tx.from",n),t})}else n.from=e.getAddress();return await Ge(n)}class Gd{constructor(e){(0,nt.A)(this,"provider",void 0),He(this,{provider:e||null})}async getNonce(e){return Vd(this,"getTransactionCount").getTransactionCount(await this.getAddress(),e)}async populateCall(e){return await zd(this,e)}async populateTransaction(e){const t=Vd(this,"populateTransaction"),n=await zd(this,e);null==n.nonce&&(n.nonce=await this.getNonce("pending")),null==n.gasLimit&&(n.gasLimit=await this.estimateGas(n));const r=await this.provider.getNetwork();if(null!=n.chainId){Ye(xt(n.chainId)===r.chainId,"transaction chainId mismatch","tx.chainId",e.chainId)}else n.chainId=r.chainId;const s=null!=n.maxFeePerGas||null!=n.maxPriorityFeePerGas;if(null==n.gasPrice||2!==n.type&&!s?0!==n.type&&1!==n.type||!s||Ye(!1,"pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","tx",e):Ye(!1,"eip-1559 transaction do not support gasPrice","tx",e),2!==n.type&&null!=n.type||null==n.maxFeePerGas||null==n.maxPriorityFeePerGas)if(0===n.type||1===n.type){const e=await t.getFeeData();Je(null!=e.gasPrice,"network does not support gasPrice","UNSUPPORTED_OPERATION",{operation:"getGasPrice"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice)}else{const e=await t.getFeeData();if(null==n.type)if(null!=e.maxFeePerGas&&null!=e.maxPriorityFeePerGas)if(n.authorizationList&&n.authorizationList.length?n.type=4:n.type=2,null!=n.gasPrice){const e=n.gasPrice;delete n.gasPrice,n.maxFeePerGas=e,n.maxPriorityFeePerGas=e}else null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas);else null!=e.gasPrice?(Je(!s,"network does not support EIP-1559","UNSUPPORTED_OPERATION",{operation:"populateTransaction"}),null==n.gasPrice&&(n.gasPrice=e.gasPrice),n.type=0):Je(!1,"failed to get consistent fee data","UNSUPPORTED_OPERATION",{operation:"signer.getFeeData"});else 2!==n.type&&3!==n.type&&4!==n.type||(null==n.maxFeePerGas&&(n.maxFeePerGas=e.maxFeePerGas),null==n.maxPriorityFeePerGas&&(n.maxPriorityFeePerGas=e.maxPriorityFeePerGas))}else n.type=2;return await Ge(n)}async populateAuthorization(e){const t=Object.assign({},e);return null==t.chainId&&(t.chainId=(await Vd(this,"getNetwork").getNetwork()).chainId),null==t.nonce&&(t.nonce=await this.getNonce()),t}async estimateGas(e){return Vd(this,"estimateGas").estimateGas(await this.populateCall(e))}async call(e){return Vd(this,"call").call(await this.populateCall(e))}async resolveName(e){const t=Vd(this,"resolveName");return await t.resolveName(e)}async sendTransaction(e){const t=Vd(this,"sendTransaction"),n=await this.populateTransaction(e);delete n.from;const r=Wu.from(n);return await t.broadcastTransaction(await this.signTransaction(r))}authorize(e){Je(!1,"authorization not implemented for this signer","UNSUPPORTED_OPERATION",{operation:"authorize"})}}var Hd=new WeakMap,qd=new WeakMap,Wd=new WeakMap,Qd=new WeakMap,Kd=new WeakMap,Jd=new WeakMap,Yd=new WeakSet;class Zd{constructor(e){et(this,Yd),Fe(this,Hd,void 0),Fe(this,qd,void 0),Fe(this,Wd,void 0),Fe(this,Qd,void 0),Fe(this,Kd,void 0),Fe(this,Jd,void 0),Ve(Hd,this,e),Ve(qd,this,null),Ve(Wd,this,Ue(Yd,this,Xd).bind(this)),Ve(Qd,this,!1),Ve(Kd,this,null),Ve(Jd,this,!1)}_subscribe(e){throw new Error("subclasses must override this")}_emitResults(e,t){throw new Error("subclasses must override this")}_recover(e){throw new Error("subclasses must override this")}start(){Be(Qd,this)||(Ve(Qd,this,!0),Ue(Yd,this,Xd).call(this,-2))}stop(){Be(Qd,this)&&(Ve(Qd,this,!1),Ve(Jd,this,!0),Ue(Yd,this,$d).call(this),Be(Hd,this).off("block",Be(Wd,this)))}pause(e){e&&Ue(Yd,this,$d).call(this),Be(Hd,this).off("block",Be(Wd,this))}resume(){this.start()}}async function Xd(e){try{null==Be(qd,this)&&Ve(qd,this,this._subscribe(Be(Hd,this)));let e=null;try{e=await Be(qd,this)}catch(t){if(!We(t,"UNSUPPORTED_OPERATION")||"eth_newFilter"!==t.operation)throw t}if(null==e)return Ve(qd,this,null),void Be(Hd,this)._recoverSubscriber(this,this._recover(Be(Hd,this)));const n=await Be(Hd,this).getNetwork();if(Be(Kd,this)||Ve(Kd,this,n),Be(Kd,this).chainId!==n.chainId)throw new Error("chaid changed");if(Be(Jd,this))return;const r=await Be(Hd,this).send("eth_getFilterChanges",[e]);await this._emitResults(Be(Hd,this),r)}catch(t){console.log("@TODO",t)}Be(Hd,this).once("block",Be(Wd,this))}function $d(){const e=Be(qd,this);e&&(Ve(qd,this,null),e.then(e=>{Be(Hd,this).destroyed||Be(Hd,this).send("eth_uninstallFilter",[e])}))}var ef=new WeakMap;class tf extends Zd{constructor(e,t){var n;super(e),Fe(this,ef,void 0),Ve(ef,this,(n=t,JSON.parse(JSON.stringify(n))))}_recover(e){return new rd(e,Be(ef,this))}async _subscribe(e){return await e.send("eth_newFilter",[Be(ef,this)])}async _emitResults(e,t){for(const n of t)e.emit(Be(ef,this),e._wrapLog(n,e._network))}}class nf extends Zd{async _subscribe(e){return await e.send("eth_newPendingTransactionFilter",[])}async _emitResults(e,t){for(const n of t)e.emit("pending",n)}}const rf="bigint,boolean,function,number,string,symbol".split(/,/g);function sf(e){if(null==e||rf.indexOf(typeof e)>=0)return e;if("function"===typeof e.getAddress)return e;if(Array.isArray(e))return e.map(sf);if("object"===typeof e)return Object.keys(e).reduce((t,n)=>(t[n]=e[n],t),{});throw new Error("should not happen: ".concat(e," (").concat(typeof e,")"))}function of(e){return new Promise(t=>{setTimeout(t,e)})}function af(e){return e?e.toLowerCase():e}function cf(e){return e&&"number"===typeof e.pollingInterval}const lf={polling:!1,staticNetwork:null,batchStallTime:10,batchMaxSize:1<<20,batchMaxCount:100,cacheTimeout:250,pollingInterval:4e3};class uf extends Gd{constructor(e,t){super(e),(0,nt.A)(this,"address",void 0),He(this,{address:t=Zn(t)})}connect(e){Je(!1,"cannot reconnect JsonRpcSigner","UNSUPPORTED_OPERATION",{operation:"signer.connect"})}async getAddress(){return this.address}async populateTransaction(e){return await this.populateCall(e)}async sendUncheckedTransaction(e){const t=sf(e),n=[];if(t.from){const r=t.from;n.push((async()=>{const n=await Rs(r,this.provider);Ye(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n})())}else t.from=this.address;if(null==t.gasLimit&&n.push((async()=>{t.gasLimit=await this.provider.estimateGas((0,tt.A)((0,tt.A)({},t),{},{from:this.address}))})()),null!=t.to){const e=t.to;n.push((async()=>{t.to=await Rs(e,this.provider)})())}n.length&&await Promise.all(n);const r=this.provider.getRpcTransaction(t);return this.provider.send("eth_sendTransaction",[r])}async sendTransaction(e){const t=await this.provider.getBlockNumber(),n=await this.sendUncheckedTransaction(e);return await new Promise((e,r)=>{const s=[1e3,100];let i=0;const o=async()=>{try{const r=await this.provider.getTransaction(n);if(null!=r)return void e(r.replaceableTransaction(t))}catch(a){if(We(a,"CANCELLED")||We(a,"BAD_DATA")||We(a,"NETWORK_ERROR")||We(a,"UNSUPPORTED_OPERATION"))return null==a.info&&(a.info={}),a.info.sendTransactionHash=n,void r(a);if(We(a,"INVALID_ARGUMENT")&&(i++,null==a.info&&(a.info={}),a.info.sendTransactionHash=n,i>10))return void r(a);this.provider.emit("error",Ke("failed to fetch transation after sending (will try again)","UNKNOWN_ERROR",{error:a}))}this.provider._setTimeout(()=>{o()},s.pop()||4e3)};o()})}async signTransaction(e){const t=sf(e);if(t.from){const n=await Rs(t.from,this.provider);Ye(null!=n&&n.toLowerCase()===this.address.toLowerCase(),"from address mismatch","transaction",e),t.from=n}else t.from=this.address;const n=this.provider.getRpcTransaction(t);return await this.provider.send("eth_signTransaction",[n])}async signMessage(e){const t="string"===typeof e?Sr(e):e;return await this.provider.send("personal_sign",[lt(t),this.address.toLowerCase()])}async signTypedData(e,t,n){const r=sf(n),s=await ei.resolveNames(e,t,r,async e=>{const t=await Rs(e);return Ye(null!=t,"TypedData does not support null address","value",e),t});return await this.provider.send("eth_signTypedData_v4",[this.address.toLowerCase(),JSON.stringify(ei.getPayload(s.domain,t,s.value))])}async unlock(e){return this.provider.send("personal_unlockAccount",[this.address.toLowerCase(),e,null])}async _legacySignMessage(e){const t="string"===typeof e?Sr(e):e;return await this.provider.send("eth_sign",[this.address.toLowerCase(),lt(t)])}}var hf=new WeakMap,df=new WeakMap,ff=new WeakMap,mf=new WeakMap,pf=new WeakMap,gf=new WeakMap,yf=new WeakMap,vf=new WeakSet;class wf extends Td{constructor(e,t){super(e,t),et(this,vf),Fe(this,hf,void 0),Fe(this,df,void 0),Fe(this,ff,void 0),Fe(this,mf,void 0),Fe(this,pf,void 0),Fe(this,gf,void 0),Fe(this,yf,void 0),Ve(df,this,1),Ve(hf,this,Object.assign({},lf,t||{})),Ve(ff,this,[]),Ve(mf,this,null),Ve(gf,this,null),Ve(yf,this,null);{let e=null;const t=new Promise(t=>{e=t});Ve(pf,this,{promise:t,resolve:e})}const n=this._getOption("staticNetwork");"boolean"===typeof n?(Ye(!n||"any"!==e,"staticNetwork cannot be used on special network 'any'","options",t),n&&null!=e&&Ve(gf,this,Ch.from(e))):n&&(Ye(null==e||n.matches(e),"staticNetwork MUST match network object","options",t),Ve(gf,this,n))}_getOption(e){return Be(hf,this)[e]}get _network(){return Je(Be(gf,this),"network is not available yet","NETWORK_ERROR"),Be(gf,this)}async _perform(e){if("call"===e.method||"estimateGas"===e.method){let t=e.transaction;if(t&&null!=t.type&&xt(t.type)&&null==t.maxFeePerGas&&null==t.maxPriorityFeePerGas){const n=await this.getFeeData();null==n.maxFeePerGas&&null==n.maxPriorityFeePerGas&&(e=Object.assign({},e,{transaction:Object.assign({},t,{type:void 0})}))}}const t=this.getRpcRequest(e);return null!=t?await this.send(t.method,t.args):super._perform(e)}async _detectNetwork(){const e=this._getOption("staticNetwork");if(e){if(!0!==e)return e;if(Be(gf,this))return Be(gf,this)}return Be(yf,this)?await Be(yf,this):this.ready?(Ve(yf,this,(async()=>{try{const e=Ch.from(xt(await this.send("eth_chainId",[])));return Ve(yf,this,null),e}catch(e){throw Ve(yf,this,null),e}})()),await Be(yf,this)):(Ve(yf,this,(async(e,t)=>{const n={id:(Ve(df,this,(e=Be(df,this),t=e++,e)),t),method:"eth_chainId",params:[],jsonrpc:"2.0"};let r;this.emit("debug",{action:"sendRpcPayload",payload:n});try{r=(await this._send(n))[0],Ve(yf,this,null)}catch(s){throw Ve(yf,this,null),this.emit("debug",{action:"receiveRpcError",error:s}),s}if(this.emit("debug",{action:"receiveRpcResult",result:r}),"result"in r)return Ch.from(xt(r.result));throw this.getRpcError(n,r)})()),await Be(yf,this))}_start(){null!=Be(pf,this)&&null!=Be(pf,this).resolve&&(Be(pf,this).resolve(),Ve(pf,this,null),(async()=>{for(;null==Be(gf,this)&&!this.destroyed;)try{Ve(gf,this,await this._detectNetwork())}catch(e){if(this.destroyed)break;console.log("JsonRpcProvider failed to detect network and cannot start up; retry in 1s (perhaps the URL is wrong or the node is not started)"),this.emit("error",Ke("failed to bootstrap network detection","NETWORK_ERROR",{event:"initial-network-discovery",info:{error:e}})),await of(1e3)}Ue(vf,this,bf).call(this)})())}async _waitUntilReady(){if(null!=Be(pf,this))return await Be(pf,this).promise}_getSubscriber(e){return"pending"===e.type?new nf(this):"event"===e.type?this._getOption("polling")?new rd(this,e.filter):new tf(this,e.filter):"orphan"===e.type&&"drop-log"===e.filter.orphan?new cd("orphan"):super._getSubscriber(e)}get ready(){return null==Be(pf,this)}getRpcTransaction(e){const t={};return["chainId","gasLimit","gasPrice","type","maxFeePerGas","maxPriorityFeePerGas","nonce","value"].forEach(n=>{if(null==e[n])return;let r=n;"gasLimit"===n&&(r="gas"),t[r]=Ct(xt(e[n],"tx.".concat(n)))}),["from","to","data"].forEach(n=>{null!=e[n]&&(t[n]=lt(e[n]))}),e.accessList&&(t.accessList=ri(e.accessList)),e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes.map(e=>e.toLowerCase())),e.authorizationList&&(t.authorizationList=e.authorizationList.map(e=>{const t=vi(e);return{address:t.address,nonce:Ct(t.nonce),chainId:Ct(t.chainId),yParity:Ct(t.signature.yParity),r:Ct(t.signature.r),s:Ct(t.signature.s)}})),t}getRpcRequest(e){switch(e.method){case"chainId":return{method:"eth_chainId",args:[]};case"getBlockNumber":return{method:"eth_blockNumber",args:[]};case"getGasPrice":return{method:"eth_gasPrice",args:[]};case"getPriorityFee":return{method:"eth_maxPriorityFeePerGas",args:[]};case"getBalance":return{method:"eth_getBalance",args:[af(e.address),e.blockTag]};case"getTransactionCount":return{method:"eth_getTransactionCount",args:[af(e.address),e.blockTag]};case"getCode":return{method:"eth_getCode",args:[af(e.address),e.blockTag]};case"getStorage":return{method:"eth_getStorageAt",args:[af(e.address),"0x"+e.position.toString(16),e.blockTag]};case"broadcastTransaction":return{method:"eth_sendRawTransaction",args:[e.signedTransaction]};case"getBlock":if("blockTag"in e)return{method:"eth_getBlockByNumber",args:[e.blockTag,!!e.includeTransactions]};if("blockHash"in e)return{method:"eth_getBlockByHash",args:[e.blockHash,!!e.includeTransactions]};break;case"getTransaction":return{method:"eth_getTransactionByHash",args:[e.hash]};case"getTransactionReceipt":return{method:"eth_getTransactionReceipt",args:[e.hash]};case"call":return{method:"eth_call",args:[this.getRpcTransaction(e.transaction),e.blockTag]};case"estimateGas":return{method:"eth_estimateGas",args:[this.getRpcTransaction(e.transaction)]};case"getLogs":return e.filter&&null!=e.filter.address&&(Array.isArray(e.filter.address)?e.filter.address=e.filter.address.map(af):e.filter.address=af(e.filter.address)),{method:"eth_getLogs",args:[e.filter]}}return null}getRpcError(e,t){const{method:n}=e,{error:r}=t;if("eth_estimateGas"===n&&r.message){const t=r.message;if(!t.match(/revert/i)&&t.match(/insufficient funds/i))return Ke("insufficient funds","INSUFFICIENT_FUNDS",{transaction:e.params[0],info:{payload:e,error:r}});if(t.match(/nonce/i)&&t.match(/too low/i))return Ke("nonce has already been used","NONCE_EXPIRED",{transaction:e.params[0],info:{payload:e,error:r}})}if("eth_call"===n||"eth_estimateGas"===n){const t=Ef(r),s=Ps.getBuiltinCallException("eth_call"===n?"call":"estimateGas",e.params[0],t?t.data:null);return s.info={error:r,payload:e},s}const s=JSON.stringify(function(e){const t=[];return Af(e,t),t}(r));if("string"===typeof r.message&&r.message.match(/user denied|ethers-user-denied/i)){return Ke("user rejected action","ACTION_REJECTED",{action:{eth_sign:"signMessage",personal_sign:"signMessage",eth_signTypedData_v4:"signTypedData",eth_signTransaction:"signTransaction",eth_sendTransaction:"sendTransaction",eth_requestAccounts:"requestAccess",wallet_requestAccounts:"requestAccess"}[n]||"unknown",reason:"rejected",info:{payload:e,error:r}})}if("eth_sendRawTransaction"===n||"eth_sendTransaction"===n){const t=e.params[0];if(s.match(/insufficient funds|base fee exceeds gas limit/i))return Ke("insufficient funds for intrinsic transaction cost","INSUFFICIENT_FUNDS",{transaction:t,info:{error:r}});if(s.match(/nonce/i)&&s.match(/too low/i))return Ke("nonce has already been used","NONCE_EXPIRED",{transaction:t,info:{error:r}});if(s.match(/replacement transaction/i)&&s.match(/underpriced/i))return Ke("replacement fee too low","REPLACEMENT_UNDERPRICED",{transaction:t,info:{error:r}});if(s.match(/only replay-protected/i))return Ke("legacy pre-eip-155 transactions not supported","UNSUPPORTED_OPERATION",{operation:n,info:{transaction:t,info:{error:r}}})}let i=!!s.match(/the method .* does not exist/i);return i||r&&r.details&&r.details.startsWith("Unauthorized method:")&&(i=!0),i?Ke("unsupported operation","UNSUPPORTED_OPERATION",{operation:e.method,info:{error:r,payload:e}}):Ke("could not coalesce error","UNKNOWN_ERROR",{error:r,payload:e})}send(e,t){var n,r;if(this.destroyed)return Promise.reject(Ke("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e}));const s=(Ve(df,this,(n=Be(df,this),r=n++,n)),r),i=new Promise((n,r)=>{Be(ff,this).push({resolve:n,reject:r,payload:{method:e,params:t,id:s,jsonrpc:"2.0"}})});return Ue(vf,this,bf).call(this),i}async getSigner(e){null==e&&(e=0);const t=this.send("eth_accounts",[]);if("number"===typeof e){const n=await t;if(e>=n.length)throw new Error("no such account");return new uf(this,n[e])}const{accounts:n}=await Ge({network:this.getNetwork(),accounts:t});e=Zn(e);for(const r of n)if(Zn(r)===e)return new uf(this,e);throw new Error("invalid account")}async listAccounts(){return(await this.send("eth_accounts",[])).map(e=>new uf(this,e))}destroy(){Be(mf,this)&&(clearTimeout(Be(mf,this)),Ve(mf,this,null));for(const{payload:e,reject:t}of Be(ff,this))t(Ke("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:e.method}));Ve(ff,this,[]),super.destroy()}}function bf(){if(Be(mf,this))return;const e=1===this._getOption("batchMaxCount")?0:this._getOption("batchStallTime");Ve(mf,this,setTimeout(()=>{Ve(mf,this,null);const e=Be(ff,this);for(Ve(ff,this,[]);e.length;){const t=[e.shift()];for(;e.length&&t.length!==Be(hf,this).batchMaxCount;){t.push(e.shift());if(JSON.stringify(t.map(e=>e.payload)).length>Be(hf,this).batchMaxSize){e.unshift(t.pop());break}}(async()=>{const e=1===t.length?t[0].payload:t.map(e=>e.payload);this.emit("debug",{action:"sendRpcPayload",payload:e});try{const n=await this._send(e);this.emit("debug",{action:"receiveRpcResult",result:n});for(const{resolve:e,reject:r,payload:s}of t){if(this.destroyed){r(Ke("provider destroyed; cancelled request","UNSUPPORTED_OPERATION",{operation:s.method}));continue}const t=n.filter(e=>e.id===s.id)[0];if(null==t){const e=Ke("missing response for request","BAD_DATA",{value:n,info:{payload:s}});this.emit("error",e),r(e);continue}"error"in t?r(this.getRpcError(s,t)):e(t.result)}}catch(n){this.emit("debug",{action:"receiveRpcError",error:n});for(const{reject:e}of t)e(n)}})()}},e))}var xf=new WeakMap;class Sf extends wf{constructor(e,t){super(e,t),Fe(this,xf,void 0);let n=this._getOption("pollingInterval");null==n&&(n=lf.pollingInterval),Ve(xf,this,n)}_getSubscriber(e){const t=super._getSubscriber(e);return cf(t)&&(t.pollingInterval=Be(xf,this)),t}get pollingInterval(){return Be(xf,this)}set pollingInterval(e){if(!Number.isInteger(e)||e<0)throw new Error("invalid interval");Ve(xf,this,e),this._forEachSubscriber(e=>{cf(e)&&(e.pollingInterval=Be(xf,this))})}}function Ef(e){if(null==e)return null;if("string"===typeof e.message&&e.message.match(/revert/i)&&ot(e.data))return{message:e.message,data:e.data};if("object"===typeof e){for(const t in e){const n=Ef(e[t]);if(n)return n}return null}if("string"===typeof e)try{return Ef(JSON.parse(e))}catch(t){}return null}function Af(e,t){if(null!=e){if("string"===typeof e.message&&t.push(e.message),"object"===typeof e)for(const n in e)Af(e[n],t);if("string"===typeof e)try{return Af(JSON.parse(e),t)}catch(n){}}}var Nf,Tf=new WeakMap,kf=new WeakMap;class Cf extends Sf{constructor(e,t,n){const r=Object.assign({},null!=n?n:{},{batchMaxCount:1});Ye(e&&e.request,"invalid EIP-1193 provider","ethereum",e),super(t,r),Fe(this,Tf,void 0),Fe(this,kf,void 0),Ve(kf,this,null),n&&n.providerInfo&&Ve(kf,this,n.providerInfo),Ve(Tf,this,async(t,n)=>{const r={method:t,params:n};this.emit("debug",{action:"sendEip1193Request",payload:r});try{const t=await e.request(r);return this.emit("debug",{action:"receiveEip1193Result",result:t}),t}catch(DN){const t=new Error(DN.message);throw t.code=DN.code,t.data=DN.data,t.payload=r,this.emit("debug",{action:"receiveEip1193Error",error:t}),t}})}get providerInfo(){return Be(kf,this)}async send(e,t){return await this._start(),await super.send(e,t)}async _send(e){Ye(!Array.isArray(e),"EIP-1193 does not support batch request","payload",e);try{const t=await Be(Tf,this).call(this,e.method,e.params||[]);return[{id:e.id,result:t}]}catch(DN){return[{id:e.id,error:{code:DN.code,data:DN.data,message:DN.message}}]}}getRpcError(e,t){switch((t=JSON.parse(JSON.stringify(t))).error.code||-1){case 4001:t.error.message="ethers-user-denied: ".concat(t.error.message);break;case 4200:t.error.message="ethers-unsupported: ".concat(t.error.message)}return super.getRpcError(e,t)}async hasSigner(e){null==e&&(e=0);const t=await this.send("eth_accounts",[]);return"number"===typeof e?t.length>e:(e=e.toLowerCase(),0!==t.filter(t=>t.toLowerCase()===e).length)}async getSigner(e){if(null==e&&(e=0),!await this.hasSigner(e))try{await Be(Tf,this).call(this,"eth_requestAccounts",[])}catch(t){const e=t.payload;throw this.getRpcError(e,{id:e.id,error:t})}return await super.getSigner(e)}static async discover(e){if(null==e&&(e={}),e.provider)return new Cf(e.provider);const t=e.window?e.window:"undefined"!==typeof window?window:null;if(null==t)return null;const n=e.anyProvider;if(n&&t.ethereum)return new Cf(t.ethereum);if(!("addEventListener"in t&&"dispatchEvent"in t&&"removeEventListener"in t))return null;const r=e.timeout?e.timeout:300;return 0===r?null:await new Promise((s,i)=>{let o=[];const a=e=>{o.push(e.detail),n&&c()},c=()=>{if(clearTimeout(l),o.length)if(e&&e.filter){const t=e.filter(o.map(e=>Object.assign({},e.info)));if(null==t)s(null);else if(t instanceof Cf)s(t);else{let e=null;if(t.uuid){e=o.filter(e=>t.uuid===e.info.uuid)[0]}if(e){const{provider:t,info:n}=e;s(new Cf(t,void 0,{providerInfo:n}))}else i(Ke("filter returned unknown info","UNSUPPORTED_OPERATION",{value:t}))}}else{const{provider:e,info:t}=o[0];s(new Cf(e,void 0,{providerInfo:t}))}else s(null);t.removeEventListener("eip6963:announceProvider",a)},l=setTimeout(()=>{c()},r);t.addEventListener("eip6963:announceProvider",a),t.dispatchEvent(new Event("eip6963:requestProvider"))})}}const If=BigInt(-1),_f=BigInt(0),Pf=BigInt(1),jf=BigInt(5),Df={};let Mf="0000";for(;Mf.length<80;)Mf+=Mf;function Rf(e){let t=Mf;for(;t.length<e;)t+=t;return BigInt("1"+t.substring(0,e))}function Of(e,t,n){const r=BigInt(t.width);if(t.signed){const t=Pf<<r-Pf;Je(null==n||e>=-t&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=e>_f?vt(bt(e,r),r):-vt(bt(-e,r),r)}else{const t=Pf<<r;Je(null==n||e>=0&&e<t,"overflow","NUMERIC_FAULT",{operation:n,fault:"overflow",value:e}),e=(e%t+t)%t&t-Pf}return e}function Lf(e){"number"===typeof e&&(e="fixed128x".concat(e));let t=!0,n=128,r=18;if("string"===typeof e)if("fixed"===e);else if("ufixed"===e)t=!1;else{const s=e.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);Ye(s,"invalid fixed format","format",e),t="u"!==s[1],n=parseInt(s[2]),r=parseInt(s[3])}else if(e){const s=e,i=(e,t,n)=>null==s[e]?n:(Ye(typeof s[e]===t,"invalid fixed format ("+e+" not "+t+")","format."+e,s[e]),s[e]);t=i("signed","boolean",t),n=i("width","number",n),r=i("decimals","number",r)}Ye(n%8===0,"invalid FixedNumber width (not byte aligned)","format.width",n),Ye(r<=80,"invalid FixedNumber decimals (too large)","format.decimals",r);return{signed:t,width:n,decimals:r,name:(t?"":"u")+"fixed"+String(n)+"x"+String(r)}}var Ff=new WeakMap,Uf=new WeakMap,Bf=new WeakMap,Vf=new WeakSet;class zf{constructor(e,t,n){et(this,Vf),(0,nt.A)(this,"format",void 0),Fe(this,Ff,void 0),Fe(this,Uf,void 0),Fe(this,Bf,void 0),(0,nt.A)(this,"_value",void 0),$e(e,Df,"FixedNumber"),Ve(Uf,this,t),Ve(Ff,this,n);const r=function(e,t){let n="";e<_f&&(n="-",e*=If);let r=e.toString();if(0===t)return n+r;for(;r.length<=t;)r=Mf+r;const s=r.length-t;for(r=r.substring(0,s)+"."+r.substring(s);"0"===r[0]&&"."!==r[1];)r=r.substring(1);for(;"0"===r[r.length-1]&&"."!==r[r.length-2];)r=r.substring(0,r.length-1);return n+r}(t,n.decimals);He(this,{format:n.name,_value:r}),Ve(Bf,this,Rf(n.decimals))}get signed(){return Be(Ff,this).signed}get width(){return Be(Ff,this).width}get decimals(){return Be(Ff,this).decimals}get value(){return Be(Uf,this)}addUnsafe(e){return Ue(Vf,this,qf).call(this,e)}add(e){return Ue(Vf,this,qf).call(this,e,"add")}subUnsafe(e){return Ue(Vf,this,Wf).call(this,e)}sub(e){return Ue(Vf,this,Wf).call(this,e,"sub")}mulUnsafe(e){return Ue(Vf,this,Qf).call(this,e)}mul(e){return Ue(Vf,this,Qf).call(this,e,"mul")}mulSignal(e){Ue(Vf,this,Gf).call(this,e);const t=Be(Uf,this)*Be(Uf,e);return Je(t%Be(Bf,this)===_f,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),Ue(Vf,this,Hf).call(this,t/Be(Bf,this),"mulSignal")}divUnsafe(e){return Ue(Vf,this,Kf).call(this,e)}div(e){return Ue(Vf,this,Kf).call(this,e,"div")}divSignal(e){Je(Be(Uf,e)!==_f,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ue(Vf,this,Gf).call(this,e);const t=Be(Uf,this)*Be(Bf,this);return Je(t%Be(Uf,e)===_f,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),Ue(Vf,this,Hf).call(this,t/Be(Uf,e),"divSignal")}cmp(e){let t=this.value,n=e.value;const r=this.decimals-e.decimals;return r>0?n*=Rf(r):r<0&&(t*=Rf(-r)),t<n?-1:t>n?1:0}eq(e){return 0===this.cmp(e)}lt(e){return this.cmp(e)<0}lte(e){return this.cmp(e)<=0}gt(e){return this.cmp(e)>0}gte(e){return this.cmp(e)>=0}floor(){let e=Be(Uf,this);return Be(Uf,this)<_f&&(e-=Be(Bf,this)-Pf),e=Be(Uf,this)/Be(Bf,this)*Be(Bf,this),Ue(Vf,this,Hf).call(this,e,"floor")}ceiling(){let e=Be(Uf,this);return Be(Uf,this)>_f&&(e+=Be(Bf,this)-Pf),e=Be(Uf,this)/Be(Bf,this)*Be(Bf,this),Ue(Vf,this,Hf).call(this,e,"ceiling")}round(e){if(null==e&&(e=0),e>=this.decimals)return this;const t=this.decimals-e,n=jf*Rf(t-1);let r=this.value+n;const s=Rf(t);return r=r/s*s,Of(r,Be(Ff,this),"round"),new zf(Df,r,Be(Ff,this))}isZero(){return Be(Uf,this)===_f}isNegative(){return Be(Uf,this)<_f}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(e){return zf.fromString(this.toString(),e)}static fromValue(e,t,n){const r=null==t?0:Nt(t),s=Lf(n);let i=xt(e,"value");const o=r-s.decimals;if(o>0){const t=Rf(o);Je(i%t===_f,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:e}),i/=t}else o<0&&(i*=Rf(-o));return Of(i,s,"fromValue"),new zf(Df,i,s)}static fromString(e,t){const n=e.match(/^(-?)([0-9]*)\.?([0-9]*)$/);Ye(n&&n[2].length+n[3].length>0,"invalid FixedNumber string value","value",e);const r=Lf(t);let s=n[2]||"0",i=n[3]||"";for(;i.length<r.decimals;)i+=Mf;Je(i.substring(r.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:e}),i=i.substring(0,r.decimals);const o=BigInt(n[1]+s+i);return Of(o,r,"fromString"),new zf(Df,o,r)}static fromBytes(e,t){let n=At(st(e,"value"));const r=Lf(t);return r.signed&&(n=vt(n,r.width)),Of(n,r,"fromBytes"),new zf(Df,n,r)}}function Gf(e){Ye(this.format===e.format,"incompatible format; use fixedNumber.toFormat","other",e)}function Hf(e,t){return e=Of(e,Be(Ff,this),t),new Nf(Df,e,Be(Ff,this))}function qf(e,t){return Ue(Vf,this,Gf).call(this,e),Ue(Vf,this,Hf).call(this,Be(Uf,this)+Be(Uf,e),t)}function Wf(e,t){return Ue(Vf,this,Gf).call(this,e),Ue(Vf,this,Hf).call(this,Be(Uf,this)-Be(Uf,e),t)}function Qf(e,t){return Ue(Vf,this,Gf).call(this,e),Ue(Vf,this,Hf).call(this,Be(Uf,this)*Be(Uf,e)/Be(Bf,this),t)}function Kf(e,t){return Je(Be(Uf,e)!==_f,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),Ue(Vf,this,Gf).call(this,e),Ue(Vf,this,Hf).call(this,Be(Uf,this)*Be(Bf,this)/Be(Uf,e),t)}Nf=zf;const Jf=["wei","kwei","mwei","gwei","szabo","finney","ether"];function Yf(e){return function(e,t){let n=18;if("string"===typeof t){const e=Jf.indexOf(t);Ye(e>=0,"invalid unit","unit",t),n=3*e}else null!=t&&(n=Nt(t,"unit"));return zf.fromValue(e,n,{decimals:n,width:512}).toString()}(e,18)}const Zf=(0,s.createContext)(),Xf=()=>{const e=(0,s.useContext)(Zf);if(!e)throw new Error("useWallet must be used within a WalletProvider");return e},$f=e=>{let{children:t}=e;const[n,r]=(0,s.useState)(!1),[i,o]=(0,s.useState)(null),[a,c]=(0,s.useState)(null),[l,u]=(0,s.useState)(!1),[h,d]=(0,s.useState)(!1),[f,m]=(0,s.useState)(!1),[p,g]=(0,s.useState)(!1),[y,v]=(0,s.useState)(null),[w,b]=(0,s.useState)(null),[x,S]=(0,s.useState)(null),[E,A]=(0,s.useState)(null);(0,s.useEffect)(()=>{console.log("WalletContext: Checking wallet connection status...");const e=localStorage.getItem("walletConnected"),t=localStorage.getItem("walletAccount"),n=localStorage.getItem("walletType");console.log("Saved connection:",e,t,n),"true"===e&&t&&n&&(console.log("Attempting to reconnect wallet..."),C(n))},[]),(0,s.useEffect)(()=>{const e=setTimeout(async()=>{if(window.ethereum)try{if((await window.ethereum.request({method:"eth_accounts"})).length>0){const e=new Cf(window.ethereum),t=await e.getSigner(),n=await t.getAddress(),s=await e.getNetwork();v(e),b(t),o(n),S(s.chainId),r(!0);const i=localStorage.getItem("walletSignature"),a=localStorage.getItem("walletTimestamp"),c=a&&Date.now()-parseInt(a)<864e5;i&&c||setTimeout(()=>{d(!0)},1e3)}else setTimeout(()=>{d(!0)},1e3)}catch(e){console.error("Error auto-connecting wallet:",e),setTimeout(()=>{d(!0)},1e3)}else setTimeout(()=>{d(!0)},1e3)},2e3);return()=>clearTimeout(e)},[]),(0,s.useEffect)(()=>{if(window.ethereum)return window.ethereum.on("accountsChanged",N),window.ethereum.on("chainChanged",T),window.ethereum.on("disconnect",k),()=>{window.ethereum.removeListener("accountsChanged",N),window.ethereum.removeListener("chainChanged",T),window.ethereum.removeListener("disconnect",k)}},[]);const N=e=>{0===e.length?_():(o(e[0]),localStorage.setItem("walletAccount",e[0]),I(e[0]))},T=e=>{S(e),window.location.reload()},k=()=>{_()},C=async e=>{try{if("metamask"===e&&window.ethereum){const t=new Cf(window.ethereum);if((await t.listAccounts()).length>0){const n=await t.getSigner(),s=await n.getAddress(),i=await t.getNetwork();v(t),b(n),o(s),S(i.chainId),c(e),r(!0),u(!1),await I(s)}}}catch(t){console.error("Reconnection failed:",t),_()}},I=async e=>{if(y&&e)try{const t=Yf(await y.getBalance(e));A(parseFloat(t).toFixed(4))}catch(t){console.error("Failed to fetch balance:",t)}},_=()=>{r(!1),o(null),c(null),v(null),b(null),S(null),A(null),u(!1),localStorage.removeItem("walletConnected"),localStorage.removeItem("walletAccount"),localStorage.removeItem("walletType")},P={isConnected:n,account:i,walletType:a,showWalletModal:l,showSignMessageModal:h,isConnecting:f,isSigning:p,provider:y,signer:w,chainId:x,balance:E,connectWallet:async e=>{m(!0);try{let t,n,s,i;if("metamask"===e){if("undefined"===typeof window.ethereum)throw new Error("MetaMask is not installed. Please install MetaMask to continue.");await window.ethereum.request({method:"eth_requestAccounts"}),t=new Cf(window.ethereum),n=await t.getSigner(),s=await n.getAddress(),i=await t.getNetwork();const e=[1,137,56,42161],r=Number(i.chainId);if(!e.includes(r))throw new Error("Please switch to a supported network. Current: ".concat(i.name))}else{if("walletconnect"===e)throw new Error("WalletConnect integration coming soon. Please use MetaMask for now.");if("coinbase"===e){if("undefined"===typeof window.ethereum)throw new Error("Coinbase Wallet is not installed. Please install Coinbase Wallet to continue.");await window.ethereum.request({method:"eth_requestAccounts"}),t=new Cf(window.ethereum),n=await t.getSigner(),s=await n.getAddress(),i=await t.getNetwork();const e=[1,137,56,42161],r=Number(i.chainId);if(!e.includes(r))throw new Error("Please switch to a supported network. Current: ".concat(i.name))}}if(s)return v(t),b(n),r(!0),o(s),c(e),S(i.chainId),u(!1),localStorage.setItem("walletConnected","true"),localStorage.setItem("walletAccount",s),localStorage.setItem("walletType",e),await I(s),setTimeout(()=>{d(!0)},500),!0}catch(t){console.error("Wallet connection failed:",t);let n=t.message;t.message.includes("User rejected")?n="Connection cancelled by user":t.message.includes("not installed")?n="Please install MetaMask or Coinbase Wallet to continue":t.message.includes("getAddress is not a function")&&(n="Wallet connection error. Please try again."),alert("Failed to connect ".concat(e,": ").concat(n))}finally{m(!1)}return!1},disconnectWallet:_,formatAddress:e=>e?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"",setShowWalletModal:u,setShowSignMessageModal:d,signMessage:async()=>{if(!w||!i)throw new Error("No wallet connected");g(!0);try{const e=Date.now(),t="welcome login".concat(e),n=await w.signMessage(t);return console.log("Message signed successfully:",n),localStorage.setItem("walletSignature",n),localStorage.setItem("walletMessage",t),localStorage.setItem("walletTimestamp",e.toString()),n}catch(e){throw console.error("Failed to sign message:",e),e}finally{g(!1)}},getNetworkName:e=>({1:"Ethereum",137:"Polygon",56:"BSC",42161:"Arbitrum",10:"Optimism",250:"Fantom"}[e]||"Chain ".concat(e)),switchNetwork:async e=>{if(!window.ethereum)return!1;try{return await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:"0x".concat(e.toString(16))}]}),!0}catch(t){return console.error("Failed to switch network:",t),!1}},fetchBalance:I};return(0,Pe.jsx)(Zf.Provider,{value:P,children:t})};var em=n(667),tm=n(340);function nm(e,t){return function(){return e.apply(t,arguments)}}const{toString:rm}=Object.prototype,{getPrototypeOf:sm}=Object,{iterator:im,toStringTag:om}=Symbol,am=(e=>t=>{const n=rm.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),cm=e=>(e=e.toLowerCase(),t=>am(t)===e),lm=e=>t=>typeof t===e,{isArray:um}=Array,hm=lm("undefined");function dm(e){return null!==e&&!hm(e)&&null!==e.constructor&&!hm(e.constructor)&&pm(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const fm=cm("ArrayBuffer");const mm=lm("string"),pm=lm("function"),gm=lm("number"),ym=e=>null!==e&&"object"===typeof e,vm=e=>{if("object"!==am(e))return!1;const t=sm(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(om in e)&&!(im in e)},wm=cm("Date"),bm=cm("File"),xm=cm("Blob"),Sm=cm("FileList"),Em=cm("URLSearchParams"),[Am,Nm,Tm,km]=["ReadableStream","Request","Response","Headers"].map(cm);function Cm(e,t){let n,r,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),um(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(dm(e))return;const r=s?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let o;for(n=0;n<i;n++)o=r[n],t.call(null,e[o],o,e)}}function Im(e,t){if(dm(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const _m="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Pm=e=>!hm(e)&&e!==_m;const jm=(Dm="undefined"!==typeof Uint8Array&&sm(Uint8Array),e=>Dm&&e instanceof Dm);var Dm;const Mm=cm("HTMLFormElement"),Rm=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Om=cm("RegExp"),Lm=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Cm(n,(n,s)=>{let i;!1!==(i=t(n,s,e))&&(r[s]=i||n)}),Object.defineProperties(e,r)};const Fm=cm("AsyncFunction"),Um=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],_m.addEventListener("message",e=>{let{source:t,data:s}=e;t===_m&&s===n&&r.length&&r.shift()()},!1),e=>{r.push(e),_m.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,pm(_m.postMessage)),Bm="undefined"!==typeof queueMicrotask?queueMicrotask.bind(_m):"undefined"!==typeof process&&process.nextTick||Um,Vm={isArray:um,isArrayBuffer:fm,isBuffer:dm,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||pm(e.append)&&("formdata"===(t=am(e))||"object"===t&&pm(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&fm(e.buffer),t},isString:mm,isNumber:gm,isBoolean:e=>!0===e||!1===e,isObject:ym,isPlainObject:vm,isEmptyObject:e=>{if(!ym(e)||dm(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(DN){return!1}},isReadableStream:Am,isRequest:Nm,isResponse:Tm,isHeaders:km,isUndefined:hm,isDate:wm,isFile:bm,isBlob:xm,isRegExp:Om,isFunction:pm,isStream:e=>ym(e)&&pm(e.pipe),isURLSearchParams:Em,isTypedArray:jm,isFileList:Sm,forEach:Cm,merge:function e(){const{caseless:t,skipUndefined:n}=Pm(this)&&this||{},r={},s=(s,i)=>{const o=t&&Im(r,i)||i;vm(r[o])&&vm(s)?r[o]=e(r[o],s):vm(s)?r[o]=e({},s):um(s)?r[o]=s.slice():n&&hm(s)||(r[o]=s)};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&Cm(arguments[i],s);return r},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Cm(t,(t,r)=>{n&&pm(t)?e[r]=nm(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,i,o;const a={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&sm(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:am,kindOfTest:cm,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(um(e))return e;let t=e.length;if(!gm(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[im]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Mm,hasOwnProperty:Rm,hasOwnProp:Rm,reduceDescriptors:Lm,freezeMethods:e=>{Lm(e,(t,n)=>{if(pm(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];pm(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return um(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Im,global:_m,isContextDefined:Pm,isSpecCompliantForm:function(e){return!!(e&&pm(e.append)&&"FormData"===e[om]&&e[im])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(ym(e)){if(t.indexOf(e)>=0)return;if(dm(e))return e;if(!("toJSON"in e)){t[r]=e;const s=um(e)?[]:{};return Cm(e,(e,t)=>{const i=n(e,r+1);!hm(i)&&(s[t]=i)}),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:Fm,isThenable:e=>e&&(ym(e)||pm(e))&&pm(e.then)&&pm(e.catch),setImmediate:Um,asap:Bm,isIterable:e=>null!=e&&pm(e[im])};function zm(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Vm.inherits(zm,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Vm.toJSONObject(this.config),code:this.code,status:this.status}}});const Gm=zm.prototype,Hm={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Hm[e]={value:e}}),Object.defineProperties(zm,Hm),Object.defineProperty(Gm,"isAxiosError",{value:!0}),zm.from=(e,t,n,r,s,i)=>{const o=Object.create(Gm);Vm.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const a=e&&e.message?e.message:"Error",c=null==t&&e?e.code:t;return zm.call(o,a,c,n,r,s),e&&null==o.cause&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const qm=zm;function Wm(e){return Vm.isPlainObject(e)||Vm.isArray(e)}function Qm(e){return Vm.endsWith(e,"[]")?e.slice(0,-2):e}function Km(e,t,n){return e?e.concat(t).map(function(e,t){return e=Qm(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Jm=Vm.toFlatObject(Vm,{},null,function(e){return/^is[A-Z]/.test(e)});const Ym=function(e,t,n){if(!Vm.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Vm.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Vm.isUndefined(t[e])})).metaTokens,s=n.visitor||l,i=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Vm.isSpecCompliantForm(t);if(!Vm.isFunction(s))throw new TypeError("visitor must be a function");function c(e){if(null===e)return"";if(Vm.isDate(e))return e.toISOString();if(Vm.isBoolean(e))return e.toString();if(!a&&Vm.isBlob(e))throw new qm("Blob is not supported. Use a Buffer instead.");return Vm.isArrayBuffer(e)||Vm.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function l(e,n,s){let a=e;if(e&&!s&&"object"===typeof e)if(Vm.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Vm.isArray(e)&&function(e){return Vm.isArray(e)&&!e.some(Wm)}(e)||(Vm.isFileList(e)||Vm.endsWith(n,"[]"))&&(a=Vm.toArray(e)))return n=Qm(n),a.forEach(function(e,r){!Vm.isUndefined(e)&&null!==e&&t.append(!0===o?Km([n],r,i):null===o?n:n+"[]",c(e))}),!1;return!!Wm(e)||(t.append(Km(s,n,i),c(e)),!1)}const u=[],h=Object.assign(Jm,{defaultVisitor:l,convertValue:c,isVisitable:Wm});if(!Vm.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Vm.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Vm.forEach(n,function(n,i){!0===(!(Vm.isUndefined(n)||null===n)&&s.call(t,n,Vm.isString(i)?i.trim():i,r,h))&&e(n,r?r.concat(i):[i])}),u.pop()}}(e),t};function Zm(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Xm(e,t){this._pairs=[],e&&Ym(e,this,t)}const $m=Xm.prototype;$m.append=function(e,t){this._pairs.push([e,t])},$m.toString=function(e){const t=e?function(t){return e.call(this,t,Zm)}:Zm;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const ep=Xm;function tp(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function np(e,t,n){if(!t)return e;const r=n&&n.encode||tp;Vm.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(i=s?s(t,n):Vm.isURLSearchParams(t)?t.toString():new ep(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const rp=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Vm.forEach(this.handlers,function(t){null!==t&&e(t)})}},sp={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ip={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:ep,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},op="undefined"!==typeof window&&"undefined"!==typeof document,ap="object"===typeof navigator&&navigator||void 0,cp=op&&(!ap||["ReactNative","NativeScript","NS"].indexOf(ap.product)<0),lp="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,up=op&&window.location.href||"http://localhost",hp=(0,tt.A)((0,tt.A)({},t),ip);const dp=function(e){function t(e,n,r,s){let i=e[s++];if("__proto__"===i)return!0;const o=Number.isFinite(+i),a=s>=e.length;if(i=!i&&Vm.isArray(r)?r.length:i,a)return Vm.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!o;r[i]&&Vm.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],s)&&Vm.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}(r[i])),!o}if(Vm.isFormData(e)&&Vm.isFunction(e.entries)){const n={};return Vm.forEachEntry(e,(e,r)=>{t(function(e){return Vm.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const fp={transitional:sp,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=Vm.isObject(e);s&&Vm.isHTMLForm(e)&&(e=new FormData(e));if(Vm.isFormData(e))return r?JSON.stringify(dp(e)):e;if(Vm.isArrayBuffer(e)||Vm.isBuffer(e)||Vm.isStream(e)||Vm.isFile(e)||Vm.isBlob(e)||Vm.isReadableStream(e))return e;if(Vm.isArrayBufferView(e))return e.buffer;if(Vm.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ym(e,new hp.classes.URLSearchParams,(0,tt.A)({visitor:function(e,t,n,r){return hp.isNode&&Vm.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((i=Vm.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ym(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(Vm.isString(e))try{return(t||JSON.parse)(e),Vm.trim(e)}catch(DN){if("SyntaxError"!==DN.name)throw DN}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||fp.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Vm.isResponse(e)||Vm.isReadableStream(e))return e;if(e&&Vm.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(DN){if(n){if("SyntaxError"===DN.name)throw qm.from(DN,qm.ERR_BAD_RESPONSE,this,null,this.response);throw DN}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hp.classes.FormData,Blob:hp.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Vm.forEach(["delete","get","head","post","put","patch"],e=>{fp.headers[e]={}});const mp=fp,pp=Vm.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),gp=Symbol("internals");function yp(e){return e&&String(e).trim().toLowerCase()}function vp(e){return!1===e||null==e?e:Vm.isArray(e)?e.map(vp):String(e)}function wp(e,t,n,r,s){return Vm.isFunction(r)?r.call(this,t,n):(s&&(t=n),Vm.isString(t)?Vm.isString(r)?-1!==t.indexOf(r):Vm.isRegExp(r)?r.test(t):void 0:void 0)}class bp{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=yp(t);if(!s)throw new Error("header name must be a non-empty string");const i=Vm.findKey(r,s);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=vp(e))}const i=(e,t)=>Vm.forEach(e,(e,n)=>s(e,n,t));if(Vm.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(Vm.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&pp[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(Vm.isObject(e)&&Vm.isIterable(e)){let n,r,s={};for(const t of e){if(!Vm.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?Vm.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=yp(e)){const n=Vm.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Vm.isFunction(t))return t.call(this,e,n);if(Vm.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=yp(e)){const n=Vm.findKey(this,e);return!(!n||void 0===this[n]||t&&!wp(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=yp(e)){const s=Vm.findKey(n,e);!s||t&&!wp(0,n[s],s,t)||(delete n[s],r=!0)}}return Vm.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!wp(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return Vm.forEach(this,(r,s)=>{const i=Vm.findKey(n,s);if(i)return t[i]=vp(r),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();o!==s&&delete t[s],t[o]=vp(r),n[o]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Vm.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Vm.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[gp]=this[gp]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=yp(e);t[r]||(!function(e,t){const n=Vm.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[r]=!0)}return Vm.isArray(e)?e.forEach(r):r(e),this}}bp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Vm.reduceDescriptors(bp.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),Vm.freezeMethods(bp);const xp=bp;function Sp(e,t){const n=this||mp,r=t||n,s=xp.from(r.headers);let i=r.data;return Vm.forEach(e,function(e){i=e.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function Ep(e){return!(!e||!e.__CANCEL__)}function Ap(e,t,n){qm.call(this,null==e?"canceled":e,qm.ERR_CANCELED,t,n),this.name="CanceledError"}Vm.inherits(Ap,qm,{__CANCEL__:!0});const Np=Ap;function Tp(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new qm("Request failed with status code "+n.status,[qm.ERR_BAD_REQUEST,qm.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const kp=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,i=0,o=0;return t=void 0!==t?t:1e3,function(a){const c=Date.now(),l=r[o];s||(s=c),n[i]=a,r[i]=c;let u=o,h=0;for(;u!==i;)h+=n[u++],u%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),c-s<t)return;const d=l&&c-l;return d?Math.round(1e3*h/d):void 0}};const Cp=function(e,t){let n,r,s=0,i=1e3/t;const o=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=i,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var a=arguments.length,c=new Array(a),l=0;l<a;l++)c[l]=arguments[l];t>=i?o(c,e):(n=c,r||(r=setTimeout(()=>{r=null,o(n)},i-t)))},()=>n&&o(n)]},Ip=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const s=kp(50,250);return Cp(n=>{const i=n.loaded,o=n.lengthComputable?n.total:void 0,a=i-r,c=s(a);r=i;e({loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:c||void 0,estimated:c&&o&&i<=o?(o-i)/c:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})},n)},_p=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Pp=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Vm.asap(()=>e(...n))},jp=hp.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,hp.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(hp.origin),hp.navigator&&/(msie|trident)/i.test(hp.navigator.userAgent)):()=>!0,Dp=hp.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const o=[e+"="+encodeURIComponent(t)];Vm.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Vm.isString(r)&&o.push("path="+r),Vm.isString(s)&&o.push("domain="+s),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Mp(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Rp=e=>e instanceof xp?(0,tt.A)({},e):e;function Op(e,t){t=t||{};const n={};function r(e,t,n,r){return Vm.isPlainObject(e)&&Vm.isPlainObject(t)?Vm.merge.call({caseless:r},e,t):Vm.isPlainObject(t)?Vm.merge({},t):Vm.isArray(t)?t.slice():t}function s(e,t,n,s){return Vm.isUndefined(t)?Vm.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function i(e,t){if(!Vm.isUndefined(t))return r(void 0,t)}function o(e,t){return Vm.isUndefined(t)?Vm.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,s,i){return i in t?r(n,s):i in e?r(void 0,n):void 0}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,n)=>s(Rp(e),Rp(t),0,!0)};return Vm.forEach(Object.keys((0,tt.A)((0,tt.A)({},e),t)),function(r){const i=c[r]||s,o=i(e[r],t[r],r);Vm.isUndefined(o)&&i!==a||(n[r]=o)}),n}const Lp=e=>{const t=Op({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:a}=t;if(t.headers=o=xp.from(o),t.url=np(Mp(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):""))),Vm.isFormData(n))if(hp.hasStandardBrowserEnv||hp.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(Vm.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,r]=e;t.includes(n.toLowerCase())&&o.set(n,r)})}if(hp.hasStandardBrowserEnv&&(r&&Vm.isFunction(r)&&(r=r(t)),r||!1!==r&&jp(t.url))){const e=s&&i&&Dp.read(i);e&&o.set(s,e)}return t},Fp="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=Lp(e);let s=r.data;const i=xp.from(r.headers).normalize();let o,a,c,l,u,{responseType:h,onUploadProgress:d,onDownloadProgress:f}=r;function m(){l&&l(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let p=new XMLHttpRequest;function g(){if(!p)return;const r=xp.from("getAllResponseHeaders"in p&&p.getAllResponseHeaders());Tp(function(e){t(e),m()},function(e){n(e),m()},{data:h&&"text"!==h&&"json"!==h?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p}),p=null}p.open(r.method.toUpperCase(),r.url,!0),p.timeout=r.timeout,"onloadend"in p?p.onloadend=g:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(g)},p.onabort=function(){p&&(n(new qm("Request aborted",qm.ECONNABORTED,e,p)),p=null)},p.onerror=function(t){const r=t&&t.message?t.message:"Network Error",s=new qm(r,qm.ERR_NETWORK,e,p);s.event=t||null,n(s),p=null},p.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||sp;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new qm(t,s.clarifyTimeoutError?qm.ETIMEDOUT:qm.ECONNABORTED,e,p)),p=null},void 0===s&&i.setContentType(null),"setRequestHeader"in p&&Vm.forEach(i.toJSON(),function(e,t){p.setRequestHeader(t,e)}),Vm.isUndefined(r.withCredentials)||(p.withCredentials=!!r.withCredentials),h&&"json"!==h&&(p.responseType=r.responseType),f&&([c,u]=Ip(f,!0),p.addEventListener("progress",c)),d&&p.upload&&([a,l]=Ip(d),p.upload.addEventListener("progress",a),p.upload.addEventListener("loadend",l)),(r.cancelToken||r.signal)&&(o=t=>{p&&(n(!t||t.type?new Np(null,e,p):t),p.abort(),p=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===hp.protocols.indexOf(y)?n(new qm("Unsupported protocol "+y+":",qm.ERR_BAD_REQUEST,e)):p.send(s||null)})},Up=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof qm?t:new Np(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,s(new qm("timeout ".concat(t," of ms exceeded"),qm.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:a}=r;return a.unsubscribe=()=>Vm.asap(o),a}};function Bp(e,t){this.v=e,this.k=t}function Vp(e){return function(){return new zp(e.apply(this,arguments))}}function zp(e){var t,n;function r(t,n){try{var i=e[t](n),o=i.value,a=o instanceof Bp;Promise.resolve(a?o.v:o).then(function(n){if(a){var c="return"===t?"return":"next";if(!o.k||n.done)return r(c,n);n=e[c](n).value}s(i.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){s("throw",e)}}function s(e,s){switch(e){case"return":t.resolve({value:s,done:!0});break;case"throw":t.reject(s);break;default:t.resolve({value:s,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,s){return new Promise(function(i,o){var a={key:e,arg:s,resolve:i,reject:o,next:null};n?n=n.next=a:(t=n=a,r(e,s))})},"function"!=typeof e.return&&(this.return=void 0)}function Gp(e){return new Bp(e,0)}function Hp(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise(function(n){n(e[t](r))}),{done:!1,value:new Bp(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}function qp(e){var t,n,r,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);s--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new Wp(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function Wp(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return Wp=function(e){this.s=e,this.n=e.next},Wp.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new Wp(e)}zp.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},zp.prototype.next=function(e){return this._invoke("next",e)},zp.prototype.throw=function(e){return this._invoke("throw",e)},zp.prototype.return=function(e){return this._invoke("return",e)};const Qp=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Kp=function(){var e=Vp(function*(e,t){var n,r=!1,s=!1;try{for(var i,o=qp(Jp(e));r=!(i=yield Gp(o.next())).done;r=!1){const e=i.value;yield*Hp(qp(Qp(e,t)))}}catch(a){s=!0,n=a}finally{try{r&&null!=o.return&&(yield Gp(o.return()))}finally{if(s)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),Jp=function(){var e=Vp(function*(e){if(e[Symbol.asyncIterator])return void(yield*Hp(qp(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Gp(t.read());if(e)break;yield n}}finally{yield Gp(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Yp=(e,t,n,r)=>{const s=Kp(e,t);let i,o=0,a=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return a(),void e.close();let i=r.byteLength;if(n){let e=o+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),s.return())},{highWaterMark:2})},{isFunction:Zp}=Vm,Xp=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(Vm.global),{ReadableStream:$p,TextEncoder:eg}=Vm.global,tg=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(DN){return!1}},ng=e=>{e=Vm.merge.call({skipUndefined:!0},Xp,e);const{fetch:t,Request:n,Response:r}=e,s=t?Zp(t):"function"===typeof fetch,i=Zp(n),o=Zp(r);if(!s)return!1;const a=s&&Zp($p),c=s&&("function"===typeof eg?(l=new eg,e=>l.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var l;const u=i&&a&&tg(()=>{let e=!1;const t=new n(hp.origin,{body:new $p,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),h=o&&a&&tg(()=>Vm.isReadableStream(new r("").body)),d={stream:h&&(e=>e.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!d[e]&&(d[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new qm("Response type '".concat(e,"' is not supported"),qm.ERR_NOT_SUPPORT,n)})});const f=async(e,t)=>{const r=Vm.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(Vm.isBlob(e))return e.size;if(Vm.isSpecCompliantForm(e)){const t=new n(hp.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Vm.isArrayBufferView(e)||Vm.isArrayBuffer(e)?e.byteLength:(Vm.isURLSearchParams(e)&&(e+=""),Vm.isString(e)?(await c(e)).byteLength:void 0)})(t):r};return async e=>{let{url:s,method:o,data:a,signal:c,cancelToken:l,timeout:m,onDownloadProgress:p,onUploadProgress:g,responseType:y,headers:v,withCredentials:w="same-origin",fetchOptions:b}=Lp(e),x=t||fetch;y=y?(y+"").toLowerCase():"text";let S=Up([c,l&&l.toAbortSignal()],m),E=null;const A=S&&S.unsubscribe&&(()=>{S.unsubscribe()});let N;try{if(g&&u&&"get"!==o&&"head"!==o&&0!==(N=await f(v,a))){let e,t=new n(s,{method:"POST",body:a,duplex:"half"});if(Vm.isFormData(a)&&(e=t.headers.get("content-type"))&&v.setContentType(e),t.body){const[e,n]=_p(N,Ip(Pp(g)));a=Yp(t.body,65536,e,n)}}Vm.isString(w)||(w=w?"include":"omit");const t=i&&"credentials"in n.prototype,c=(0,tt.A)((0,tt.A)({},b),{},{signal:S,method:o.toUpperCase(),headers:v.normalize().toJSON(),body:a,duplex:"half",credentials:t?w:void 0});E=i&&new n(s,c);let l=await(i?x(E,b):x(s,c));const m=h&&("stream"===y||"response"===y);if(h&&(p||m&&A)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=l[t]});const t=Vm.toFiniteNumber(l.headers.get("content-length")),[n,s]=p&&_p(t,Ip(Pp(p),!0))||[];l=new r(Yp(l.body,65536,n,()=>{s&&s(),A&&A()}),e)}y=y||"text";let T=await d[Vm.findKey(d,y)||"text"](l,e);return!m&&A&&A(),await new Promise((t,n)=>{Tp(t,n,{data:T,headers:xp.from(l.headers),status:l.status,statusText:l.statusText,config:e,request:E})})}catch(T){if(A&&A(),T&&"TypeError"===T.name&&/Load failed|fetch/i.test(T.message))throw Object.assign(new qm("Network Error",qm.ERR_NETWORK,e,E),{cause:T.cause||T});throw qm.from(T,T&&T.code,e,E)}}},rg=new Map,sg=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:s}=t,i=[r,s,n];let o,a,c=i.length,l=rg;for(;c--;)o=i[c],a=l.get(o),void 0===a&&l.set(o,a=c?new Map:ng(t)),l=a;return a},ig=(sg(),{http:null,xhr:Fp,fetch:{get:sg}});Vm.forEach(ig,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(DN){}Object.defineProperty(e,"adapterName",{value:t})}});const og=e=>"- ".concat(e),ag=e=>Vm.isFunction(e)||null===e||!1===e,cg=(e,t)=>{e=Vm.isArray(e)?e:[e];const{length:n}=e;let r,s;const i={};for(let o=0;o<n;o++){let n;if(r=e[o],s=r,!ag(r)&&(s=ig[(n=String(r)).toLowerCase()],void 0===s))throw new qm("Unknown adapter '".concat(n,"'"));if(s&&(Vm.isFunction(s)||(s=s.get(t))))break;i[n||"#"+o]=s}if(!s){const e=Object.entries(i).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(og).join("\n"):" "+og(e[0]):"as no adapter specified";throw new qm("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return s};function lg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Np(null,e)}function ug(e){lg(e),e.headers=xp.from(e.headers),e.data=Sp.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return cg(e.adapter||mp.adapter,e)(e).then(function(t){return lg(e),t.data=Sp.call(e,e.transformResponse,t),t.headers=xp.from(t.headers),t},function(t){return Ep(t)||(lg(e),t&&t.response&&(t.response.data=Sp.call(e,e.transformResponse,t.response),t.response.headers=xp.from(t.response.headers))),Promise.reject(t)})}const hg="1.12.2",dg={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{dg[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const fg={};dg.transitional=function(e,t,n){function r(e,t){return"[Axios v"+hg+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,i)=>{if(!1===e)throw new qm(r(s," has been removed"+(t?" in "+t:"")),qm.ERR_DEPRECATED);return t&&!fg[s]&&(fg[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,i)}},dg.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const mg={assertOptions:function(e,t,n){if("object"!==typeof e)throw new qm("options must be an object",qm.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],o=t[i];if(o){const t=e[i],n=void 0===t||o(t,i,e);if(!0!==n)throw new qm("option "+i+" must be "+n,qm.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new qm("Unknown option "+i,qm.ERR_BAD_OPTION)}},validators:dg},pg=mg.validators;class gg{constructor(e){this.defaults=e||{},this.interceptors={request:new rp,response:new rp}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(DN){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Op(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&mg.assertOptions(n,{silentJSONParsing:pg.transitional(pg.boolean),forcedJSONParsing:pg.transitional(pg.boolean),clarifyTimeoutError:pg.transitional(pg.boolean)},!1),null!=r&&(Vm.isFunction(r)?t.paramsSerializer={serialize:r}:mg.assertOptions(r,{encode:pg.function,serialize:pg.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),mg.assertOptions(t,{baseUrl:pg.spelling("baseURL"),withXsrfToken:pg.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&Vm.merge(s.common,s[t.method]);s&&Vm.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=xp.concat(i,s);const o=[];let a=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const c=[];let l;this.interceptors.response.forEach(function(e){c.push(e.fulfilled,e.rejected)});let u,h=0;if(!a){const e=[ug.bind(this),void 0];for(e.unshift(...o),e.push(...c),u=e.length,l=Promise.resolve(t);h<u;)l=l.then(e[h++],e[h++]);return l}u=o.length;let d=t;for(;h<u;){const e=o[h++],t=o[h++];try{d=e(d)}catch(f){t.call(this,f);break}}try{l=ug.call(this,d)}catch(f){return Promise.reject(f)}for(h=0,u=c.length;h<u;)l=l.then(c[h++],c[h++]);return l}getUri(e){return np(Mp((e=Op(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Vm.forEach(["delete","get","head","options"],function(e){gg.prototype[e]=function(t,n){return this.request(Op(n||{},{method:e,url:t,data:(n||{}).data}))}}),Vm.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,s){return this.request(Op(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}gg.prototype[e]=t(),gg.prototype[e+"Form"]=t(!0)});const yg=gg;class vg{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,s){n.reason||(n.reason=new Np(e,r,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new vg(function(t){e=t}),cancel:e}}}const wg=vg;const bg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(bg).forEach(e=>{let[t,n]=e;bg[n]=t});const xg=bg;const Sg=function e(t){const n=new yg(t),r=nm(yg.prototype.request,n);return Vm.extend(r,yg.prototype,n,{allOwnKeys:!0}),Vm.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Op(t,n))},r}(mp);Sg.Axios=yg,Sg.CanceledError=Np,Sg.CancelToken=wg,Sg.isCancel=Ep,Sg.VERSION=hg,Sg.toFormData=Ym,Sg.AxiosError=qm,Sg.Cancel=Sg.CanceledError,Sg.all=function(e){return Promise.all(e)},Sg.spread=function(e){return function(t){return e.apply(null,t)}},Sg.isAxiosError=function(e){return Vm.isObject(e)&&!0===e.isAxiosError},Sg.mergeConfig=Op,Sg.AxiosHeaders=xp,Sg.formToJSON=e=>dp(Vm.isHTMLForm(e)?new FormData(e):e),Sg.getAdapter=cg,Sg.HttpStatusCode=xg,Sg.default=Sg;const Eg=Sg,Ag=async(e,t)=>{try{const n=await(async()=>{try{return(await Eg.get("https://api.ipify.org?format=json")).data.ip}catch(e){return console.error("Error fetching IP:",e),"Unknown"}})(),r={walletAddress:e.toLowerCase(),walletType:t,ipAddress:n,createdAt:(0,em.O5)(),balance:0,totalDeposits:0,totalWithdrawals:0,totalTrades:0,totalProfit:0,isActive:!0,lastLogin:(0,em.O5)()},s=await(0,em.gS)((0,em.rJ)(tm.db,"users"),r);return(0,tt.A)({id:s.id},r)}catch(n){throw console.error("Error creating user:",n),n}},Ng=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"deposit";try{const r=(0,em.H9)(tm.db,"users",e),s={balance:(0,em.GV)(t),lastUpdated:(0,em.O5)()};return"deposit"===n?s.totalDeposits=(0,em.GV)(t):"withdrawal"===n&&(s.totalWithdrawals=(0,em.GV)(t)),await(0,em.mZ)(r,s),!0}catch(r){throw console.error("Error updating user balance:",r),r}},Tg=async function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;try{const i=await async function(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;try{const i=await(0,em.x7)((0,em.H9)(tm.db,"users",e));if(!i.exists())throw new Error("User not found");if(i.data().balance<n)throw new Error("Insufficient balance");const o=await Ig(t),a={userId:e,asset:(null===t||void 0===t?void 0:t.toUpperCase())||"BTC",amount:parseFloat(n),tradeType:r,leverage:parseFloat(s),entryPrice:o,currentPrice:o,status:"open",profit:0,createdAt:(0,em.O5)(),closedAt:null,isSmartTrade:!1},c=await(0,em.gS)((0,em.rJ)(tm.db,"trades"),a);return await Ng(e,-n),(0,tt.A)({id:c.id},a)}catch(i){throw console.error("Error creating trade:",i),i}}(e,t,n,r,s),o=(0,em.H9)(tm.db,"trades",i.id);return await(0,em.mZ)(o,{isSmartTrade:!0}),(0,tt.A)((0,tt.A)({},i),{},{isSmartTrade:!0})}catch(i){throw console.error("Error creating smart trade:",i),i}},kg=new Map,Cg=async(e,t)=>{try{if(console.log("Validating balance for wallet:",e),console.log("Trade data:",t),!(e=>{const t=Date.now(),n=(kg.get(e)||[]).filter(e=>t-e<6e4);return!(n.length>=3)&&(n.push(t),kg.set(e,n),!0)})(e))return{success:!1,error:"RATE_LIMIT_EXCEEDED",message:"Too many orders. Please wait before creating another order."};const n=(0,em.P)((0,em.rJ)(tm.db,"users"),(0,em._M)("walletAddress","==",e.toLowerCase())),r=await(0,em.GG)(n);if(r.empty)throw new Error("User not found");const s=r.docs[0],i=s.data().balance||0,o=t.amount||0;if(console.log("Current balance:",i),console.log("Order amount:",o),i<o)return console.log("Insufficient balance detected"),{success:!1,error:"INSUFFICIENT_FUNDS",currentBalance:i,requiredAmount:o,shortfall:o-i};const a=(0,tt.A)((0,tt.A)({},t),{},{walletAddress:e.toLowerCase(),status:"Active",createdAt:(0,em.O5)(),validatedAt:(0,em.O5)(),balanceAtCreation:i,orderAmount:o,profit:0,totalRevenue:0,todayEarnings:0,dailyRor:"1 Day"===t.timeframe?"2.5%-3.0%":"7 Days"===t.timeframe?"1.8%-2.1%":"15 Days"===t.timeframe?"1.5%-1.8%":"30 Days"===t.timeframe?"1.2%-1.5%":"1.0%-1.3%"}),c=await(0,em.gS)((0,em.rJ)(tm.db,"trades"),a);return await(0,em.mZ)((0,em.H9)(tm.db,"users",s.id),{balance:(0,em.GV)(-o),totalTrades:(0,em.GV)(1),lastTradeAt:(0,em.O5)()}),console.log("Trade created successfully:",c.id),{success:!0,tradeId:c.id,newBalance:i-o,tradeData:(0,tt.A)((0,tt.A)({},a),{},{id:c.id})}}catch(n){throw console.error("Error validating balance and creating trade:",n),n}},Ig=async e=>{try{let t=0;if(null!==e&&void 0!==e&&e.toUpperCase().includes("BTC")){t=(await Eg.get("https://api.coingecko.com/api/v3/simple/price?ids=bitcoin&vs_currencies=usd")).data.bitcoin.usd}else if(null!==e&&void 0!==e&&e.toUpperCase().includes("ETH")){t=(await Eg.get("https://api.coingecko.com/api/v3/simple/price?ids=ethereum&vs_currencies=usd")).data.ethereum.usd}else if(null!==e&&void 0!==e&&e.toUpperCase().includes("EUR")){t=1/(await Eg.get("https://api.exchangerate-api.com/v4/latest/USD")).data.rates.EUR}else if(null!==e&&void 0!==e&&e.toUpperCase().includes("GBP")){t=1/(await Eg.get("https://api.exchangerate-api.com/v4/latest/USD")).data.rates.GBP}else t=1e3*Math.random()+100;return t}catch(t){return console.error("Error fetching real-time price:",t),1e3*Math.random()+100}},_g=async e=>{try{const t=(0,em.P)((0,em.rJ)(tm.db,"trades"),(0,em._M)("userId","==",e),(0,em.My)("createdAt","desc"));return(await(0,em.GG)(t)).docs.map(e=>(0,tt.A)({id:e.id},e.data()))}catch(t){throw console.error("Error getting user trades:",t),t}},Pg=async e=>{try{const t=(0,em.P)((0,em.rJ)(tm.db,"deposits"),(0,em._M)("userId","==",e),(0,em.My)("createdAt","desc"));return(await(0,em.GG)(t)).docs.map(e=>(0,tt.A)({id:e.id},e.data()))}catch(t){throw console.error("Error getting user deposits:",t),t}},jg=async e=>{try{const t=(0,em.P)((0,em.rJ)(tm.db,"withdrawals"),(0,em._M)("userId","==",e),(0,em.My)("createdAt","desc"));return(await(0,em.GG)(t)).docs.map(e=>(0,tt.A)({id:e.id},e.data()))}catch(t){throw console.error("Error getting user withdrawals:",t),t}},Dg=["Thank you for your message! We'll get back to you shortly.","Hello! Thanks for reaching out. Our support team will respond soon.","Hi there! We've received your message and will reply as soon as possible.","Thank you for contacting us! We're here to help and will respond shortly.","Hello! We appreciate your message. Our team will get back to you soon."],Mg=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{const i={userId:e,message:t,isAdmin:n,adminId:r||null,createdAt:(0,em.O5)(),read:!1,conversationId:e},o=await(0,em.gS)((0,em.rJ)(tm.db,"chatMessages"),i),a=(0,tt.A)({id:o.id},i);if(!n)try{setTimeout(async()=>{await(async e=>{try{const t={userId:e,message:Dg[Math.floor(Math.random()*Dg.length)],isAdmin:!0,adminId:"auto-reply-system",createdAt:(0,em.O5)(),read:!1,conversationId:e,isAutoReply:!0},n=await(0,em.gS)((0,em.rJ)(tm.db,"chatMessages"),t);return(0,tt.A)({id:n.id},t)}catch(t){throw console.error("Error sending auto-reply:",t),t}})(e)},1e3+2e3*Math.random())}catch(s){console.error("Error sending auto-reply:",s)}return a}catch(i){throw console.error("Error sending message:",i),i}},Rg=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"admin";try{const r={userId:e,message:t,isAdmin:!0,adminId:n,createdAt:(0,em.O5)(),read:!1,conversationId:e},s=await(0,em.gS)((0,em.rJ)(tm.db,"chatMessages"),r);return(0,tt.A)({id:s.id},r)}catch(r){throw console.error("Error sending admin message:",r),r}},Og=async e=>{try{const t=(0,em.P)((0,em.rJ)(tm.db,"chatMessages"),(0,em._M)("userId","==",e)),n=await(0,em.GG)(t);return n.docs.map(e=>(0,tt.A)({id:e.id},e.data())).sort((e,t)=>{var n,r;return(null!==(n=e.createdAt)&&void 0!==n&&n.toDate?e.createdAt.toDate():new Date(e.createdAt||0))-(null!==(r=t.createdAt)&&void 0!==r&&r.toDate?t.createdAt.toDate():new Date(t.createdAt||0))})}catch(t){throw console.error("Error getting chat history:",t),t}},Lg=(e,t)=>{try{const n=(0,em.P)((0,em.rJ)(tm.db,"chatMessages"),(0,em._M)("userId","==",e));return(0,em.aQ)(n,t,e=>{console.error("Error in subscribeToChatMessages:",e)})}catch(n){return console.error("Error setting up subscribeToChatMessages:",n),()=>{}}},Fg="undefined"!==typeof document,Ug=Fg?s.useLayoutEffect:s.useEffect;function Bg(){const e=(0,s.useRef)(!1);return Ug(()=>(e.current=!0,()=>{e.current=!1}),[]),e}const Vg=e=>e;class zg{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const Gg=["prepare","read","update","preRender","render","postRender"];const{schedule:Hg,cancel:qg,state:Wg,steps:Qg}=function(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Gg.reduce((e,t)=>(e[t]=function(e){let t=new zg,n=new zg,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:function(e){const i=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&s,a=i?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),a.add(e)&&i&&s&&(r=t.order.length),e},cancel:e=>{n.remove(e),o.delete(e)},process:c=>{if(s)i=!0;else{if(s=!0,[t,n]=[n,t],n.clear(),r=t.order.length,r)for(let n=0;n<r;n++){const r=t.order[n];r(c),o.has(r)&&(a.schedule(r),e())}s=!1,i&&(i=!1,a.process(c))}}};return a}(()=>n=!0),e),{}),o=e=>i[e].process(s),a=()=>{const i=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(i-s.timestamp,40),1),s.timestamp=i,s.isProcessing=!0,Gg.forEach(o),s.isProcessing=!1,n&&t&&(r=!1,e(a))},c=Gg.reduce((t,o)=>{const c=i[o];return t[o]=function(t){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,r=!0,s.isProcessing||e(a)),c.schedule(t,i,o)},t},{});return{schedule:c,cancel:e=>Gg.forEach(t=>i[t].cancel(e)),state:s,steps:i}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:Vg,!0);const Kg=(0,s.createContext)(null);function Jg(e){const t=(0,s.useRef)(null);return null===t.current&&(t.current=e()),t.current}class Yg extends s.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function Zg(e){let{children:t,isPresent:n}=e;const r=(0,s.useId)(),i=(0,s.useRef)(null),o=(0,s.useRef)({width:0,height:0,top:0,left:0});return(0,s.useInsertionEffect)(()=>{const{width:e,height:t,top:s,left:a}=o.current;if(n||!i.current||!e||!t)return;i.current.dataset.motionPopId=r;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(r,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(s,"px !important;\n            left: ").concat(a,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[n]),s.createElement(Yg,{isPresent:n,childRef:i,sizeRef:o},s.cloneElement(t,{ref:i}))}const Xg=e=>{let{children:t,initial:n,isPresent:r,onExitComplete:i,custom:o,presenceAffectsLayout:a,mode:c}=e;const l=Jg($g),u=(0,s.useId)(),h=(0,s.useMemo)(()=>({id:u,initial:n,isPresent:r,custom:o,onExitComplete:e=>{l.set(e,!0);for(const t of l.values())if(!t)return;i&&i()},register:e=>(l.set(e,!1),()=>l.delete(e))}),a?void 0:[r]);return(0,s.useMemo)(()=>{l.forEach((e,t)=>l.set(t,!1))},[r]),s.useEffect(()=>{!r&&!l.size&&i&&i()},[r]),"popLayout"===c&&(t=s.createElement(Zg,{isPresent:r},t)),s.createElement(Kg.Provider,{value:h},t)};function $g(){return new Map}const ey=(0,s.createContext)({});let ty=Vg,ny=Vg;const ry=e=>e.key||"";const sy=e=>{let{children:t,custom:n,initial:r=!0,onExitComplete:i,exitBeforeEnter:o,presenceAffectsLayout:a=!0,mode:c="sync"}=e;ny(!o,"Replace exitBeforeEnter with mode='wait'");const l=(0,s.useContext)(ey).forceRender||function(){const e=Bg(),[t,n]=(0,s.useState)(0),r=(0,s.useCallback)(()=>{e.current&&n(t+1)},[t]);return[(0,s.useCallback)(()=>Hg.postRender(r),[r]),t]}()[0],u=Bg(),h=function(e){const t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}(t);let d=h;const f=(0,s.useRef)(new Map).current,m=(0,s.useRef)(d),p=(0,s.useRef)(new Map).current,g=(0,s.useRef)(!0);var y;if(Ug(()=>{g.current=!1,function(e,t){e.forEach(e=>{const n=ry(e);t.set(n,e)})}(h,p),m.current=d}),y=()=>{g.current=!0,p.clear(),f.clear()},(0,s.useEffect)(()=>()=>y(),[]),g.current)return s.createElement(s.Fragment,null,d.map(e=>s.createElement(Xg,{key:ry(e),isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:a,mode:c},e)));d=[...d];const v=m.current.map(ry),w=h.map(ry),b=v.length;for(let s=0;s<b;s++){const e=v[s];-1!==w.indexOf(e)||f.has(e)||f.set(e,void 0)}return"wait"===c&&f.size&&(d=[]),f.forEach((e,t)=>{if(-1!==w.indexOf(t))return;const r=p.get(t);if(!r)return;const o=v.indexOf(t);let g=e;if(!g){const e=()=>{f.delete(t);const e=Array.from(p.keys()).filter(e=>!w.includes(e));if(e.forEach(e=>p.delete(e)),m.current=h.filter(n=>{const r=ry(n);return r===t||e.includes(r)}),!f.size){if(!1===u.current)return;l(),i&&i()}};g=s.createElement(Xg,{key:ry(r),isPresent:!1,onExitComplete:e,custom:n,presenceAffectsLayout:a,mode:c},r),f.set(t,g)}d.splice(o,0,g)}),d=d.map(e=>{const t=e.key;return f.has(t)?e:s.createElement(Xg,{key:ry(e),isPresent:!0,presenceAffectsLayout:a,mode:c},e)}),s.createElement(s.Fragment,null,f.size?d:d.map(e=>(0,s.cloneElement)(e)))},iy=(0,s.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),oy=(0,s.createContext)({}),ay=(0,s.createContext)({strict:!1}),cy=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ly="data-"+cy("framerAppearId");function uy(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function hy(e){return"string"===typeof e||Array.isArray(e)}function dy(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const fy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],my=["initial",...fy];function py(e){return dy(e.animate)||my.some(t=>hy(e[t]))}function gy(e){return Boolean(py(e)||e.variants)}function yy(e){const{initial:t,animate:n}=function(e,t){if(py(e)){const{initial:t,animate:n}=e;return{initial:!1===t||hy(t)?t:void 0,animate:hy(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,s.useContext)(oy));return(0,s.useMemo)(()=>({initial:t,animate:n}),[vy(t),vy(n)])}function vy(e){return Array.isArray(e)?e.join(" "):e}const wy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},by={};for(const n in wy)by[n]={isEnabled:e=>wy[n].some(t=>!!e[t])};const xy=(0,s.createContext)({}),Sy=Symbol.for("motionComponentSymbol");function Ey(e){let{preloadedFeatures:t,createVisualElement:n,useRender:r,useVisualState:i,Component:o}=e;t&&function(e){for(const t in e)by[t]=(0,tt.A)((0,tt.A)({},by[t]),e[t])}(t);const a=(0,s.forwardRef)(function(e,a){let c;const l=(0,tt.A)((0,tt.A)((0,tt.A)({},(0,s.useContext)(iy)),e),{},{layoutId:Ay(e)}),{isStatic:u}=l,h=yy(e),d=i(e,u);if(!u&&Fg){h.visualElement=function(e,t,n,r){const{visualElement:i}=(0,s.useContext)(oy),o=(0,s.useContext)(ay),a=(0,s.useContext)(Kg),c=(0,s.useContext)(iy).reducedMotion,l=(0,s.useRef)();r=r||o.renderer,!l.current&&r&&(l.current=r(e,{visualState:t,parent:i,props:n,presenceContext:a,blockInitialAnimation:!!a&&!1===a.initial,reducedMotionConfig:c}));const u=l.current;(0,s.useInsertionEffect)(()=>{u&&u.update(n,a)});const h=(0,s.useRef)(Boolean(n[ly]&&!window.HandoffComplete));return Ug(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),(0,s.useEffect)(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}(o,d,l,n);const e=(0,s.useContext)(xy),r=(0,s.useContext)(ay).strict;h.visualElement&&(c=h.visualElement.loadFeatures(l,r,t,e))}return s.createElement(oy.Provider,{value:h},c&&h.visualElement?s.createElement(c,(0,tt.A)({visualElement:h.visualElement},l)):null,r(o,e,function(e,t,n){return(0,s.useCallback)(r=>{r&&e.mount&&e.mount(r),t&&(r?t.mount(r):t.unmount()),n&&("function"===typeof n?n(r):uy(n)&&(n.current=r))},[t])}(d,h.visualElement,a),d,u,h.visualElement))});return a[Sy]=o,a}function Ay(e){let{layoutId:t}=e;const n=(0,s.useContext)(ey).id;return n&&void 0!==t?n+"-"+t:t}function Ny(e){function t(t){return Ey(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,r)=>(n.has(r)||n.set(r,t(r)),n.get(r))})}const Ty=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ky(e){return"string"===typeof e&&!e.includes("-")&&!!(Ty.indexOf(e)>-1||/[A-Z]/.test(e))}const Cy={};const Iy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],_y=new Set(Iy);function Py(e,t){let{layout:n,layoutId:r}=t;return _y.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!Cy[e]||"opacity"===e)}const jy=e=>Boolean(e&&e.getVelocity),Dy={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},My=Iy.length;const Ry=e=>t=>"string"===typeof t&&t.startsWith(e),Oy=Ry("--"),Ly=Ry("var(--"),Fy=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Uy=(e,t,n)=>Math.min(Math.max(n,e),t),By={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Vy=(0,tt.A)((0,tt.A)({},By),{},{transform:e=>Uy(0,1,e)}),zy=(0,tt.A)((0,tt.A)({},By),{},{default:1}),Gy=e=>Math.round(1e5*e)/1e5,Hy=/(-)?([\d]*\.?[\d])+/g,qy=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Wy=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Qy(e){return"string"===typeof e}const Ky=e=>({test:t=>Qy(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Jy=Ky("deg"),Yy=Ky("%"),Zy=Ky("px"),Xy=Ky("vh"),$y=Ky("vw"),ev=(0,tt.A)((0,tt.A)({},Yy),{},{parse:e=>Yy.parse(e)/100,transform:e=>Yy.transform(100*e)}),tv=(0,tt.A)((0,tt.A)({},By),{},{transform:Math.round}),nv={borderWidth:Zy,borderTopWidth:Zy,borderRightWidth:Zy,borderBottomWidth:Zy,borderLeftWidth:Zy,borderRadius:Zy,radius:Zy,borderTopLeftRadius:Zy,borderTopRightRadius:Zy,borderBottomRightRadius:Zy,borderBottomLeftRadius:Zy,width:Zy,maxWidth:Zy,height:Zy,maxHeight:Zy,size:Zy,top:Zy,right:Zy,bottom:Zy,left:Zy,padding:Zy,paddingTop:Zy,paddingRight:Zy,paddingBottom:Zy,paddingLeft:Zy,margin:Zy,marginTop:Zy,marginRight:Zy,marginBottom:Zy,marginLeft:Zy,rotate:Jy,rotateX:Jy,rotateY:Jy,rotateZ:Jy,scale:zy,scaleX:zy,scaleY:zy,scaleZ:zy,skew:Jy,skewX:Jy,skewY:Jy,distance:Zy,translateX:Zy,translateY:Zy,translateZ:Zy,x:Zy,y:Zy,z:Zy,perspective:Zy,transformPerspective:Zy,opacity:Vy,originX:ev,originY:ev,originZ:Zy,zIndex:tv,fillOpacity:Vy,strokeOpacity:Vy,numOctaves:tv};function rv(e,t,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=e;let c=!1,l=!1,u=!0;for(const h in t){const e=t[h];if(Oy(h)){i[h]=e;continue}const n=nv[h],r=Fy(e,n);if(_y.has(h)){if(c=!0,o[h]=r,!u)continue;e!==(n.default||0)&&(u=!1)}else h.startsWith("origin")?(l=!0,a[h]=r):s[h]=r}if(t.transform||(c||r?s.transform=function(e,t,n,r){let{enableHardwareAcceleration:s=!0,allowTransformNone:i=!0}=t,o="";for(let a=0;a<My;a++){const t=Iy[a];void 0!==e[t]&&(o+="".concat(Dy[t]||t,"(").concat(e[t],") "))}return s&&!e.z&&(o+="translateZ(0)"),o=o.trim(),r?o=r(e,n?"":o):i&&n&&(o="none"),o}(e.transform,n,u,r):s.transform&&(s.transform="none")),l){const{originX:e="50%",originY:t="50%",originZ:n=0}=a;s.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const sv=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function iv(e,t,n){for(const r in t)jy(t[r])||Py(r,n)||(e[r]=t[r])}function ov(e,t,n){const r={};return iv(r,e.style||{},e),Object.assign(r,function(e,t,n){let{transformTemplate:r}=e;return(0,s.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return rv(e,t,{enableHardwareAcceleration:!n},r),Object.assign({},e.vars,e.style)},[t])}(e,t,n)),e.transformValues?e.transformValues(r):r}function av(e,t,n){const r={},s=ov(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const cv=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function lv(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||cv.has(e)}let uv=e=>!lv(e);try{(hv=require("@emotion/is-prop-valid").default)&&(uv=e=>e.startsWith("on")?!lv(e):hv(e))}catch(MN){}var hv;var dv=n(986);function fv(e,t,n){return"string"===typeof e?e:Zy.transform(t+n*e)}const mv={offset:"stroke-dashoffset",array:"stroke-dasharray"},pv={offset:"strokeDashoffset",array:"strokeDasharray"};const gv=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function yv(e,t,n,r,s){let{attrX:i,attrY:o,attrScale:a,originX:c,originY:l,pathLength:u,pathSpacing:h=1,pathOffset:d=0}=t;if(rv(e,(0,dv.A)(t,gv),n,s),r)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:f,style:m,dimensions:p}=e;f.transform&&(p&&(m.transform=f.transform),delete f.transform),p&&(void 0!==c||void 0!==l||m.transform)&&(m.transformOrigin=function(e,t,n){const r=fv(t,e.x,e.width),s=fv(n,e.y,e.height);return"".concat(r," ").concat(s)}(p,void 0!==c?c:.5,void 0!==l?l:.5)),void 0!==i&&(f.x=i),void 0!==o&&(f.y=o),void 0!==a&&(f.scale=a),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const i=s?mv:pv;e[i.offset]=Zy.transform(-r);const o=Zy.transform(t),a=Zy.transform(n);e[i.array]="".concat(o," ").concat(a)}(f,u,h,d,!1)}const vv=()=>(0,tt.A)((0,tt.A)({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),wv=e=>"string"===typeof e&&"svg"===e.toLowerCase();function bv(e,t,n,r){const i=(0,s.useMemo)(()=>{const n=vv();return yv(n,t,{enableHardwareAcceleration:!1},wv(r),e.transformTemplate),(0,tt.A)((0,tt.A)({},n.attrs),{},{style:(0,tt.A)({},n.style)})},[t]);if(e.style){const t={};iv(t,e.style,e),i.style=(0,tt.A)((0,tt.A)({},t),i.style)}return i}function xv(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,r,i,o)=>{let{latestValues:a}=i;const c=(ky(t)?bv:av)(n,a,o,t),l=function(e,t,n){const r={};for(const s in e)"values"===s&&"object"===typeof e.values||(uv(s)||!0===n&&lv(s)||!t&&!lv(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}(n,"string"===typeof t,e),u=(0,tt.A)((0,tt.A)((0,tt.A)({},l),c),{},{ref:r}),{children:h}=n,d=(0,s.useMemo)(()=>jy(h)?h.get():h,[h]);return(0,s.createElement)(t,(0,tt.A)((0,tt.A)({},u),{},{children:d}))}}function Sv(e,t,n,r){let{style:s,vars:i}=t;Object.assign(e.style,s,r&&r.getProjectionStyles(n));for(const o in i)e.style.setProperty(o,i[o])}const Ev=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Av(e,t,n,r){Sv(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Ev.has(s)?s:cy(s),t.attrs[s])}function Nv(e,t){const{style:n}=e,r={};for(const s in n)(jy(n[s])||t.style&&jy(t.style[s])||Py(s,e))&&(r[s]=n[s]);return r}function Tv(e,t){const n=Nv(e,t);for(const r in e)if(jy(e[r])||jy(t[r])){n[-1!==Iy.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function kv(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,s)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,s)),t}const Cv=e=>Array.isArray(e),Iv=e=>Cv(e)?e[e.length-1]||0:e;function _v(e){const t=jy(e)?e.get():e;return n=t,Boolean(n&&"object"===typeof n&&n.mix&&n.toValue)?t.toValue():t;var n}const Pv=["transitionEnd","transition"];const jv=e=>(t,n)=>{const r=(0,s.useContext)(oy),i=(0,s.useContext)(Kg),o=()=>function(e,t,n,r){let{scrapeMotionValuesFromProps:s,createRenderState:i,onMount:o}=e;const a={latestValues:Dv(t,n,r,s),renderState:i()};return o&&(a.mount=e=>o(t,e,a)),a}(e,t,r,i);return n?o():Jg(o)};function Dv(e,t,n,r){const s={},i=r(e,{});for(const d in i)s[d]=_v(i[d]);let{initial:o,animate:a}=e;const c=py(e),l=gy(e);t&&l&&!c&&!1!==e.inherit&&(void 0===o&&(o=t.initial),void 0===a&&(a=t.animate));let u=!!n&&!1===n.initial;u=u||!1===o;const h=u?a:o;if(h&&"boolean"!==typeof h&&!dy(h)){(Array.isArray(h)?h:[h]).forEach(t=>{const n=kv(e,t);if(!n)return;const{transitionEnd:r,transition:i}=n,o=(0,dv.A)(n,Pv);for(const e in o){let t=o[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(s[e]=t)}for(const e in r)s[e]=r[e]})}return s}const Mv={useVisualState:jv({scrapeMotionValuesFromProps:Tv,createRenderState:vv,onMount:(e,t,n)=>{let{renderState:r,latestValues:s}=n;Hg.read(()=>{try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(DN){r.dimensions={x:0,y:0,width:0,height:0}}}),Hg.render(()=>{yv(r,s,{enableHardwareAcceleration:!1},wv(t.tagName),e.transformTemplate),Av(t,r)})}})},Rv={useVisualState:jv({scrapeMotionValuesFromProps:Nv,createRenderState:sv})};function Ov(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const Lv=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Fv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function Uv(e,t,n,r){return Ov(e,t,(e=>t=>Lv(t)&&e(t,Fv(t)))(n),r)}const Bv=(e,t)=>n=>t(e(n)),Vv=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Bv)};function zv(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const Gv=zv("dragHorizontal"),Hv=zv("dragVertical");function qv(e){let t=!1;if("y"===e)t=Hv();else if("x"===e)t=Gv();else{const e=Gv(),n=Hv();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function Wv(){const e=qv(!0);return!e||(e(),!1)}class Qv{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Kv(e,t){const n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return Uv(e.current,n,(n,s)=>{if("touch"===n.pointerType||Wv())return;const i=e.getProps();e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",t),i[r]&&Hg.update(()=>i[r](n,s))},{passive:!e.getProps()[r]})}const Jv=(e,t)=>!!t&&(e===t||Jv(e,t.parentElement));function Yv(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Fv(n))}const Zv=["root"],Xv=new WeakMap,$v=new WeakMap,ew=e=>{const t=Xv.get(e.target);t&&t(e)},tw=e=>{e.forEach(ew)};function nw(e,t,n){const r=function(e){let{root:t}=e,n=(0,dv.A)(e,Zv);const r=t||document;$v.has(r)||$v.set(r,{});const s=$v.get(r),i=JSON.stringify(n);return s[i]||(s[i]=new IntersectionObserver(tw,(0,tt.A)({root:t},n))),s[i]}(t);return Xv.set(e,n),r.observe(e),()=>{Xv.delete(e),r.unobserve(e)}}const rw={some:0,all:1};const sw={inView:{Feature:class extends Qv{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:r="some",once:s}=e,i={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof r?r:rw[r]};return nw(this.node.current,i,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,s&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:r}=this.node.getProps(),i=t?n:r;i&&i(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Qv{constructor(){super(...arguments),this.removeStartListeners=Vg,this.removeEndListeners=Vg,this.removeAccessibleListeners=Vg,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),r=Uv(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:r,globalTapTarget:s}=this.node.getProps();Hg.update(()=>{s||Jv(this.node.current,e.target)?n&&n(e,t):r&&r(e,t)})},{passive:!(n.onTap||n.onPointerUp)}),s=Uv(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Vv(r,s),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=Ov(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=Ov(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&Yv("up",(e,t)=>{const{onTap:n}=this.node.getProps();n&&Hg.update(()=>n(e,t))})}),Yv("down",(e,t)=>{this.startPress(e,t)})}),t=Ov(this.node.current,"blur",()=>{this.isPressing&&Yv("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=Vv(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Hg.update(()=>n(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Wv()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Hg.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=Uv(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=Ov(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Vv(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Qv{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(DN){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Vv(Ov(this.node.current,"focus",()=>this.onFocus()),Ov(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Qv{mount(){this.unmount=Vv(Kv(this.node,!0),Kv(this.node,!1))}unmount(){}}}};function iw(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function ow(e,t,n){const r=e.getProps();return kv(r,t,void 0!==n?n:r.custom,function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.get()),t}(e),function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.getVelocity()),t}(e))}const aw=e=>1e3*e,cw=e=>e/1e3,lw=!1,uw=e=>Array.isArray(e)&&"number"===typeof e[0];function hw(e){return Boolean(!e||"string"===typeof e&&fw[e]||uw(e)||Array.isArray(e)&&e.every(hw))}const dw=e=>{let[t,n,r,s]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(r,", ").concat(s,")")},fw={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:dw([0,.65,.55,1]),circOut:dw([.55,0,1,.45]),backIn:dw([.31,.01,.66,-.59]),backOut:dw([.33,1.53,.69,.99])};function mw(e){if(e)return uw(e)?dw(e):Array.isArray(e)?e.map(mw):fw[e]}const pw=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function gw(e,t,n,r){if(e===t&&n===r)return Vg;const s=t=>function(e,t,n,r,s){let i,o,a=0;do{o=t+(n-t)/2,i=pw(o,r,s)-e,i>0?n=o:t=o}while(Math.abs(i)>1e-7&&++a<12);return o}(t,0,1,e,n);return e=>0===e||1===e?e:pw(s(e),t,r)}const yw=gw(.42,0,1,1),vw=gw(0,0,.58,1),ww=gw(.42,0,.58,1),bw=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,xw=e=>t=>1-e(1-t),Sw=e=>1-Math.sin(Math.acos(e)),Ew=xw(Sw),Aw=bw(Sw),Nw=gw(.33,1.53,.69,.99),Tw=xw(Nw),kw=bw(Tw),Cw={linear:Vg,easeIn:yw,easeInOut:ww,easeOut:vw,circIn:Sw,circInOut:Aw,circOut:Ew,backIn:Tw,backInOut:kw,backOut:Nw,anticipate:e=>(e*=2)<1?.5*Tw(e):.5*(2-Math.pow(2,-10*(e-1)))},Iw=e=>{if(Array.isArray(e)){ny(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,r,s]=e;return gw(t,n,r,s)}return"string"===typeof e?(ny(void 0!==Cw[e],"Invalid easing type '".concat(e,"'")),Cw[e]):e},_w=(e,t)=>n=>Boolean(Qy(n)&&Wy.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Pw=(e,t,n)=>r=>{if(!Qy(r))return r;const[s,i,o,a]=r.match(Hy);return{[e]:parseFloat(s),[t]:parseFloat(i),[n]:parseFloat(o),alpha:void 0!==a?parseFloat(a):1}},jw=(0,tt.A)((0,tt.A)({},By),{},{transform:e=>Math.round((e=>Uy(0,255,e))(e))}),Dw={test:_w("rgb","red"),parse:Pw("red","green","blue"),transform:e=>{let{red:t,green:n,blue:r,alpha:s=1}=e;return"rgba("+jw.transform(t)+", "+jw.transform(n)+", "+jw.transform(r)+", "+Gy(Vy.transform(s))+")"}};const Mw={test:_w("#"),parse:function(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}},transform:Dw.transform},Rw={test:_w("hsl","hue"),parse:Pw("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:r,alpha:s=1}=e;return"hsla("+Math.round(t)+", "+Yy.transform(Gy(n))+", "+Yy.transform(Gy(r))+", "+Gy(Vy.transform(s))+")"}},Ow={test:e=>Dw.test(e)||Mw.test(e)||Rw.test(e),parse:e=>Dw.test(e)?Dw.parse(e):Rw.test(e)?Rw.parse(e):Mw.parse(e),transform:e=>Qy(e)?e:e.hasOwnProperty("red")?Dw.transform(e):Rw.transform(e)},Lw=(e,t,n)=>-n*e+n*t+e;function Fw(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const Uw=(e,t,n)=>{const r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},Bw=[Mw,Dw,Rw];function Vw(e){const t=(n=e,Bw.find(e=>e.test(n)));var n;ny(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));let r=t.parse(e);return t===Rw&&(r=function(e){let{hue:t,saturation:n,lightness:r,alpha:s}=e;t/=360,n/=100,r/=100;let i=0,o=0,a=0;if(n){const e=r<.5?r*(1+n):r+n-r*n,s=2*r-e;i=Fw(s,e,t+1/3),o=Fw(s,e,t),a=Fw(s,e,t-1/3)}else i=o=a=r;return{red:Math.round(255*i),green:Math.round(255*o),blue:Math.round(255*a),alpha:s}}(r)),r}const zw=(e,t)=>{const n=Vw(e),r=Vw(t),s=(0,tt.A)({},n);return e=>(s.red=Uw(n.red,r.red,e),s.green=Uw(n.green,r.green,e),s.blue=Uw(n.blue,r.blue,e),s.alpha=Lw(n.alpha,r.alpha,e),Dw.transform(s))};const Gw={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:Vg},Hw={regex:qy,countKey:"Colors",token:"${c}",parse:Ow.parse},qw={regex:Hy,countKey:"Numbers",token:"${n}",parse:By.parse};function Ww(e,t){let{regex:n,countKey:r,token:s,parse:i}=t;const o=e.tokenised.match(n);o&&(e["num"+r]=o.length,e.tokenised=e.tokenised.replace(n,s),e.values.push(...o.map(i)))}function Qw(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Ww(n,Gw),Ww(n,Hw),Ww(n,qw),n}function Kw(e){return Qw(e).values}function Jw(e){const{values:t,numColors:n,numVars:r,tokenised:s}=Qw(e),i=t.length;return e=>{let t=s;for(let s=0;s<i;s++)t=s<r?t.replace(Gw.token,e[s]):s<r+n?t.replace(Hw.token,Ow.transform(e[s])):t.replace(qw.token,Gy(e[s]));return t}}const Yw=e=>"number"===typeof e?0:e;const Zw={test:function(e){var t,n;return isNaN(e)&&Qy(e)&&((null===(t=e.match(Hy))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(qy))||void 0===n?void 0:n.length)||0)>0},parse:Kw,createTransformer:Jw,getAnimatableNone:function(e){const t=Kw(e);return Jw(e)(t.map(Yw))}},Xw=(e,t)=>n=>"".concat(n>0?t:e);function $w(e,t){return"number"===typeof e?n=>Lw(e,t,n):Ow.test(e)?zw(e,t):e.startsWith("var(")?Xw(e,t):nb(e,t)}const eb=(e,t)=>{const n=[...e],r=n.length,s=e.map((e,n)=>$w(e,t[n]));return e=>{for(let t=0;t<r;t++)n[t]=s[t](e);return n}},tb=(e,t)=>{const n=(0,tt.A)((0,tt.A)({},e),t),r={};for(const s in n)void 0!==e[s]&&void 0!==t[s]&&(r[s]=$w(e[s],t[s]));return e=>{for(const t in r)n[t]=r[t](e);return n}},nb=(e,t)=>{const n=Zw.createTransformer(t),r=Qw(e),s=Qw(t);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Vv(eb(r.values,s.values),n):(ty(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),Xw(e,t))},rb=(e,t,n)=>{const r=t-e;return 0===r?1:(n-e)/r},sb=(e,t)=>n=>Lw(e,t,n);function ib(e,t,n){const r=[],s=n||("number"===typeof(i=e[0])?sb:"string"===typeof i?Ow.test(i)?zw:nb:Array.isArray(i)?eb:"object"===typeof i?tb:sb);var i;const o=e.length-1;for(let a=0;a<o;a++){let n=s(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||Vg:t;n=Vv(e,n)}r.push(n)}return r}function ob(e,t){let{clamp:n=!0,ease:r,mixer:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length;if(ny(i===t.length,"Both input and output ranges must be the same length"),1===i)return()=>t[0];e[0]>e[i-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=ib(t,r,s),a=o.length,c=t=>{let n=0;if(a>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const r=rb(e[n],e[n+1],t);return o[n](r)};return n?t=>c(Uy(e[0],e[i-1],t)):c}function ab(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=rb(0,t,r);e.push(Lw(n,1,s))}}(t,e.length-1),t}function cb(e){let{duration:t=300,keyframes:n,times:r,ease:s="easeInOut"}=e;const i=(e=>Array.isArray(e)&&"number"!==typeof e[0])(s)?s.map(Iw):Iw(s),o={done:!1,value:n[0]},a=function(e,t){return e.map(e=>e*t)}(r&&r.length===n.length?r:ab(n),t),c=ob(a,n,{ease:Array.isArray(i)?i:(l=n,u=i,l.map(()=>u||ww).splice(0,l.length-1))});var l,u;return{calculatedDuration:t,next:e=>(o.value=c(e),o.done=e>=t,o)}}function lb(e,t){return t?e*(1e3/t):0}function ub(e,t,n){const r=Math.max(t-5,0);return lb(n-e(r),t-r)}const hb=.001;function db(e){let t,n,{duration:r=800,bounce:s=.25,velocity:i=0,mass:o=1}=e;ty(r<=aw(10),"Spring duration must be 10 seconds or less");let a=1-s;a=Uy(.05,1,a),r=Uy(.01,10,cw(r)),a<1?(t=e=>{const t=e*a,n=t*r,s=t-i,o=mb(e,a),c=Math.exp(-n);return hb-s/o*c},n=e=>{const n=e*a*r,s=n*i+i,o=Math.pow(a,2)*Math.pow(e,2)*r,c=Math.exp(-n),l=mb(Math.pow(e,2),a);return(-t(e)+hb>0?-1:1)*((s-o)*c)/l}):(t=e=>Math.exp(-e*r)*((e-i)*r+1)-.001,n=e=>Math.exp(-e*r)*(r*r*(i-e)));const c=function(e,t,n){let r=n;for(let s=1;s<fb;s++)r-=e(r)/t(r);return r}(t,n,5/r);if(r=aw(r),isNaN(c))return{stiffness:100,damping:10,duration:r};{const e=Math.pow(c,2)*o;return{stiffness:e,damping:2*a*Math.sqrt(o*e),duration:r}}}const fb=12;function mb(e,t){return e*Math.sqrt(1-t*t)}const pb=["keyframes","restDelta","restSpeed"],gb=["duration","bounce"],yb=["stiffness","damping","mass"];function vb(e,t){return t.some(t=>void 0!==e[t])}function wb(e){let{keyframes:t,restDelta:n,restSpeed:r}=e,s=(0,dv.A)(e,pb);const i=t[0],o=t[t.length-1],a={done:!1,value:i},{stiffness:c,damping:l,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=function(e){let t=(0,tt.A)({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!vb(e,yb)&&vb(e,gb)){const n=db(e);t=(0,tt.A)((0,tt.A)((0,tt.A)({},t),n),{},{mass:1}),t.isResolvedFromDuration=!0}return t}((0,tt.A)((0,tt.A)({},s),{},{velocity:-cw(s.velocity||0)})),m=d||0,p=l/(2*Math.sqrt(c*u)),g=o-i,y=cw(Math.sqrt(c/u)),v=Math.abs(g)<5;let w;if(r||(r=v?.01:2),n||(n=v?.005:.5),p<1){const e=mb(y,p);w=t=>{const n=Math.exp(-p*y*t);return o-n*((m+p*y*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===p)w=e=>o-Math.exp(-y*e)*(g+(m+y*g)*e);else{const e=y*Math.sqrt(p*p-1);w=t=>{const n=Math.exp(-p*y*t),r=Math.min(e*t,300);return o-n*((m+p*y*g)*Math.sinh(r)+e*g*Math.cosh(r))/e}}return{calculatedDuration:f&&h||null,next:e=>{const t=w(e);if(f)a.done=e>=h;else{let s=m;0!==e&&(s=p<1?ub(w,e,t):0);const i=Math.abs(s)<=r,c=Math.abs(o-t)<=n;a.done=i&&c}return a.value=a.done?o:t,a}}}function bb(e){let{keyframes:t,velocity:n=0,power:r=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:o=500,modifyTarget:a,min:c,max:l,restDelta:u=.5,restSpeed:h}=e;const d=t[0],f={done:!1,value:d},m=e=>void 0===c?l:void 0===l||Math.abs(c-e)<Math.abs(l-e)?c:l;let p=r*n;const g=d+p,y=void 0===a?g:a(g);y!==g&&(p=y-d);const v=e=>-p*Math.exp(-e/s),w=e=>y+v(e),b=e=>{const t=v(e),n=w(e);f.done=Math.abs(t)<=u,f.value=f.done?y:n};let x,S;const E=e=>{var t;(t=f.value,void 0!==c&&t<c||void 0!==l&&t>l)&&(x=e,S=wb({keyframes:[f.value,m(f.value)],velocity:ub(w,e,f.value),damping:i,stiffness:o,restDelta:u,restSpeed:h}))};return E(0),{calculatedDuration:null,next:e=>{let t=!1;return S||void 0!==x||(t=!0,b(e),E(e)),void 0!==x&&e>x?S.next(e-x):(!t&&b(e),f)}}}const xb=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>Hg.update(t,!0),stop:()=>qg(t),now:()=>Wg.isProcessing?Wg.timestamp:performance.now()}};function Sb(e){let t=0;let n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}const Eb=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],Ab={decay:bb,inertia:bb,tween:cb,keyframes:cb,spring:wb};function Nb(e){let t,n,{autoplay:r=!0,delay:s=0,driver:i=xb,keyframes:o,type:a="keyframes",repeat:c=0,repeatDelay:l=0,repeatType:u="loop",onPlay:h,onStop:d,onComplete:f,onUpdate:m}=e,p=(0,dv.A)(e,Eb),g=1,y=!1;const v=()=>{n=new Promise(e=>{t=e})};let w;v();const b=Ab[a]||cb;let x;b!==cb&&"number"!==typeof o[0]&&(x=ob([0,100],o,{clamp:!1}),o=[0,100]);const S=b((0,tt.A)((0,tt.A)({},p),{},{keyframes:o}));let E;"mirror"===u&&(E=b((0,tt.A)((0,tt.A)({},p),{},{keyframes:[...o].reverse(),velocity:-(p.velocity||0)})));let A="idle",N=null,T=null,k=null;null===S.calculatedDuration&&c&&(S.calculatedDuration=Sb(S));const{calculatedDuration:C}=S;let I=1/0,_=1/0;null!==C&&(I=C+l,_=I*(c+1)-l);let P=0;const j=e=>{if(null===T)return;g>0&&(T=Math.min(T,e)),g<0&&(T=Math.min(e-_/g,T)),P=null!==N?N:Math.round(e-T)*g;const t=P-s*(g>=0?1:-1),n=g>=0?t<0:t>_;P=Math.max(t,0),"finished"===A&&null===N&&(P=_);let r=P,i=S;if(c){const e=Math.min(P,_)/I;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,c+1);Boolean(t%2)&&("reverse"===u?(n=1-n,l&&(n-=l/I)):"mirror"===u&&(i=E)),r=Uy(0,1,n)*I}const a=n?{done:!1,value:o[0]}:i.next(r);x&&(a.value=x(a.value));let{done:h}=a;n||null===C||(h=g>=0?P>=_:P<=0);const d=null===N&&("finished"===A||"running"===A&&h);return m&&m(a.value),d&&R(),a},D=()=>{w&&w.stop(),w=void 0},M=()=>{A="idle",D(),t(),v(),T=k=null},R=()=>{A="finished",f&&f(),D(),t()},O=()=>{if(y)return;w||(w=i(j));const e=w.now();h&&h(),null!==N?T=e-N:T&&"finished"!==A||(T=e),"finished"===A&&v(),k=T,N=null,A="running",w.start()};r&&O();const L={then:(e,t)=>n.then(e,t),get time(){return cw(P)},set time(e){e=aw(e),P=e,null===N&&w&&0!==g?T=w.now()-e/g:N=e},get duration(){const e=null===S.calculatedDuration?Sb(S):S.calculatedDuration;return cw(e)},get speed(){return g},set speed(e){e!==g&&w&&(g=e,L.time=cw(P))},get state(){return A},play:O,pause:()=>{A="paused",N=P},stop:()=>{y=!0,"idle"!==A&&(A="idle",d&&d(),M())},cancel:()=>{null!==k&&j(k),M()},complete:()=>{A="finished"},sample:e=>(T=0,j(e))};return L}const Tb=["onUpdate","onComplete"],kb=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Cb=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function Ib(e,t,n){let{onUpdate:r,onComplete:s}=n,i=(0,dv.A)(n,Tb);if(!(kb()&&Cb.has(t)&&!i.repeatDelay&&"mirror"!==i.repeatType&&0!==i.damping&&"inertia"!==i.type))return!1;let o,a,c=!1,l=!1;const u=()=>{a=new Promise(e=>{o=e})};u();let{keyframes:h,duration:d=300,ease:f,times:m}=i;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!hw(t.ease))(t,i)){const e=Nb((0,tt.A)((0,tt.A)({},i),{},{repeat:0,delay:0}));let t={done:!1,value:h[0]};const n=[];let r=0;for(;!t.done&&r<2e4;)t=e.sample(r),n.push(t.value),r+=10;m=void 0,h=n,d=r-10,f="linear"}const p=function(e,t,n){let{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:c}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const l={[t]:n};c&&(l.offset=c);const u=mw(a);return Array.isArray(u)&&(l.easing=u),e.animate(l,{delay:r,duration:s,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:i+1,direction:"reverse"===o?"alternate":"normal"})}(e.owner.current,t,h,(0,tt.A)((0,tt.A)({},i),{},{duration:d,ease:f,times:m})),g=()=>{l=!1,p.cancel()},y=()=>{l=!0,Hg.update(g),o(),u()};p.onfinish=()=>{l||(e.set(function(e,t){let{repeat:n,repeatType:r="loop"}=t;return e[n&&"loop"!==r&&n%2===1?0:e.length-1]}(h,i)),s&&s(),y())};return{then:(e,t)=>a.then(e,t),attachTimeline:e=>(p.timeline=e,p.onfinish=null,Vg),get time(){return cw(p.currentTime||0)},set time(e){p.currentTime=aw(e)},get speed(){return p.playbackRate},set speed(e){p.playbackRate=e},get duration(){return cw(d)},play:()=>{c||(p.play(),qg(g))},pause:()=>p.pause(),stop:()=>{if(c=!0,"idle"===p.playState)return;const{currentTime:t}=p;if(t){const n=Nb((0,tt.A)((0,tt.A)({},i),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}y()},complete:()=>{l||p.finish()},cancel:y}}const _b={type:"spring",stiffness:500,damping:25,restSpeed:10},Pb={type:"keyframes",duration:.8},jb={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Db=(e,t)=>{let{keyframes:n}=t;return n.length>2?Pb:_y.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:_b:jb},Mb=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Zw.test(t)&&"0"!==t||t.startsWith("url("))),Rb=new Set(["brightness","contrast","saturate","opacity"]);function Ob(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[r]=n.match(Hy)||[];if(!r)return e;const s=n.replace(r,"");let i=Rb.has(t)?1:0;return r!==n&&(i*=100),t+"("+i+s+")"}const Lb=/([a-z-]*)\(.*?\)/g,Fb=(0,tt.A)((0,tt.A)({},Zw),{},{getAnimatableNone:e=>{const t=e.match(Lb);return t?t.map(Ob).join(" "):e}}),Ub=(0,tt.A)((0,tt.A)({},nv),{},{color:Ow,backgroundColor:Ow,outlineColor:Ow,fill:Ow,stroke:Ow,borderColor:Ow,borderTopColor:Ow,borderRightColor:Ow,borderBottomColor:Ow,borderLeftColor:Ow,filter:Fb,WebkitFilter:Fb}),Bb=e=>Ub[e];function Vb(e,t){let n=Bb(e);return n!==Fb&&(n=Zw),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const zb=e=>/^0[^.\s]+$/.test(e);function Gb(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||zb(e):void 0}const Hb=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function qb(e,t){return e[t]||e.default||e}const Wb=!1,Qb=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return s=>{const i=qb(r,e)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a-=aw(o);const c=function(e,t,n,r){const s=Mb(t,n);let i;i=Array.isArray(n)?[...n]:[null,n];const o=void 0!==r.from?r.from:e.get();let a;const c=[];for(let l=0;l<i.length;l++)null===i[l]&&(i[l]=0===l?o:i[l-1]),Gb(i[l])&&c.push(l),"string"===typeof i[l]&&"none"!==i[l]&&"0"!==i[l]&&(a=i[l]);if(s&&c.length&&a)for(let l=0;l<c.length;l++)i[c[l]]=Vb(t,a);return i}(t,e,n,i),l=c[0],u=c[c.length-1],h=Mb(e,l),d=Mb(e,u);ty(h===d,"You are trying to animate ".concat(e,' from "').concat(l,'" to "').concat(u,'". ').concat(l," is not an animatable value - to enable this animation set ").concat(l," to a value animatable to ").concat(u," via the `style` property."));let f=(0,tt.A)((0,tt.A)({keyframes:c,velocity:t.getVelocity(),ease:"easeOut"},i),{},{delay:-a,onUpdate:e=>{t.set(e),i.onUpdate&&i.onUpdate(e)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}});if(function(e){let{when:t,delay:n,delayChildren:r,staggerChildren:s,staggerDirection:i,repeat:o,repeatType:a,repeatDelay:c,from:l,elapsed:u}=e,h=(0,dv.A)(e,Hb);return!!Object.keys(h).length}(i)||(f=(0,tt.A)((0,tt.A)({},f),Db(e,f))),f.duration&&(f.duration=aw(f.duration)),f.repeatDelay&&(f.repeatDelay=aw(f.repeatDelay)),!h||!d||lw||!1===i.type||Wb)return function(e){let{keyframes:t,delay:n,onUpdate:r,onComplete:s}=e;const i=()=>(r&&r(t[t.length-1]),s&&s(),{time:0,speed:1,duration:0,play:Vg,pause:Vg,stop:Vg,then:e=>(e(),Promise.resolve()),cancel:Vg,complete:Vg});return n?Nb({keyframes:[0,1],duration:0,delay:n,onComplete:i}):i()}(lw?(0,tt.A)((0,tt.A)({},f),{},{delay:0}):f);if(!r.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=Ib(t,e,f);if(n)return n}return Nb(f)}};function Kb(e){return Boolean(jy(e)&&e.add)}const Jb=e=>/^\-?\d*\.?\d+$/.test(e);function Yb(e,t){-1===e.indexOf(t)&&e.push(t)}function Zb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class Xb{constructor(){this.subscriptions=[]}add(e){return Yb(this.subscriptions,e),()=>Zb(this.subscriptions,e)}notify(e,t,n){const r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(let s=0;s<r;s++){const r=this.subscriptions[s];r&&r(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $b={current:void 0};class ex{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var r;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:r,timestamp:s}=Wg;t.lastUpdated!==s&&(t.timeDelta=r,t.lastUpdated=s,Hg.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>Hg.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(r=this.current,!isNaN(parseFloat(r))),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Xb);const n=this.events[e].add(t);return"change"===e?()=>{n(),Hg.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return $b.current&&$b.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?lb(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function tx(e,t){return new ex(e,t)}const nx=e=>t=>t.test(e),rx=[By,Zy,Yy,Jy,$y,Xy,{test:e=>"auto"===e,parse:e=>e}],sx=e=>rx.find(nx(e)),ix=[...rx,Ow,Zw],ox=e=>ix.find(nx(e)),ax=["transitionEnd","transition"];function cx(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,tx(n))}function lx(e,t){const n=ow(e,t);let r=n?e.makeTargetAnimatable(n,!1):{},{transitionEnd:s={},transition:i={}}=r,o=(0,dv.A)(r,ax);o=(0,tt.A)((0,tt.A)({},o),s);for(const a in o){cx(e,a,Iv(o[a]))}}function ux(e,t){if(!t)return;return(t[e]||t.default||t).from}const hx=["transition","transitionEnd"];function dx(e,t){let{protectedKeys:n,needsAnimating:r}=e;const s=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,s}function fx(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let r=0;r<t.length;r++)if(t[r]!==n)return!0}function mx(e,t){let{delay:n=0,transitionOverride:r,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=e.makeTargetAnimatable(t),{transition:o=e.getDefaultTransition(),transitionEnd:a}=i,c=(0,dv.A)(i,hx);const l=e.getValue("willChange");r&&(o=r);const u=[],h=s&&e.animationState&&e.animationState.getState()[s];for(const d in c){const t=e.getValue(d),r=c[d];if(!t||void 0===r||h&&dx(h,d))continue;const s=(0,tt.A)({delay:n,elapsed:0},qb(o||{},d));if(window.HandoffAppearAnimations){const n=e.getProps()[ly];if(n){const e=window.HandoffAppearAnimations(n,d,t,Hg);null!==e&&(s.elapsed=e,s.isHandoff=!0)}}let i=!s.isHandoff&&!fx(t,r);if("spring"===s.type&&(t.getVelocity()||s.velocity)&&(i=!1),t.animation&&(i=!1),i)continue;t.start(Qb(d,t,r,e.shouldReduceMotion&&_y.has(d)?{type:!1}:s));const a=t.animation;Kb(l)&&(l.add(d),a.then(()=>l.remove(d))),u.push(a)}return a&&Promise.all(u).then(()=>{a&&lx(e,a)}),u}function px(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=ow(e,t,n.custom);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(mx(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:i=0,staggerChildren:o,staggerDirection:a}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,i=arguments.length>5?arguments[5]:void 0;const o=[],a=(e.variantChildren.size-1)*r,c=1===s?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return a-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(gx).forEach((e,r)=>{e.notify("AnimationStart",t),o.push(px(e,t,(0,tt.A)((0,tt.A)({},i),{},{delay:n+c(r)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(o)}(e,t,i+r,o,a,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[e,t]="beforeChildren"===a?[i,o]:[o,i];return e().then(()=>t())}return Promise.all([i(),o(n.delay)])}function gx(e,t){return e.sortNodePosition(t)}const yx=["transition","transitionEnd"],vx=[...fy].reverse(),wx=fy.length;function bx(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:r}=t;return function(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const s=t.map(t=>px(e,t,r));n=Promise.all(s)}else if("string"===typeof t)n=px(e,t,r);else{const s="function"===typeof t?ow(e,t,r.custom):t;n=Promise.all(mx(e,s,r))}return n.then(()=>e.notify("AnimationComplete",t))}(e,n,r)}))}function xx(e){let t=bx(e);const n={animate:Ex(!0),whileInView:Ex(),whileHover:Ex(),whileTap:Ex(),whileDrag:Ex(),whileFocus:Ex(),exit:Ex()};let r=!0;const s=(t,n)=>{const r=ow(e,n);if(r){const{transition:e,transitionEnd:n}=r,s=(0,dv.A)(r,yx);t=(0,tt.A)((0,tt.A)((0,tt.A)({},t),s),n)}return t};function i(i,o){const a=e.getProps(),c=e.getVariantContext(!0)||{},l=[],u=new Set;let h={},d=1/0;for(let t=0;t<wx;t++){const f=vx[t],m=n[f],p=void 0!==a[f]?a[f]:c[f],g=hy(p),y=f===o?m.isActive:null;!1===y&&(d=t);let v=p===c[f]&&p!==a[f]&&g;if(v&&r&&e.manuallyAnimateOnMount&&(v=!1),m.protectedKeys=(0,tt.A)({},h),!m.isActive&&null===y||!p&&!m.prevProp||dy(p)||"boolean"===typeof p)continue;let w=Sx(m.prevProp,p)||f===o&&m.isActive&&!v&&g||t>d&&g,b=!1;const x=Array.isArray(p)?p:[p];let S=x.reduce(s,{});!1===y&&(S={});const{prevResolvedValues:E={}}=m,A=(0,tt.A)((0,tt.A)({},E),S),N=e=>{w=!0,u.has(e)&&(b=!0,u.delete(e)),m.needsAnimating[e]=!0};for(const e in A){const t=S[e],n=E[e];if(h.hasOwnProperty(e))continue;let r=!1;r=Cv(t)&&Cv(n)?!iw(t,n):t!==n,r?void 0!==t?N(e):u.add(e):void 0!==t&&u.has(e)?N(e):m.protectedKeys[e]=!0}m.prevProp=p,m.prevResolvedValues=S,m.isActive&&(h=(0,tt.A)((0,tt.A)({},h),S)),r&&e.blockInitialAnimation&&(w=!1),!w||v&&!b||l.push(...x.map(e=>({animation:e,options:(0,tt.A)({type:f},i)})))}if(u.size){const t={};u.forEach(n=>{const r=e.getBaseTarget(n);void 0!==r&&(t[n]=r)}),l.push({animation:t})}let f=Boolean(l.length);return!r||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(f=!1),r=!1,f?t(l):Promise.resolve()}return{animateChanges:i,setActive:function(t,r,s){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)}),n[t].isActive=r;const a=i(s,t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function Sx(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!iw(t,e)}function Ex(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let Ax=0;const Nx={animation:{Feature:class extends Qv{constructor(e){super(e),e.animationState||(e.animationState=xx(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),dy(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends Qv{constructor(){super(...arguments),this.id=Ax++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&s.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},Tx=(e,t)=>Math.abs(e-t);class kx{constructor(e,t){let{transformPagePoint:n,contextWindow:r,dragSnapToOrigin:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=_x(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=Tx(e.x,t.x),r=Tx(e.y,t.y);return Math.sqrt(n**2+r**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:r}=e,{timestamp:s}=Wg;this.history.push((0,tt.A)((0,tt.A)({},r),{},{timestamp:s}));const{onStart:i,onMove:o}=this.handlers;t||(i&&i(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),o&&o(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=Cx(t,this.transformPagePoint),Hg.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:r,resumeAnimation:s}=this.handlers;if(this.dragSnapToOrigin&&s&&s(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const i=_x("pointercancel"===e.type?this.lastMoveEventInfo:Cx(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,i),r&&r(e,i)},!Lv(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=n,this.contextWindow=r||window;const i=Cx(Fv(e),this.transformPagePoint),{point:o}=i,{timestamp:a}=Wg;this.history=[(0,tt.A)((0,tt.A)({},o),{},{timestamp:a})];const{onSessionStart:c}=t;c&&c(e,_x(i,this.history)),this.removeListeners=Vv(Uv(this.contextWindow,"pointermove",this.handlePointerMove),Uv(this.contextWindow,"pointerup",this.handlePointerUp),Uv(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qg(this.updatePoint)}}function Cx(e,t){return t?{point:t(e.point)}:e}function Ix(e,t){return{x:e.x-t.x,y:e.y-t.y}}function _x(e,t){let{point:n}=e;return{point:n,delta:Ix(n,jx(t)),offset:Ix(n,Px(t)),velocity:Dx(t,.1)}}function Px(e){return e[0]}function jx(e){return e[e.length-1]}function Dx(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=jx(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>aw(t)));)n--;if(!r)return{x:0,y:0};const i=cw(s.timestamp-r.timestamp);if(0===i)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Mx(e){return e.max-e.min}function Rx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function Ox(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=Lw(t.min,t.max,e.origin),e.scale=Mx(n)/Mx(t),(Rx(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Lw(n.min,n.max,e.origin)-e.originPoint,(Rx(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Lx(e,t,n,r){Ox(e.x,t.x,n.x,r?r.originX:void 0),Ox(e.y,t.y,n.y,r?r.originY:void 0)}function Fx(e,t,n){e.min=n.min+t.min,e.max=e.min+Mx(t)}function Ux(e,t,n){e.min=t.min-n.min,e.max=e.min+Mx(t)}function Bx(e,t,n){Ux(e.x,t.x,n.x),Ux(e.y,t.y,n.y)}function Vx(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function zx(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}const Gx=.35;function Hx(e,t,n){return{min:qx(e,t),max:qx(e,n)}}function qx(e,t){return"number"===typeof e?e:e[t]||0}const Wx=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Qx(e){return[e("x"),e("y")]}function Kx(e){let{top:t,left:n,right:r,bottom:s}=e;return{x:{min:n,max:r},y:{min:t,max:s}}}function Jx(e){return void 0===e||1===e}function Yx(e){let{scale:t,scaleX:n,scaleY:r}=e;return!Jx(t)||!Jx(n)||!Jx(r)}function Zx(e){return Yx(e)||Xx(e)||e.z||e.rotate||e.rotateX||e.rotateY}function Xx(e){return $x(e.x)||$x(e.y)}function $x(e){return e&&"0%"!==e}function eS(e,t,n){return n+t*(e-n)}function tS(e,t,n,r,s){return void 0!==s&&(e=eS(e,s,r)),eS(e,n,r)+t}function nS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;e.min=tS(e.min,t,n,r,s),e.max=tS(e.max,t,n,r,s)}function rS(e,t){let{x:n,y:r}=t;nS(e.x,n.translate,n.scale,n.originPoint),nS(e.y,r.translate,r.scale,r.originPoint)}function sS(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function iS(e,t){e.min=e.min+t,e.max=e.max+t}function oS(e,t,n){let[r,s,i]=n;const o=void 0!==t[i]?t[i]:.5,a=Lw(e.min,e.max,o);nS(e,t[r],t[s],a,t.scale)}const aS=["x","scaleX","originX"],cS=["y","scaleY","originY"];function lS(e,t){oS(e.x,t,aS),oS(e.y,t,cS)}function uS(e,t){return Kx(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}const hS=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},dS=new WeakMap;class fS{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:r}=this.getProps();this.panSession=new kx(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Fv(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:r,onDragStart:s}=this.getProps();if(n&&!r&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=qv(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qx(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Yy.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const r=n.layout.layoutBox[e];if(r){t=Mx(r)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),s&&Hg.update(()=>s(e,t),!1,!0);const{animationState:i}=this.visualElement;i&&i.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:r,onDirectionLock:s,onDrag:i}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:o}=t;if(r&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(o),void(null!==this.currentDirection&&s&&s(this.currentDirection));this.updateAxis("x",t.point,o),this.updateAxis("y",t.point,o),this.visualElement.render(),i&&i(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Qx(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:r,contextWindow:hS(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Hg.update(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:r}=this.getProps();if(!n||!mS(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let i=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(i=function(e,t,n){let{min:r,max:s}=t;return void 0!==r&&e<r?e=n?Lw(r,e,n.min):Math.max(e,r):void 0!==s&&e>s&&(e=n?Lw(s,e,n.max):Math.min(e,s)),e}(i,this.constraints[e],this.elastic[e])),s.set(i)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,s=this.constraints;t&&uy(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!r)&&function(e,t){let{top:n,left:r,bottom:s,right:i}=t;return{x:Vx(e.x,r,i),y:Vx(e.y,n,s)}}(r.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gx;return!1===e?e=0:!0===e&&(e=Gx),{x:Hx(e,"left","right"),y:Hx(e,"top","bottom")}}(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Qx(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!uy(e))return!1;const n=e.current;ny(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=function(e,t,n){const r=uS(e,n),{scroll:s}=t;return s&&(iS(r.x,s.offset.x),iS(r.y,s.offset.y)),r}(n,r.root,this.visualElement.getTransformPagePoint());let i=function(e,t){return{x:zx(e.x,t.x),y:zx(e.y,t.y)}}(r.layout.layoutBox,s);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(i));this.hasMutatedConstraints=!!e,e&&(i=Kx(e))}return i}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:r,dragTransition:s,dragSnapToOrigin:i,onDragTransitionEnd:o}=this.getProps(),a=this.constraints||{},c=Qx(o=>{if(!mS(o,t,this.currentDirection))return;let c=a&&a[o]||{};i&&(c={min:0,max:0});const l=r?200:1e6,u=r?40:1e7,h=(0,tt.A)((0,tt.A)({type:"inertia",velocity:n?e[o]:0,bounceStiffness:l,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},s),c);return this.startAxisValueAnimation(o,h)});return Promise.all(c).then(o)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(Qb(e,n,0,t))}stopAnimation(){Qx(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qx(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Qx(t=>{const{drag:n}=this.getProps();if(!mS(t,n,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:n,max:i}=r.layout.layoutBox[t];s.set(e[t]-Lw(n,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!uy(t)||!n||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Qx(e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();r[e]=function(e,t){let n=.5;const r=Mx(e),s=Mx(t);return s>r?n=rb(t.min,t.max-r,e.min):r>s&&(n=rb(e.min,e.max-s,t.min)),Uy(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Qx(t=>{if(!mS(t,e,null))return;const n=this.getAxisMotionValue(t),{min:s,max:i}=this.constraints[t];n.set(Lw(s,i,r[t]))})}addListeners(){if(!this.visualElement.current)return;dS.set(this.visualElement,this);const e=Uv(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();uy(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,r=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const s=Ov(window,"resize",()=>this.scalePositionWithinConstraints()),i=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Qx(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{s(),e(),r(),i&&i()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:i=Gx,dragMomentum:o=!0}=e;return(0,tt.A)((0,tt.A)({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:r,dragConstraints:s,dragElastic:i,dragMomentum:o})}}function mS(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const pS=e=>(t,n)=>{e&&Hg.update(()=>e(t,n))};const gS={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function yS(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const vS={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Zy.test(e))return e;e=parseFloat(e)}const n=yS(e,t.target.x),r=yS(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},wS={correct:(e,t)=>{let{treeScale:n,projectionDelta:r}=t;const s=e,i=Zw.parse(e);if(i.length>5)return s;const o=Zw.createTransformer(e),a="number"!==typeof i[0]?1:0,c=r.x.scale*n.x,l=r.y.scale*n.y;i[0+a]/=c,i[1+a]/=l;const u=Lw(c,l,.5);return"number"===typeof i[2+a]&&(i[2+a]/=u),"number"===typeof i[3+a]&&(i[3+a]/=u),o(i)}};class bS extends s.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:r}=this.props,{projection:s}=e;var i;i=SS,Object.assign(Cy,i),s&&(t.group&&t.group.add(s),n&&n.register&&r&&n.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions((0,tt.A)((0,tt.A)({},s.options),{},{onExitComplete:()=>this.safeToRemove()}))),gS.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:r,isPresent:s}=this.props,i=n.projection;return i?(i.isPresent=s,r||e.layoutDependency!==t||void 0===t?i.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?i.promote():i.relegate()||Hg.postRender(()=>{const e=i.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),n&&n.deregister&&n.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function xS(e){const[t,n]=function(){const e=(0,s.useContext)(Kg);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:r}=e,i=(0,s.useId)();return(0,s.useEffect)(()=>r(i),[]),!t&&n?[!1,()=>n&&n(i)]:[!0]}(),r=(0,s.useContext)(ey);return s.createElement(bS,(0,tt.A)((0,tt.A)({},e),{},{layoutGroup:r,switchLayoutGroup:(0,s.useContext)(xy),isPresent:t,safeToRemove:n}))}const SS={borderRadius:(0,tt.A)((0,tt.A)({},vS),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:vS,borderTopRightRadius:vS,borderBottomLeftRadius:vS,borderBottomRightRadius:vS,boxShadow:wS},ES=["TopLeft","TopRight","BottomLeft","BottomRight"],AS=ES.length,NS=e=>"string"===typeof e?parseFloat(e):e,TS=e=>"number"===typeof e||Zy.test(e);function kS(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const CS=_S(0,.5,Ew),IS=_S(.5,.95,Vg);function _S(e,t,n){return r=>r<e?0:r>t?1:n(rb(e,t,r))}function PS(e,t){e.min=t.min,e.max=t.max}function jS(e,t){PS(e.x,t.x),PS(e.y,t.y)}function DS(e,t,n,r,s){return e=eS(e-=t,1/n,r),void 0!==s&&(e=eS(e,1/s,r)),e}function MS(e,t,n,r,s){let[i,o,a]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,s=arguments.length>4?arguments[4]:void 0,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Yy.test(t)&&(t=parseFloat(t),t=Lw(o.min,o.max,t/100)-o.min);if("number"!==typeof t)return;let a=Lw(i.min,i.max,r);e===i&&(a-=t),e.min=DS(e.min,t,n,a,s),e.max=DS(e.max,t,n,a,s)}(e,t[i],t[o],t[a],t.scale,r,s)}const RS=["x","scaleX","originX"],OS=["y","scaleY","originY"];function LS(e,t,n,r){MS(e.x,t,RS,n?n.x:void 0,r?r.x:void 0),MS(e.y,t,OS,n?n.y:void 0,r?r.y:void 0)}function FS(e){return 0===e.translate&&1===e.scale}function US(e){return FS(e.x)&&FS(e.y)}function BS(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function VS(e){return Mx(e.x)/Mx(e.y)}class zS{constructor(){this.members=[]}add(e){Yb(this.members,e),e.scheduleRender()}remove(e){if(Zb(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let r=t;r>=0;r--){const e=this.members[r];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;!1===r&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GS(e,t,n){let r="";const s=e.x.translate/t.x,i=e.y.translate/t.y;if((s||i)&&(r="translate3d(".concat(s,"px, ").concat(i,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{rotate:e,rotateX:t,rotateY:s}=n;e&&(r+="rotate(".concat(e,"deg) ")),t&&(r+="rotateX(".concat(t,"deg) ")),s&&(r+="rotateY(".concat(s,"deg) "))}const o=e.x.scale*t.x,a=e.y.scale*t.y;return 1===o&&1===a||(r+="scale(".concat(o,", ").concat(a,")")),r||"none"}const HS=(e,t)=>e.depth-t.depth;class qS{constructor(){this.children=[],this.isDirty=!1}add(e){Yb(this.children,e),this.isDirty=!0}remove(e){Zb(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(HS),this.isDirty=!1,this.children.forEach(e)}}const WS=["","X","Y","Z"],QS={visibility:"hidden"};let KS=0;const JS={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function YS(e){let{attachResizeListener:t,defaultParent:n,measureScroll:r,checkIsScrollRoot:s,resetTransform:i}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=KS++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,JS.totalNodes=JS.resolvedTargetDeltas=JS.recalculatedProjection=0,this.nodes.forEach($S),this.nodes.forEach(oE),this.nodes.forEach(aE),this.nodes.forEach(eE),function(e){window.MotionDebug&&window.MotionDebug.record(e)}(JS)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new qS)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Xb),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];t&&t.notify(...r)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var r;this.isSVG=(r=e)instanceof SVGElement&&"svg"!==r.tagName,this.instance=e;const{layoutId:s,layout:i,visualElement:o}=this.options;if(o&&!o.current&&o.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(i||s)&&(this.isLayoutDirty=!0),t){let n;const r=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),r=s=>{let{timestamp:i}=s;const o=i-n;o>=t&&(qg(r),e(o-t))};return Hg.read(r,!0),()=>qg(r)}(r,250),gS.hasAnimatedSinceResize&&(gS.hasAnimatedSinceResize=!1,this.nodes.forEach(iE))})}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&o&&(s||i)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:r,layout:s}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||o.getDefaultTransition()||fE,{onLayoutAnimationStart:a,onLayoutAnimationComplete:c}=o.getProps(),l=!this.targetLayout||!BS(this.targetLayout,s)||r,u=!n&&r;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e=(0,tt.A)((0,tt.A)({},qb(i,"layout")),{},{onPlay:a,onComplete:c});(o.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||iE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,qg(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(cE),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let s=0;s<this.path.length;s++){const e=this.path[s];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const r=this.getTransformTemplate();this.prevTransformTemplateValue=r?r(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(nE);this.isUpdating||this.nodes.forEach(rE),this.isUpdating=!1,this.nodes.forEach(sE),this.nodes.forEach(ZS),this.nodes.forEach(XS),this.clearAllSnapshots();const e=performance.now();Wg.delta=Uy(0,1e3/60,e-Wg.timestamp),Wg.timestamp=e,Wg.isProcessing=!0,Qg.update.process(Wg),Qg.preRender.process(Wg),Qg.render.process(Wg),Wg.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(tE),this.sharedNodes.forEach(lE)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Hg.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Hg.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:s(this.instance),offset:r(this.instance)})}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!US(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,s=r!==this.prevTransformTemplateValue;e&&(t||Zx(this.latestValues)||s)&&(i(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var r;return e&&(n=this.removeTransform(n)),gE((r=n).x),gE(r.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(iS(t.x,n.offset.x),iS(t.y,n.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};jS(t,e);for(let n=0;n<this.path.length;n++){const r=this.path[n],{scroll:s,options:i}=r;if(r!==this.root&&s&&i.layoutScroll){if(s.isRoot){jS(t,e);const{scroll:n}=this.root;n&&(iS(t.x,-n.offset.x),iS(t.y,-n.offset.y))}iS(t.x,s.offset.x),iS(t.y,s.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};jS(n,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&lS(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Zx(e.latestValues)&&lS(n,e.latestValues)}return Zx(this.latestValues)&&lS(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};jS(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Zx(e.latestValues))continue;Yx(e.latestValues)&&e.updateSnapshot();const r=Wx();jS(r,e.measurePageBox()),LS(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,r)}return Zx(this.latestValues)&&LS(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=(0,tt.A)((0,tt.A)((0,tt.A)({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wg.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==n;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:s,layoutId:i}=this.options;if(this.layout&&(s||i)){if(this.resolvedRelativeTargetAt=Wg.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Bx(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),jS(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var o,a,c;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),o=this.target,a=this.relativeTarget,c=this.relativeParent.target,Fx(o.x,a.x,c.x),Fx(o.y,a.y,c.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):jS(this.target,this.layout.layoutBox),rS(this.target,this.targetDelta)):jS(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Bx(this.relativeTargetOrigin,this.target,e.target),jS(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}JS.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Yx(this.parent.latestValues)&&!Xx(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Wg.timestamp&&(r=!1),r)return;const{layout:s,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!i)return;jS(this.layoutCorrected,this.layout.layoutBox);const o=this.treeScale.x,a=this.treeScale.y;!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=n.length;if(!s)return;let i,o;t.x=t.y=1;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const s=i.instance;s&&s.style&&"contents"===s.style.display||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&lS(e,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,rS(e,o)),r&&Zx(i.latestValues)&&lS(e,i.latestValues))}t.x=sS(t.x),t.y=sS(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:c}=t;if(!c)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const l=this.projectionTransform;Lx(this.projectionDelta,this.layoutCorrected,c,this.latestValues),this.projectionTransform=GS(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===o&&this.treeScale.y===a||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",c)),JS.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,r=n?n.latestValues:{},s=(0,tt.A)({},this.latestValues),i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const o={x:{min:0,max:0},y:{min:0,max:0}},a=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),c=this.getStack(),l=!c||c.members.length<=1,u=Boolean(a&&!l&&!0===this.options.crossfade&&!this.path.some(dE));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;uE(i.x,e.x,n),uE(i.y,e.y,n),this.setTargetDelta(i),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Bx(o,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,r){hE(e.x,t.x,n.x,r),hE(e.y,t.y,n.y,r)}(this.relativeTarget,this.relativeTargetOrigin,o,n),h&&function(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}(this.relativeTarget,h)&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),jS(h,this.relativeTarget)),a&&(this.animationValues=s,function(e,t,n,r,s,i){s?(e.opacity=Lw(0,void 0!==n.opacity?n.opacity:1,CS(r)),e.opacityExit=Lw(void 0!==t.opacity?t.opacity:1,0,IS(r))):i&&(e.opacity=Lw(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(let o=0;o<AS;o++){const s="border".concat(ES[o],"Radius");let i=kS(t,s),a=kS(n,s);void 0===i&&void 0===a||(i||(i=0),a||(a=0),0===i||0===a||TS(i)===TS(a)?(e[s]=Math.max(Lw(NS(i),NS(a),r),0),(Yy.test(a)||Yy.test(i))&&(e[s]+="%")):e[s]=a)}(t.rotate||n.rotate)&&(e.rotate=Lw(t.rotate||0,n.rotate||0,r))}(s,r,this.latestValues,n,u,l)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(qg(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Hg.update(()=>{gS.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const r=jy(e)?e:tx(e);return r.start(Qb("",r,t,n)),r.animation}(0,1e3,(0,tt.A)((0,tt.A)({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:r,latestValues:s}=e;if(t&&n&&r){if(this!==e&&this.layout&&r&&yE(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Mx(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const r=Mx(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+r}jS(t,n),lS(t,s),Lx(this.projectionDeltaWithTransform,this.layoutCorrected,t,s)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new zS);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const r=this.getStack();r&&r.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const r={};for(let s=0;s<WS.length;s++){const t="rotate"+WS[s];n[t]&&(r[t]=n[t],e.setStaticValue(t,0))}e.render();for(const s in r)e.setStaticValue(s,r[s]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return QS;const r={visibility:""},s=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=_v(null===e||void 0===e?void 0:e.pointerEvents)||"",r.transform=s?s(this.latestValues,""):"none",r;const i=this.getLead();if(!this.projectionDelta||!this.layout||!i.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=_v(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Zx(this.latestValues)&&(t.transform=s?s({},""):"none",this.hasProjected=!1),t}const o=i.animationValues||i.latestValues;this.applyTransformsToTarget(),r.transform=GS(this.projectionDeltaWithTransform,this.treeScale,o),s&&(r.transform=s(o,r.transform));const{x:a,y:c}=this.projectionDelta;r.transformOrigin="".concat(100*a.origin,"% ").concat(100*c.origin,"% 0"),i.animationValues?r.opacity=i===this?null!==(n=null!==(t=o.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:o.opacityExit:r.opacity=i===this?void 0!==o.opacity?o.opacity:"":void 0!==o.opacityExit?o.opacityExit:0;for(const l in Cy){if(void 0===o[l])continue;const{correct:e,applyTo:t}=Cy[l],n="none"===r.transform?o[l]:e(o[l],i);if(t){const e=t.length;for(let s=0;s<e;s++)r[t[s]]=n}else r[l]=n}return this.options.layoutId&&(r.pointerEvents=i===this?_v(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),r}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(nE),this.root.sharedNodes.clear()}}}function ZS(e){e.updateLayout()}function XS(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:r}=e.layout,{animationType:s}=e.options,i=n.source!==e.layout.source;"size"===s?Qx(e=>{const r=i?n.measuredBox[e]:n.layoutBox[e],s=Mx(r);r.min=t[e].min,r.max=r.min+s}):yE(s,n.layoutBox,t)&&Qx(r=>{const s=i?n.measuredBox[r]:n.layoutBox[r],o=Mx(t[r]);s.max=s.min+o,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[r].max=e.relativeTarget[r].min+o)});const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Lx(o,t,n.layoutBox);const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};i?Lx(a,e.applyTransform(r,!0),n.measuredBox):Lx(a,t,n.layoutBox);const c=!US(o);let l=!1;if(!e.resumeFrom){const r=e.getClosestProjectingParent();if(r&&!r.resumeFrom){const{snapshot:s,layout:i}=r;if(s&&i){const o={x:{min:0,max:0},y:{min:0,max:0}};Bx(o,n.layoutBox,s.layoutBox);const a={x:{min:0,max:0},y:{min:0,max:0}};Bx(a,t,i.layoutBox),BS(o,a)||(l=!0),r.options.layoutRoot&&(e.relativeTarget=a,e.relativeTargetOrigin=o,e.relativeParent=r)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:a,layoutDelta:o,hasLayoutChanged:c,hasRelativeTargetChanged:l})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function $S(e){JS.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function eE(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function tE(e){e.clearSnapshot()}function nE(e){e.clearMeasurements()}function rE(e){e.isLayoutDirty=!1}function sE(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function iE(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function oE(e){e.resolveTargetDelta()}function aE(e){e.calcProjection()}function cE(e){e.resetRotation()}function lE(e){e.removeLeadSnapshot()}function uE(e,t,n){e.translate=Lw(t.translate,0,n),e.scale=Lw(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function hE(e,t,n,r){e.min=Lw(t.min,n.min,r),e.max=Lw(t.max,n.max,r)}function dE(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const fE={duration:.45,ease:[.4,0,.1,1]},mE=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),pE=mE("applewebkit/")&&!mE("chrome/")?Math.round:Vg;function gE(e){e.min=pE(e.min),e.max=pE(e.max)}function yE(e,t,n){return"position"===e||"preserve-aspect"===e&&!Rx(VS(t),VS(n),.2)}const vE=YS({attachResizeListener:(e,t)=>Ov(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),wE={current:void 0},bE=YS({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!wE.current){const e=new vE({});e.mount(window),e.setOptions({layoutScroll:!0}),wE.current=e}return wE.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),xE={pan:{Feature:class extends Qv{constructor(){super(...arguments),this.removePointerDownListener=Vg}onPointerDown(e){this.session=new kx(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:hS(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:r}=this.node.getProps();return{onSessionStart:pS(e),onStart:pS(t),onMove:n,onEnd:(e,t)=>{delete this.session,r&&Hg.update(()=>r(e,t))}}}mount(){this.removePointerDownListener=Uv(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Qv{constructor(e){super(e),this.removeGroupControls=Vg,this.removeListeners=Vg,this.controls=new fS(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Vg}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:bE,MeasureLayout:xS}};const SE=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function EE(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;ny(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[r,s]=function(e){const t=SE.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]}(e);if(!r)return;const i=window.getComputedStyle(t).getPropertyValue(r);if(i){const e=i.trim();return Jb(e)?parseFloat(e):e}return Ly(s)?EE(s,t,n+1):s}function AE(e,t,n){let r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t));const s=e.current;if(!(s instanceof Element))return{target:r,transitionEnd:n};n&&(n=(0,tt.A)({},n)),e.values.forEach(e=>{const t=e.get();if(!Ly(t))return;const n=EE(t,s);n&&e.set(n)});for(const i in r){const e=r[i];if(!Ly(e))continue;const t=EE(e,s);t&&(r[i]=t,n||(n={}),void 0===n[i]&&(n[i]=e))}return{target:r,transitionEnd:n}}const NE=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),TE=e=>NE.has(e),kE=e=>e===By||e===Zy,CE=(e,t)=>parseFloat(e.split(", ")[t]),IE=(e,t)=>(n,r)=>{let{transform:s}=r;if("none"===s||!s)return 0;const i=s.match(/^matrix3d\((.+)\)$/);if(i)return CE(i[1],t);{const t=s.match(/^matrix\((.+)\)$/);return t?CE(t[1],e):0}},_E=new Set(["x","y","z"]),PE=Iy.filter(e=>!_E.has(e));const jE={width:(e,t)=>{let{x:n}=e,{paddingLeft:r="0",paddingRight:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},height:(e,t)=>{let{y:n}=e,{paddingTop:r="0",paddingBottom:s="0"}=t;return n.max-n.min-parseFloat(r)-parseFloat(s)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:r}=t;return parseFloat(r)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:r}=t;return parseFloat(r)+(n.max-n.min)},x:IE(4,13),y:IE(5,14)};jE.translateX=jE.x,jE.translateY=jE.y;const DE=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=(0,tt.A)({},t),r=(0,tt.A)({},r);const s=Object.keys(t).filter(TE);let i=[],o=!1;const a=[];if(s.forEach(s=>{const c=e.getValue(s);if(!e.hasValue(s))return;let l=n[s],u=sx(l);const h=t[s];let d;if(Cv(h)){const e=h.length,t=null===h[0]?1:0;l=h[t],u=sx(l);for(let n=t;n<e&&null!==h[n];n++)d?ny(sx(h[n])===d,"All keyframes must be of the same type"):(d=sx(h[n]),ny(d===u||kE(u)&&kE(d),"Keyframes must be of the same dimension as the current value"))}else d=sx(h);if(u!==d)if(kE(u)&&kE(d)){const e=c.get();"string"===typeof e&&c.set(parseFloat(e)),"string"===typeof h?t[s]=parseFloat(h):Array.isArray(h)&&d===Zy&&(t[s]=h.map(parseFloat))}else(null===u||void 0===u?void 0:u.transform)&&(null===d||void 0===d?void 0:d.transform)&&(0===l||0===h)?0===l?c.set(d.transform(l)):t[s]=u.transform(h):(o||(i=function(e){const t=[];return PE.forEach(n=>{const r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),o=!0),a.push(s),r[s]=void 0!==r[s]?r[s]:t[s],c.jump(h))}),a.length){const n=a.indexOf("height")>=0?window.pageYOffset:null,s=((e,t,n)=>{const r=t.measureViewportBox(),s=t.current,i=getComputedStyle(s),{display:o}=i,a={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach(e=>{a[e]=jE[e](r,i)}),t.render();const c=t.measureViewportBox();return n.forEach(n=>{const r=t.getValue(n);r&&r.jump(a[n]),e[n]=jE[n](c,i)}),e})(t,e,a);return i.length&&i.forEach(t=>{let[n,r]=t;e.getValue(n).set(r)}),e.render(),Fg&&null!==n&&window.scrollTo({top:n}),{target:s,transitionEnd:r}}return{target:t,transitionEnd:r}};function ME(e,t,n,r){return(e=>Object.keys(e).some(TE))(t)?DE(e,t,n,r):{target:t,transitionEnd:r}}const RE={current:null},OE={current:!1};const LE=new WeakMap,FE=["willChange"],UE=["children"],BE=Object.keys(by),VE=BE.length,zE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],GE=my.length;class HE{constructor(e){let{parent:t,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Hg.render(this.render,!1,!0);const{latestValues:a,renderState:c}=i;this.latestValues=a,this.baseTarget=(0,tt.A)({},a),this.initialValues=n.initial?(0,tt.A)({},a):{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=py(n),this.isVariantNode=gy(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const l=this.scrapeMotionValuesFromProps(n,{}),{willChange:u}=l,h=(0,dv.A)(l,FE);for(const d in h){const e=h[d];void 0!==a[d]&&jy(e)&&(e.set(a[d],!1),Kb(u)&&u.add(d))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,LE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),OE.current||function(){if(OE.current=!0,Fg)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>RE.current=e.matches;e.addListener(t),t()}else RE.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||RE.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){LE.delete(this.current),this.projection&&this.projection.unmount(),qg(this.notifyUpdate),qg(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=_y.has(e),r=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Hg.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),s()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,r){let s,i,{children:o}=e,a=(0,dv.A)(e,UE);for(let c=0;c<VE;c++){const e=BE[c],{isEnabled:t,Feature:n,ProjectionNode:r,MeasureLayout:o}=by[e];r&&(s=r),t(a)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),o&&(i=o))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&s){this.projection=new s(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:i,layoutScroll:o,layoutRoot:c}=a;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||i&&uy(i),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:r,layoutScroll:o,layoutRoot:c})}return i}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<zE.length;n++){const t=zE[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const r=e["on"+t];r&&(this.propEventSubscriptions[t]=this.on(t,r))}this.prevMotionValues=function(e,t,n){const{willChange:r}=t;for(const s in t){const i=t[s],o=n[s];if(jy(i))e.addValue(s,i),Kb(r)&&r.add(s);else if(jy(o))e.addValue(s,tx(i,{owner:e})),Kb(r)&&r.remove(s);else if(o!==i)if(e.hasValue(s)){const t=e.getValue(s);!t.hasAnimated&&t.set(i)}else{const t=e.getStaticValue(s);e.addValue(s,tx(void 0!==t?t:i,{owner:e}))}}for(const s in n)void 0===t[s]&&e.removeValue(s);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<GE;t++){const n=my[t],r=this.props[n];(hy(r)||!1===r)&&(e[n]=r)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=tx(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,r="string"===typeof n||"object"===typeof n?null===(t=kv(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;const s=this.getBaseTargetFromProps(this.props,e);return void 0===s||jy(s)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new Xb),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.events[e].notify(...n)}}}const qE=["transition","transitionEnd"];class WE extends HE{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:r}=t;delete n[e],delete r[e]}makeTargetAnimatableFromInstance(e,t,n){let{transition:r,transitionEnd:s}=e,i=(0,dv.A)(e,qE),{transformValues:o}=t,a=function(e,t,n){const r={};for(const s in e){const e=ux(s,t);if(void 0!==e)r[s]=e;else{const e=n.getValue(s);e&&(r[s]=e.get())}}return r}(i,r||{},this);if(o&&(s&&(s=o(s)),i&&(i=o(i)),a&&(a=o(a))),n){!function(e,t,n){var r,s;const i=Object.keys(t).filter(t=>!e.hasValue(t)),o=i.length;if(o)for(let a=0;a<o;a++){const o=i[a],c=t[o];let l=null;Array.isArray(c)&&(l=c[0]),null===l&&(l=null!==(s=null!==(r=n[o])&&void 0!==r?r:e.readValue(o))&&void 0!==s?s:t[o]),void 0!==l&&null!==l&&("string"===typeof l&&(Jb(l)||zb(l))?l=parseFloat(l):!ox(l)&&Zw.test(c)&&(l=Vb(o,c)),e.addValue(o,tx(l,{owner:e})),void 0===n[o]&&(n[o]=l),null!==l&&e.setBaseTarget(o,l))}}(this,i,a);const e=((e,t,n,r)=>{const s=AE(e,t,r);return ME(e,t=s.target,n,r=s.transitionEnd)})(this,i,a,s);s=e.transitionEnd,i=e.target}return(0,tt.A)({transition:r,transitionEnd:s},i)}}class QE extends WE{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(_y.has(t)){const e=Bb(t);return e&&e.default||0}{const r=(n=e,window.getComputedStyle(n)),s=(Oy(t)?r.getPropertyValue(t):r[t])||0;return"string"===typeof s?s.trim():s}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return uS(e,n)}build(e,t,n,r){rv(e,t,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,t){return Nv(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;jy(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}renderInstance(e,t,n,r){Sv(e,t,n,r)}}class KE extends WE{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(_y.has(t)){const e=Bb(t);return e&&e.default||0}return t=Ev.has(t)?t:cy(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return Tv(e,t)}build(e,t,n,r){yv(e,t,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,t,n,r){Av(e,t,0,r)}mount(e){this.isSVGTag=wv(e.tagName),super.mount(e)}}const JE=(e,t)=>ky(e)?new KE(t,{enableHardwareAcceleration:!1}):new QE(t,{enableHardwareAcceleration:!0}),YE={layout:{ProjectionNode:bE,MeasureLayout:xS}},ZE=(0,tt.A)((0,tt.A)((0,tt.A)((0,tt.A)({},Nx),sw),xE),YE),XE=Ny((e,t)=>function(e,t,n,r){let{forwardMotionProps:s=!1}=t;const i=ky(e)?Mv:Rv;return(0,tt.A)((0,tt.A)({},i),{},{preloadedFeatures:n,useRender:xv(s),createVisualElement:r,Component:e})}(e,t,ZE,JE));const $E=(e,t,n,r)=>{const s=new CustomEvent("showAlert",{detail:{type:e,message:t,duration:n,action:r}});window.dispatchEvent(s)},eA=()=>{const[e,t]=(0,s.useState)([]);(0,s.useEffect)(()=>{const e=e=>{const{type:t,message:r,duration:s=5e3,action:i}=e.detail;n(t,r,s,i)};return window.addEventListener("showAlert",e),()=>window.removeEventListener("showAlert",e)},[]);const n=(e,n,s,i)=>{const o=Date.now()+Math.random(),a={id:o,type:e,message:n,duration:s,action:i};t(e=>[...e,a]),setTimeout(()=>{r(o)},s)},r=e=>{t(t=>t.filter(t=>t.id!==e))};return(0,Pe.jsx)("div",{className:"fixed top-4 right-4 z-50 space-y-2",children:(0,Pe.jsx)(sy,{children:e.map(e=>{const t=(e=>{switch(e){case"success":return{bg:"bg-green-50",border:"border-green-200",text:"text-green-800",icon:(0,Pe.jsx)("svg",{className:"w-5 h-5 text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})};case"error":return{bg:"bg-red-50",border:"border-red-200",text:"text-red-800",icon:(0,Pe.jsx)("svg",{className:"w-5 h-5 text-red-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})};case"warning":return{bg:"bg-yellow-50",border:"border-yellow-200",text:"text-yellow-800",icon:(0,Pe.jsx)("svg",{className:"w-5 h-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})};case"info":return{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-800",icon:(0,Pe.jsx)("svg",{className:"w-5 h-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})};default:return{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-800",icon:null}}})(e.type);return(0,Pe.jsx)(XE.div,{initial:{opacity:0,x:300,scale:.3},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.5},transition:{duration:.3},className:"max-w-sm w-full ".concat(t.bg," ").concat(t.border," border rounded-lg shadow-lg p-4"),children:(0,Pe.jsxs)("div",{className:"flex items-start",children:[(0,Pe.jsx)("div",{className:"flex-shrink-0",children:t.icon}),(0,Pe.jsxs)("div",{className:"ml-3 flex-1",children:[(0,Pe.jsx)("p",{className:"text-sm font-medium ".concat(t.text),children:e.message}),e.action&&(0,Pe.jsx)("div",{className:"mt-2",children:(0,Pe.jsx)("button",{onClick:e.action.onClick,className:"text-sm font-medium underline ".concat(t.text," hover:no-underline"),children:e.action.text})})]}),(0,Pe.jsx)("div",{className:"ml-4 flex-shrink-0",children:(0,Pe.jsx)("button",{onClick:()=>r(e.id),className:"".concat(t.text," hover:opacity-75"),children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})},e.id)})})})},tA=(0,s.createContext)(),nA=()=>{const e=(0,s.useContext)(tA);if(!e)throw new Error("useDatabase must be used within a DatabaseProvider");return e},rA=e=>{let{children:t}=e;const{isConnected:n,account:r,walletType:i}=Xf(),[o,a]=(0,s.useState)(null),[c,l]=(0,s.useState)([]),[u,h]=(0,s.useState)([]),[d,f]=(0,s.useState)([]),[m,p]=(0,s.useState)([]),[g,y]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{if(n&&r){y(!0);try{console.log("Initializing user for wallet:",r);let e=await(async e=>{try{const t=(0,em.P)((0,em.rJ)(tm.db,"users"),(0,em._M)("walletAddress","==",e.toLowerCase())),n=await(0,em.GG)(t);if(!n.empty){const e=n.docs[0];return(0,tt.A)({id:e.id},e.data())}return null}catch(t){throw console.error("Error getting user:",t),t}})(r);console.log("Existing user data:",e),e||(console.log("Creating new user..."),e=await Ag(r,i),console.log("New user created:",e)),a(e),await v(e.id)}catch(e){console.error("Error initializing user:",e)}finally{y(!1)}}else a(null),l([]),h([]),f([]),p([])})()},[n,r,i]);const v=async e=>{try{const[t,n,r,s]=await Promise.all([_g(e),Pg(e),jg(e),Og(e)]);l(t),h(n),f(r),p(s)}catch(t){console.error("Error loading user data:",t)}};(0,s.useEffect)(()=>{if(!o||!o.id)return;let e=null,t=null,n=null;try{e=((e,t)=>{try{const n=(0,em.H9)(tm.db,"users",e);return(0,em.aQ)(n,t,e=>{console.error("Error in subscribeToUserBalance:",e)})}catch(n){return console.error("Error setting up subscribeToUserBalance:",n),()=>{}}})(o.id,e=>{e.exists()&&a(t=>(0,tt.A)((0,tt.A)({},t),e.data()))}),t=((e,t)=>{try{const n=(0,em.P)((0,em.rJ)(tm.db,"trades"),(0,em._M)("walletAddress","==",e.toLowerCase()));return(0,em.aQ)(n,t,e=>{console.error("Error in subscribeToUserTrades:",e)})}catch(n){return console.error("Error setting up subscribeToUserTrades:",n),()=>{}}})(o.id,e=>{const t=e.docs.map(e=>(0,tt.A)({id:e.id},e.data()));l(t)}),n=Lg(o.id,e=>{console.log("=== CHAT SUBSCRIPTION UPDATE ==="),console.log("User ID:",o.id),console.log("Snapshot docs count:",e.docs.length),console.log("Snapshot docs:",e.docs.map(e=>(0,tt.A)({id:e.id},e.data())));const t=e.docs.map(e=>(0,tt.A)({id:e.id},e.data())).sort((e,t)=>{var n,r;return(null!==(n=e.createdAt)&&void 0!==n&&n.toDate?e.createdAt.toDate():new Date(e.createdAt||0))-(null!==(r=t.createdAt)&&void 0!==r&&r.toDate?t.createdAt.toDate():new Date(t.createdAt||0))});console.log("Processed messages (sorted):",t),p(t)})}catch(r){console.error("Error setting up real-time subscriptions:",r)}return()=>{e&&e(),t&&t(),n&&n()}},[null===o||void 0===o?void 0:o.id]);const w={user:o,userTrades:c,userDeposits:u,userWithdrawals:d,chatMessages:m,isLoading:g,createDeposit:async(e,t,n)=>{if(!o)throw new Error("User not found");console.log("DatabaseContext - createDeposit called with:",{amount:e,currency:t,txHash:n}),console.log("DatabaseContext - User ID:",o.id);try{const r=await(async(e,t,n,r)=>{try{if(console.log("createDeposit called with:",{userId:e,amount:t,currency:n,txHash:r}),console.log("txHash type:",typeof r,"value:",r),!r||""===r.trim())throw new Error("Transaction hash is required");const s={userId:e,amount:parseFloat(t),currency:(null===n||void 0===n?void 0:n.toUpperCase())||"USD",txHash:r.trim(),status:"pending",createdAt:(0,em.O5)(),approvedAt:null,approvedBy:null};console.log("depositData object:",s);const i=await(0,em.gS)((0,em.rJ)(tm.db,"deposits"),s);return(0,tt.A)({id:i.id},s)}catch(s){throw console.error("Error creating deposit:",s),s}})(o.id,e,t,n);return h(e=>[r,...e]),r}catch(r){throw console.error("DatabaseContext - Error creating deposit:",r),r}},createWithdrawal:async(e,t,n)=>{if(!o)throw new Error("User not found");try{const r=await(async(e,t,n,r)=>{try{const s=await(0,em.x7)((0,em.H9)(tm.db,"users",e));if(!s.exists())throw new Error("User not found");if(s.data().balance<t)throw new Error("Insufficient balance");const i={userId:e,amount:parseFloat(t),currency:(null===n||void 0===n?void 0:n.toUpperCase())||"USD",walletAddress:r,status:"pending",createdAt:(0,em.O5)(),approvedAt:null,approvedBy:null},o=await(0,em.gS)((0,em.rJ)(tm.db,"withdrawals"),i);return(0,tt.A)({id:o.id},i)}catch(s){throw console.error("Error creating withdrawal:",s),s}})(o.id,e,t,n);return f(e=>[r,...e]),r}catch(r){throw console.error("Error creating withdrawal:",r),r}},createTrade:async e=>{if(!o||!r)throw new Error("User not found or wallet not connected");try{console.log("Creating trade with validation:",e);const t=await Cg(r,e);if(t.success)return l(e=>[t.tradeData,...e]),a(e=>(0,tt.A)((0,tt.A)({},e),{},{balance:t.newBalance})),$E("success","Trading plan created successfully! Order #".concat(t.tradeId.slice(-8)," is now active."),5e3),t.tradeData;if("RATE_LIMIT_EXCEEDED"===t.error)throw $E("warning",t.message,5e3),new Error("RATE_LIMIT_EXCEEDED");{const e=t.shortfall;throw $E("error","Insufficient funds! You need ".concat(e.toFixed(2)," USD more to create this order."),8e3,{text:"Deposit Funds",onClick:()=>{window.dispatchEvent(new CustomEvent("openDepositModal"))}}),new Error("INSUFFICIENT_FUNDS")}}catch(t){if(console.error("Error creating trade:",t),"INSUFFICIENT_FUNDS"===t.message)throw t;throw $E("error","Failed to create trading plan. Please try again.",5e3),t}},createSmartTrade:async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!o)throw new Error("User not found");try{const s=await Tg(o.id,e,t,n,r);return l(e=>[s,...e]),s}catch(s){throw console.error("Error creating smart trade:",s),s}},closeTrade:async e=>{try{await(async e=>{try{const n=(0,em.H9)(tm.db,"trades",e),r=await(0,em.x7)(n);if(!r.exists())throw new Error("Trade not found");const s=r.data();if("Smart Trading"===s.type){var t;const e=parseInt(null===(t=s.timeframe)||void 0===t?void 0:t.split(" ")[0])||1,r=s.amount||s.orderAmount||0;let i;i=1===e?.03*Math.random()+.025:7===e?.03*Math.random()+.018:15===e?.03*Math.random()+.015:30===e?.025*Math.random()+.012:.02*Math.random()+.01;const o=r*i;await(0,em.mZ)(n,{status:"completed",closePrice:s.openPrice*(1+i),profit:o,totalRevenue:o,closedAt:(0,em.O5)()}),await Ng(s.walletAddress,o,"profit")}else{const e=await Ig(s.asset);let t=0;t="buy"===s.tradeType?(e-s.entryPrice)*s.amount*s.leverage:(s.entryPrice-e)*s.amount*s.leverage,await(0,em.mZ)(n,{status:"closed",currentPrice:e,profit:t,closedAt:(0,em.O5)()}),await Ng(s.userId,t)}return!0}catch(n){throw console.error("Error closing trade:",n),n}})(e),o&&await v(o.id)}catch(t){throw console.error("Error closing trade:",t),t}},sendMessage:async e=>{if(!o)throw new Error("User not found");try{console.log("=== SEND MESSAGE DEBUG ==="),console.log("User:",o),console.log("User ID:",o.id),console.log("Message:",e);const t=await Mg(o.id,e,!1);return console.log("New message created:",t),p(e=>{const n=[...e,t].sort((e,t)=>{var n,r;return(null!==(n=e.createdAt)&&void 0!==n&&n.toDate?e.createdAt.toDate():new Date(e.createdAt||0))-(null!==(r=t.createdAt)&&void 0!==r&&r.toDate?t.createdAt.toDate():new Date(t.createdAt||0))});return console.log("Updated chat messages (sorted):",n),n}),console.log("Auto-reply will be sent automatically for user messages"),t}catch(t){throw console.error("Error sending message:",t),t}},sendAdminMessage:async(e,t)=>{try{return await Rg(e,t)}catch(n){throw console.error("Error sending admin message:",n),n}},loadUserData:v,updateUserBalance:Ng};return(0,Pe.jsx)(tA.Provider,{value:w,children:t})},sA=(0,s.createContext)(),iA=e=>{let{children:t}=e;const[r,i]=(0,s.useState)([]),[o,a]=(0,s.useState)(0),{user:c}=nA(),{isConnected:l}=Xf();(0,s.useEffect)(()=>{if(null===c||void 0===c||!c.id||!l)return;let e=null;try{const{collection:t,query:r,where:s,onSnapshot:i,orderBy:o}=n(544),{db:a}=n(340),l=r(t(a,"deposits"),s("userId","==",c.id),o("createdAt","desc"));e=i(l,e=>{e.docChanges().forEach(e=>{if("added"===e.type){const t=(0,tt.A)({id:e.doc.id},e.doc.data());"pending"===t.status&&u({id:"deposit-pending-".concat(t.id),type:"deposit",title:"Deposit Submitted",message:"Your deposit of $".concat(t.amount," has been submitted and is pending approval."),status:"pending",timestamp:t.createdAt,read:!1})}else if("modified"===e.type){const t=(0,tt.A)({id:e.doc.id},e.doc.data()),n=e.doc.metadata.fromCache?null:e.doc.data();"pending"===(null===n||void 0===n?void 0:n.status)&&"approved"===t.status?u({id:"deposit-approved-".concat(t.id),type:"deposit",title:"Deposit Approved",message:"Your deposit of $".concat(t.amount," has been approved and added to your balance."),status:"approved",timestamp:t.approvedAt,read:!1}):"pending"===(null===n||void 0===n?void 0:n.status)&&"rejected"===t.status&&u({id:"deposit-rejected-".concat(t.id),type:"deposit",title:"Deposit Rejected",message:"Your deposit of $".concat(t.amount," was rejected. Reason: ").concat(t.rejectionReason||"No reason provided"),status:"rejected",timestamp:t.rejectedAt,read:!1})}})})}catch(t){console.error("Error setting up deposit notifications:",t)}return()=>{e&&e()}},[null===c||void 0===c?void 0:c.id,l]);const u=e=>{i(t=>{const n=t.some(t=>t.id===e.id);if(n)return t;const r=[e,...t].slice(0,50);return a(e=>e+1),r})},h={notifications:r,unreadCount:o,addNotification:u,markAsRead:e=>{i(t=>t.map(t=>t.id===e?(0,tt.A)((0,tt.A)({},t),{},{read:!0}):t)),a(e=>Math.max(0,e-1))},markAllAsRead:()=>{i(e=>e.map(e=>(0,tt.A)((0,tt.A)({},e),{},{read:!0}))),a(0)},clearNotifications:()=>{i([]),a(0)}};return(0,Pe.jsx)(sA.Provider,{value:h,children:t})},oA=e=>{let{isOpen:t,onClose:n}=e;const{currentLanguage:r,changeLanguage:s,languageNames:i}=Oe();return(0,Pe.jsx)(sy,{children:t&&(0,Pe.jsx)(XE.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:n,children:(0,Pe.jsxs)(XE.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full mx-4 p-6",onClick:e=>e.stopPropagation(),children:[(0,Pe.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,Pe.jsx)("div",{className:"text-right",children:(0,Pe.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Language"})}),(0,Pe.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Pe.jsx)("div",{className:"text-center mb-8",children:(0,Pe.jsx)("h2",{className:"text-xl font-medium text-gray-900",children:"Choose a language and region"})}),(0,Pe.jsx)("div",{className:"mb-6",children:(0,Pe.jsx)("div",{className:"bg-gray-800 text-white px-4 py-2 rounded-lg text-center",children:i[r]||"English"})}),(0,Pe.jsx)("div",{className:"grid grid-cols-2 gap-2",children:[{code:"en",name:"English"},{code:"vi",name:"Ti\u1ebfng Vi\u1ec7t"},{code:"ja",name:"\u65e5\u672c\u8a9e"},{code:"ko",name:"\ud55c\uad6d\uc5b4"},{code:"zh",name:"\u7b80\u4f53\u4e2d\u6587"},{code:"es",name:"Espa\xf1ol"},{code:"fr",name:"Fran\xe7ais"},{code:"de",name:"Deutsch"},{code:"pt",name:"Portugu\xeas"},{code:"ru",name:"\u0420\u0443\u0441\u0441\u043a\u0438\u0439 \u044f\u0437\u044b\u043a"},{code:"th",name:"\u0e20\u0e32\u0e29\u0e32\u0e44\u0e17\u0e22"},{code:"id",name:"Indonesian"},{code:"ms",name:"Melayu"}].map(e=>(0,Pe.jsx)(XE.button,{onClick:()=>{return t=e.code,s(t),void n();var t},className:"px-4 py-3 text-left text-gray-700 hover:bg-gray-50 rounded-lg transition-colors ".concat(r===e.code?"bg-gray-100":""),whileHover:{scale:1.02},whileTap:{scale:.98},children:e.name},e.code))}),(0,Pe.jsx)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:(0,Pe.jsx)("p",{className:"text-sm text-gray-500 text-center",children:"Language changes will be applied immediately"})})]})})})},aA=()=>{const[e,t]=(0,s.useState)(!1),[n,r]=(0,s.useState)(!1),[i,o]=(0,s.useState)(!1),a=ee(),{t:c}=Oe(),{isConnected:l,account:u,formatAddress:h,balance:d}=Xf();return(0,s.useEffect)(()=>{const e=()=>{t(window.scrollY>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),(0,Pe.jsxs)(XE.header,{initial:{y:-100},animate:{y:0},transition:{duration:.6},className:"fixed top-0 left-0 right-0 z-50 transition-all duration-500 ".concat(e?"bg-white/95 backdrop-blur-xl shadow-2xl border-b border-gray-200/50":"bg-transparent"),children:[(0,Pe.jsxs)("nav",{className:"container-max py-4",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pe.jsx)(Ce,{to:"/",className:"flex items-center space-x-2 sm:space-x-3",children:(0,Pe.jsxs)(XE.div,{whileHover:{scale:1.05},className:"flex items-center space-x-2 sm:space-x-3",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-8 sm:h-10 w-auto"}),(0,Pe.jsx)("span",{className:"text-lg sm:text-2xl font-bold text-black",children:"Tokenize"})]})}),(0,Pe.jsxs)("div",{className:"hidden lg:flex items-center space-x-6 xl:space-x-8",children:[(0,Pe.jsx)(Ce,{to:"/",className:"transition-colors duration-300 font-medium text-sm xl:text-base ".concat("/"===a.pathname?"text-black font-bold":"text-gray-700 hover:text-black"),children:c("home")}),(0,Pe.jsx)(Ce,{to:"/market",className:"transition-colors duration-300 font-medium text-sm xl:text-base ".concat("/market"===a.pathname?"text-black font-bold":"text-gray-700 hover:text-black"),children:c("market")}),(0,Pe.jsx)(Ce,{to:"/smart-trading",className:"transition-colors duration-300 font-medium text-sm xl:text-base ".concat("/smart-trading"===a.pathname?"text-black font-bold":"text-gray-700 hover:text-black"),children:c("smartTrading")}),(0,Pe.jsx)(Ce,{to:"/loan",className:"transition-colors duration-300 font-medium text-sm xl:text-base ".concat("/loan"===a.pathname?"text-black font-bold":"text-gray-700 hover:text-black"),children:c("loan")}),(0,Pe.jsx)(Ce,{to:"/account",className:"transition-colors duration-300 font-medium text-sm xl:text-base ".concat("/account"===a.pathname?"text-black font-bold":"text-gray-700 hover:text-black"),children:c("account")})]}),(0,Pe.jsxs)("div",{className:"hidden lg:flex items-center space-x-3 xl:space-x-4",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors cursor-pointer",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Pe.jsx)(Ce,{to:"/notifications",className:"flex items-center justify-center",children:(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})}),l&&(0,Pe.jsxs)("div",{className:"flex items-center space-x-2 bg-green-50 border border-green-200 rounded-lg px-2 xl:px-3 py-1",children:[(0,Pe.jsx)("img",{src:"https://avatars.githubusercontent.com/u/11744586?s=200&v=4",alt:"MetaMask",className:"w-3 h-3 xl:w-4 xl:h-4",onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="block"}}),(0,Pe.jsx)("span",{className:"text-green-600 text-xs hidden",children:"\ud83e\udd8a"}),(0,Pe.jsx)("span",{className:"text-green-800 text-xs xl:text-sm font-medium",children:h(u)}),d&&(0,Pe.jsxs)("span",{className:"text-green-600 text-xs",children:[d," ETH"]})]}),(0,Pe.jsx)("button",{onClick:()=>r(!0),className:"text-gray-700 font-medium hover:text-black transition-colors text-sm xl:text-base",children:c("language")})]}),(0,Pe.jsxs)("div",{className:"lg:hidden flex items-center space-x-2",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors cursor-pointer",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Pe.jsx)(Ce,{to:"/notifications",className:"flex items-center justify-center",children:(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})}),(0,Pe.jsx)("button",{onClick:()=>o(!i),className:"text-gray-700 p-2",children:(0,Pe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})})]})]}),i&&(0,Pe.jsx)(XE.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"lg:hidden mt-4 border-t border-gray-200 pt-4",children:(0,Pe.jsxs)("div",{className:"flex flex-col space-y-4",children:[l&&(0,Pe.jsxs)("div",{className:"flex items-center space-x-2 bg-green-50 border border-green-200 rounded-lg px-3 py-2 mb-4",children:[(0,Pe.jsx)("img",{src:"https://avatars.githubusercontent.com/u/11744586?s=200&v=4",alt:"MetaMask",className:"w-4 h-4",onError:e=>{e.target.style.display="none",e.target.nextElementSibling.style.display="block"}}),(0,Pe.jsx)("span",{className:"text-green-600 text-sm hidden",children:"\ud83e\udd8a"}),(0,Pe.jsx)("span",{className:"text-green-800 text-sm font-medium",children:h(u)}),d&&(0,Pe.jsxs)("span",{className:"text-green-600 text-xs",children:[d," ETH"]})]}),(0,Pe.jsx)(Ce,{to:"/",onClick:()=>o(!1),className:"transition-colors duration-300 font-medium py-2 ".concat("/"===a.pathname?"text-black font-bold":"text-gray-700 hover:text-black"),children:c("home")}),(0,Pe.jsx)(Ce,{to:"/market",onClick:()=>o(!1),className:"transition-colors duration-300 font-medium py-2 ".concat("/market"===a.pathname?"text-black font-bold":"text-gray-700 hover:text-black"),children:c("market")}),(0,Pe.jsx)(Ce,{to:"/smart-trading",onClick:()=>o(!1),className:"transition-colors duration-300 font-medium py-2 ".concat("/smart-trading"===a.pathname?"text-black font-bold":"text-gray-700 hover:text-black"),children:c("smartTrading")}),(0,Pe.jsx)(Ce,{to:"/loan",onClick:()=>o(!1),className:"transition-colors duration-300 font-medium py-2 ".concat("/loan"===a.pathname?"text-black font-bold":"text-gray-700 hover:text-black"),children:c("loan")}),(0,Pe.jsx)(Ce,{to:"/account",onClick:()=>o(!1),className:"transition-colors duration-300 font-medium py-2 ".concat("/account"===a.pathname?"text-black font-bold":"text-gray-700 hover:text-black"),children:c("account")}),(0,Pe.jsx)("button",{onClick:()=>{r(!0),o(!1)},className:"text-gray-700 font-medium hover:text-black transition-colors py-2 text-left",children:c("language")})]})})]}),(0,Pe.jsx)(oA,{isOpen:n,onClose:()=>r(!1)})]})},cA=()=>(0,Pe.jsx)("section",{id:"home",className:"relative min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 via-white to-blue-50 pt-16 sm:pt-20 overflow-hidden",children:(0,Pe.jsx)("div",{className:"container-max",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 lg:gap-12 items-center",children:[(0,Pe.jsxs)(XE.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.8},className:"space-y-6 lg:space-y-8 text-center lg:text-left",children:[(0,Pe.jsxs)("h1",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold text-gray-900 leading-tight mb-4 lg:mb-6",children:["Buy, trade, and hold",(0,Pe.jsx)("br",{}),(0,Pe.jsx)("span",{className:"text-gradient",children:"350+ cryptocurrencies"}),(0,Pe.jsx)("br",{}),"on the best platform."]}),(0,Pe.jsxs)(XE.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-black text-white px-6 sm:px-8 py-3 sm:py-4 rounded-xl font-semibold text-base sm:text-lg flex items-center justify-center lg:justify-start space-x-3 hover:bg-gray-800 transition-colors duration-300 mx-auto lg:mx-0",children:[(0,Pe.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",viewBox:"0 0 24 24",fill:"currentColor",children:(0,Pe.jsx)("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.81-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),(0,Pe.jsx)("span",{className:"hidden sm:inline",children:"Available on the App Store"}),(0,Pe.jsx)("span",{className:"sm:hidden",children:"App Store"})]})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"relative flex justify-center items-center mt-8 lg:mt-0",children:[(0,Pe.jsx)("div",{className:"lg:hidden",children:(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},className:"relative z-10",children:(0,Pe.jsx)("img",{src:"https://hnw-ubs.com/static/img/home_iphone11.80c4d197.png",alt:"UBS Trading App - iPhone 11",className:"w-64 sm:w-80 h-auto drop-shadow-2xl floating"})})}),(0,Pe.jsxs)("div",{className:"hidden lg:flex relative justify-center items-center",children:[(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.3},className:"relative z-10",children:(0,Pe.jsx)("img",{src:"https://hnw-ubs.com/static/img/home_iphone11.80c4d197.png",alt:"UBS Trading App - iPhone 11",className:"w-72 xl:w-80 h-auto drop-shadow-2xl floating"})}),(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.5},className:"relative -ml-16 xl:-ml-24",children:(0,Pe.jsx)("img",{src:"https://hnw-ubs.com/static/img/home_iphone22.d98a82af.png",alt:"UBS Trading App - iPhone 22",className:"w-72 xl:w-80 h-auto drop-shadow-2xl floating-delayed"})})]})]})]})})}),lA=["as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];var uA=Object.defineProperty,hA=(e,t,n)=>((e,t,n)=>t in e?uA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!==typeof t?t+"":t,n),dA=new Map,fA=new WeakMap,mA=0,pA=void 0;function gA(e){return Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>"".concat(t,"_").concat("root"===t?function(e){return e?(fA.has(e)||(mA+=1,fA.set(e,mA.toString())),fA.get(e)):"0"}(e.root):e[t])).toString()}function yA(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:pA;if("undefined"===typeof window.IntersectionObserver&&void 0!==r){const s=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"===typeof n.threshold?n.threshold:0,time:0,boundingClientRect:s,intersectionRect:s,rootBounds:s}),()=>{}}const{id:s,observer:i,elements:o}=function(e){const t=gA(e);let n=dA.get(t);if(!n){const r=new Map;let s;const i=new IntersectionObserver(t=>{t.forEach(t=>{var n;const i=t.isIntersecting&&s.some(e=>t.intersectionRatio>=e);e.trackVisibility&&"undefined"===typeof t.isVisible&&(t.isVisible=i),null==(n=r.get(t.target))||n.forEach(e=>{e(i,t)})})},e);s=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:i,elements:r},dA.set(t,n)}return n}(n),a=o.get(e)||[];return o.has(e)||o.set(e,a),a.push(t),i.observe(e),function(){a.splice(a.indexOf(t),1),0===a.length&&(o.delete(e),i.unobserve(e)),0===o.size&&(i.disconnect(),dA.delete(s))}}s.Component;function vA(){let{threshold:e,delay:t,trackVisibility:n,rootMargin:r,root:i,triggerOnce:o,skip:a,initialInView:c,fallbackInView:l,onChange:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var h;const[d,f]=s.useState(null),m=s.useRef(u),[p,g]=s.useState({inView:!!c,entry:void 0});m.current=u,s.useEffect(()=>{if(a||!d)return;let s;return s=yA(d,(e,t)=>{g({inView:e,entry:t}),m.current&&m.current(e,t),t.isIntersecting&&o&&s&&(s(),s=void 0)},{root:i,rootMargin:r,threshold:e,trackVisibility:n,delay:t},l),()=>{s&&s()}},[Array.isArray(e)?e.toString():e,d,i,r,o,a,n,l,t]);const y=null==(h=p.entry)?void 0:h.target,v=s.useRef(void 0);d||!y||o||a||v.current===y||(v.current=y,g({inView:!!c,entry:void 0}));const w=[f,p.inView,p.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}const wA=()=>{const{t:e}=Oe(),[t,n]=vA({triggerOnce:!0,threshold:.1});return(0,Pe.jsxs)("section",{className:"py-12 sm:py-16 lg:py-20 bg-gradient-to-r from-gray-900 via-gray-800 to-gray-900 relative overflow-hidden",children:[(0,Pe.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/10 to-purple-600/10"}),(0,Pe.jsx)("div",{className:"absolute top-0 left-0 w-full h-full opacity-20",children:(0,Pe.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-blue-500/5 to-purple-500/5"})}),(0,Pe.jsx)("div",{className:"container-max",children:(0,Pe.jsxs)(XE.div,{ref:t,initial:{opacity:0,y:30},animate:n?{opacity:1,y:0}:{},transition:{duration:.8},className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:[(0,Pe.jsxs)(XE.div,{initial:{opacity:0,scale:.8},animate:n?{opacity:1,scale:1}:{},transition:{duration:.6,delay:.1},className:"text-center relative z-10 sm:col-span-2 lg:col-span-1",children:[(0,Pe.jsx)("div",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold text-white mb-2 sm:mb-3 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent",children:"$3.8 billion"}),(0,Pe.jsx)("div",{className:"text-gray-300 text-base sm:text-lg lg:text-xl font-medium",children:e("totalVolume")})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,scale:.8},animate:n?{opacity:1,scale:1}:{},transition:{duration:.6,delay:.2},className:"text-center relative z-10",children:[(0,Pe.jsx)("div",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold text-white mb-2 sm:mb-3 bg-gradient-to-r from-green-400 to-blue-400 bg-clip-text text-transparent",children:"350+"}),(0,Pe.jsx)("div",{className:"text-gray-300 text-base sm:text-lg lg:text-xl font-medium",children:e("activeUsers")})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,scale:.8},animate:n?{opacity:1,scale:1}:{},transition:{duration:.6,delay:.3},className:"text-center relative z-10",children:[(0,Pe.jsx)("div",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl xl:text-7xl font-bold text-white mb-2 sm:mb-3 bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent",children:"1.2 million"}),(0,Pe.jsx)("div",{className:"text-gray-300 text-base sm:text-lg lg:text-xl font-medium",children:e("satisfaction")})]})]})})]})},bA=()=>{const{t:e}=Oe(),[t,n]=vA({triggerOnce:!0,threshold:.1});return(0,Pe.jsxs)("section",{className:"py-12 sm:py-16 lg:py-20 bg-gradient-to-b from-gray-50 to-white relative overflow-hidden",children:[(0,Pe.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-50/30 to-blue-50/30"}),(0,Pe.jsx)("div",{className:"absolute top-0 left-0 w-48 sm:w-72 h-48 sm:h-72 bg-gradient-to-br from-purple-400/10 to-blue-400/10 rounded-full blur-3xl"}),(0,Pe.jsx)("div",{className:"absolute bottom-0 right-0 w-48 sm:w-72 h-48 sm:h-72 bg-gradient-to-tl from-green-400/10 to-purple-400/10 rounded-full blur-3xl"}),(0,Pe.jsxs)("div",{className:"container-max",children:[(0,Pe.jsx)(XE.div,{ref:t,initial:{opacity:0,y:30},animate:n?{opacity:1,y:0}:{},transition:{duration:.8},className:"text-center mb-8 sm:mb-12 lg:mb-16",children:(0,Pe.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4 sm:mb-6",children:e("featuresTitle")})}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:30},animate:n?{opacity:1,y:0}:{},transition:{duration:.8,delay:.2},className:"grid grid-cols-1 lg:grid-cols-2 gap-8 sm:gap-10 lg:gap-12 max-w-4xl mx-auto",children:[(0,Pe.jsxs)(XE.div,{initial:{opacity:0,x:-30},animate:n?{opacity:1,x:0}:{},transition:{duration:.8,delay:.1},className:"text-center",children:[(0,Pe.jsx)("div",{className:"flex items-center justify-center mb-4 sm:mb-6",children:(0,Pe.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gray-100 rounded-full flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})})})}),(0,Pe.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-3 sm:mb-4",children:"Application"}),(0,Pe.jsx)("p",{className:"text-gray-600 text-base sm:text-lg leading-relaxed",children:"Mobile banking that throws out the rule book and gives you a precision tool for managing your finances."})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,x:30},animate:n?{opacity:1,x:0}:{},transition:{duration:.8,delay:.2},className:"text-center",children:[(0,Pe.jsx)("div",{className:"flex items-center justify-center mb-4 sm:mb-6",children:(0,Pe.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-gray-100 rounded-full flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})})})}),(0,Pe.jsx)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-3 sm:mb-4",children:"Crypto deposit"}),(0,Pe.jsx)("p",{className:"text-gray-600 text-base sm:text-lg leading-relaxed",children:"By using cryptocurrency for deposit, an additional layer of security is obtained, and quick transaction processing is ensured."})]})]})]})]})},xA=()=>{const{t:e}=Oe(),[t,n]=vA({triggerOnce:!0,threshold:.1}),r=[{title:e("smartTradingService"),description:e("smartTradingServiceDesc"),icon:(0,Pe.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),gradient:"from-blue-500 to-purple-600"},{title:e("investmentService"),description:e("investmentServiceDesc"),icon:(0,Pe.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),gradient:"from-green-500 to-teal-600"},{title:e("marketsService"),description:e("marketsServiceDesc"),icon:(0,Pe.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),gradient:"from-orange-500 to-red-600"}];return(0,Pe.jsxs)("section",{className:"py-12 sm:py-16 lg:py-20 bg-gradient-to-br from-gray-50 to-white relative overflow-hidden",children:[(0,Pe.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/5 to-purple-600/5"}),(0,Pe.jsxs)("div",{className:"container-max",children:[(0,Pe.jsxs)(XE.div,{ref:t,initial:{opacity:0,y:30},animate:n?{opacity:1,y:0}:{},transition:{duration:.8},className:"text-center mb-8 sm:mb-12 lg:mb-16",children:[(0,Pe.jsx)("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4 sm:mb-6",children:e("servicesTitle")}),(0,Pe.jsx)("p",{className:"text-base sm:text-lg lg:text-xl text-gray-600 max-w-3xl mx-auto px-4",children:e("heroDescription")})]}),(0,Pe.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 sm:gap-8",children:r.map((e,t)=>(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:30},animate:n?{opacity:1,y:0}:{},transition:{duration:.6,delay:.1+.2*t},whileHover:{scale:1.05},className:"group",children:(0,Pe.jsxs)("div",{className:"card-dark bg-white border-2 border-gray-200 hover:border-gray-300 hover:shadow-xl transition-all duration-300 h-full p-6 sm:p-8",children:[(0,Pe.jsx)("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br ".concat(e.gradient," rounded-xl sm:rounded-2xl flex items-center justify-center text-white mb-4 sm:mb-6 group-hover:scale-110 transition-transform duration-300"),children:(0,Pe.jsx)("div",{className:"w-6 h-6 sm:w-8 sm:h-8",children:e.icon})}),(0,Pe.jsx)("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 mb-3 sm:mb-4 group-hover:text-gray-700 transition-colors duration-300",children:e.title}),(0,Pe.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mb-4 sm:mb-6 leading-relaxed",children:e.description}),(0,Pe.jsx)("button",{className:"btn-primary bg-gradient-to-r from-gray-800 to-gray-900 hover:from-gray-900 hover:to-black text-white px-4 sm:px-6 py-2 sm:py-3 rounded-lg sm:rounded-xl font-semibold text-sm sm:text-base transition-all duration-300 hover:shadow-lg w-full sm:w-auto",children:"Learn More"})]})},t))})]})]})},SA=()=>{const{t:e}=Oe(),t=(new Date).getFullYear(),n={products:[e("market"),e("loan"),e("smartTrading")],company:[e("aboutUs"),"License Supervision",e("helpCenter"),"Online Support"],policies:[e("termsConditions"),e("privacyPolicy")]};return(0,Pe.jsx)("footer",{className:"bg-gray-800 text-white",children:(0,Pe.jsxs)("div",{className:"container-max",children:[(0,Pe.jsx)("div",{className:"py-8 sm:py-12 lg:py-16",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8",children:[(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},className:"sm:col-span-2 lg:col-span-1",children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3 mb-4 sm:mb-6",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-6 sm:h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-lg sm:text-xl font-bold text-white",children:"Tokenize"})]})}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[(0,Pe.jsx)("h4",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:e("products")}),(0,Pe.jsx)("ul",{className:"space-y-1 sm:space-y-2",children:n.products.map((e,t)=>(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-sm sm:text-base text-gray-300 hover:text-white transition-colors duration-300",children:e})},t))})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[(0,Pe.jsx)("h4",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:e("company")}),(0,Pe.jsx)("ul",{className:"space-y-1 sm:space-y-2",children:n.company.map((e,t)=>(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-sm sm:text-base text-gray-300 hover:text-white transition-colors duration-300",children:e})},t))})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[(0,Pe.jsx)("h4",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4",children:e("policies")}),(0,Pe.jsx)("ul",{className:"space-y-1 sm:space-y-2",children:n.policies.map((e,t)=>(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-sm sm:text-base text-gray-300 hover:text-white transition-colors duration-300",children:e})},t))})]})]})}),(0,Pe.jsx)("div",{className:"py-4 sm:py-6 lg:py-8 border-t border-gray-700",children:(0,Pe.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-center space-y-4 lg:space-y-0",children:[(0,Pe.jsx)("div",{className:"flex flex-wrap gap-2 sm:gap-4 text-xs sm:text-sm text-gray-400 justify-center lg:justify-start",children:["Legal Information","Disclaimer","Risk Warning","Cookie Policy","About Advertising"].map((e,t)=>(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:e},t))}),(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-6",children:[(0,Pe.jsxs)("div",{className:"flex space-x-3 sm:space-x-4",children:[(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-7 h-7 sm:w-8 sm:h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-7 h-7 sm:w-8 sm:h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-7 h-7 sm:w-8 sm:h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]}),(0,Pe.jsxs)("div",{className:"text-gray-400 text-xs sm:text-sm text-center lg:text-left",children:["\xa9 ",t," UBS. ",e("copyright")]})]})]})})]})})};function EA(){return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Pe.jsx)(aA,{}),(0,Pe.jsxs)("main",{className:"pt-20",children:[(0,Pe.jsx)(cA,{}),(0,Pe.jsx)(wA,{}),(0,Pe.jsx)(bA,{}),(0,Pe.jsx)(xA,{})]}),(0,Pe.jsx)(SA,{})]})}const AA=()=>{const{showWalletModal:e,setShowWalletModal:t,connectWallet:n,isConnecting:r}=Xf();console.log("WalletConnectionModal: showWalletModal =",e);return(0,Pe.jsx)(sy,{children:e&&(0,Pe.jsx)(XE.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4",onClick:()=>{t(!1)},children:(0,Pe.jsxs)(XE.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-8 w-full max-w-md mx-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,Pe.jsxs)("div",{className:"text-center mb-8",children:[(0,Pe.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Pe.jsx)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,Pe.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Connect Your Wallet"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Connect your Web3 wallet to access all features"})]}),(0,Pe.jsx)("div",{className:"space-y-3 mb-6",children:[{id:"metamask",name:"MetaMask",description:"Connect using MetaMask browser extension",logo:"https://avatars.githubusercontent.com/u/11744586?s=200&v=4",color:"from-orange-400 to-orange-600"},{id:"walletconnect",name:"WalletConnect",description:"Connect using WalletConnect mobile app",logo:"https://raw.githubusercontent.com/WalletConnect/walletconnect-assets/master/Icon/Gradient/Icon.png",color:"from-blue-400 to-blue-600"},{id:"coinbase",name:"Coinbase Wallet",description:"Connect using Coinbase Wallet",logo:"https://avatars.githubusercontent.com/u/18060234?s=200&v=4",color:"from-purple-400 to-purple-600"}].map(e=>(0,Pe.jsx)("button",{onClick:()=>(async e=>{await n(e)})(e.id),disabled:r,className:"w-full p-4 rounded-xl border-2 border-gray-200 hover:border-gray-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed group",children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Pe.jsxs)("div",{className:"w-12 h-12 rounded-full flex items-center justify-center group-hover:scale-105 transition-transform duration-200 overflow-hidden",children:[(0,Pe.jsx)("img",{src:e.logo,alt:e.name,className:"w-full h-full object-contain",onError:t=>{console.log("Logo failed to load:",e.logo,"for wallet:",e.name),t.target.style.display="none",t.target.nextElementSibling.style.display="flex"},onLoad:()=>{console.log("Logo loaded successfully:",e.logo,"for wallet:",e.name)}}),(0,Pe.jsx)("div",{className:"w-full h-full bg-gradient-to-r ".concat(e.color," rounded-full flex items-center justify-center text-white text-xl hidden"),children:e.name.charAt(0)})]}),(0,Pe.jsxs)("div",{className:"flex-1 text-left",children:[(0,Pe.jsx)("div",{className:"font-semibold text-gray-900",children:e.name}),(0,Pe.jsx)("div",{className:"text-sm text-gray-500",children:e.description})]}),r&&(0,Pe.jsxs)("svg",{className:"animate-spin h-5 w-5 text-blue-500",fill:"none",viewBox:"0 0 24 24",children:[(0,Pe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Pe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})]})},e.id))}),(0,Pe.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:(0,Pe.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Pe.jsx)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Pe.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,Pe.jsx)("p",{className:"font-medium",children:"Real Web3 Wallet Required"}),(0,Pe.jsx)("p",{children:"Connect your actual MetaMask or Coinbase Wallet to access DeFi features, trading, deposits, and loans"})]})]})}),(0,Pe.jsx)("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 mb-6",children:(0,Pe.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Pe.jsx)("svg",{className:"w-5 h-5 text-gray-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Pe.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,Pe.jsx)("p",{className:"font-medium",children:"Supported Networks"}),(0,Pe.jsx)("p",{children:"Ethereum, Polygon, BSC, Arbitrum"})]})]})}),(0,Pe.jsx)("div",{className:"text-center",children:(0,Pe.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:(0,Pe.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,Pe.jsx)("svg",{className:"w-4 h-4 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,Pe.jsx)("p",{className:"text-blue-800 text-sm font-medium",children:"Connect your wallet to access trading features"})]})})})]})})})};function NA(){var e,t;const{isConnected:n}=Xf(),{user:r}=nA();return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white text-gray-900",children:[(0,Pe.jsx)(AA,{}),(0,Pe.jsxs)("header",{className:"flex items-center justify-between px-2 py-2 bg-white border-b border-gray-200",children:[(0,Pe.jsxs)(Ce,{to:"/",className:"flex items-center space-x-2",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-gray-900 text-xl font-semibold",children:"Tokenize"})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Pe.jsx)(Ce,{to:"/notifications",className:"flex items-center justify-center",children:(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})})]})]}),(0,Pe.jsxs)("main",{className:"px-1 pb-16",children:[(0,Pe.jsx)("div",{className:"relative mt-4",children:(0,Pe.jsxs)("div",{className:"bg-gray-600 rounded-xl p-4 relative shadow-lg",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{className:"text-gray-200 text-sm font-medium",children:"Balance"}),(0,Pe.jsx)("p",{className:"text-white text-2xl font-bold",children:n?"$ ".concat((null===r||void 0===r||null===(e=r.balance)||void 0===e?void 0:e.toFixed(6))||"0.000000"):"Connect Wallet"})]}),(0,Pe.jsx)("div",{className:"flex items-center space-x-2",children:(0,Pe.jsxs)("button",{className:"bg-blue-500 text-white px-3 py-1 rounded-full text-xs font-semibold flex items-center space-x-1",children:[(0,Pe.jsx)("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),(0,Pe.jsx)("span",{children:n?"Open":"Connect"})]})})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-2 text-gray-200 text-sm",children:[(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})}),(0,Pe.jsx)("span",{children:n?"$".concat((null===(t=.01*(null===r||void 0===r?void 0:r.balance))||void 0===t?void 0:t.toFixed(8))||"0.00000000"," Today's Profit"):"Connect wallet to see profit"})]})]})}),(0,Pe.jsx)("div",{className:"bg-gray-100 rounded-md p-1.5 mt-2 border border-gray-200",children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Pe.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{className:"text-gray-900 font-semibold text-sm",children:"New features in online!"}),(0,Pe.jsx)("p",{className:"text-gray-600 text-xs",children:"in the process of updating"})]})]})}),(0,Pe.jsx)("div",{className:"mt-1.5",children:(0,Pe.jsxs)("button",{className:"w-full bg-gray-100 rounded-md p-1.5 flex items-center justify-center space-x-2 border border-gray-200",children:[(0,Pe.jsx)("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,Pe.jsx)("span",{className:"text-gray-900 font-semibold text-sm",children:"Operate with a Demo Account"})]})}),(0,Pe.jsxs)("div",{className:"space-y-1.5 mt-2",children:[(0,Pe.jsxs)("div",{className:"bg-gray-100 rounded-md p-2 relative overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-green-500/10 rounded-full -translate-y-10 translate-x-10"}),(0,Pe.jsx)("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-green-500/10 rounded-full translate-y-8 -translate-x-8"}),(0,Pe.jsxs)("div",{className:"text-center relative z-10",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,Pe.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:"Lowest transactions fees < 0.3%"}),(0,Pe.jsx)("h2",{className:"text-gray-900 text-2xl font-bold mb-2",children:"Trade all assets in one place"}),(0,Pe.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Forex, crypto, stocks, indices, commodities"}),(0,Pe.jsx)(Ce,{to:"/market",children:(0,Pe.jsx)("button",{className:"bg-gray-900 text-white px-3 py-1.5 rounded-md font-semibold text-xs",children:"Get started"})})]})]}),(0,Pe.jsxs)("div",{className:"bg-gray-100 rounded-xl p-4 relative overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-green-500/10 rounded-full -translate-y-10 translate-x-10"}),(0,Pe.jsx)("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-green-500/10 rounded-full translate-y-8 -translate-x-8"}),(0,Pe.jsxs)("div",{className:"text-center relative z-10",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,Pe.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:"Simple and stable"}),(0,Pe.jsx)("h2",{className:"text-gray-900 text-2xl font-bold mb-2",children:"Smart trading"}),(0,Pe.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"One click to create your earning plan"}),(0,Pe.jsx)(Ce,{to:"/smart-trading",children:(0,Pe.jsx)("button",{className:"bg-gray-900 text-white px-3 py-1.5 rounded-md font-semibold text-xs",children:"Get started"})})]})]}),(0,Pe.jsxs)("div",{className:"bg-gray-100 rounded-xl p-4 relative overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("div",{className:"absolute top-0 right-0 w-20 h-20 bg-green-500/10 rounded-full -translate-y-10 translate-x-10"}),(0,Pe.jsx)("div",{className:"absolute bottom-0 left-0 w-16 h-16 bg-green-500/10 rounded-full translate-y-8 -translate-x-8"}),(0,Pe.jsxs)("div",{className:"text-center relative z-10",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"})})}),(0,Pe.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:"Low interest rate and higher amount"}),(0,Pe.jsx)("h2",{className:"text-gray-900 text-2xl font-bold mb-2",children:"Cryptocurrency loans"}),(0,Pe.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Borrow cryptocurrency spots without any collateral!"}),(0,Pe.jsx)(Ce,{to:"/loan",children:(0,Pe.jsx)("button",{className:"bg-gray-900 text-white px-3 py-1.5 rounded-md font-semibold text-xs",children:"Get started"})})]})]})]}),(0,Pe.jsx)("div",{className:"mt-8",children:(0,Pe.jsx)(SA,{})})]}),(0,Pe.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200",children:(0,Pe.jsxs)("div",{className:"bg-gray-800 mx-1 mb-1 rounded-lg shadow-2xl px-2 py-1.5 flex items-center justify-between",children:[(0,Pe.jsxs)(Ce,{to:"/",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),(0,Pe.jsx)("span",{className:"text-xs text-white",children:"Home"})]}),(0,Pe.jsxs)(Ce,{to:"/market",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Market"})]}),(0,Pe.jsxs)(Ce,{to:"/smart-trading",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Smart"})]}),(0,Pe.jsxs)(Ce,{to:"/loan",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Loan"})]}),(0,Pe.jsxs)(Ce,{to:"/account",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Account"})]})]})})]})}const TA=e=>{let{countryCode:t}=e;return{US:(0,Pe.jsxs)("svg",{viewBox:"0 0 24 16",className:"w-6 h-6 rounded-full overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("rect",{width:"24",height:"16",fill:"#B22234"}),(0,Pe.jsx)("rect",{width:"24",height:"1.23",fill:"#FFFFFF"}),(0,Pe.jsx)("rect",{y:"2.46",width:"24",height:"1.23",fill:"#FFFFFF"}),(0,Pe.jsx)("rect",{y:"4.92",width:"24",height:"1.23",fill:"#FFFFFF"}),(0,Pe.jsx)("rect",{y:"7.38",width:"24",height:"1.23",fill:"#FFFFFF"}),(0,Pe.jsx)("rect",{y:"9.84",width:"24",height:"1.23",fill:"#FFFFFF"}),(0,Pe.jsx)("rect",{y:"12.3",width:"24",height:"1.23",fill:"#FFFFFF"}),(0,Pe.jsx)("rect",{y:"14.76",width:"24",height:"1.23",fill:"#FFFFFF"}),(0,Pe.jsx)("rect",{width:"9.6",height:"8.61",fill:"#3C3B6E"}),(0,Pe.jsxs)("g",{fill:"#FFFFFF",children:[(0,Pe.jsx)("circle",{cx:"1.2",cy:"1",r:"0.2"}),(0,Pe.jsx)("circle",{cx:"2.4",cy:"1",r:"0.2"}),(0,Pe.jsx)("circle",{cx:"3.6",cy:"1",r:"0.2"}),(0,Pe.jsx)("circle",{cx:"4.8",cy:"1",r:"0.2"}),(0,Pe.jsx)("circle",{cx:"6",cy:"1",r:"0.2"}),(0,Pe.jsx)("circle",{cx:"7.2",cy:"1",r:"0.2"}),(0,Pe.jsx)("circle",{cx:"8.4",cy:"1",r:"0.2"})]})]}),CH:(0,Pe.jsxs)("svg",{viewBox:"0 0 24 16",className:"w-6 h-6 rounded-full overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("rect",{width:"24",height:"16",fill:"#FF0000"}),(0,Pe.jsx)("rect",{x:"10",y:"2",width:"4",height:"12",fill:"#FFFFFF"}),(0,Pe.jsx)("rect",{x:"2",y:"6",width:"20",height:"4",fill:"#FFFFFF"})]}),HK:(0,Pe.jsxs)("svg",{viewBox:"0 0 24 16",className:"w-6 h-6 rounded-full overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("rect",{width:"24",height:"16",fill:"#DE2910"}),(0,Pe.jsxs)("g",{fill:"#FFFFFF",children:[(0,Pe.jsx)("path",{d:"M12 4c0-1 1-2 2-2s2 1 2 2-1 2-2 2-2-1-2-2z"}),(0,Pe.jsx)("path",{d:"M8 6c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M16 6c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M6 8c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M18 8c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M8 10c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M16 10c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M12 12c0-1 1-2 2-2s2 1 2 2-1 2-2 2-2-1-2-2z"})]})]}),SG:(0,Pe.jsxs)("svg",{viewBox:"0 0 24 16",className:"w-6 h-6 rounded-full overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("rect",{width:"24",height:"8",fill:"#ED2939"}),(0,Pe.jsx)("rect",{y:"8",width:"24",height:"8",fill:"#FFFFFF"}),(0,Pe.jsxs)("g",{fill:"#FFFFFF",children:[(0,Pe.jsx)("circle",{cx:"4",cy:"3",r:"1"}),(0,Pe.jsx)("circle",{cx:"6",cy:"2",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"8",cy:"2",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"10",cy:"2",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"12",cy:"2",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"14",cy:"2",r:"0.5"})]})]}),GB:(0,Pe.jsxs)("svg",{viewBox:"0 0 24 16",className:"w-6 h-6 rounded-full overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("rect",{width:"24",height:"16",fill:"#012169"}),(0,Pe.jsxs)("g",{fill:"#FFFFFF",children:[(0,Pe.jsx)("path",{d:"M0 0l24 16M24 0L0 16",stroke:"#FFFFFF",strokeWidth:"1"}),(0,Pe.jsx)("path",{d:"M0 0l24 16M24 0L0 16",stroke:"#C8102E",strokeWidth:"0.5"}),(0,Pe.jsx)("rect",{x:"10",y:"0",width:"4",height:"16",fill:"#FFFFFF"}),(0,Pe.jsx)("rect",{x:"0",y:"6",width:"24",height:"4",fill:"#FFFFFF"}),(0,Pe.jsx)("rect",{x:"11",y:"0",width:"2",height:"16",fill:"#C8102E"}),(0,Pe.jsx)("rect",{x:"0",y:"7",width:"24",height:"2",fill:"#C8102E"})]})]}),CN:(0,Pe.jsxs)("svg",{viewBox:"0 0 24 16",className:"w-6 h-6 rounded-full overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("rect",{width:"24",height:"16",fill:"#DE2910"}),(0,Pe.jsxs)("g",{fill:"#FFDE00",children:[(0,Pe.jsx)("path",{d:"M4 4c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M7 2c0-0.3 0.3-0.6 0.6-0.6s0.6 0.3 0.6 0.6-0.3 0.6-0.6 0.6-0.6-0.3-0.6-0.6z"}),(0,Pe.jsx)("path",{d:"M9 3c0-0.3 0.3-0.6 0.6-0.6s0.6 0.3 0.6 0.6-0.3 0.6-0.6 0.6-0.6-0.3-0.6-0.6z"}),(0,Pe.jsx)("path",{d:"M9 5c0-0.3 0.3-0.6 0.6-0.6s0.6 0.3 0.6 0.6-0.3 0.6-0.6 0.6-0.6-0.3-0.6-0.6z"}),(0,Pe.jsx)("path",{d:"M7 6c0-0.3 0.3-0.6 0.6-0.6s0.6 0.3 0.6 0.6-0.3 0.6-0.6 0.6-0.6-0.3-0.6-0.6z"})]})]}),JP:(0,Pe.jsxs)("svg",{viewBox:"0 0 24 16",className:"w-6 h-6 rounded-full overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("rect",{width:"24",height:"16",fill:"#FFFFFF"}),(0,Pe.jsx)("circle",{cx:"12",cy:"8",r:"3",fill:"#BC002D"})]}),EU:(0,Pe.jsxs)("svg",{viewBox:"0 0 24 16",className:"w-6 h-6 rounded-full overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("rect",{width:"24",height:"16",fill:"#003399"}),(0,Pe.jsxs)("g",{fill:"#FFCC00",children:[(0,Pe.jsx)("circle",{cx:"12",cy:"8",r:"1"}),(0,Pe.jsx)("circle",{cx:"8",cy:"6",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"16",cy:"6",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"8",cy:"10",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"16",cy:"10",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"6",cy:"8",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"18",cy:"8",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"10",cy:"4",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"14",cy:"4",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"10",cy:"12",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"14",cy:"12",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"4",cy:"8",r:"0.5"}),(0,Pe.jsx)("circle",{cx:"20",cy:"8",r:"0.5"})]})]}),AU:(0,Pe.jsxs)("svg",{viewBox:"0 0 24 16",className:"w-6 h-6 rounded-full overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("rect",{width:"24",height:"16",fill:"#00008B"}),(0,Pe.jsxs)("g",{fill:"#FFFFFF",children:[(0,Pe.jsx)("path",{d:"M6 4c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M18 4c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M6 12c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M18 12c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M12 8c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"})]})]}),CA:(0,Pe.jsxs)("svg",{viewBox:"0 0 24 16",className:"w-6 h-6 rounded-full overflow-hidden border border-gray-200",children:[(0,Pe.jsx)("rect",{width:"24",height:"16",fill:"#FF0000"}),(0,Pe.jsx)("rect",{x:"8",y:"0",width:"8",height:"16",fill:"#FFFFFF"}),(0,Pe.jsxs)("g",{fill:"#FF0000",children:[(0,Pe.jsx)("path",{d:"M12 4c0-1 1-2 2-2s2 1 2 2-1 2-2 2-2-1-2-2z"}),(0,Pe.jsx)("path",{d:"M10 6c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M14 6c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M8 8c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M16 8c0-0.5 0.5-1 1-1s1 0.5 1 1-0.5 1-1 1-1-0.5-1-1z"}),(0,Pe.jsx)("path",{d:"M12 12c0-1 1-2 2-2s2 1 2 2-1 2-2 2-2-1-2-2z"})]})]})}[t]||(0,Pe.jsx)("div",{className:"w-6 h-6 rounded-full bg-gray-400 flex items-center justify-center text-white text-xs font-bold border border-gray-200",children:"?"})},kA="https://api.coingecko.com/api/v3",CA="https://api.exchangerate-api.com/v4/latest",IA=new Map,_A=e=>{const t=IA.get(e);return!!t&&Date.now()-t.timestamp<3e4},PA=e=>{const t=IA.get(e);return t?t.data:null},jA=(e,t)=>{IA.set(e,{data:t,timestamp:Date.now()})},DA=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["bitcoin","ethereum","binancecoin","cardano","solana"];const t="crypto_".concat(e.join("_"));if(_A(t))return PA(t);try{const n=new AbortController,r=setTimeout(()=>n.abort(),5e3),s=await fetch("".concat(kA,"/simple/price?ids=").concat(e.join(","),"&vs_currencies=usd&include_24hr_change=true"),{signal:n.signal});if(clearTimeout(r),!s.ok)throw new Error("HTTP error! status: ".concat(s.status));const i=await s.json();return jA(t,i),i}catch(n){throw console.error("Error fetching crypto prices:",n),console.error("Crypto API failed - WebSocket should be used instead"),new Error("Crypto API unavailable - use WebSocket connection")}},MA=async()=>{const e="realtime_forex_rates",t=IA.get(e);if(t&&Date.now()-t.timestamp<5e3)return t.data;try{var n,r,s,i,o,a,c,l,u;const t=await fetch("".concat(CA,"/USD"));if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));const h=await t.json(),d={CHF:(null===(n=h.rates)||void 0===n?void 0:n.CHF)||.8963,JPY:(null===(r=h.rates)||void 0===r?void 0:r.JPY)||152,EUR:(null===(s=h.rates)||void 0===s?void 0:s.EUR)||.92,GBP:(null===(i=h.rates)||void 0===i?void 0:i.GBP)||.79,CAD:(null===(o=h.rates)||void 0===o?void 0:o.CAD)||1.36,AUD:(null===(a=h.rates)||void 0===a?void 0:a.AUD)||1.52,HKD:(null===(c=h.rates)||void 0===c?void 0:c.HKD)||7.8,SGD:(null===(l=h.rates)||void 0===l?void 0:l.SGD)||1.35,CNY:(null===(u=h.rates)||void 0===u?void 0:u.CNY)||7.2},f=(0,tt.A)((0,tt.A)({},h),{},{rates:d,timestamp:Date.now(),last_updated:(new Date).toISOString()});return jA(e,f),f}catch(h){return console.error("Error fetching real-time Forex rates:",h),t?t.data:{rates:{CHF:.8963,JPY:152,EUR:.92,GBP:.79,CAD:1.36,AUD:1.52,HKD:7.8,SGD:1.35,CNY:7.2},timestamp:Date.now(),last_updated:(new Date).toISOString()}}},RA=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;const r=[];let s=e;const i=.001;for(let o=0;o<n;o++){s*=1+(Math.random()-.5)*i+(t?2e-4:-2e-4)+Math.sin(o/n*Math.PI)*i*.1,s=Math.max(.95*e,Math.min(1.05*e,s)),r.push(parseFloat(s.toFixed(4)))}return r},OA=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16;"boolean"===typeof e&&(t=e,e=100);const r=[];let s,i=e;s=e>100?.002:e>10?.001:5e-4;const o=Date.now();for(let a=0;a<n;a++){const c=.1*Math.sin((o-36e5*a)/864e5);i*=1+(Math.random()-.5)*s+(t?.3*s:.3*-s)+c+Math.sin(a/n*Math.PI)*s*.2,i=e>1e3?Math.max(.95*e,Math.min(1.05*e,i)):e>100?Math.max(.98*e,Math.min(1.02*e,i)):e>10?Math.max(.95*e,Math.min(1.05*e,i)):Math.max(.9*e,Math.min(1.1*e,i)),r.push(parseFloat(i.toFixed(4)))}return r},LA=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["AAPL","TSLA","AMZN","GOOGL","MSFT"];const t="stocks_realtime_".concat(e.join("_")),n=IA.get(t);if(n&&Date.now()-n.timestamp<15e3)return n.data;try{const n={AAPL:{price:255.46,change:.54,changePercent:.21},TSLA:{price:440.4,change:2.83,changePercent:.65},AMZN:{price:219.78,change:.32,changePercent:.15},GOOGL:{price:246.54,change:.21,changePercent:.09},MSFT:{price:511.46,change:.27,changePercent:.05},UNH:{price:344.08,change:-1.11,changePercent:-.32},AI:{price:17.14,change:-.93,changePercent:-5.15},BRZE:{price:31.58,change:.22,changePercent:.7},FLNC:{price:11.91,change:3.66,changePercent:30.75},SNOW:{price:224.64,change:1.05,changePercent:.47},BB:{price:4.96,change:6.17,changePercent:124.4},EVGO:{price:4.57,change:-1.32,changePercent:-22.4},MQ:{price:5.36,change:.38,changePercent:7.63}},r={};e.forEach(e=>{const t=n[e]||{price:500*Math.random()+50,change:10*(Math.random()-.5),changePercent:5*(Math.random()-.5)};r[e]={price:t.price,change:t.change,changePercent:t.changePercent,timestamp:Date.now()}});const s=(0,tt.A)((0,tt.A)({},r),{},{timestamp:Date.now(),last_updated:(new Date).toISOString()});return jA(t,s),s}catch(r){if(console.error("Error fetching real-time stock prices:",r),n)return n.data;throw r}},FA=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["SPY","QQQ","GLD","VTI","IWM"];const t="etf_realtime_".concat(e.join("_")),n=IA.get(t);if(n&&Date.now()-n.timestamp<2e4)return n.data;try{const n={SPY:"https://logo.clearbit.com/ssga.com",QQQ:"https://logo.clearbit.com/invesco.com",IWM:"https://logo.clearbit.com/ishares.com",VTI:"https://logo.clearbit.com/vanguard.com",VEA:"https://logo.clearbit.com/vanguard.com",VWO:"https://logo.clearbit.com/vanguard.com",AGG:"https://logo.clearbit.com/ishares.com",BND:"https://logo.clearbit.com/vanguard.com",GLD:"https://logo.clearbit.com/ssga.com",SLV:"https://logo.clearbit.com/ishares.com",USO:"https://logo.clearbit.com/uscfinvestments.com",UNG:"https://logo.clearbit.com/uscfinvestments.com",EFA:"https://logo.clearbit.com/ishares.com",EEM:"https://logo.clearbit.com/ishares.com",XLF:"https://logo.clearbit.com/ssga.com",XLK:"https://logo.clearbit.com/ssga.com",XLE:"https://logo.clearbit.com/ssga.com",XLV:"https://logo.clearbit.com/ssga.com"},r={SPY:{price:456.78,change:.85,changePercent:.19},QQQ:{price:389.45,change:1.23,changePercent:.32},GLD:{price:189.67,change:1.45,changePercent:.77},VTI:{price:234.56,change:.67,changePercent:.29},IWM:{price:198.34,change:-.23,changePercent:-.12},EFA:{price:78.91,change:.34,changePercent:.43},VEA:{price:45.23,change:.12,changePercent:.27},EEM:{price:42.15,change:-.56,changePercent:-1.31},XLF:{price:35.67,change:.78,changePercent:2.24},XLK:{price:178.45,change:1.23,changePercent:.69},XLE:{price:89.12,change:-.45,changePercent:-.5},XLV:{price:134.78,change:.67,changePercent:.5},VWO:{price:42.15,change:-.56,changePercent:-1.31},AGG:{price:108.45,change:.23,changePercent:.21},BND:{price:78.91,change:.12,changePercent:.15},SLV:{price:22.34,change:.45,changePercent:2.05},USO:{price:65.78,change:-1.23,changePercent:-1.84},UNG:{price:12.45,change:.34,changePercent:2.81}},s={};e.forEach(e=>{const t=r[e]||{price:200*Math.random()+50,change:5*(Math.random()-.5),changePercent:2*(Math.random()-.5)};s[e]={price:t.price,change:t.change,changePercent:t.changePercent,logoUrl:n[e]||null,timestamp:Date.now()}});const i=(0,tt.A)((0,tt.A)({},s),{},{timestamp:Date.now(),last_updated:(new Date).toISOString()});return jA(t,i),i}catch(r){if(console.error("Error fetching real-time ETF prices:",r),n)return n.data;throw r}},UA=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["ES","GC","CL","NQ","YM"];const t="futures_realtime_".concat(e.join("_")),n=IA.get(t);if(n&&Date.now()-n.timestamp<1e4)return n.data;try{const n={ES:{price:4567.25,change:.92,changePercent:.02},GC:{price:2034.8,change:1.23,changePercent:.06},CL:{price:78.45,change:-1.67,changePercent:-2.08},NQ:{price:15678.9,change:.45,changePercent:0},YM:{price:34567.89,change:-.12,changePercent:0}},r={};e.forEach(e=>{const t=n[e]||{price:1e4*Math.random()+1e3,change:20*(Math.random()-.5),changePercent:1*(Math.random()-.5)};r[e]={price:t.price,change:t.change,changePercent:t.changePercent,timestamp:Date.now()}});const s=(0,tt.A)((0,tt.A)({},r),{},{timestamp:Date.now(),last_updated:(new Date).toISOString()});return jA(t,s),s}catch(r){if(console.error("Error fetching real-time Futures prices:",r),n)return n.data;throw r}},BA=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return parseFloat(e).toFixed(t)},VA=e=>"".concat(e>=0?"+":"").concat(e.toFixed(2),"%"),zA=(e,t)=>{let n=null,r=0;let s={};console.log("\ud83d\ude80 Initializing Binance WebSocket for symbols:",e);const i={bitcoin:"BTCUSDT",ethereum:"ETHUSDT",litecoin:"LTCUSDT",polkadot:"DOTUSDT",filecoin:"FILUSDT",dogecoin:"DOGEUSDT",ripple:"XRPUSDT",tron:"TRXUSDT",polygon:"POLUSDT",cardano:"ADAUSDT",chainlink:"LINKUSDT",cosmos:"ATOMUSDT",binancecoin:"BNBUSDT",solana:"SOLUSDT"},o=()=>{try{const a=e.map(e=>{const t=i[e.toLowerCase()]||"".concat(e.toUpperCase(),"USDT"),n="".concat(t.toLowerCase(),"@ticker");return"polygon"===e.toLowerCase()&&console.log("\ud83d\udd0d Processing polygon symbol:",{symbol:e,binanceSymbol:t,stream:n}),n}).join("/"),c="wss://stream.binance.com:9443/ws/".concat(a);console.log("\ud83d\udd17 Connecting to Binance WebSocket:",c),console.log("\ud83d\udccb Streams being subscribed to:",a),a.includes("polusdt@ticker")?console.log("\u2705 POLUSDT stream is included in subscription"):(console.log("\u274c POLUSDT stream is NOT included in subscription"),console.log("Available streams:",a.split("/"))),n=new WebSocket(c),n.onopen=()=>{console.log("\u2705 Binance WebSocket connected successfully!"),r=0},n.onmessage=n=>{try{console.log("\ud83d\udce1 Received data from WebSocket:",n.data);const r=JSON.parse(n.data);(Array.isArray(r)?r:[r]).forEach(n=>{if("24hrTicker"===n.e){const r=n.s,o=parseFloat(n.c),a=parseFloat(n.P);console.log("\ud83d\udcb0 ".concat(r,": $").concat(o," (").concat(a,"%)")),"POLUSDT"===r&&console.log("\ud83c\udfaf POLUSDT data received:",{symbol:r,price:o,priceChangePercent:a,streamData:n});const c=Object.keys(i).find(e=>i[e]===r)||r.replace("USDT","").toLowerCase();if(console.log("\ud83d\udd0d WebSocket processing ".concat(r,":"),{originalSymbol:c,symbolsArray:e,isIncluded:e.includes(c)}),c&&e.includes(c)){const e=s[c]||o,r={symbol:c,price:o,change24h:a,change:(o-e)/e*100,timestamp:Date.now(),isPositive:a>=0,sparkline:RA(o,a>=0),volume:parseFloat(n.v),high24h:parseFloat(n.h),low24h:parseFloat(n.l)};s[c]=o,console.log("\ud83d\udd04 Updating ".concat(c,":"),r),console.log("\ud83d\udce4 Sending update to component:",{[c]:r}),t({[c]:r})}}})}catch(r){console.error("\u274c Error parsing Binance WebSocket message:",r)}},n.onerror=e=>{console.error("\u274c WebSocket connection error:",e)},n.onclose=e=>{console.log("\ud83d\udd0c Binance WebSocket closed:",e.code,e.reason),1e3!==e.code&&r<5&&(r++,console.log("\ud83d\udd04 Attempting to reconnect (".concat(r,"/").concat(5,")...")),setTimeout(()=>{o()},1e3*Math.pow(2,r)))}}catch(a){return console.error("\u274c Error creating Binance WebSocket:",a),console.log("\u26a0\ufe0f Falling back to polling method..."),GA(e,t)}};return o(),{close:()=>{console.log("\ud83d\udd0c Closing Binance WebSocket connection"),n&&(n.close(1e3,"Manual close"),n=null)},reconnect:()=>{console.log("\ud83d\udd04 Manually reconnecting Binance WebSocket"),n&&n.close(),r=0,o()}}},GA=(e,t)=>{let n,r={};const s=async()=>{try{const n=await DA(e),s={};e.forEach(e=>{const t=n[e];if(t){const n=r[e]||t.usd,i=(t.usd-n)/n*100;s[e]={symbol:e,price:t.usd,change24h:t.usd_24h_change,change:i,timestamp:Date.now(),isPositive:i>=0,sparkline:RA(t.usd,i>=0)},r[e]=t.usd}}),t(s)}catch(n){console.error("Error in crypto fallback polling:",n)}};return n=setInterval(s,2e3),s(),{close:()=>{n&&clearInterval(n)}}},HA=e=>{let{data:t,isPositive:n,width:r=60,height:s=20}=e;if(console.log("\ud83d\udcca [SparklineChart] Rendering with data:",{data:t,dataLength:null===t||void 0===t?void 0:t.length,isPositive:n,width:r,height:s}),t&&t.length>0&&t[0]&&"number"===typeof t[0]&&t[0]>0&&t[0]<1&&console.log("\ud83c\udfaf [MATIC Chart Debug] Detected MATIC-like data:",{data:t,dataLength:t.length,firstValue:t[0],lastValue:t[t.length-1],minValue:Math.min(...t),maxValue:Math.max(...t)}),!t||t.length<2)return console.log("\ud83d\udcca [SparklineChart] Insufficient data, showing fallback"),(0,Pe.jsx)("div",{className:"rounded ".concat(n?"bg-green-100":"bg-red-100"),style:{width:"".concat(r,"px"),height:"".concat(s,"px"),display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Pe.jsx)("div",{className:"rounded ".concat(n?"bg-green-500":"bg-red-500"),style:{width:"".concat(.6*r,"px"),height:"".concat(.6*s,"px")}})});const i=Math.min(...t),o=Math.max(...t),a=o-i||1;if(i===o){console.log("\ud83d\udcca [SparklineChart] All data points are the same, adjusting range");const e=.99*i,a=1.01*o,c=a-e,l=t.map((n,i)=>{const o=i/(t.length-1)*r,a=s-(n-e)/c*s;return"".concat(o,",").concat(a)}).join(" "),u=n?"#10B981":"#EF4444";return console.log("\ud83d\udcca [SparklineChart] Rendering adjusted chart with:",{points:l,width:r,height:s,adjustedMin:e,adjustedMax:a,adjustedRange:c,color:u,dataLength:t.length}),(0,Pe.jsx)("div",{style:{width:"".concat(r,"px"),height:"".concat(s,"px"),display:"block",overflow:"visible"},children:(0,Pe.jsxs)("svg",{width:r,height:s,viewBox:"0 0 ".concat(r," ").concat(s),style:{display:"block",overflow:"visible"},children:[(0,Pe.jsx)("polygon",{points:"0,".concat(s," ").concat(l," ").concat(r,",").concat(s),fill:n?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)"}),(0,Pe.jsx)("polyline",{points:l,fill:"none",stroke:u,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})}const c=t.map((e,n)=>{const o=n/(t.length-1)*r,c=s-(e-i)/a*s;return"".concat(o,",").concat(c)}).join(" "),l=n?"#10B981":"#EF4444";return console.log("\ud83d\udcca [SparklineChart] Rendering chart with:",{points:c,width:r,height:s,minValue:i,maxValue:o,range:a,color:l,dataLength:t.length}),(0,Pe.jsx)("div",{style:{width:"".concat(r,"px"),height:"".concat(s,"px"),display:"block",overflow:"visible"},children:(0,Pe.jsxs)("svg",{width:r,height:s,viewBox:"0 0 ".concat(r," ").concat(s),style:{display:"block",overflow:"visible"},children:[(0,Pe.jsx)("polygon",{points:"0,".concat(s," ").concat(c," ").concat(r,",").concat(s),fill:n?"rgba(16, 185, 129, 0.1)":"rgba(239, 68, 68, 0.1)"}),(0,Pe.jsx)("polyline",{points:c,fill:"none",stroke:l,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})]})})};function qA(){const[e,t]=(0,s.useState)("Forex"),[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)([]),[a,c]=(0,s.useState)([]),[l,u]=(0,s.useState)([]),[h,d]=(0,s.useState)([]),[f,m]=(0,s.useState)(!0),[p,g]=(0,s.useState)(null),[y,v]=(0,s.useState)(null),[w,b]=(0,s.useState)({}),x=async()=>{try{var e,t,n,r,s,i,a,c,l;console.log("\ud83d\udd04 [Mobile] Fetching Forex data...");const u=await MA(),h=[{pair:"USD/CHF",country:"Switzerland",flags:["US","CH"],rate:(null===(e=u.rates)||void 0===e?void 0:e.CHF)||.8963,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/ch.png"]},{pair:"USD/JPY",country:"Japan",flags:["US","JP"],rate:(null===(t=u.rates)||void 0===t?void 0:t.JPY)||152,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/jp.png"]},{pair:"USD/EUR",country:"Eurozone",flags:["US","EU"],rate:(null===(n=u.rates)||void 0===n?void 0:n.EUR)||.92,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/eu.png"]},{pair:"USD/GBP",country:"United Kingdom",flags:["US","GB"],rate:(null===(r=u.rates)||void 0===r?void 0:r.GBP)||.79,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/gb.png"]},{pair:"USD/CAD",country:"Canada",flags:["US","CA"],rate:(null===(s=u.rates)||void 0===s?void 0:s.CAD)||1.36,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/ca.png"]},{pair:"USD/AUD",country:"Australia",flags:["US","AU"],rate:(null===(i=u.rates)||void 0===i?void 0:i.AUD)||1.52,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/au.png"]},{pair:"USD/HKD",country:"Hong Kong",flags:["US","HK"],rate:(null===(a=u.rates)||void 0===a?void 0:a.HKD)||7.8,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/hk.png"]},{pair:"USD/SGD",country:"Singapore",flags:["US","SG"],rate:(null===(c=u.rates)||void 0===c?void 0:c.SGD)||1.35,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/sg.png"]},{pair:"USD/CNY",country:"China",flags:["US","CN"],rate:(null===(l=u.rates)||void 0===l?void 0:l.CNY)||7.2,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/cn.png"]}].map((e,t)=>{const n=Math.random()>.5,r=OA(e.rate,n),s=.002*(Math.random()-.5)*100;return{id:t+1,pair:e.pair,country:e.country,value:BA(e.rate,e.pair.includes("JPY")?2:4),price:BA(e.rate,e.pair.includes("JPY")?2:4),change:VA(s),isPositive:s>=0,flags:e.flags,flagUrls:e.flagUrls,chart:r,sparkline:OA(e.rate,n,12),realTimePrice:e.rate,lastUpdated:u.last_updated||(new Date).toISOString()}});o(h),console.log("\u2705 [Mobile] Forex data updated:",h.length,"pairs")}catch(p){console.error("\u274c [Mobile] Error fetching Forex data:",p)}},S=async()=>{try{console.log("\ud83d\udd04 [Mobile] Fetching Stocks data...");const e=await LA(["AAPL","TSLA","AMZN","GOOGL","MSFT","UNH","AI","BRZE","FLNC","SNOW","BB","EVGO","MQ"]),t=[{symbol:"AAPL",name:"Apple Inc.",logo:"https://logo.clearbit.com/apple.com"},{symbol:"TSLA",name:"Tesla Inc.",logo:"https://logo.clearbit.com/tesla.com"},{symbol:"AMZN",name:"Amazon.com Inc.",logo:"https://logo.clearbit.com/amazon.com"},{symbol:"GOOGL",name:"Alphabet Inc.",logo:"https://logo.clearbit.com/google.com"},{symbol:"MSFT",name:"Microsoft Corporation",logo:"https://logo.clearbit.com/microsoft.com"},{symbol:"UNH",name:"UnitedHealth Group",logo:"https://logo.clearbit.com/unitedhealthgroup.com"},{symbol:"AI",name:"C3.ai Inc.",logo:"https://logo.clearbit.com/c3.ai"},{symbol:"BRZE",name:"Braze Inc.",logo:"https://logo.clearbit.com/braze.com"},{symbol:"FLNC",name:"Fluence Energy Inc.",logo:"https://logo.clearbit.com/fluenceenergy.com"},{symbol:"SNOW",name:"Snowflake Inc.",logo:"https://logo.clearbit.com/snowflake.com"},{symbol:"BB",name:"BlackBerry Limited",logo:"https://logo.clearbit.com/blackberry.com"},{symbol:"EVGO",name:"EVgo Inc.",logo:"https://logo.clearbit.com/evgo.com"},{symbol:"MQ",name:"Marqeta Inc.",logo:"https://logo.clearbit.com/marqeta.com"}].map((t,n)=>{const r=e[t.symbol]||{},s=r.price||500*Math.random()+50,i=r.change||10*(Math.random()-.5),o=i>=0,a=OA(s,o,12);return console.log("\ud83d\udcca [Mobile Stocks] Generated sparkline for ".concat(t.symbol,":"),{price:s,change24h:i,isPositive:o,sparklineData:a.length>0?"".concat(a.length," points"):"EMPTY",firstPoint:a[0],lastPoint:a[a.length-1]}),{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),value:BA(s,2),change:VA(i),isPositive:o,flags:["US","US"],logo:t.logo,chart:OA(s,o),sparkline:a,realTimePrice:s,lastUpdated:(new Date).toISOString()}});c(t),console.log("\u2705 [Mobile] Stocks data updated:",t.length,"stocks")}catch(p){console.error("\u274c [Mobile] Error fetching Stocks data:",p)}},E=async()=>{try{console.log("\ud83d\udd04 [Mobile] Fetching ETF data...");const e=await FA(["SPY","QQQ","IWM","VTI","VEA","VWO","AGG","BND","GLD","SLV","USO","UNG"]),t=[{symbol:"SPY",name:"SPDR S&P 500 ETF Trust",logo:"https://logo.clearbit.com/ssga.com"},{symbol:"QQQ",name:"Invesco QQQ Trust",logo:"https://logo.clearbit.com/invesco.com"},{symbol:"IWM",name:"iShares Russell 2000 ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"VTI",name:"Vanguard Total Stock Market ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"VEA",name:"Vanguard FTSE Developed Markets ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"VWO",name:"Vanguard FTSE Emerging Markets ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"AGG",name:"iShares Core U.S. Aggregate Bond ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"BND",name:"Vanguard Total Bond Market ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"GLD",name:"SPDR Gold Trust",logo:"https://logo.clearbit.com/ssga.com"},{symbol:"SLV",name:"iShares Silver Trust",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"USO",name:"United States Oil Fund",logo:"https://logo.clearbit.com/uscfinvestments.com"},{symbol:"UNG",name:"United States Natural Gas Fund",logo:"https://logo.clearbit.com/uscfinvestments.com"}].map((t,n)=>{const r=e[t.symbol]||{},s=r.price||200*Math.random()+50,i=r.change||5*(Math.random()-.5),o=i>=0,a=r.logoUrl||t.logo,c=OA(s,o,12);return console.log("\ud83d\udcca [Mobile ETF] Generated sparkline for ".concat(t.symbol,":"),{price:s,change24h:i,isPositive:o,logoUrl:a,sparklineData:c.length>0?"".concat(c.length," points"):"EMPTY",firstPoint:c[0],lastPoint:c[c.length-1]}),{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),value:BA(s,2),change:VA(i),isPositive:o,flags:["US","US"],logo:a,chart:OA(s,o),sparkline:c,realTimePrice:s,lastUpdated:(new Date).toISOString()}});u(t),console.log("\u2705 [Mobile] ETF data updated:",t.length,"ETFs")}catch(p){console.error("\u274c [Mobile] Error fetching ETF data:",p)}},A=async()=>{try{console.log("\ud83d\udd04 [Mobile] Fetching Futures data...");const e=await UA(["ES","NQ","YM","RTY","GC","SI","CL","NG","ZB","ZN","ZF","ZT"]),t=[{symbol:"ES",name:"E-mini S&P 500",logo:"https://logo.clearbit.com/cme.com"},{symbol:"NQ",name:"E-mini NASDAQ-100",logo:"https://logo.clearbit.com/cme.com"},{symbol:"YM",name:"E-mini Dow Jones",logo:"https://logo.clearbit.com/cme.com"},{symbol:"RTY",name:"E-mini Russell 2000",logo:"https://logo.clearbit.com/cme.com"},{symbol:"GC",name:"Gold Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"SI",name:"Silver Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"CL",name:"Crude Oil Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"NG",name:"Natural Gas Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZB",name:"30-Year Treasury Bond",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZN",name:"10-Year Treasury Note",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZF",name:"5-Year Treasury Note",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZT",name:"2-Year Treasury Note",logo:"https://logo.clearbit.com/cme.com"}].map((t,n)=>{const r=e[t.symbol]||{},s=r.price||5e3*Math.random()+1e3,i=r.change||3*(Math.random()-.5),o=i>=0,a=r.logoUrl||t.logo,c=OA(s,o,12);return console.log("\ud83d\udcca [Mobile Futures] Generated sparkline for ".concat(t.symbol,":"),{price:s,change24h:i,isPositive:o,logoUrl:a,sparklineData:c.length>0?"".concat(c.length," points"):"EMPTY",firstPoint:c[0],lastPoint:c[c.length-1]}),{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),value:BA(s,2),change:VA(i),isPositive:o,flags:["US","US"],logo:a,sparkline:c,realTimePrice:s,lastUpdated:(new Date).toISOString()}});d(t),console.log("\u2705 [Mobile] Futures data updated:",t.length,"Futures")}catch(p){console.error("\u274c [Mobile] Error fetching Futures data:",p)}};(0,s.useEffect)(()=>{let t=null,n=null,s=null,i=null;y&&y.close();return(async()=>{m(!0),g(null);try{let o=[],a=null;if("Forex"===e)console.log("\ud83d\udd04 [Mobile] Initializing Forex tab with dedicated data feed"),await x(),t=setInterval(async()=>{await x()},5e3),o=[];else if("Stocks"===e)console.log("\ud83d\udd04 [Mobile] Initializing Stocks tab with dedicated data feed"),await S(),n=setInterval(async()=>{await S()},5e3),o=[];else if("ETF"===e)console.log("\ud83d\udd04 [Mobile] Initializing ETF tab with dedicated data feed"),await E(),s=setInterval(async()=>{await E()},5e3),o=[];else if("Futures"===e)console.log("\ud83d\udd04 [Mobile] Initializing Futures tab with dedicated data feed"),await A(),i=setInterval(async()=>{await A()},5e3),o=[];else if("Crypto"===e){console.log("\ud83d\ude80 Initializing Crypto tab with WebSocket-only data");const e=[{symbol:"BTC",name:"Bitcoin",logo:"https://assets.coingecko.com/coins/images/1/large/bitcoin.png"},{symbol:"ETH",name:"Ethereum",logo:"https://assets.coingecko.com/coins/images/279/large/ethereum.png"},{symbol:"LTC",name:"Litecoin",logo:"https://assets.coingecko.com/coins/images/2/large/litecoin.png"},{symbol:"DOT",name:"Polkadot",logo:"https://assets.coingecko.com/coins/images/12171/large/polkadot.png"},{symbol:"FIL",name:"Filecoin",logo:"https://assets.coingecko.com/coins/images/12817/large/filecoin.png"},{symbol:"DOGE",name:"Dogecoin",logo:"https://assets.coingecko.com/coins/images/5/large/dogecoin.png"},{symbol:"XRP",name:"Ripple",logo:"https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png"},{symbol:"TRX",name:"TRON",logo:"https://assets.coingecko.com/coins/images/1094/large/tron-logo.png"},{symbol:"MATIC",name:"Polygon",logo:"https://assets.coingecko.com/coins/images/4713/large/matic-token-icon.png"},{symbol:"ADA",name:"Cardano",logo:"https://assets.coingecko.com/coins/images/975/large/cardano.png"},{symbol:"LINK",name:"Chainlink",logo:"https://assets.coingecko.com/coins/images/877/large/chainlink-new-logo.png"},{symbol:"ATOM",name:"Cosmos",logo:"https://assets.coingecko.com/coins/images/1481/large/cosmos_hub.png"}];o=e.map((e,t)=>({id:t+1,pair:e.symbol,symbol:e.name,price:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:e.logo,chart:OA(0,!0),sparkline:OA(0,!0,12),realTimePrice:0,lastUpdated:(new Date).toISOString()})),a=zA(e.map(e=>({BTC:"bitcoin",ETH:"ethereum",LTC:"litecoin",DOT:"polkadot",FIL:"filecoin",DOGE:"dogecoin",XRP:"ripple",TRX:"tron",MATIC:"polygon",ADA:"cardano",LINK:"chainlink",ATOM:"cosmos"}[e.symbol]||e.symbol.toLowerCase())),e=>{console.log("\ud83d\udd04 MobileMarket component received WebSocket updates:",e),r(t=>t.map(t=>{const n={BTC:"bitcoin",ETH:"ethereum",LTC:"litecoin",DOT:"polkadot",FIL:"filecoin",DOGE:"dogecoin",XRP:"ripple",TRX:"tron",MATIC:"polygon",ADA:"cardano",LINK:"chainlink",ATOM:"cosmos"}[t.pair]||t.pair.toLowerCase(),r=e[n];return console.log("\ud83d\udd0d MobileMarket checking ".concat(t.pair," -> ").concat(n,":"),r?"FOUND":"NOT FOUND"),r?(console.log("\ud83d\udcb0 MobileMarket updating ".concat(t.pair," with price: $").concat(r.price," (").concat(r.change24h,"%)")),b(e=>(0,tt.A)((0,tt.A)({},e),{},{[t.pair]:r.isPositive?"increase":"decrease"})),setTimeout(()=>{b(e=>(0,tt.A)((0,tt.A)({},e),{},{[t.pair]:null}))},1e3),(0,tt.A)((0,tt.A)({},t),{},{price:BA(r.price,2),change:VA(r.change24h),isPositive:r.isPositive,sparkline:r.sparkline,realTimePrice:r.price,lastUpdated:(new Date).toISOString()})):t}))})}else if("Stocks"===e){const e=await LA(["AAPL","TSLA","AMZN","GOOGL","MSFT","UNH","AI","BRZE","FLNC","SNOW","BB","EVGO","MQ"]),t=[{symbol:"AAPL",name:"Apple Inc.",logo:"https://logo.clearbit.com/apple.com"},{symbol:"TSLA",name:"Tesla Inc.",logo:"https://logo.clearbit.com/tesla.com"},{symbol:"AMZN",name:"Amazon.com Inc.",logo:"https://logo.clearbit.com/amazon.com"},{symbol:"GOOGL",name:"Alphabet Inc.",logo:"https://logo.clearbit.com/google.com"},{symbol:"MSFT",name:"Microsoft Corporation",logo:"https://logo.clearbit.com/microsoft.com"},{symbol:"UNH",name:"UnitedHealth Group",logo:"https://logo.clearbit.com/unitedhealthgroup.com"},{symbol:"AI",name:"C3.ai Inc.",logo:"https://logo.clearbit.com/c3.ai"},{symbol:"BRZE",name:"Braze Inc.",logo:"https://logo.clearbit.com/braze.com"},{symbol:"FLNC",name:"Fluence Energy",logo:"https://logo.clearbit.com/fluenceenergy.com"},{symbol:"SNOW",name:"Snowflake Inc.",logo:"https://logo.clearbit.com/snowflake.com"},{symbol:"BB",name:"BlackBerry Limited",logo:"https://logo.clearbit.com/blackberry.com"},{symbol:"EVGO",name:"EVgo Inc.",logo:"https://logo.clearbit.com/evgo.com"},{symbol:"MQ",name:"Marqeta Inc.",logo:"https://logo.clearbit.com/marqeta.com"}];o=t.map((t,n)=>{const r=e[t.symbol]||{},s=r.price||500*Math.random()+50,i=r.changePercent||5*(Math.random()-.5),o=i>=0;return{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),change:VA(i),isPositive:o,flags:["US","US"],logo:t.logo,chart:OA(s,o),sparkline:OA(s,o,12),realTimePrice:s,lastUpdated:(new Date).toISOString()}}),a=((e,t)=>{let n,r={};const s=async()=>{try{const n=await LA(e),s={};e.forEach(e=>{const t=n[e];if(t){const n=r[e]||t.price,i=(t.price-n)/n*100;s[e]={symbol:e,price:t.price,change24h:t.changePercent,change:i,timestamp:Date.now(),isPositive:i>=0,sparkline:RA(t.price,i>=0)},r[e]=t.price}}),t(s)}catch(p){console.error("Error in Stock WebSocket simulation:",p)}};return n=setInterval(s,5e3),s(),{close:()=>{n&&clearInterval(n)}}})(t.map(e=>e.symbol),e=>{r(t=>t.map(t=>{const n=e[t.pair];return n?(b(e=>(0,tt.A)((0,tt.A)({},e),{},{[t.pair]:n.isPositive?"increase":"decrease"})),setTimeout(()=>{b(e=>(0,tt.A)((0,tt.A)({},e),{},{[t.pair]:null}))},1e3),(0,tt.A)((0,tt.A)({},t),{},{price:BA(n.price,2),change:VA(n.change),isPositive:n.isPositive,sparkline:n.sparkline,realTimePrice:n.price,lastUpdated:(new Date).toISOString()})):t}))})}else if("ETF"===e){const e=await FA(["SPY","QQQ","GLD","VTI","IWM","EFA","VEA","EEM","XLF","XLK","XLE","XLV"]),t=[{symbol:"SPY",name:"SPDR S&P 500 ETF",logo:"https://logo.clearbit.com/spdrs.com"},{symbol:"QQQ",name:"Invesco QQQ Trust",logo:"https://logo.clearbit.com/invesco.com"},{symbol:"IWM",name:"iShares Russell 2000 ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"EFA",name:"iShares MSCI EAFE ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"VTI",name:"Vanguard Total Stock Market ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"VEA",name:"Vanguard FTSE Developed Markets ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"VWO",name:"Vanguard FTSE Emerging Markets ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"AGG",name:"iShares Core U.S. Aggregate Bond ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"TLT",name:"iShares 20+ Year Treasury Bond ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"GLD",name:"SPDR Gold Shares",logo:"https://logo.clearbit.com/spdrs.com"}];o=t.map((t,n)=>{const r=e[t.symbol]||{},s=r.price||200*Math.random()+50,i=r.changePercent||3*(Math.random()-.5),o=i>=0;return{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),change:VA(i),isPositive:o,flags:["US","US"],logo:t.logo,chart:OA(s,o),sparkline:OA(s,o,12),realTimePrice:s,lastUpdated:(new Date).toISOString()}}),a=((e,t)=>{let n,r={};const s=async()=>{try{const n=await FA(e),s={};e.forEach(e=>{const t=n[e];if(t){const n=r[e]||t.price,i=(t.price-n)/n*100;s[e]={symbol:e,price:t.price,change24h:t.changePercent,change:i,timestamp:Date.now(),isPositive:i>=0,sparkline:RA(t.price,i>=0)},r[e]=t.price}}),t(s)}catch(p){console.error("Error in ETF WebSocket simulation:",p)}};return n=setInterval(s,4e3),s(),{close:()=>{n&&clearInterval(n)}}})(t.map(e=>e.symbol),e=>{r(t=>t.map(t=>{const n=e[t.pair];return n?(b(e=>(0,tt.A)((0,tt.A)({},e),{},{[t.pair]:n.isPositive?"increase":"decrease"})),setTimeout(()=>{b(e=>(0,tt.A)((0,tt.A)({},e),{},{[t.pair]:null}))},1e3),(0,tt.A)((0,tt.A)({},t),{},{price:BA(n.price,2),change:VA(n.change),isPositive:n.isPositive,sparkline:n.sparkline,realTimePrice:n.price,lastUpdated:(new Date).toISOString()})):t}))})}else if("Futures"===e){const e=await UA(["ES","GC","CL","NQ","YM","RTY","NG","ZB","ZN","ZF"]),t=[{symbol:"ES",name:"E-mini S&P 500",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"NQ",name:"E-mini NASDAQ-100",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"YM",name:"E-mini Dow Jones",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"RTY",name:"E-mini Russell 2000",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"GC",name:"Gold Futures",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"CL",name:"Crude Oil Futures",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"NG",name:"Natural Gas Futures",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"ZB",name:"30-Year Treasury Bond",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"ZN",name:"10-Year Treasury Note",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"ZF",name:"5-Year Treasury Note",logo:"https://logo.clearbit.com/cmegroup.com"}];o=t.map((t,n)=>{const r=e[t.symbol]||{},s=r.price||5e3*Math.random()+1e3,i=r.changePercent||2*(Math.random()-.5),o=i>=0;return{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),change:VA(i),isPositive:o,flags:["US","US"],logo:t.logo,chart:OA(s,o),sparkline:OA(s,o,12),realTimePrice:s,lastUpdated:(new Date).toISOString()}}),a=((e,t)=>{let n,r={};const s=async()=>{try{const n=await UA(e),s={};e.forEach(e=>{const t=n[e];if(t){const n=r[e]||t.price,i=(t.price-n)/n*100;s[e]={symbol:e,price:t.price,change24h:t.changePercent,change:i,timestamp:Date.now(),isPositive:i>=0,sparkline:RA(t.price,i>=0)},r[e]=t.price}}),t(s)}catch(p){console.error("Error in Futures WebSocket simulation:",p)}};return n=setInterval(s,3e3),s(),{close:()=>{n&&clearInterval(n)}}})(t.map(e=>e.symbol),e=>{r(t=>t.map(t=>{const n=e[t.pair];return n?(b(e=>(0,tt.A)((0,tt.A)({},e),{},{[t.pair]:n.isPositive?"increase":"decrease"})),setTimeout(()=>{b(e=>(0,tt.A)((0,tt.A)({},e),{},{[t.pair]:null}))},1e3),(0,tt.A)((0,tt.A)({},t),{},{price:BA(n.price,2),change:VA(n.change),isPositive:n.isPositive,sparkline:n.sparkline,realTimePrice:n.price,lastUpdated:(new Date).toISOString()})):t}))})}r(o),v(a)}catch(o){console.error("Error initializing real-time data:",o),g("Failed to load market data"),r(N())}finally{m(!1)}})(),()=>{y&&y.close(),t&&(clearInterval(t),console.log("\ud83e\uddf9 [Mobile] Cleared Forex polling interval")),n&&(clearInterval(n),console.log("\ud83e\uddf9 [Mobile] Cleared Stocks polling interval")),s&&(clearInterval(s),console.log("\ud83e\uddf9 [Mobile] Cleared ETF polling interval")),i&&(clearInterval(i),console.log("\ud83e\uddf9 [Mobile] Cleared Futures polling interval"))}},[e]);const N=()=>[{id:1,pair:"USD/HKD",symbol:"USDHKD",price:"7.7712",change:"-0.04%",isPositive:!1,flags:["US","HK"],flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/hk.png"]},{id:2,pair:"USD/SGD",symbol:"USDSGD",price:"1.2940",change:"-0.16%",isPositive:!1,flags:["US","SG"],flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/sg.png"]},{id:3,pair:"GBP/USD",symbol:"Us Dollar",price:"1.3430",change:"0.27%",isPositive:!0,flags:["GB","US"],flagUrls:["https://flagcdn.com/32x24/gb.png","https://flagcdn.com/32x24/us.png"]},{id:4,pair:"USD/CNH",symbol:"USD/CNH",price:"7.1264",change:"-0.07%",isPositive:!1,flags:["US","CN"],flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/cn.png"]},{id:5,pair:"USD/JPY",symbol:"USD/JPY",price:"150.7964",change:"-0.67%",isPositive:!1,flags:["US","JP"],flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/jp.png"]},{id:6,pair:"EUR/USD",symbol:"EUR/USD",price:"1.1672",change:"0.24%",isPositive:!0,flags:["EU","US"],flagUrls:["https://flagcdn.com/32x24/eu.png","https://flagcdn.com/32x24/us.png"]},{id:7,pair:"USD/CHF",symbol:"USD/CHF",price:"0.7959",change:"-0.11%",isPositive:!1,flags:["US","CH"],flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/ch.png"]}];return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white text-gray-900",children:[(0,Pe.jsxs)("header",{className:"flex items-center justify-between px-2 py-2 bg-white border-b border-gray-200",children:[(0,Pe.jsxs)(Ce,{to:"/",className:"flex items-center space-x-2",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-gray-900 text-xl font-semibold",children:"Market"})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors cursor-pointer",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Pe.jsx)(Ce,{to:"/notifications",className:"flex items-center justify-center",children:(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})})]})]}),(0,Pe.jsxs)("main",{className:"px-1 pb-16",children:[(0,Pe.jsx)("div",{className:"mt-2 mb-2",children:(0,Pe.jsx)("div",{className:"bg-gray-800 rounded-lg px-1 py-1 flex items-center justify-between",children:["Forex","Crypto","Stocks","ETF","Futures"].map(n=>(0,Pe.jsx)("button",{onClick:()=>t(n),className:"px-2 py-1 rounded-md text-xs font-medium transition-all ".concat(e===n?"bg-white text-gray-900":"text-gray-300 hover:text-gray-200"),children:n},n))})}),(0,Pe.jsx)("div",{className:"grid grid-cols-3 gap-1 mb-2",children:(Array.isArray("Forex"===e?i:"Stocks"===e?a:"ETF"===e?l:"Futures"===e?h:n)?("Forex"===e?i:"Stocks"===e?a:"ETF"===e?l:"Futures"===e?h:n).slice(0,3):[]).map(t=>{var n;return(0,Pe.jsx)("div",{className:"bg-gray-100 rounded-md p-3 border border-gray-200 hover:bg-gray-200 transition-colors h-28",children:(0,Pe.jsxs)("div",{className:"flex flex-col gap-2 h-full",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Pe.jsx)("div",{className:"flex-shrink-0",children:"Crypto"===e&&t.logo||"Stocks"===e&&t.logo?(0,Pe.jsx)("img",{src:t.logo,alt:"".concat(t.pair," logo"),className:"w-5 h-5 rounded-full",onError:e=>{e.target.style.display="none"}}):"ETF"===e&&t.logo?(0,Pe.jsx)("img",{src:t.logo||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSI0IiB5PSI0IiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMiAxMiIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik02IDFDMy4yNCAxIDEgMy4yNCAxIDZTMy4yNCAxMSA2IDExUzExIDguNzYgMTEgNlM4Ljc2IDEgNiAxWiIgZmlsbD0iIzlDQTNBRiIvPgo8c3ZnIHg9IjIiIHk9IjIiIHdpZHRoPSI4IiBoZWlnaHQ9IjgiIHZpZXdCb3g9IjAgMCA4IDgiIGZpbGw9Im5vbmUiPgo8cGF0aCBkPSJNNCAyTDYgNEw0IDZMMiA0WiIgZmlsbD0iIzYzNjZGMTIiLz4KPC9zdmc+Cjwvc3ZnPgo8L3N2Zz4K",alt:"".concat(t.pair," logo"),className:"w-5 h-5 rounded-full",onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTAiIGN5PSIxMCIgcj0iMTAiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSI0IiB5PSI0IiB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIHZpZXdCb3g9IjAgMCAxMiAxMiIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik02IDFDMy4yNCAxIDEgMy4yNCAxIDZTMy4yNCAxMSA2IDExUzExIDguNzYgMTEgNlM4Ljc2IDEgNiAxWiIgZmlsbD0iIzlDQTNBRiIvPgo8c3ZnIHg9IjIiIHk9IjIiIHdpZHRoPSI4IiBoZWlnaHQ9IjgiIHZpZXdCb3g9IjAgMCA4IDgiIGZpbGw9Im5vbmUiPgo8cGF0aCBkPSJNNCAyTDYgNEw0IDZMMiA0WiIgZmlsbD0iIzYzNjZGMTIiLz4KPC9zdmc+Cjwvc3ZnPgo8L3N2Zz4K"}}):"Forex"===e&&t.flagUrls?(0,Pe.jsx)("div",{className:"flex -space-x-1",children:t.flagUrls.map((e,n)=>(0,Pe.jsx)("img",{src:e,alt:"".concat(t.flags[n]," flag"),className:"w-5 h-5 rounded-full",onError:e=>{e.target.style.display="none"}},n))}):(0,Pe.jsx)("div",{className:"flex -space-x-1",children:t.flags&&t.flags.length>=2?(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(TA,{countryCode:t.flags[0]}),(0,Pe.jsx)(TA,{countryCode:t.flags[1]})]}):null===(n=t.flags)||void 0===n?void 0:n.map((e,t)=>(0,Pe.jsx)("span",{className:"text-lg",children:e},t))})}),(0,Pe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Pe.jsx)("h3",{className:"text-gray-900 font-bold text-xs truncate",children:t.pair}),(0,Pe.jsx)("p",{className:"text-gray-600 text-xs truncate",children:t.symbol})]})]}),(0,Pe.jsxs)("div",{className:"flex items-center justify-between flex-1",children:[(0,Pe.jsxs)("div",{className:"flex flex-col",children:[(0,Pe.jsx)("p",{className:"text-gray-900 font-bold text-sm transition-colors duration-1000 ".concat("increase"===w[t.pair]?"bg-green-100":"decrease"===w[t.pair]?"bg-red-100":""),children:t.price}),(0,Pe.jsx)("p",{className:"text-xs font-semibold ".concat(t.isPositive?"text-green-600":"text-red-600"),children:t.change})]}),(0,Pe.jsx)("div",{className:"flex items-center",children:(0,Pe.jsx)(HA,{data:t.sparkline,isPositive:t.isPositive,width:50,height:16})})]})]})},t.id)})}),(0,Pe.jsxs)("div",{className:"space-y-1",children:[(0,Pe.jsxs)("div",{className:"grid grid-cols-4 gap-2 px-2 py-1",children:[(0,Pe.jsx)("div",{className:"text-gray-600 text-xs font-medium",children:"Name"}),(0,Pe.jsx)("div",{className:"text-gray-600 text-xs font-medium",children:"24h%"}),(0,Pe.jsx)("div",{className:"text-gray-600 text-xs font-medium",children:"Chart"}),(0,Pe.jsx)("div",{className:"text-gray-600 text-xs font-medium",children:"Price"})]}),(Array.isArray("Forex"===e?i:"Stocks"===e?a:"ETF"===e?l:"Futures"===e?h:n)?"Forex"===e?i:"Stocks"===e?a:"ETF"===e?l:"Futures"===e?h:n:[]).map(t=>{var n;return(0,Pe.jsx)("div",{className:"bg-white rounded-md border border-gray-200 p-1.5 hover:bg-gray-50 transition-colors",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-4 gap-2 items-center",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Pe.jsx)("div",{className:"flex -space-x-1",children:"Crypto"===e&&t.logo||"Stocks"===e&&t.logo?(0,Pe.jsx)("img",{src:t.logo,alt:"".concat(t.pair," logo"),className:"w-6 h-6 rounded-full",onError:e=>{e.target.style.display="none"}}):"Forex"===e?(0,Pe.jsx)("div",{className:"flex -space-x-1"}):(0,Pe.jsx)("div",{className:"flex -space-x-1",children:t.flags&&t.flags.length>=2?(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(TA,{countryCode:t.flags[0]}),(0,Pe.jsx)(TA,{countryCode:t.flags[1]})]}):null===(n=t.flags)||void 0===n?void 0:n.map((e,t)=>(0,Pe.jsx)("span",{className:"text-sm",children:e},t))})}),(0,Pe.jsx)("span",{className:"text-gray-900 font-medium text-xs",children:t.pair})]}),(0,Pe.jsx)("div",{className:"text-xs font-medium ".concat(t.isPositive?"text-green-600":"text-red-600"),children:t.change}),(0,Pe.jsx)("div",{className:"flex items-center",children:(0,Pe.jsx)(HA,{data:t.sparkline,isPositive:t.isPositive,width:60,height:20})}),(0,Pe.jsx)("div",{className:"text-gray-900 font-medium text-xs transition-colors duration-1000 ".concat("increase"===w[t.pair]?"bg-green-100":"decrease"===w[t.pair]?"bg-red-100":""),children:t.price})]})},t.id)})]})]}),(0,Pe.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200",children:(0,Pe.jsxs)("div",{className:"bg-gray-800 mx-1 mb-1 rounded-lg shadow-2xl px-2 py-1.5 flex items-center justify-between",children:[(0,Pe.jsxs)(Ce,{to:"/",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Home"})]}),(0,Pe.jsxs)(Ce,{to:"/market",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,Pe.jsx)("span",{className:"text-xs text-white",children:"Market"})]}),(0,Pe.jsxs)(Ce,{to:"/smart-trading",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Smart"})]}),(0,Pe.jsxs)(Ce,{to:"/loan",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Loan"})]}),(0,Pe.jsxs)(Ce,{to:"/account",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Account"})]})]})})]})}const WA=e=>{let{isOpen:t,onClose:n,symbol:r,availableBalance:i=0}=e;const{createTrade:o}=nA(),[a,c]=(0,s.useState)(""),[l,u]=(0,s.useState)("1 Day"),[h,d]=(0,s.useState)(!1),[f,m]=(0,s.useState)(""),[p,g]=(0,s.useState)(0),[y,v]=(0,s.useState)(!1),w=e=>{const t=parseFloat(e)||0;return t>=1e3&&t<=9999?{timeframeOptions:["1 Day","7 Days","15 Days"]}:t>=1e4&&t<=49999?{timeframeOptions:["7 Days","15 Days","30 Days"]}:t>=5e4&&t<=199999?{timeframeOptions:["15 Days","30 Days","60 Days"]}:{timeframeOptions:["1 Day","7 Days","15 Days","30 Days","60 Days"]}},b=w(a),x=(e=>{const t=parseInt(e.split(" ")[0]);return 1===t?"1000-9999 USD":7===t?"10000-49999 USD":15===t?"50000-199999 USD":30===t?"100000-499999 USD":60===t?"500000-999999 USD":"1000-999999 USD"})(l),S=(e=>{const t=parseInt(e.split(" ")[0]);return 1===t?"1.50%-1.80%":7===t?"1.80%-2.10%":15===t?"2.10%-2.50%":30===t?"2.50%-2.80%":60===t?"2.80%-3.00%":"1.50%-3.00%"})(l);return t?(0,Pe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Pe.jsxs)(XE.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2},className:"bg-white rounded-lg p-4 sm:p-6 lg:p-8 w-full max-w-sm sm:max-w-md mx-auto max-h-[90vh] overflow-y-auto shadow-xl",children:[(0,Pe.jsxs)("div",{className:"flex justify-between items-center mb-4 sm:mb-6",children:[(0,Pe.jsx)("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900",children:"Create a plan"}),(0,Pe.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Pe.jsxs)("div",{className:"space-y-3 sm:space-y-4",children:[(0,Pe.jsxs)("div",{className:"bg-gray-100 rounded-lg px-3 sm:px-4 py-2 sm:py-3 flex justify-between items-center",children:[(0,Pe.jsx)("label",{className:"text-xs sm:text-sm font-normal text-gray-900",children:"Amount Limit:"}),(0,Pe.jsx)("div",{className:"text-xs sm:text-sm text-gray-500",children:x})]}),(0,Pe.jsxs)("div",{className:"bg-gray-100 rounded-lg px-3 sm:px-4 py-2 sm:py-3 flex justify-between items-center",children:[(0,Pe.jsx)("label",{className:"text-xs sm:text-sm font-normal text-gray-900",children:"Daily yield:"}),(0,Pe.jsx)("div",{className:"text-xs sm:text-sm text-gray-500",children:S})]}),(0,Pe.jsxs)("div",{className:"bg-gray-100 rounded-lg px-3 sm:px-4 py-2 sm:py-3 flex justify-between items-center",children:[(0,Pe.jsx)("label",{className:"text-xs sm:text-sm font-normal text-gray-900",children:"Product:"}),(0,Pe.jsx)("div",{className:"text-xs sm:text-sm text-gray-500",children:r||"Apple Tokenize"})]}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsxs)("button",{onClick:()=>d(!h),className:"w-full bg-gray-100 rounded-lg px-3 sm:px-4 py-2 sm:py-3 flex justify-between items-center hover:bg-gray-200 transition-colors",children:[(0,Pe.jsx)("label",{className:"text-xs sm:text-sm font-normal text-gray-900",children:"Timeframe:"}),(0,Pe.jsxs)("div",{className:"flex items-center",children:[(0,Pe.jsx)("span",{className:"text-xs sm:text-sm text-gray-900 mr-2",children:l}),(0,Pe.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 transition-transform ".concat(h?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})]}),h&&(0,Pe.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white border border-gray-200 rounded-lg shadow-lg mt-1 z-10",children:b.timeframeOptions.map(e=>(0,Pe.jsx)("button",{onClick:()=>{u(e),m(""),d(!1)},className:"w-full text-left px-3 sm:px-4 py-2 sm:py-3 hover:bg-gray-50 transition-colors first:rounded-t-lg last:rounded-b-lg text-xs sm:text-sm",children:e},e))})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-xs sm:text-sm font-normal text-gray-900 mb-1 sm:mb-2",children:"Amount:"}),(0,Pe.jsx)("input",{type:"number",value:a,onChange:e=>(e=>{c(e),m("");const t=parseFloat(e)||0,n=w(t);n.timeframeOptions.includes(l)||u(n.timeframeOptions[0])})(e.target.value),onFocus:()=>{v(!0)},onBlur:()=>{v(!1),""!==a&&null!==a&&void 0!==a||c("")},className:"w-full bg-gray-800 text-white px-3 sm:px-4 py-2 sm:py-3 rounded-lg border-none outline-none no-spinner text-right text-sm sm:text-base",placeholder:"0"})]}),f&&(0,Pe.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2 sm:p-3",children:(0,Pe.jsxs)("div",{className:"flex items-center",children:[(0,Pe.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-red-500 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,Pe.jsx)("span",{className:"text-red-700 text-xs sm:text-sm font-medium",children:f})]})})]}),(0,Pe.jsx)("div",{className:"mt-6 sm:mt-8",children:(0,Pe.jsx)("button",{onClick:async()=>{if((()=>{const e=Date.now(),t=parseFloat(a)||0;return t>i?(m("Insufficient balance in user account"),!1):e-p<5e3?(m("Operation too frequent"),!1):t<1e3?(m("Minimum amount is 1000 USD"),!1):!(t>199999)||(m("Maximum amount is 199999 USD"),!1)})()){g(Date.now());try{const e={symbol:r,amount:parseFloat(a)||0,timeframe:l,direction:"Up",openPrice:1e5*Math.random()+5e4,closePrice:null,profit:0,type:"Smart Trading",startTime:(new Date).toISOString(),endTime:new Date(Date.now()+24*parseInt(l.split(" ")[0])*60*60*1e3).toISOString()};await o(e),console.log("Trade created successfully:",e),n()}catch(f){console.error("Error creating trade:",f),"INSUFFICIENT_FUNDS"===f.message||"RATE_LIMIT_EXCEEDED"===f.message?n():m("Failed to create trading plan. Please try again.")}}},className:"w-full bg-gray-800 text-white py-2 sm:py-3 px-4 sm:px-6 rounded-lg font-semibold hover:bg-gray-700 transition-colors text-sm sm:text-base",children:"Create"})})]})}):null};function QA(){const[e,t]=(0,s.useState)("Forex"),[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)([]),[a,c]=(0,s.useState)([]),[l,u]=(0,s.useState)([]),[h,d]=(0,s.useState)([]),[f,m]=(0,s.useState)(!0),[p,g]=(0,s.useState)(null),[y,v]=(0,s.useState)(null),[w,b]=(0,s.useState)({}),[x,S]=(0,s.useState)(!1),[E,A]=(0,s.useState)(""),{user:N}=nA(),T=async()=>{try{var e,t,n,r,s,i,a,c,l;console.log("\ud83d\udd04 [Smart Trading] Fetching Forex data...");const u=await MA(),h=[{pair:"USD/CHF",country:"Switzerland",flags:["US","CH"],rate:(null===(e=u.rates)||void 0===e?void 0:e.CHF)||.8963,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/ch.png"]},{pair:"USD/JPY",country:"Japan",flags:["US","JP"],rate:(null===(t=u.rates)||void 0===t?void 0:t.JPY)||152,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/jp.png"]},{pair:"USD/EUR",country:"Eurozone",flags:["US","EU"],rate:(null===(n=u.rates)||void 0===n?void 0:n.EUR)||.92,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/eu.png"]},{pair:"USD/GBP",country:"United Kingdom",flags:["US","GB"],rate:(null===(r=u.rates)||void 0===r?void 0:r.GBP)||.79,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/gb.png"]},{pair:"USD/CAD",country:"Canada",flags:["US","CA"],rate:(null===(s=u.rates)||void 0===s?void 0:s.CAD)||1.36,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/ca.png"]},{pair:"USD/AUD",country:"Australia",flags:["US","AU"],rate:(null===(i=u.rates)||void 0===i?void 0:i.AUD)||1.52,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/au.png"]},{pair:"USD/HKD",country:"Hong Kong",flags:["US","HK"],rate:(null===(a=u.rates)||void 0===a?void 0:a.HKD)||7.8,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/hk.png"]},{pair:"USD/SGD",country:"Singapore",flags:["US","SG"],rate:(null===(c=u.rates)||void 0===c?void 0:c.SGD)||1.35,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/sg.png"]},{pair:"USD/CNY",country:"China",flags:["US","CN"],rate:(null===(l=u.rates)||void 0===l?void 0:l.CNY)||7.2,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/cn.png"]}].map((e,t)=>{const n=Math.random()>.5,r=2*(Math.random()-.5),s=OA(e.rate,n,12);return{id:t+1,pair:e.pair,symbol:e.country,price:BA(e.rate,e.pair.includes("JPY")?2:4),value:BA(e.rate,e.pair.includes("JPY")?2:4),change:VA(r),changeValue:r,isPositive:n,flags:e.flags,flagUrls:e.flagUrls,sparkline:s,realTimePrice:e.rate,lastUpdated:(new Date).toISOString()}});o(h),console.log("\u2705 [Smart Trading] Forex data updated:",h.length,"pairs")}catch(p){console.error("\u274c [Smart Trading] Error fetching Forex data:",p)}},k=async()=>{try{console.log("\ud83d\udd04 [Smart Trading] Fetching Stocks data...");const e=await LA(["AAPL","TSLA","AMZN","GOOGL","MSFT","META","NVDA","NFLX","AMD","INTC","CRM","ADBE","PYPL"]),t=[{symbol:"AAPL",name:"Apple Inc.",logo:"https://logo.clearbit.com/apple.com"},{symbol:"TSLA",name:"Tesla Inc.",logo:"https://logo.clearbit.com/tesla.com"},{symbol:"AMZN",name:"Amazon.com Inc.",logo:"https://logo.clearbit.com/amazon.com"},{symbol:"GOOGL",name:"Alphabet Inc.",logo:"https://logo.clearbit.com/google.com"},{symbol:"MSFT",name:"Microsoft Corporation",logo:"https://logo.clearbit.com/microsoft.com"},{symbol:"META",name:"Meta Platforms Inc.",logo:"https://logo.clearbit.com/meta.com"},{symbol:"NVDA",name:"NVIDIA Corporation",logo:"https://logo.clearbit.com/nvidia.com"},{symbol:"NFLX",name:"Netflix Inc.",logo:"https://logo.clearbit.com/netflix.com"},{symbol:"AMD",name:"Advanced Micro Devices",logo:"https://logo.clearbit.com/amd.com"},{symbol:"INTC",name:"Intel Corporation",logo:"https://logo.clearbit.com/intel.com"},{symbol:"CRM",name:"Salesforce Inc.",logo:"https://logo.clearbit.com/salesforce.com"},{symbol:"ADBE",name:"Adobe Inc.",logo:"https://logo.clearbit.com/adobe.com"},{symbol:"PYPL",name:"PayPal Holdings Inc.",logo:"https://logo.clearbit.com/paypal.com"}].map((t,n)=>{const r=e[t.symbol]||{},s=r.price||500*Math.random()+50,i=r.change||5*(Math.random()-.5),o=i>=0,a=r.logoUrl||t.logo,c=OA(s,o,12);return{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),value:BA(s,2),change:VA(i),changeValue:i,isPositive:o,flags:["US","US"],logo:a,sparkline:c,realTimePrice:s,lastUpdated:(new Date).toISOString()}});c(t),console.log("\u2705 [Smart Trading] Stocks data updated:",t.length,"stocks")}catch(p){console.error("\u274c [Smart Trading] Error fetching Stocks data:",p)}},C=async()=>{try{console.log("\ud83d\udd04 [Smart Trading] Fetching ETF data...");const e=await FA(["SPY","QQQ","IWM","VTI","VEA","VWO","AGG","BND","GLD","SLV","USO","UNG"]),t=[{symbol:"SPY",name:"SPDR S&P 500 ETF Trust",logo:"https://logo.clearbit.com/ssga.com"},{symbol:"QQQ",name:"Invesco QQQ Trust",logo:"https://logo.clearbit.com/invesco.com"},{symbol:"IWM",name:"iShares Russell 2000 ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"VTI",name:"Vanguard Total Stock Market ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"VEA",name:"Vanguard FTSE Developed Markets ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"VWO",name:"Vanguard FTSE Emerging Markets ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"AGG",name:"iShares Core U.S. Aggregate Bond ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"BND",name:"Vanguard Total Bond Market ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"GLD",name:"SPDR Gold Trust",logo:"https://logo.clearbit.com/ssga.com"},{symbol:"SLV",name:"iShares Silver Trust",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"USO",name:"United States Oil Fund",logo:"https://logo.clearbit.com/uscfinvestments.com"},{symbol:"UNG",name:"United States Natural Gas Fund",logo:"https://logo.clearbit.com/uscfinvestments.com"}].map((t,n)=>{const r=e[t.symbol]||{},s=r.price||200*Math.random()+50,i=r.change||5*(Math.random()-.5),o=i>=0,a=r.logoUrl||t.logo,c=OA(s,o,12);return{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),value:BA(s,2),change:VA(i),changeValue:i,isPositive:o,flags:["US","US"],logo:a,sparkline:c,realTimePrice:s,lastUpdated:(new Date).toISOString()}});u(t),console.log("\u2705 [Smart Trading] ETF data updated:",t.length,"ETFs")}catch(p){console.error("\u274c [Smart Trading] Error fetching ETF data:",p)}},I=async()=>{try{console.log("\ud83d\udd04 [Smart Trading] Fetching Futures data...");const e=await UA(["ES","NQ","YM","RTY","GC","SI","CL","NG","ZB","ZN","ZF","ZT"]),t=[{symbol:"ES",name:"E-mini S&P 500",logo:"https://logo.clearbit.com/cme.com"},{symbol:"NQ",name:"E-mini NASDAQ-100",logo:"https://logo.clearbit.com/cme.com"},{symbol:"YM",name:"E-mini Dow Jones",logo:"https://logo.clearbit.com/cme.com"},{symbol:"RTY",name:"E-mini Russell 2000",logo:"https://logo.clearbit.com/cme.com"},{symbol:"GC",name:"Gold Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"SI",name:"Silver Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"CL",name:"Crude Oil Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"NG",name:"Natural Gas Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZB",name:"30-Year Treasury Bond",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZN",name:"10-Year Treasury Note",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZF",name:"5-Year Treasury Note",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZT",name:"2-Year Treasury Note",logo:"https://logo.clearbit.com/cme.com"}].map((t,n)=>{const r=e[t.symbol]||{},s=r.price||5e3*Math.random()+1e3,i=r.change||3*(Math.random()-.5),o=i>=0,a=r.logoUrl||t.logo,c=OA(s,o,12);return{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),value:BA(s,2),change:VA(i),changeValue:i,isPositive:o,flags:["US","US"],logo:a,sparkline:c,realTimePrice:s,lastUpdated:(new Date).toISOString()}});d(t),console.log("\u2705 [Smart Trading] Futures data updated:",t.length,"Futures")}catch(p){console.error("\u274c [Smart Trading] Error fetching Futures data:",p)}};(0,s.useEffect)(()=>{const t=async()=>{m(!0),g(null);try{let h=[];if("Forex"===e){var t,n,s,i,o,a,c,l,u;let e;try{e=await MA()}catch(p){console.warn("Failed to fetch real-time Forex data, using fallback:",p),e={rates:{CHF:.8963,JPY:152,EUR:.92,GBP:.79,CAD:1.36,AUD:1.52,HKD:7.8,SGD:1.35,CNY:7.2},last_updated:(new Date).toISOString()}}h=[{pair:"USD/CHF",country:"Switzerland",flags:["US","CH"],rate:(null===(t=e.rates)||void 0===t?void 0:t.CHF)||.8963,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/ch.png"]},{pair:"USD/JPY",country:"Japan",flags:["US","JP"],rate:(null===(n=e.rates)||void 0===n?void 0:n.JPY)||152,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/jp.png"]},{pair:"USD/EUR",country:"Eurozone",flags:["US","EU"],rate:(null===(s=e.rates)||void 0===s?void 0:s.EUR)||.92,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/eu.png"]},{pair:"USD/GBP",country:"United Kingdom",flags:["US","GB"],rate:(null===(i=e.rates)||void 0===i?void 0:i.GBP)||.79,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/gb.png"]},{pair:"USD/CAD",country:"Canada",flags:["US","CA"],rate:(null===(o=e.rates)||void 0===o?void 0:o.CAD)||1.36,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/ca.png"]},{pair:"USD/AUD",country:"Australia",flags:["US","AU"],rate:(null===(a=e.rates)||void 0===a?void 0:a.AUD)||1.52,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/au.png"]},{pair:"USD/HKD",country:"Hong Kong",flags:["US","HK"],rate:(null===(c=e.rates)||void 0===c?void 0:c.HKD)||7.8,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/hk.png"]},{pair:"USD/SGD",country:"Singapore",flags:["US","SG"],rate:(null===(l=e.rates)||void 0===l?void 0:l.SGD)||1.35,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/sg.png"]},{pair:"USD/CNY",country:"China",flags:["US","CN"],rate:(null===(u=e.rates)||void 0===u?void 0:u.CNY)||7.2,flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/cn.png"]}].map((t,n)=>{const r=Math.random()>.5,s=.002*(Math.random()-.5)*100;return{id:n+1,pair:t.pair,symbol:t.pair,price:BA(t.rate,t.pair.includes("JPY")?2:4),change:VA(s),isPositive:s>=0,flags:t.flags,flagUrls:t.flagUrls,chart:OA(t.rate,r),realTimePrice:t.rate,lastUpdated:e.last_updated||(new Date).toISOString()}})}else if("Crypto"===e){let e;try{e=await DA(["bitcoin","ethereum","litecoin","polkadot","filecoin","dogecoin","ripple","tron","polygon","cardano","chainlink","cosmos"])}catch(p){console.warn("Failed to fetch real-time crypto data, using fallback:",p),e={}}h=[{symbol:"BTC",name:"Bitcoin",logo:"https://assets.coingecko.com/coins/images/1/large/bitcoin.png"},{symbol:"ETH",name:"Ethereum",logo:"https://assets.coingecko.com/coins/images/279/large/ethereum.png"},{symbol:"LTC",name:"Litecoin",logo:"https://assets.coingecko.com/coins/images/2/large/litecoin.png"},{symbol:"DOT",name:"Polkadot",logo:"https://assets.coingecko.com/coins/images/12171/large/polkadot.png"},{symbol:"FIL",name:"Filecoin",logo:"https://assets.coingecko.com/coins/images/12817/large/filecoin.png"},{symbol:"DOGE",name:"Dogecoin",logo:"https://assets.coingecko.com/coins/images/5/large/dogecoin.png"},{symbol:"XRP",name:"Ripple",logo:"https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png"},{symbol:"TRX",name:"TRON",logo:"https://assets.coingecko.com/coins/images/1094/large/tron-logo.png"},{symbol:"MATIC",name:"Polygon",logo:"https://assets.coingecko.com/coins/images/4713/large/matic-token-icon.png"},{symbol:"ADA",name:"Cardano",logo:"https://assets.coingecko.com/coins/images/975/large/cardano.png"},{symbol:"LINK",name:"Chainlink",logo:"https://assets.coingecko.com/coins/images/877/large/chainlink-new-logo.png"},{symbol:"ATOM",name:"Cosmos",logo:"https://assets.coingecko.com/coins/images/1481/large/cosmos_hub.png"}].map((t,n)=>{const r=e[t.symbol.toLowerCase()]||{},s=r.price||5e4*Math.random()+1e3,i=r.change24h||10*(Math.random()-.5),o=i>=0;return{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),change:VA(i),isPositive:o,flags:["US","US"],logo:t.logo,chart:OA(s,o),realTimePrice:s,lastUpdated:(new Date).toISOString()}})}else if("Stocks"===e){let e;try{e=await LA(["AAPL","TSLA","AMZN","GOOGL","MSFT","UNH","AI","BRZE","FLNC","SNOW","BB","EVGO","MQ"])}catch(p){console.warn("Failed to fetch real-time stock data, using fallback:",p),e={}}h=[{symbol:"AAPL",name:"Apple Inc.",logo:"https://logo.clearbit.com/apple.com"},{symbol:"TSLA",name:"Tesla Inc.",logo:"https://logo.clearbit.com/tesla.com"},{symbol:"AMZN",name:"Amazon.com Inc.",logo:"https://logo.clearbit.com/amazon.com"},{symbol:"GOOGL",name:"Alphabet Inc.",logo:"https://logo.clearbit.com/google.com"},{symbol:"MSFT",name:"Microsoft Corporation",logo:"https://logo.clearbit.com/microsoft.com"},{symbol:"UNH",name:"UnitedHealth Group",logo:"https://logo.clearbit.com/unitedhealthgroup.com"},{symbol:"AI",name:"C3.ai Inc.",logo:"https://logo.clearbit.com/c3.ai"},{symbol:"BRZE",name:"Braze Inc.",logo:"https://logo.clearbit.com/braze.com"},{symbol:"FLNC",name:"Fluence Energy",logo:"https://logo.clearbit.com/fluenceenergy.com"},{symbol:"SNOW",name:"Snowflake Inc.",logo:"https://logo.clearbit.com/snowflake.com"},{symbol:"BB",name:"BlackBerry Limited",logo:"https://logo.clearbit.com/blackberry.com"},{symbol:"EVGO",name:"EVgo Inc.",logo:"https://logo.clearbit.com/evgo.com"},{symbol:"MQ",name:"Marqeta Inc.",logo:"https://logo.clearbit.com/marqeta.com"}].map((t,n)=>{const r=e[t.symbol]||{},s=r.price||500*Math.random()+50,i=r.changePercent||5*(Math.random()-.5),o=i>=0;return{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),change:VA(i),isPositive:o,flags:["US","US"],logo:t.logo,chart:OA(s,o),realTimePrice:s,lastUpdated:(new Date).toISOString()}})}else if("ETF"===e){h=[{symbol:"SPY",name:"SPDR S&P 500 ETF",logo:"https://logo.clearbit.com/spdrs.com"},{symbol:"QQQ",name:"Invesco QQQ Trust",logo:"https://logo.clearbit.com/invesco.com"},{symbol:"IWM",name:"iShares Russell 2000 ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"EFA",name:"iShares MSCI EAFE ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"VTI",name:"Vanguard Total Stock Market ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"VEA",name:"Vanguard FTSE Developed Markets ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"VWO",name:"Vanguard FTSE Emerging Markets ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"AGG",name:"iShares Core U.S. Aggregate Bond ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"TLT",name:"iShares 20+ Year Treasury Bond ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"GLD",name:"SPDR Gold Shares",logo:"https://logo.clearbit.com/spdrs.com"}].map((e,t)=>{const n=200*Math.random()+50,r=3*(Math.random()-.5),s=r>=0;return{id:t+1,pair:e.symbol,symbol:e.name,price:BA(n,2),change:VA(r),isPositive:s,flags:["US","US"],logo:e.logo,chart:OA(n,s),realTimePrice:n,lastUpdated:(new Date).toISOString()}})}else if("Futures"===e){h=[{symbol:"ES",name:"E-mini S&P 500",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"NQ",name:"E-mini NASDAQ-100",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"YM",name:"E-mini Dow Jones",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"RTY",name:"E-mini Russell 2000",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"GC",name:"Gold Futures",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"CL",name:"Crude Oil Futures",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"NG",name:"Natural Gas Futures",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"ZB",name:"30-Year Treasury Bond",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"ZN",name:"10-Year Treasury Note",logo:"https://logo.clearbit.com/cmegroup.com"},{symbol:"ZF",name:"5-Year Treasury Note",logo:"https://logo.clearbit.com/cmegroup.com"}].map((e,t)=>{const n=5e3*Math.random()+1e3,r=2*(Math.random()-.5),s=r>=0;return{id:t+1,pair:e.symbol,symbol:e.name,price:BA(n,2),change:VA(r),isPositive:s,flags:["US","US"],logo:e.logo,chart:OA(n,s),realTimePrice:n,lastUpdated:(new Date).toISOString()}})}r(h)}catch(h){console.error("Error fetching market data:",h),g("Failed to load market data"),r(_())}finally{m(!1)}};r(_()),t();const n=setInterval(t,3e4);return()=>clearInterval(n)},[e]),(0,s.useEffect)(()=>{let t=null,n=null,s=null,i=null;y&&y.close();return(async()=>{try{if(m(!0),g(null),"Forex"===e)console.log("\ud83d\udd04 [Smart Trading] Initializing Forex tab with dedicated data feed"),await T(),t=setInterval(async()=>{await T()},5e3);else if("Stocks"===e)console.log("\ud83d\udd04 [Smart Trading] Initializing Stocks tab with dedicated data feed"),await k(),n=setInterval(async()=>{await k()},5e3);else if("ETF"===e)console.log("\ud83d\udd04 [Smart Trading] Initializing ETF tab with dedicated data feed"),await C(),s=setInterval(async()=>{await C()},5e3);else if("Futures"===e)console.log("\ud83d\udd04 [Smart Trading] Initializing Futures tab with dedicated data feed"),await I(),i=setInterval(async()=>{await I()},5e3);else if("Crypto"===e){console.log("\ud83d\ude80 [Smart Trading] Initializing Crypto tab with WebSocket-only data");const e=[{symbol:"BTC",name:"Bitcoin",logo:"https://assets.coingecko.com/coins/images/1/large/bitcoin.png"},{symbol:"ETH",name:"Ethereum",logo:"https://assets.coingecko.com/coins/images/279/large/ethereum.png"},{symbol:"LTC",name:"Litecoin",logo:"https://assets.coingecko.com/coins/images/2/large/litecoin.png"},{symbol:"DOT",name:"Polkadot",logo:"https://assets.coingecko.com/coins/images/12171/large/polkadot.png"},{symbol:"FIL",name:"Filecoin",logo:"https://assets.coingecko.com/coins/images/12817/large/filecoin.png"},{symbol:"DOGE",name:"Dogecoin",logo:"https://assets.coingecko.com/coins/images/5/large/dogecoin.png"},{symbol:"XRP",name:"Ripple",logo:"https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png"},{symbol:"TRX",name:"TRON",logo:"https://assets.coingecko.com/coins/images/1094/large/tron-logo.png"},{symbol:"MATIC",name:"Polygon",logo:"https://assets.coingecko.com/coins/images/4713/large/matic-token-icon.png"},{symbol:"ADA",name:"Cardano",logo:"https://assets.coingecko.com/coins/images/975/large/cardano.png"},{symbol:"LINK",name:"Chainlink",logo:"https://assets.coingecko.com/coins/images/877/large/chainlink-new-logo.png"},{symbol:"ATOM",name:"Cosmos",logo:"https://assets.coingecko.com/coins/images/1481/large/cosmos_hub.png"},{symbol:"BNB",name:"BNB",logo:"https://assets.coingecko.com/coins/images/825/large/bnb-icon2_2x.png"},{symbol:"SOL",name:"Solana",logo:"https://assets.coingecko.com/coins/images/4128/large/solana.png"}].map((e,t)=>{const n=Math.random()>.5,r=OA(100,n,12);return{id:t+1,pair:"".concat(e.symbol,"/USD"),symbol:e.name,price:BA(0,2),value:BA(0,2),change:VA(0),changeValue:0,isPositive:n,flags:["US","US"],logo:e.logo,sparkline:r,chart:r,realTimePrice:0,lastUpdated:(new Date).toISOString()}});r(e);const t=["bitcoin","ethereum","litecoin","polkadot","filecoin","dogecoin","ripple","tron","polygon","cardano","chainlink","cosmos","binancecoin","solana"];console.log("\ud83d\udd17 [Smart Trading] Subscribing to symbols:",t);const n=zA(t,e=>{console.log("\ud83d\udce1 [Smart Trading] Received WebSocket data:",e),console.log("\ud83d\udce1 [Smart Trading] WebSocket data keys:",Object.keys(e)),r(t=>t.map(t=>{const n=t.pair.split("/")[0],r={BTC:"bitcoin",ETH:"ethereum",LTC:"litecoin",DOT:"polkadot",FIL:"filecoin",DOGE:"dogecoin",XRP:"ripple",TRX:"tron",MATIC:"polygon",ADA:"cardano",LINK:"chainlink",ATOM:"cosmos",BNB:"binancecoin",SOL:"solana"}[n],s=e[r];var i;(console.log("\ud83d\udd0d [Smart Trading] Processing ".concat(n," -> ").concat(r,":"),{displaySymbol:n,apiSymbol:r,hasUpdate:!!s,update:s?{price:s.price,change24h:s.change24h,sparkline:s.sparkline}:null,currentItem:{pair:t.pair,price:t.price}}),"MATIC"===n)&&console.log("\ud83c\udfaf [MATIC Debug] Special processing:",{displaySymbol:n,apiSymbol:r,update:s,sparklineData:null===s||void 0===s?void 0:s.sparkline,sparklineLength:null===s||void 0===s||null===(i=s.sparkline)||void 0===i?void 0:i.length});if(s){var o;const e=(0,tt.A)((0,tt.A)({},t),{},{price:BA(s.price,2),value:BA(s.price,2),change:VA(s.change24h),changeValue:s.change24h,isPositive:s.change24h>=0,sparkline:s.sparkline,chart:s.sparkline,realTimePrice:s.price,lastUpdated:(new Date).toISOString()});return console.log("\u2705 [Smart Trading] Updated ".concat(n,":"),{oldPrice:t.price,newPrice:e.price,oldChange:t.change,newChange:e.change,sparklineData:e.sparkline,sparklineLength:null===(o=e.sparkline)||void 0===o?void 0:o.length}),e}return t})),b(t=>(0,tt.A)((0,tt.A)({},t),e))});v(n)}m(!1)}catch(p){console.error("\u274c [Smart Trading] Error fetching market data:",p),g(p.message),m(!1)}})(),()=>{y&&(y.close(),v(null)),t&&(clearInterval(t),console.log("\ud83e\uddf9 [Smart Trading] Cleared Forex polling interval")),n&&(clearInterval(n),console.log("\ud83e\uddf9 [Smart Trading] Cleared Stocks polling interval")),s&&(clearInterval(s),console.log("\ud83e\uddf9 [Smart Trading] Cleared ETF polling interval")),i&&(clearInterval(i),console.log("\ud83e\uddf9 [Smart Trading] Cleared Futures polling interval"))}},[e]);const _=()=>[{id:1,pair:"USD/CNH",symbol:"USDCNH",price:"7.1229",change:"-0.12%",isPositive:!1,flags:["US","CN"],flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/cn.png"]},{id:2,pair:"USD/JPY",symbol:"USDJPY",price:"150.6454",change:"-0.77%",isPositive:!1,flags:["US","JP"],flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/jp.png"]},{id:3,pair:"EUR/USD",symbol:"EURUSD",price:"1.1679",change:"0.58%",isPositive:!0,flags:["EU","US"],flagUrls:["https://flagcdn.com/32x24/eu.png","https://flagcdn.com/32x24/us.png"]},{id:4,pair:"USD/CHF",symbol:"USDCHF",price:"0.7946",change:"-0.28%",isPositive:!1,flags:["US","CH"],flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/ch.png"]},{id:5,pair:"USD/HKD",symbol:"USDHKD",price:"7.7709",change:"-0.04%",isPositive:!1,flags:["US","HK"],flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/hk.png"]},{id:6,pair:"USD/SGD",symbol:"USDSGD",price:"1.2933",change:"-0.22%",isPositive:!1,flags:["US","SG"],flagUrls:["https://flagcdn.com/32x24/us.png","https://flagcdn.com/32x24/sg.png"]},{id:7,pair:"GBP/USD",symbol:"GBPUSD",price:"1.3437",change:"0.32%",isPositive:!0,flags:["GB","US"],flagUrls:["https://flagcdn.com/32x24/gb.png","https://flagcdn.com/32x24/us.png"]},{id:8,pair:"HKD/CNY",symbol:"HKDCNY",price:"0.9167",change:"-0.05%",isPositive:!1,flags:["HK","CN"],flagUrls:["https://flagcdn.com/32x24/hk.png","https://flagcdn.com/32x24/cn.png"]},{id:9,pair:"AUD/USD",symbol:"AUDUSD",price:"0.6543",change:"0.15%",isPositive:!0,flags:["AU","US"],flagUrls:["https://flagcdn.com/32x24/au.png","https://flagcdn.com/32x24/us.png"]},{id:10,pair:"CAD/USD",symbol:"CADUSD",price:"0.7321",change:"-0.08%",isPositive:!1,flags:["CA","US"],flagUrls:["https://flagcdn.com/32x24/ca.png","https://flagcdn.com/32x24/us.png"]}];return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white text-gray-900",children:[(0,Pe.jsxs)("header",{className:"flex items-center justify-between px-2 py-2 bg-white border-b border-gray-200",children:[(0,Pe.jsxs)(Ce,{to:"/",className:"flex items-center space-x-2",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-gray-900 text-xl font-semibold",children:"Smart Trading"})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors cursor-pointer",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Pe.jsx)(Ce,{to:"/notifications",className:"flex items-center justify-center",children:(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})})]})]}),(0,Pe.jsxs)("main",{className:"px-1 pb-16",children:[(0,Pe.jsx)("div",{className:"mt-2 mb-2",children:(0,Pe.jsx)("div",{className:"bg-gray-800 rounded-lg px-1 py-1 flex items-center justify-between",children:["Forex","Crypto","Stocks","ETF","Futures"].map(n=>(0,Pe.jsx)("button",{onClick:()=>t(n),className:"px-2 py-1 rounded-md text-xs font-medium transition-all ".concat(e===n?"bg-white text-gray-900":"text-gray-300 hover:text-gray-200"),children:n},n))})}),(0,Pe.jsxs)("div",{className:"space-y-2",children:[(0,Pe.jsxs)("div",{className:"grid grid-cols-5 gap-2 px-2 py-2 bg-gray-50 rounded-lg",children:[(0,Pe.jsx)("div",{className:"text-gray-700 text-xs font-semibold",children:"Name"}),(0,Pe.jsx)("div",{className:"text-gray-700 text-xs font-semibold",children:"Spot price"}),(0,Pe.jsx)("div",{className:"text-gray-700 text-xs font-semibold",children:"24h%"}),(0,Pe.jsx)("div",{className:"text-gray-700 text-xs font-semibold",children:"Chart"}),(0,Pe.jsx)("div",{className:"text-gray-700 text-xs font-semibold"})]}),(Array.isArray("Forex"===e?i:"Stocks"===e?a:"ETF"===e?l:"Futures"===e?h:n)?"Forex"===e?i:"Stocks"===e?a:"ETF"===e?l:"Futures"===e?h:n:[]).map(t=>{var n,r,s;return(0,Pe.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-3 shadow-sm hover:shadow-md transition-shadow",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-5 gap-2 items-center",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Pe.jsx)("div",{className:"flex -space-x-1",children:"Crypto"===e&&t.logo||"Stocks"===e&&t.logo?(0,Pe.jsx)("img",{src:t.logo,alt:"".concat(t.pair," logo"),className:"w-8 h-8 rounded-full border border-gray-200",onError:e=>{e.target.style.display="none"}}):"Forex"===e?(0,Pe.jsx)("div",{className:"flex -space-x-1"}):(0,Pe.jsx)("div",{className:"flex -space-x-1",children:t.flags&&t.flags.length>=2?(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(TA,{countryCode:t.flags[0]}),(0,Pe.jsx)(TA,{countryCode:t.flags[1]})]}):null===(n=t.flags)||void 0===n?void 0:n.map((e,t)=>(0,Pe.jsx)("span",{className:"text-sm",children:e},t))})}),(0,Pe.jsx)("span",{className:"text-gray-900 font-semibold text-xs",children:t.pair})]}),(0,Pe.jsx)("div",{className:"text-gray-900 font-semibold text-xs transition-colors duration-1000 ".concat(w[null===(r=t.pair)||void 0===r||null===(s=r.split("/")[0])||void 0===s?void 0:s.toLowerCase()]?"bg-green-100":""),children:t.price}),(0,Pe.jsx)("div",{className:"text-xs font-semibold ".concat(t.isPositive?"text-green-600":"text-red-600"),children:t.change}),(0,Pe.jsx)("div",{className:"flex items-center justify-center",children:(0,Pe.jsx)(HA,{data:t.sparkline||t.chart,isPositive:t.isPositive,width:40,height:20})}),(0,Pe.jsx)("div",{className:"flex items-center justify-end",children:(0,Pe.jsx)("button",{onClick:()=>{return e=t.pair,A(e),void S(!0);var e},className:"w-7 h-7 bg-gray-800 rounded-full flex items-center justify-center hover:bg-gray-700 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})})]})},t.id)})]})]}),(0,Pe.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200",children:(0,Pe.jsxs)("div",{className:"bg-gray-800 mx-1 mb-1 rounded-lg shadow-2xl px-2 py-1.5 flex items-center justify-between",children:[(0,Pe.jsxs)(Ce,{to:"/",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Home"})]}),(0,Pe.jsxs)(Ce,{to:"/market",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Market"})]}),(0,Pe.jsxs)(Ce,{to:"/smart-trading",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,Pe.jsx)("span",{className:"text-xs text-white",children:"Smart"})]}),(0,Pe.jsxs)(Ce,{to:"/loan",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Loan"})]}),(0,Pe.jsxs)(Ce,{to:"/account",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Account"})]})]})}),x&&(0,Pe.jsx)(WA,{isOpen:x,onClose:()=>S(!1),symbol:E,onPlanCreated:()=>{console.log("Creating trading plan:",{symbol:E,user:null===N||void 0===N?void 0:N.uid}),alert("Trading plan created successfully!"),S(!1)}})]})}function KA(){const[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)("7 Days"),[i,o]=(0,s.useState)(!1),[a,c]=(0,s.useState)(!1),[l,u]=(0,s.useState)(!1),[h,d]=(0,s.useState)(1),[f,m]=(0,s.useState)({firstName:"",lastName:"",gender:"",birthdate:"",country:"",address:"",email:"",phoneNumber:"",document:null}),{isConnected:p,account:g}=Xf();(0,s.useEffect)(()=>{const e=e=>{l&&!e.target.closest(".loan-term-dropdown")&&u(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[l]);const[y,v]=(0,s.useState)({}),w=e=>{const{name:t,value:n}=e.target;m(e=>(0,tt.A)((0,tt.A)({},e),{},{[t]:n})),y[t]&&v(e=>(0,tt.A)((0,tt.A)({},e),{},{[t]:""}))};return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white text-gray-900",children:[(0,Pe.jsx)(AA,{}),(0,Pe.jsxs)("header",{className:"flex items-center justify-between px-2 py-2 bg-white border-b border-gray-200",children:[(0,Pe.jsxs)(Ce,{to:"/",className:"flex items-center space-x-2",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-gray-900 text-xl font-semibold",children:"Loan account"})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors cursor-pointer",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Pe.jsx)(Ce,{to:"/notifications",className:"flex items-center justify-center",children:(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})})]})]}),(0,Pe.jsxs)("main",{className:"px-1 pb-16",children:[(0,Pe.jsxs)("div",{className:"mt-3 text-center",children:[(0,Pe.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-1",children:"5,000,000 USD"}),(0,Pe.jsx)("p",{className:"text-gray-600 text-xs mb-3",children:"Verify your identity and get more loan amount!"}),(0,Pe.jsx)("button",{onClick:()=>{c(!0),d(1)},className:"w-full bg-gray-900 text-white py-2 rounded-lg font-semibold text-sm",children:"Start verification"})]}),(0,Pe.jsxs)("div",{className:"mt-8 space-y-4",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Pe.jsx)("div",{className:"flex-1 bg-white border border-gray-300 rounded-2xl px-4 py-4",children:(0,Pe.jsx)("input",{type:"text",placeholder:"I want to borrow...",value:e,onChange:e=>t(e.target.value),className:"w-full text-gray-900 placeholder-gray-500 outline-none"})}),(0,Pe.jsx)("button",{className:"bg-white border border-gray-300 rounded-2xl px-4 py-4 text-gray-900 font-medium",children:"USD"})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Pe.jsx)("div",{className:"flex-1 bg-gray-800 border border-gray-300 rounded-2xl px-4 py-4",children:(0,Pe.jsx)("span",{className:"text-white text-sm",children:"Loan term (Days):"})}),(0,Pe.jsxs)("div",{className:"relative loan-term-dropdown",children:[(0,Pe.jsxs)("button",{onClick:()=>u(!l),className:"bg-white border border-gray-300 rounded-2xl px-4 py-4 text-gray-900 font-medium flex items-center space-x-2 hover:bg-gray-50 transition-colors",children:[(0,Pe.jsx)("span",{children:n}),(0,Pe.jsx)("svg",{className:"w-4 h-4 transition-transform ".concat(l?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),l&&(0,Pe.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-white border border-gray-300 rounded-xl shadow-lg z-10",children:["7 Days","14 Days","30 Days","60 Days","90 Days"].map(e=>(0,Pe.jsx)("button",{onClick:()=>(e=>{r(e),u(!1)})(e),className:"w-full px-4 py-3 text-left hover:bg-gray-50 transition-colors first:rounded-t-xl last:rounded-b-xl ".concat(e===n?"bg-gray-100 text-gray-900 font-semibold":"text-gray-700"),children:e},e))})]})]})]}),(0,Pe.jsxs)("div",{className:"mt-8 space-y-3",children:[(0,Pe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Pe.jsx)("span",{className:"text-gray-600 text-sm",children:"Daily interest rate:"}),(0,Pe.jsx)("span",{className:"text-gray-900 font-bold",children:"0.1%"})]}),(0,Pe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Pe.jsx)("span",{className:"text-gray-600 text-sm",children:"Total interest amount:"}),(0,Pe.jsxs)("span",{className:"text-gray-900 font-bold",children:[(.001*(parseFloat(e)||0)*(parseInt(n)||7)).toFixed(2)," USD"]})]}),(0,Pe.jsx)("p",{className:"text-gray-500 text-xs mt-4",children:"No interest need to pay within 0 days of the loan, after that, interest is payable."})]}),(0,Pe.jsx)("div",{className:"mt-8",children:(0,Pe.jsx)("button",{onClick:async()=>{p?!e||parseFloat(e)<=0?alert("Please enter a valid loan amount"):parseFloat(e)>5e6?alert("Maximum loan amount is 5,000,000 USD"):(o(!0),setTimeout(()=>{o(!1),alert("Loan application for ".concat(e," USD for ").concat(n," submitted successfully!"))},2e3)):alert("Please connect your wallet first")},disabled:i,className:"w-full bg-gray-900 text-white py-4 rounded-2xl font-semibold text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:i?(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,Pe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Pe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Borrow now"})})]}),(0,Pe.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200",children:(0,Pe.jsxs)("div",{className:"bg-gray-800 mx-1 mb-1 rounded-lg shadow-2xl px-2 py-1.5 flex items-center justify-between",children:[(0,Pe.jsxs)(Ce,{to:"/",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Home"})]}),(0,Pe.jsxs)(Ce,{to:"/market",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Market"})]}),(0,Pe.jsxs)(Ce,{to:"/smart-trading",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Smart"})]}),(0,Pe.jsxs)(Ce,{to:"/loan",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Pe.jsx)("span",{className:"text-xs text-white",children:"Loan"})]}),(0,Pe.jsxs)(Ce,{to:"/account",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Account"})]})]})}),a&&(0,Pe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Pe.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,Pe.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Account Verification"}),(0,Pe.jsx)("button",{onClick:()=>c(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Pe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Pe.jsxs)("div",{className:"px-4 py-3 border-b border-gray-200",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ".concat(h>=1?"bg-gray-900 text-white":"bg-gray-200 text-gray-600"),children:"1"}),(0,Pe.jsx)("div",{className:"flex-1 h-1 mx-2 ".concat(h>=2?"bg-gray-900":"bg-gray-200")}),(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ".concat(h>=2?"bg-gray-900 text-white":"bg-gray-200 text-gray-600"),children:"2"}),(0,Pe.jsx)("div",{className:"flex-1 h-1 mx-2 ".concat(h>=3?"bg-gray-900":"bg-gray-200")}),(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-semibold ".concat(h>=3?"bg-gray-900 text-white":"bg-gray-200 text-gray-600"),children:"3"})]}),(0,Pe.jsxs)("div",{className:"flex justify-between mt-2 text-xs text-gray-600",children:[(0,Pe.jsx)("span",{children:"Personal Info"}),(0,Pe.jsx)("span",{children:"Contact Details"}),(0,Pe.jsx)("span",{children:"Documents"})]})]}),(0,Pe.jsxs)("div",{className:"p-4",children:[1===h&&(0,Pe.jsxs)("div",{className:"space-y-4",children:[(0,Pe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Personal Information"}),(0,Pe.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name *"}),(0,Pe.jsx)("input",{type:"text",name:"firstName",value:f.firstName,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 ".concat(y.firstName?"border-red-500":"border-gray-300"),placeholder:"John"}),y.firstName&&(0,Pe.jsx)("p",{className:"text-red-500 text-xs mt-1",children:y.firstName})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name *"}),(0,Pe.jsx)("input",{type:"text",name:"lastName",value:f.lastName,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 ".concat(y.lastName?"border-red-500":"border-gray-300"),placeholder:"Doe"}),y.lastName&&(0,Pe.jsx)("p",{className:"text-red-500 text-xs mt-1",children:y.lastName})]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender *"}),(0,Pe.jsxs)("select",{name:"gender",value:f.gender,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 ".concat(y.gender?"border-red-500":"border-gray-300"),children:[(0,Pe.jsx)("option",{value:"",children:"Select Gender"}),(0,Pe.jsx)("option",{value:"male",children:"Male"}),(0,Pe.jsx)("option",{value:"female",children:"Female"}),(0,Pe.jsx)("option",{value:"other",children:"Other"})]}),y.gender&&(0,Pe.jsx)("p",{className:"text-red-500 text-xs mt-1",children:y.gender})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth *"}),(0,Pe.jsx)("input",{type:"date",name:"birthdate",value:f.birthdate,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 ".concat(y.birthdate?"border-red-500":"border-gray-300")}),y.birthdate&&(0,Pe.jsx)("p",{className:"text-red-500 text-xs mt-1",children:y.birthdate})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country *"}),(0,Pe.jsxs)("select",{name:"country",value:f.country,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 ".concat(y.country?"border-red-500":"border-gray-300"),children:[(0,Pe.jsx)("option",{value:"",children:"Select Country"}),(0,Pe.jsx)("option",{value:"US",children:"United States"}),(0,Pe.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,Pe.jsx)("option",{value:"CA",children:"Canada"}),(0,Pe.jsx)("option",{value:"AU",children:"Australia"}),(0,Pe.jsx)("option",{value:"DE",children:"Germany"}),(0,Pe.jsx)("option",{value:"FR",children:"France"}),(0,Pe.jsx)("option",{value:"CH",children:"Switzerland"}),(0,Pe.jsx)("option",{value:"JP",children:"Japan"}),(0,Pe.jsx)("option",{value:"SG",children:"Singapore"}),(0,Pe.jsx)("option",{value:"HK",children:"Hong Kong"})]}),y.country&&(0,Pe.jsx)("p",{className:"text-red-500 text-xs mt-1",children:y.country})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),(0,Pe.jsx)("textarea",{name:"address",value:f.address,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 ".concat(y.address?"border-red-500":"border-gray-300"),rows:"3",placeholder:"Enter your full address"}),y.address&&(0,Pe.jsx)("p",{className:"text-red-500 text-xs mt-1",children:y.address})]})]}),2===h&&(0,Pe.jsxs)("div",{className:"space-y-4",children:[(0,Pe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Details"}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),(0,Pe.jsx)("input",{type:"email",name:"email",value:f.email,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 ".concat(y.email?"border-red-500":"border-gray-300"),placeholder:"john.doe@example.com"}),y.email&&(0,Pe.jsx)("p",{className:"text-red-500 text-xs mt-1",children:y.email})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number *"}),(0,Pe.jsx)("input",{type:"tel",name:"phoneNumber",value:f.phoneNumber,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-gray-900 ".concat(y.phoneNumber?"border-red-500":"border-gray-300"),placeholder:"+1 (555) 123-4567"}),y.phoneNumber&&(0,Pe.jsx)("p",{className:"text-red-500 text-xs mt-1",children:y.phoneNumber})]}),(0,Pe.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Pe.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Verification Process"}),(0,Pe.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,Pe.jsx)("li",{children:"\u2022 We will send a verification code to your email"}),(0,Pe.jsx)("li",{children:"\u2022 You may receive a call for phone verification"}),(0,Pe.jsx)("li",{children:"\u2022 Processing typically takes 1-3 business days"}),(0,Pe.jsx)("li",{children:"\u2022 You'll receive email updates on your status"})]})]})]}),3===h&&(0,Pe.jsxs)("div",{className:"space-y-4",children:[(0,Pe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Document Upload"}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Identity Document *"}),(0,Pe.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,Pe.jsx)("input",{type:"file",onChange:e=>{m(t=>(0,tt.A)((0,tt.A)({},t),{},{document:e.target.files[0]}))},accept:"image/*,.pdf",className:"hidden",id:"document-upload"}),(0,Pe.jsxs)("label",{htmlFor:"document-upload",className:"cursor-pointer",children:[(0,Pe.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,Pe.jsx)("p",{className:"text-sm text-gray-600",children:f.document?f.document.name:"Click to upload document"}),(0,Pe.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, JPG, PNG up to 10MB"})]})]})]}),(0,Pe.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,Pe.jsx)("h4",{className:"font-semibold text-yellow-900 mb-2",children:"Accepted Documents"}),(0,Pe.jsxs)("ul",{className:"text-sm text-yellow-800 space-y-1",children:[(0,Pe.jsx)("li",{children:"\u2022 Passport (preferred)"}),(0,Pe.jsx)("li",{children:"\u2022 Driver's License"}),(0,Pe.jsx)("li",{children:"\u2022 National ID Card"}),(0,Pe.jsx)("li",{children:"\u2022 Government-issued ID"})]})]}),(0,Pe.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Pe.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Document Requirements"}),(0,Pe.jsxs)("ul",{className:"text-sm text-gray-700 space-y-1",children:[(0,Pe.jsx)("li",{children:"\u2022 Document must be valid and not expired"}),(0,Pe.jsx)("li",{children:"\u2022 All text must be clearly visible"}),(0,Pe.jsx)("li",{children:"\u2022 No blurry or low-quality images"}),(0,Pe.jsx)("li",{children:"\u2022 Document must match your personal information"})]})]})]}),(0,Pe.jsxs)("div",{className:"flex space-x-3 mt-6",children:[h>1&&(0,Pe.jsx)("button",{onClick:()=>{h>1&&d(h-1)},className:"flex-1 bg-gray-200 text-gray-800 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Previous"}),h<3?(0,Pe.jsx)("button",{onClick:()=>{if(v({}),1===h){const e={};if(["firstName","lastName","gender","birthdate","country","address"].forEach(t=>{f[t]||(e[t]="This field is required")}),Object.keys(e).length>0)return void v(e)}else if(2===h){const e={};if(f.email){/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(f.email)||(e.email="Please enter a valid email address")}else e.email="Email is required";if(f.phoneNumber){/^[\+]?[1-9][\d]{0,15}$/.test(f.phoneNumber.replace(/\s/g,""))||(e.phoneNumber="Please enter a valid phone number")}else e.phoneNumber="Phone number is required";if(Object.keys(e).length>0)return void v(e)}h<3&&d(h+1)},className:"flex-1 bg-gray-900 text-white py-3 rounded-lg font-semibold hover:bg-gray-800 transition-colors",children:"Next"}):(0,Pe.jsx)("button",{onClick:()=>{["firstName","lastName","gender","birthdate","country","address","email","phoneNumber"].filter(e=>!f[e]).length>0?alert("Please fill in all required fields"):f.document?(alert("Verification submitted successfully! You will receive an email confirmation within 24 hours."),c(!1),d(1),m({firstName:"",lastName:"",gender:"",birthdate:"",country:"",address:"",email:"",phoneNumber:"",document:null})):alert("Please upload a document")},className:"flex-1 bg-gray-900 text-white py-3 rounded-lg font-semibold hover:bg-gray-800 transition-colors",children:"Submit Verification"})]})]})]})})]})}var JA,YA=Object.defineProperty,ZA=Object.getOwnPropertySymbols,XA=Object.prototype.hasOwnProperty,$A=Object.prototype.propertyIsEnumerable,eN=(e,t,n)=>t in e?YA(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tN=(e,t)=>{for(var n in t||(t={}))XA.call(t,n)&&eN(e,n,t[n]);if(ZA)for(var n of ZA(t))$A.call(t,n)&&eN(e,n,t[n]);return e},nN=(e,t)=>{var n={};for(var r in e)XA.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&ZA)for(var r of ZA(e))t.indexOf(r)<0&&$A.call(e,r)&&(n[r]=e[r]);return n};(e=>{const t=class t{constructor(e,n,r,i){if(this.version=e,this.errorCorrectionLevel=n,this.modules=[],this.isFunction=[],e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version value out of range");if(i<-1||i>7)throw new RangeError("Mask value out of range");this.size=4*e+17;let o=[];for(let t=0;t<this.size;t++)o.push(!1);for(let t=0;t<this.size;t++)this.modules.push(o.slice()),this.isFunction.push(o.slice());this.drawFunctionPatterns();const a=this.addEccAndInterleave(r);if(this.drawCodewords(a),-1==i){let e=1e9;for(let t=0;t<8;t++){this.applyMask(t),this.drawFormatBits(t);const n=this.getPenaltyScore();n<e&&(i=t,e=n),this.applyMask(t)}}s(0<=i&&i<=7),this.mask=i,this.applyMask(i),this.drawFormatBits(i),this.isFunction=[]}static encodeText(n,r){const s=e.QrSegment.makeSegments(n);return t.encodeSegments(s,r)}static encodeBinary(n,r){const s=e.QrSegment.makeBytes(n);return t.encodeSegments([s],r)}static encodeSegments(e,r){let i,a,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:40,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,h=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(!(t.MIN_VERSION<=c&&c<=l&&l<=t.MAX_VERSION)||u<-1||u>7)throw new RangeError("Invalid value");for(i=c;;i++){const n=8*t.getNumDataCodewords(i,r),s=o.getTotalBits(e,i);if(s<=n){a=s;break}if(i>=l)throw new RangeError("Data too long")}for(const n of[t.Ecc.MEDIUM,t.Ecc.QUARTILE,t.Ecc.HIGH])h&&a<=8*t.getNumDataCodewords(i,n)&&(r=n);let d=[];for(const t of e){n(t.mode.modeBits,4,d),n(t.numChars,t.mode.numCharCountBits(i),d);for(const e of t.getData())d.push(e)}s(d.length==a);const f=8*t.getNumDataCodewords(i,r);s(d.length<=f),n(0,Math.min(4,f-d.length),d),n(0,(8-d.length%8)%8,d),s(d.length%8==0);for(let t=236;d.length<f;t^=253)n(t,8,d);let m=[];for(;8*m.length<d.length;)m.push(0);return d.forEach((e,t)=>m[t>>>3]|=e<<7-(7&t)),new t(i,r,m,u)}getModule(e,t){return 0<=e&&e<this.size&&0<=t&&t<this.size&&this.modules[t][e]}getModules(){return this.modules}drawFunctionPatterns(){for(let n=0;n<this.size;n++)this.setFunctionModule(6,n,n%2==0),this.setFunctionModule(n,6,n%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const e=this.getAlignmentPatternPositions(),t=e.length;for(let n=0;n<t;n++)for(let r=0;r<t;r++)0==n&&0==r||0==n&&r==t-1||n==t-1&&0==r||this.drawAlignmentPattern(e[n],e[r]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(e){const t=this.errorCorrectionLevel.formatBits<<3|e;let n=t;for(let r=0;r<10;r++)n=n<<1^1335*(n>>>9);const i=21522^(t<<10|n);s(i>>>15==0);for(let s=0;s<=5;s++)this.setFunctionModule(8,s,r(i,s));this.setFunctionModule(8,7,r(i,6)),this.setFunctionModule(8,8,r(i,7)),this.setFunctionModule(7,8,r(i,8));for(let s=9;s<15;s++)this.setFunctionModule(14-s,8,r(i,s));for(let s=0;s<8;s++)this.setFunctionModule(this.size-1-s,8,r(i,s));for(let s=8;s<15;s++)this.setFunctionModule(8,this.size-15+s,r(i,s));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let e=this.version;for(let n=0;n<12;n++)e=e<<1^7973*(e>>>11);const t=this.version<<12|e;s(t>>>18==0);for(let n=0;n<18;n++){const e=r(t,n),s=this.size-11+n%3,i=Math.floor(n/3);this.setFunctionModule(s,i,e),this.setFunctionModule(i,s,e)}}drawFinderPattern(e,t){for(let n=-4;n<=4;n++)for(let r=-4;r<=4;r++){const s=Math.max(Math.abs(r),Math.abs(n)),i=e+r,o=t+n;0<=i&&i<this.size&&0<=o&&o<this.size&&this.setFunctionModule(i,o,2!=s&&4!=s)}}drawAlignmentPattern(e,t){for(let n=-2;n<=2;n++)for(let r=-2;r<=2;r++)this.setFunctionModule(e+r,t+n,1!=Math.max(Math.abs(r),Math.abs(n)))}setFunctionModule(e,t,n){this.modules[t][e]=n,this.isFunction[t][e]=!0}addEccAndInterleave(e){const n=this.version,r=this.errorCorrectionLevel;if(e.length!=t.getNumDataCodewords(n,r))throw new RangeError("Invalid argument");const i=t.NUM_ERROR_CORRECTION_BLOCKS[r.ordinal][n],o=t.ECC_CODEWORDS_PER_BLOCK[r.ordinal][n],a=Math.floor(t.getNumRawDataModules(n)/8),c=i-a%i,l=Math.floor(a/i);let u=[];const h=t.reedSolomonComputeDivisor(o);for(let s=0,f=0;s<i;s++){let n=e.slice(f,f+l-o+(s<c?0:1));f+=n.length;const r=t.reedSolomonComputeRemainder(n,h);s<c&&n.push(0),u.push(n.concat(r))}let d=[];for(let t=0;t<u[0].length;t++)u.forEach((e,n)=>{(t!=l-o||n>=c)&&d.push(e[t])});return s(d.length==a),d}drawCodewords(e){if(e.length!=Math.floor(t.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let t=this.size-1;t>=1;t-=2){6==t&&(t=5);for(let s=0;s<this.size;s++)for(let i=0;i<2;i++){const o=t-i,a=0==(t+1&2)?this.size-1-s:s;!this.isFunction[a][o]&&n<8*e.length&&(this.modules[a][o]=r(e[n>>>3],7-(7&n)),n++)}}s(n==8*e.length)}applyMask(e){if(e<0||e>7)throw new RangeError("Mask value out of range");for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++){let r;switch(e){case 0:r=(n+t)%2==0;break;case 1:r=t%2==0;break;case 2:r=n%3==0;break;case 3:r=(n+t)%3==0;break;case 4:r=(Math.floor(n/3)+Math.floor(t/2))%2==0;break;case 5:r=n*t%2+n*t%3==0;break;case 6:r=(n*t%2+n*t%3)%2==0;break;case 7:r=((n+t)%2+n*t%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[t][n]&&r&&(this.modules[t][n]=!this.modules[t][n])}}getPenaltyScore(){let e=0;for(let s=0;s<this.size;s++){let n=!1,r=0,i=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[s][o]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,i),n||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),n=this.modules[s][o],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,i)*t.PENALTY_N3}for(let s=0;s<this.size;s++){let n=!1,r=0,i=[0,0,0,0,0,0,0];for(let o=0;o<this.size;o++)this.modules[o][s]==n?(r++,5==r?e+=t.PENALTY_N1:r>5&&e++):(this.finderPenaltyAddHistory(r,i),n||(e+=this.finderPenaltyCountPatterns(i)*t.PENALTY_N3),n=this.modules[o][s],r=1);e+=this.finderPenaltyTerminateAndCount(n,r,i)*t.PENALTY_N3}for(let s=0;s<this.size-1;s++)for(let n=0;n<this.size-1;n++){const r=this.modules[s][n];r==this.modules[s][n+1]&&r==this.modules[s+1][n]&&r==this.modules[s+1][n+1]&&(e+=t.PENALTY_N2)}let n=0;for(const t of this.modules)n=t.reduce((e,t)=>e+(t?1:0),n);const r=this.size*this.size,i=Math.ceil(Math.abs(20*n-10*r)/r)-1;return s(0<=i&&i<=9),e+=i*t.PENALTY_N4,s(0<=e&&e<=2568888),e}getAlignmentPatternPositions(){if(1==this.version)return[];{const e=Math.floor(this.version/7)+2,t=32==this.version?26:2*Math.ceil((4*this.version+4)/(2*e-2));let n=[6];for(let r=this.size-7;n.length<e;r-=t)n.splice(1,0,r);return n}}static getNumRawDataModules(e){if(e<t.MIN_VERSION||e>t.MAX_VERSION)throw new RangeError("Version number out of range");let n=(16*e+128)*e+64;if(e>=2){const t=Math.floor(e/7)+2;n-=(25*t-10)*t-55,e>=7&&(n-=36)}return s(208<=n&&n<=29648),n}static getNumDataCodewords(e,n){return Math.floor(t.getNumRawDataModules(e)/8)-t.ECC_CODEWORDS_PER_BLOCK[n.ordinal][e]*t.NUM_ERROR_CORRECTION_BLOCKS[n.ordinal][e]}static reedSolomonComputeDivisor(e){if(e<1||e>255)throw new RangeError("Degree out of range");let n=[];for(let t=0;t<e-1;t++)n.push(0);n.push(1);let r=1;for(let s=0;s<e;s++){for(let e=0;e<n.length;e++)n[e]=t.reedSolomonMultiply(n[e],r),e+1<n.length&&(n[e]^=n[e+1]);r=t.reedSolomonMultiply(r,2)}return n}static reedSolomonComputeRemainder(e,n){let r=n.map(e=>0);for(const s of e){const e=s^r.shift();r.push(0),n.forEach((n,s)=>r[s]^=t.reedSolomonMultiply(n,e))}return r}static reedSolomonMultiply(e,t){if(e>>>8!=0||t>>>8!=0)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^285*(n>>>7),n^=(t>>>r&1)*e;return s(n>>>8==0),n}finderPenaltyCountPatterns(e){const t=e[1];s(t<=3*this.size);const n=t>0&&e[2]==t&&e[3]==3*t&&e[4]==t&&e[5]==t;return(n&&e[0]>=4*t&&e[6]>=t?1:0)+(n&&e[6]>=4*t&&e[0]>=t?1:0)}finderPenaltyTerminateAndCount(e,t,n){return e&&(this.finderPenaltyAddHistory(t,n),t=0),t+=this.size,this.finderPenaltyAddHistory(t,n),this.finderPenaltyCountPatterns(n)}finderPenaltyAddHistory(e,t){0==t[0]&&(e+=this.size),t.pop(),t.unshift(e)}};t.MIN_VERSION=1,t.MAX_VERSION=40,t.PENALTY_N1=3,t.PENALTY_N2=3,t.PENALTY_N3=40,t.PENALTY_N4=10,t.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],t.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];function n(e,t,n){if(t<0||t>31||e>>>t!=0)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function r(e,t){return 0!=(e>>>t&1)}function s(e){if(!e)throw new Error("Assertion error")}e.QrCode=t;const i=class e{constructor(e,t,n){if(this.mode=e,this.numChars=t,this.bitData=n,t<0)throw new RangeError("Invalid argument");this.bitData=n.slice()}static makeBytes(t){let r=[];for(const e of t)n(e,8,r);return new e(e.Mode.BYTE,t.length,r)}static makeNumeric(t){if(!e.isNumeric(t))throw new RangeError("String contains non-numeric characters");let r=[];for(let e=0;e<t.length;){const s=Math.min(t.length-e,3);n(parseInt(t.substring(e,e+s),10),3*s+1,r),e+=s}return new e(e.Mode.NUMERIC,t.length,r)}static makeAlphanumeric(t){if(!e.isAlphanumeric(t))throw new RangeError("String contains unencodable characters in alphanumeric mode");let r,s=[];for(r=0;r+2<=t.length;r+=2){let i=45*e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r));i+=e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r+1)),n(i,11,s)}return r<t.length&&n(e.ALPHANUMERIC_CHARSET.indexOf(t.charAt(r)),6,s),new e(e.Mode.ALPHANUMERIC,t.length,s)}static makeSegments(t){return""==t?[]:e.isNumeric(t)?[e.makeNumeric(t)]:e.isAlphanumeric(t)?[e.makeAlphanumeric(t)]:[e.makeBytes(e.toUtf8ByteArray(t))]}static makeEci(t){let r=[];if(t<0)throw new RangeError("ECI assignment value out of range");if(t<128)n(t,8,r);else if(t<16384)n(2,2,r),n(t,14,r);else{if(!(t<1e6))throw new RangeError("ECI assignment value out of range");n(6,3,r),n(t,21,r)}return new e(e.Mode.ECI,0,r)}static isNumeric(t){return e.NUMERIC_REGEX.test(t)}static isAlphanumeric(t){return e.ALPHANUMERIC_REGEX.test(t)}getData(){return this.bitData.slice()}static getTotalBits(e,t){let n=0;for(const r of e){const e=r.mode.numCharCountBits(t);if(r.numChars>=1<<e)return 1/0;n+=4+e+r.bitData.length}return n}static toUtf8ByteArray(e){e=encodeURI(e);let t=[];for(let n=0;n<e.length;n++)"%"!=e.charAt(n)?t.push(e.charCodeAt(n)):(t.push(parseInt(e.substring(n+1,n+3),16)),n+=2);return t}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;e.QrSegment=i})(JA||(JA={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.ordinal=e,this.formatBits=t}};t.LOW=new t(0,1),t.MEDIUM=new t(1,0),t.QUARTILE=new t(2,3),t.HIGH=new t(3,2);e.Ecc=t})(t=e.QrCode||(e.QrCode={}))})(JA||(JA={})),(e=>{let t;(e=>{const t=class{constructor(e,t){this.modeBits=e,this.numBitsCharCount=t}numCharCountBits(e){return this.numBitsCharCount[Math.floor((e+7)/17)]}};t.NUMERIC=new t(1,[10,12,14]),t.ALPHANUMERIC=new t(2,[9,11,13]),t.BYTE=new t(4,[8,16,16]),t.KANJI=new t(8,[8,10,12]),t.ECI=new t(7,[0,0,0]);e.Mode=t})(t=e.QrSegment||(e.QrSegment={}))})(JA||(JA={}));var rN=JA,sN={L:rN.QrCode.Ecc.LOW,M:rN.QrCode.Ecc.MEDIUM,Q:rN.QrCode.Ecc.QUARTILE,H:rN.QrCode.Ecc.HIGH},iN=128,oN="L",aN="#FFFFFF",cN="#000000",lN=!1,uN=1;function hN(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=[];return e.forEach(function(e,r){let s=null;e.forEach(function(i,o){if(!i&&null!==s)return n.push("M".concat(s+t," ").concat(r+t,"h").concat(o-s,"v1H").concat(s+t,"z")),void(s=null);if(o!==e.length-1)i&&null===s&&(s=o);else{if(!i)return;null===s?n.push("M".concat(o+t,",").concat(r+t," h1v1H").concat(o+t,"z")):n.push("M".concat(s+t,",").concat(r+t," h").concat(o+1-s,"v1H").concat(s+t,"z"))}})}),n.join("")}function dN(e,t){return e.slice().map((e,n)=>n<t.y||n>=t.y+t.h?e:e.map((e,n)=>(n<t.x||n>=t.x+t.w)&&e))}function fN(e){let{value:t,level:n,minVersion:r,includeMargin:i,marginSize:o,imageSettings:a,size:c,boostLevel:l}=e,u=s.useMemo(()=>{const e=(Array.isArray(t)?t:[t]).reduce((e,t)=>(e.push(...rN.QrSegment.makeSegments(t)),e),[]);return rN.QrCode.encodeSegments(e,sN[n],r,void 0,void 0,l)},[t,n,r,l]);const{cells:h,margin:d,numCells:f,calculatedImageSettings:m}=s.useMemo(()=>{let e=u.getModules();const t=function(e,t){return null!=t?Math.max(Math.floor(t),0):e?4:0}(i,o),n=e.length+2*t,r=function(e,t,n,r){if(null==r)return null;const s=e.length+2*n,i=Math.floor(.1*t),o=s/t,a=(r.width||i)*o,c=(r.height||i)*o,l=null==r.x?e.length/2-a/2:r.x*o,u=null==r.y?e.length/2-c/2:r.y*o,h=null==r.opacity?1:r.opacity;let d=null;if(r.excavate){let e=Math.floor(l),t=Math.floor(u);d={x:e,y:t,w:Math.ceil(a+l-e),h:Math.ceil(c+u-t)}}return{x:l,y:u,h:c,w:a,excavation:d,opacity:h,crossOrigin:r.crossOrigin}}(e,c,t,a);return{cells:e,margin:t,numCells:n,calculatedImageSettings:r}},[u,c,a,i,o]);return{qrcode:u,margin:d,cells:h,numCells:f,calculatedImageSettings:m}}var mN=function(){try{(new Path2D).addPath(new Path2D)}catch(DN){return!1}return!0}(),pN=s.forwardRef(function(e,t){const n=e,{value:r,size:i=iN,level:o=oN,bgColor:a=aN,fgColor:c=cN,includeMargin:l=lN,minVersion:u=uN,boostLevel:h,marginSize:d,imageSettings:f}=n,m=nN(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:p}=m,g=nN(m,["style"]),y=null==f?void 0:f.src,v=s.useRef(null),w=s.useRef(null),b=s.useCallback(e=>{v.current=e,"function"===typeof t?t(e):t&&(t.current=e)},[t]),[x,S]=s.useState(!1),{margin:E,cells:A,numCells:N,calculatedImageSettings:T}=fN({value:r,level:o,minVersion:u,boostLevel:h,includeMargin:l,marginSize:d,imageSettings:f,size:i});s.useEffect(()=>{if(null!=v.current){const e=v.current,t=e.getContext("2d");if(!t)return;let n=A;const r=w.current,s=null!=T&&null!==r&&r.complete&&0!==r.naturalHeight&&0!==r.naturalWidth;s&&null!=T.excavation&&(n=dN(A,T.excavation));const o=window.devicePixelRatio||1;e.height=e.width=i*o;const l=i/N*o;t.scale(l,l),t.fillStyle=a,t.fillRect(0,0,N,N),t.fillStyle=c,mN?t.fill(new Path2D(hN(n,E))):A.forEach(function(e,n){e.forEach(function(e,r){e&&t.fillRect(r+E,n+E,1,1)})}),T&&(t.globalAlpha=T.opacity),s&&t.drawImage(r,T.x+E,T.y+E,T.w,T.h)}}),s.useEffect(()=>{S(!1)},[y]);const k=tN({height:i,width:i},p);let C=null;return null!=y&&(C=s.createElement("img",{src:y,key:y,style:{display:"none"},onLoad:()=>{S(!0)},ref:w,crossOrigin:null==T?void 0:T.crossOrigin})),s.createElement(s.Fragment,null,s.createElement("canvas",tN({style:k,height:i,width:i,ref:b,role:"img"},g)),C)});pN.displayName="QRCodeCanvas";var gN=s.forwardRef(function(e,t){const n=e,{value:r,size:i=iN,level:o=oN,bgColor:a=aN,fgColor:c=cN,includeMargin:l=lN,minVersion:u=uN,boostLevel:h,title:d,marginSize:f,imageSettings:m}=n,p=nN(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:g,cells:y,numCells:v,calculatedImageSettings:w}=fN({value:r,level:o,minVersion:u,boostLevel:h,includeMargin:l,marginSize:f,imageSettings:m,size:i});let b=y,x=null;null!=m&&null!=w&&(null!=w.excavation&&(b=dN(y,w.excavation)),x=s.createElement("image",{href:m.src,height:w.h,width:w.w,x:w.x+g,y:w.y+g,preserveAspectRatio:"none",opacity:w.opacity,crossOrigin:w.crossOrigin}));const S=hN(b,g);return s.createElement("svg",tN({height:i,width:i,viewBox:"0 0 ".concat(v," ").concat(v),ref:t,role:"img"},p),!!d&&s.createElement("title",null,d),s.createElement("path",{fill:a,d:"M0,0 h".concat(v,"v").concat(v,"H0z"),shapeRendering:"crispEdges"}),s.createElement("path",{fill:c,d:S,shapeRendering:"crispEdges"}),x)});gN.displayName="QRCodeSVG";const yN=e=>{let{isOpen:t,onClose:n}=e;const[r,i]=(0,s.useState)({firstName:"",lastName:"",gender:"",birthdate:"",country:"",address:"",email:"",phoneNumber:"",document:null}),[o,a]=(0,s.useState)({}),c=e=>{const{name:t,value:n}=e.target;i(e=>(0,tt.A)((0,tt.A)({},e),{},{[t]:n})),o[t]&&a(e=>(0,tt.A)((0,tt.A)({},e),{},{[t]:""}))};return t?(0,Pe.jsx)(sy,{children:(0,Pe.jsx)(XE.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:n,children:(0,Pe.jsxs)(XE.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Pe.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Start verification"}),(0,Pe.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Pe.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t={};r.firstName||(t.firstName="First name is required"),r.lastName||(t.lastName="Last name is required"),r.gender||(t.gender="Gender is required"),r.birthdate||(t.birthdate="Birthdate is required"),r.country||(t.country="Country is required"),r.address||(t.address="Address is required"),r.email||(t.email="Email is required"),r.phoneNumber||(t.phoneNumber="Phone number is required"),r.document||(t.document="Document is required"),a(t),0===Object.keys(t).length&&(console.log("Form submitted:",r),alert("Verification request submitted successfully!"),n())},className:"space-y-6",children:[(0,Pe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First name"}),(0,Pe.jsx)("input",{type:"text",name:"firstName",value:r.firstName,onChange:c,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300 ".concat(o.firstName?"border-red-500":"border-gray-300"),placeholder:"Enter your first name"}),o.firstName&&(0,Pe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.firstName})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last name"}),(0,Pe.jsx)("input",{type:"text",name:"lastName",value:r.lastName,onChange:c,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300 ".concat(o.lastName?"border-red-500":"border-gray-300"),placeholder:"Enter your last name"}),o.lastName&&(0,Pe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.lastName})]})]}),(0,Pe.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Female / Male"}),(0,Pe.jsxs)("select",{name:"gender",value:r.gender,onChange:c,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300 ".concat(o.gender?"border-red-500":"border-gray-300"),children:[(0,Pe.jsx)("option",{value:"",children:"Select gender"}),(0,Pe.jsx)("option",{value:"female",children:"Female"}),(0,Pe.jsx)("option",{value:"male",children:"Male"})]}),o.gender&&(0,Pe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.gender})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Birthdate"}),(0,Pe.jsx)("input",{type:"date",name:"birthdate",value:r.birthdate,onChange:c,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300 ".concat(o.birthdate?"border-red-500":"border-gray-300")}),o.birthdate&&(0,Pe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.birthdate})]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Country"}),(0,Pe.jsxs)("select",{name:"country",value:r.country,onChange:c,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300 ".concat(o.country?"border-red-500":"border-gray-300"),children:[(0,Pe.jsx)("option",{value:"",children:"Select your country"}),(0,Pe.jsx)("option",{value:"US",children:"United States"}),(0,Pe.jsx)("option",{value:"UK",children:"United Kingdom"}),(0,Pe.jsx)("option",{value:"CA",children:"Canada"}),(0,Pe.jsx)("option",{value:"AU",children:"Australia"}),(0,Pe.jsx)("option",{value:"DE",children:"Germany"}),(0,Pe.jsx)("option",{value:"FR",children:"France"}),(0,Pe.jsx)("option",{value:"JP",children:"Japan"}),(0,Pe.jsx)("option",{value:"SG",children:"Singapore"}),(0,Pe.jsx)("option",{value:"HK",children:"Hong Kong"}),(0,Pe.jsx)("option",{value:"CH",children:"Switzerland"})]}),o.country&&(0,Pe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.country})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),(0,Pe.jsx)("textarea",{name:"address",value:r.address,onChange:c,rows:3,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300 ".concat(o.address?"border-red-500":"border-gray-300"),placeholder:"Enter your full address"}),o.address&&(0,Pe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.address})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,Pe.jsx)("input",{type:"email",name:"email",value:r.email,onChange:c,className:"w-full px-4 py-3 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300 ".concat(o.email?"border-red-500":"border-gray-300"),placeholder:"Enter your email address"}),o.email&&(0,Pe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.email})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone number"}),(0,Pe.jsxs)("div",{className:"flex",children:[(0,Pe.jsxs)("select",{className:"px-4 py-3 border border-r-0 border-gray-300 rounded-l-lg bg-gray-50",children:[(0,Pe.jsx)("option",{value:"+98",children:"+98"}),(0,Pe.jsx)("option",{value:"+1",children:"+1"}),(0,Pe.jsx)("option",{value:"+44",children:"+44"}),(0,Pe.jsx)("option",{value:"+61",children:"+61"}),(0,Pe.jsx)("option",{value:"+49",children:"+49"}),(0,Pe.jsx)("option",{value:"+33",children:"+33"}),(0,Pe.jsx)("option",{value:"+81",children:"+81"}),(0,Pe.jsx)("option",{value:"+65",children:"+65"}),(0,Pe.jsx)("option",{value:"+852",children:"+852"}),(0,Pe.jsx)("option",{value:"+41",children:"+41"})]}),(0,Pe.jsx)("input",{type:"tel",name:"phoneNumber",value:r.phoneNumber,onChange:c,className:"flex-1 px-4 py-3 border rounded-r-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors duration-300 ".concat(o.phoneNumber?"border-red-500":"border-gray-300"),placeholder:"Enter your phone number"})]}),o.phoneNumber&&(0,Pe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.phoneNumber})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Document"}),(0,Pe.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors duration-300",children:[(0,Pe.jsx)("input",{type:"file",name:"document",onChange:e=>{i(t=>(0,tt.A)((0,tt.A)({},t),{},{document:e.target.files[0]}))},accept:"image/*,.pdf",className:"hidden",id:"document-upload"}),(0,Pe.jsxs)("label",{htmlFor:"document-upload",className:"cursor-pointer",children:[(0,Pe.jsx)("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),(0,Pe.jsx)("p",{className:"text-gray-600 mb-2",children:"Click to upload document"}),(0,Pe.jsx)("p",{className:"text-sm text-gray-500",children:"PNG, JPG, PDF up to 10MB"})]})]}),o.document&&(0,Pe.jsx)("p",{className:"text-red-500 text-sm mt-1",children:o.document})]}),(0,Pe.jsx)("div",{className:"flex justify-end pt-6",children:(0,Pe.jsx)("button",{type:"submit",className:"bg-gray-900 text-white px-8 py-3 rounded-lg font-semibold hover:bg-gray-800 transition-colors duration-300",children:"Continue"})})]})]})})}):null},vN=e=>{let{isOpen:t,onClose:n}=e;const{sendMessage:r,chatMessages:i}=nA(),[o,a]=(0,s.useState)(""),[c,l]=(0,s.useState)(!1),u=(0,s.useRef)(null);(0,s.useEffect)(()=>{(()=>{var e;null===(e=u.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})})()},[i]);const h=e=>{if(!e)return"";return(e.toDate?e.toDate():new Date(e)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})};return(0,Pe.jsx)(sy,{children:t&&(0,Pe.jsx)(XE.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:n,children:(0,Pe.jsxs)(XE.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl w-full max-w-2xl mx-auto shadow-2xl h-[600px] flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Pe.jsx)("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Live Support"}),(0,Pe.jsx)("p",{className:"text-sm text-gray-500",children:"We're here to help you"})]})]}),(0,Pe.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:(0,Pe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Pe.jsxs)("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[0===i.length?(0,Pe.jsxs)("div",{className:"text-center text-gray-500 mt-8",children:[(0,Pe.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,Pe.jsx)("p",{children:"Start a conversation with our support team"})]}):i.map(e=>(0,Pe.jsx)("div",{className:"flex ".concat(e.isAdmin?"justify-start":"justify-end"),children:(0,Pe.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg ".concat(e.isAdmin?"bg-gray-100 text-gray-900":"bg-blue-600 text-white"),children:[(0,Pe.jsx)("p",{className:"text-sm",children:e.message}),(0,Pe.jsxs)("div",{className:"text-xs mt-1 flex items-center justify-between ".concat(e.isAdmin?"text-gray-500":"text-blue-100"),children:[(0,Pe.jsx)("span",{children:h(e.createdAt)}),e.isAutoReply&&(0,Pe.jsx)("span",{className:"text-xs opacity-75",children:"\ud83e\udd16 Auto"})]})]})},e.id)),(0,Pe.jsx)("div",{ref:u})]}),(0,Pe.jsx)("div",{className:"border-t border-gray-200 p-6",children:(0,Pe.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),o.trim()&&!c){l(!0);try{await r(o),a("")}catch(t){console.error("Error sending message:",t)}finally{l(!1)}}},className:"flex space-x-3",children:[(0,Pe.jsx)("input",{type:"text",value:o,onChange:e=>a(e.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:c}),(0,Pe.jsx)("button",{type:"submit",disabled:!o.trim()||c,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:c?(0,Pe.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,Pe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Pe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,Pe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]})})})};function wN(){var e,t,n,r,i;const[o,a]=(0,s.useState)("Options"),[c,l]=(0,s.useState)(!1),[u,h]=(0,s.useState)("deposit"),[d,f]=(0,s.useState)(""),[m,p]=(0,s.useState)("USDC"),[g,y]=(0,s.useState)(""),[v,w]=(0,s.useState)(""),[b,x]=(0,s.useState)(""),[S,E]=(0,s.useState)(!1),[A,N]=(0,s.useState)(""),[T,k]=(0,s.useState)(!1),[C,I]=(0,s.useState)(!1),_=ne(),{createDeposit:P,createWithdrawal:j,user:D}=nA(),{t:M}=Oe(),R=[{id:"BTC",name:"Bitcoin",symbol:"\u20bf",address:"bc1q009nsstau3mmzgzwz6vkjqw06tw3jukqfd0vhz",type:"Bitcoin"},{id:"ETH",name:"Ethereum",symbol:"\u039e",address:"0xAe7298dDa2AF52388aFde60160cD8ab0805Ed94D",type:"Ethereum"},{id:"USDC",name:"USD Coin",symbol:"$",address:"0xAe7298dDa2AF52388aFde60160cD8ab0805Ed94D",type:"Ethereum"},{id:"USDT",name:"Tether",symbol:"\u20ae",address:"0xAe7298dDa2AF52388aFde60160cD8ab0805Ed94D",type:"Ethereum"}],O=()=>R.find(e=>e.id===m),L=[{name:"Account verification",action:()=>k(!0)},{name:"Invite your friends",action:()=>_("/invite-friends")},{name:"Contact us",action:()=>I(!0)},{name:"Help center (FAQ)",action:()=>_("/help-center")},{name:"Notification",action:()=>_("/notifications")},{name:"Change language",action:()=>_("/language-settings")}];return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white text-gray-900",children:[(0,Pe.jsxs)("header",{className:"flex items-center justify-between px-2 py-2 bg-white border-b border-gray-200",children:[(0,Pe.jsxs)(Ce,{to:"/",className:"flex items-center space-x-2",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-gray-900 text-xl font-semibold",children:"My account"})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors cursor-pointer",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,Pe.jsx)(Ce,{to:"/notifications",className:"flex items-center justify-center",children:(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center hover:bg-gray-50 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})})]})]}),(0,Pe.jsxs)("main",{className:"px-1 pb-16",children:[(0,Pe.jsx)("div",{className:"mt-3",children:(0,Pe.jsxs)("button",{className:"w-full bg-white border-2 border-gray-800 rounded-lg px-2 py-1 flex items-center justify-between",children:[(0,Pe.jsx)("span",{className:"text-gray-900 font-medium text-sm",children:"CeDE8D"}),(0,Pe.jsx)("svg",{className:"w-3 h-3 text-gray-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),(0,Pe.jsxs)("div",{className:"mt-3 bg-gray-800 rounded-lg p-3 relative overflow-hidden",children:[(0,Pe.jsx)("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-500/10 rounded-full -translate-y-16 translate-x-16"}),(0,Pe.jsx)("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-purple-500/10 rounded-full translate-y-12 -translate-x-12"}),(0,Pe.jsxs)("div",{className:"relative z-10",children:[(0,Pe.jsx)("div",{className:"text-center mb-3",children:(0,Pe.jsx)("h1",{className:"text-2xl font-bold text-white",children:"0.00 USD"})}),(0,Pe.jsxs)("div",{className:"space-y-2",children:[(0,Pe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Pe.jsxs)("button",{onClick:()=>l(!0),className:"text-orange-400 text-xs hover:text-orange-300 transition-colors cursor-pointer underline hover:no-underline flex items-center space-x-1",children:[(0,Pe.jsx)("span",{children:"Balance:"}),(0,Pe.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),(0,Pe.jsx)("span",{className:"text-white text-sm",children:D?"$".concat((null===(e=D.balance)||void 0===e?void 0:e.toFixed(2))||"0.00"):"0.00 USD"})]}),(0,Pe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Pe.jsxs)("button",{onClick:()=>_("/loan"),className:"text-orange-400 text-xs hover:text-orange-300 transition-colors cursor-pointer underline hover:no-underline flex items-center space-x-1",children:[(0,Pe.jsx)("span",{children:"Loan:"}),(0,Pe.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),(0,Pe.jsx)("span",{className:"text-white text-sm",children:"0.00 USD"})]}),(0,Pe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Pe.jsx)("span",{className:"text-white text-sm",children:"Margin Used:"}),(0,Pe.jsx)("span",{className:"text-white text-sm",children:"0.00 USD"})]}),(0,Pe.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Pe.jsx)("span",{className:"text-white text-sm",children:"Expected Profit:"}),(0,Pe.jsx)("span",{className:"text-white text-sm",children:"0.00 USD"})]})]})]})]}),(0,Pe.jsxs)("div",{className:"mt-4",children:[(0,Pe.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"Order"}),(0,Pe.jsx)("div",{className:"bg-gray-800 rounded-lg px-1 py-1 flex items-center justify-between mb-3",children:["All orders","Options","Smart","Static Inco"].map(e=>(0,Pe.jsx)("button",{onClick:()=>a(e),className:"px-2 py-1 rounded-md text-xs font-medium transition-all ".concat(o===e?"bg-white text-gray-900":"text-gray-300 hover:text-gray-200"),children:e},e))}),(0,Pe.jsx)("div",{className:"text-center py-8",children:(0,Pe.jsx)("p",{className:"text-gray-600",children:"No more data"})})]}),(0,Pe.jsxs)("div",{className:"mt-4",children:[(0,Pe.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-3",children:"Settings"}),(0,Pe.jsx)("div",{className:"space-y-1.5",children:L.map((e,t)=>(0,Pe.jsxs)("button",{onClick:e.action,className:"w-full bg-gray-800 rounded-lg px-2 py-2 flex items-center justify-between hover:bg-gray-700 transition-colors",children:[(0,Pe.jsx)("span",{className:"text-white font-medium",children:e.name}),(0,Pe.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},t))})]})]}),(0,Pe.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 z-50 bg-white border-t border-gray-200",children:(0,Pe.jsxs)("div",{className:"bg-gray-800 mx-1 mb-1 rounded-lg shadow-2xl px-2 py-1.5 flex items-center justify-between",children:[(0,Pe.jsxs)(Ce,{to:"/",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Home"})]}),(0,Pe.jsxs)(Ce,{to:"/market",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Market"})]}),(0,Pe.jsxs)(Ce,{to:"/smart-trading",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Smart"})]}),(0,Pe.jsxs)(Ce,{to:"/loan",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Pe.jsx)("span",{className:"text-xs text-gray-300",children:"Loan"})]}),(0,Pe.jsxs)(Ce,{to:"/account",className:"flex flex-col items-center space-y-1 flex-1",children:[(0,Pe.jsx)("svg",{className:"w-6 h-6 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),(0,Pe.jsx)("span",{className:"text-xs text-white",children:"Account"})]})]})}),c&&(0,Pe.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Pe.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md max-h-[90vh] overflow-y-auto",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,Pe.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:"Balance Management"}),(0,Pe.jsx)("button",{onClick:()=>l(!1),className:"text-gray-500 hover:text-gray-700",children:(0,Pe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Pe.jsxs)("div",{className:"flex mb-3 bg-gray-100 rounded-lg p-1 mx-4 mt-4",children:[(0,Pe.jsx)("button",{onClick:()=>h("deposit"),className:"flex-1 py-2 px-3 rounded-md font-medium text-sm transition-colors ".concat("deposit"===u?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Deposit"}),(0,Pe.jsx)("button",{onClick:()=>h("withdrawal"),className:"flex-1 py-2 px-3 rounded-md font-medium text-sm transition-colors ".concat("withdrawal"===u?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Withdraw"})]}),(0,Pe.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3 mx-4 mb-4",children:[(0,Pe.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Current Balance"}),(0,Pe.jsxs)("div",{className:"text-lg font-bold text-gray-900",children:["$",(null===D||void 0===D||null===(t=D.balance)||void 0===t?void 0:t.toFixed(2))||"0.00"," USD"]})]}),(0,Pe.jsx)("div",{className:"px-4 pb-4",children:(0,Pe.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),alert("MobileAccount handleBalanceSubmit called! Amount: "+d+", Currency: "+m+", TxHash: "+g),E(!0),x(""),console.log("MobileAccount - Submit data:",{amount:d,selectedCurrency:m,txHash:g,withdrawalAddress:v}),console.log("MobileAccount - Active tab:",u),console.log("MobileAccount - User:",D),console.log("MobileAccount - State check:",{amountType:typeof d,amountValue:d,selectedCurrencyType:typeof m,selectedCurrencyValue:m,txHashType:typeof g,txHashValue:g}),!D)return x("User not found. Please refresh the page."),void E(!1);try{"deposit"===u?(console.log("MobileAccount - Calling createDeposit with:",parseFloat(d),m,g),console.log("MobileAccount - Amount details:",{amount:d,amountType:typeof d,parsedAmount:parseFloat(d),isNaN:isNaN(parseFloat(d))}),await P(parseFloat(d),m,g),alert("Deposit request submitted successfully!")):(console.log("MobileAccount - Calling createWithdrawal with:",parseFloat(d),m,v),await j(parseFloat(d),m,v),alert("Withdrawal request submitted successfully!")),f(""),y(""),w(""),l(!1)}catch(t){console.error("MobileAccount - Error:",t),x(t.message||"An error occurred")}finally{E(!1)}},className:"space-y-4",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),(0,Pe.jsx)("div",{className:"grid grid-cols-2 gap-2",children:R.map(e=>(0,Pe.jsx)("button",{type:"button",onClick:()=>p(e.id),className:"p-3 rounded-lg border text-sm font-medium transition-colors ".concat(m===e.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-300 bg-white text-gray-700 hover:bg-gray-50"),children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Pe.jsx)("span",{className:"text-lg",children:e.symbol}),(0,Pe.jsx)("span",{children:e.id})]})},e.id))})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount"}),(0,Pe.jsx)("input",{type:"number",step:"0.01",min:"0",value:d,onChange:e=>f(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"0.00",required:!0})]}),"deposit"===u&&(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Hash"}),(0,Pe.jsx)("input",{type:"text",value:g,onChange:e=>y(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter transaction hash",required:!0})]}),"withdrawal"===u&&(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Withdrawal Address"}),(0,Pe.jsx)("input",{type:"text",value:v,onChange:e=>w(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter withdrawal address",required:!0})]}),"deposit"===u&&(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Address"}),(0,Pe.jsxs)("div",{className:"bg-gray-50 rounded-lg p-3",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Pe.jsx)("span",{className:"text-sm font-medium text-gray-700",children:null===(n=O())||void 0===n?void 0:n.name}),(0,Pe.jsx)("button",{type:"button",onClick:()=>{var e;return(async(e,t)=>{try{await navigator.clipboard.writeText(e),N(t),setTimeout(()=>N(""),2e3)}catch(n){console.error("Failed to copy: ",n)}})(null===(e=O())||void 0===e?void 0:e.address,m)},className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:A===m?"Copied!":"Copy"})]}),(0,Pe.jsx)("div",{className:"text-xs text-gray-600 break-all mb-2",children:null===(r=O())||void 0===r?void 0:r.address}),(0,Pe.jsx)("div",{className:"flex justify-center",children:(0,Pe.jsx)(gN,{value:null===(i=O())||void 0===i?void 0:i.address,size:120})})]})]}),b&&(0,Pe.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:(0,Pe.jsx)("p",{className:"text-red-600 text-sm",children:b})}),(0,Pe.jsx)("button",{type:"submit",disabled:S,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:S?"Processing...":"".concat("deposit"===u?"Submit Deposit":"Submit Withdrawal")})]})})]})}),(0,Pe.jsx)(yN,{isOpen:T,onClose:()=>k(!1)}),(0,Pe.jsx)(vN,{isOpen:C,onClose:()=>I(!1)})]})}function bN(){const{notifications:e,unreadCount:t,markAsRead:n,markAllAsRead:r,clearNotifications:i}=(()=>{const e=(0,s.useContext)(sA);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e})(),o=e=>{switch(e){case"pending":return"text-yellow-600 bg-yellow-100";case"approved":return"text-green-600 bg-green-100";case"rejected":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},a=e=>{switch(e){case"pending":return(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})});case"approved":return(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"rejected":return(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});default:return null}};return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white text-gray-900",children:[(0,Pe.jsxs)("header",{className:"flex items-center justify-between px-4 py-3 bg-white border-b border-gray-200",children:[(0,Pe.jsx)(Ce,{to:"/",className:"mr-4",children:(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})})}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Pe.jsx)("div",{className:"w-8 h-8 rounded-full border border-gray-300 flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),(0,Pe.jsx)("h1",{className:"text-gray-900 text-lg font-bold",children:"Notifications"}),t>0&&(0,Pe.jsx)("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:t})]}),e.length>0&&(0,Pe.jsxs)("div",{className:"flex space-x-2",children:[(0,Pe.jsx)("button",{onClick:r,className:"text-blue-600 text-sm font-medium",children:"Mark all read"}),(0,Pe.jsx)("button",{onClick:i,className:"text-red-600 text-sm font-medium",children:"Clear all"})]})]}),(0,Pe.jsx)("main",{className:"px-4 py-4",children:0===e.length?(0,Pe.jsx)("div",{className:"flex items-center justify-center h-96",children:(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gray-100 flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})}),(0,Pe.jsx)("p",{className:"text-gray-500 text-sm",children:"No notifications yet"})]})}):(0,Pe.jsx)("div",{className:"space-y-3",children:e.map(e=>{var t;return(0,Pe.jsx)("div",{className:"p-4 rounded-lg border ".concat(e.read?"bg-gray-50 border-gray-200":"bg-white border-gray-300 shadow-sm"),onClick:()=>n(e.id),children:(0,Pe.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Pe.jsx)("div",{className:"p-2 rounded-full ".concat(o(e.status)),children:a(e.status)}),(0,Pe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pe.jsx)("h3",{className:"text-sm font-medium ".concat(e.read?"text-gray-600":"text-gray-900"),children:e.title}),!e.read&&(0,Pe.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]}),(0,Pe.jsx)("p",{className:"text-sm mt-1 ".concat(e.read?"text-gray-500":"text-gray-700"),children:e.message}),(0,Pe.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:null!==(t=e.timestamp)&&void 0!==t&&t.toDate?e.timestamp.toDate().toLocaleString():new Date(e.timestamp).toLocaleString()})]})]})},e.id)})})})]})}const xN=e=>{let{isOpen:t,onClose:n}=e;const{createDeposit:r}=nA(),[i,o]=(0,s.useState)("BTC"),[a,c]=(0,s.useState)(""),[l,u]=(0,s.useState)(""),[h,d]=(0,s.useState)(!1),[f,m]=(0,s.useState)(""),p=[{symbol:"BTC",name:"Bitcoin",logo:"https://assets.coingecko.com/coins/images/1/large/bitcoin.png",minDeposit:"0.001",fee:"0.0005"},{symbol:"ETH",name:"Ethereum",logo:"https://assets.coingecko.com/coins/images/279/large/ethereum.png",minDeposit:"0.01",fee:"0.005"},{symbol:"USDC",name:"USD Coin",logo:"https://assets.coingecko.com/coins/images/6319/large/USD_Coin_icon.png",minDeposit:"10",fee:"1"},{symbol:"USDT",name:"Tether",logo:"https://assets.coingecko.com/coins/images/325/large/Tether.png",minDeposit:"10",fee:"1"}],g=p.find(e=>e.symbol===i),y=()=>{h||(n(),c(""))};return(0,Pe.jsx)(sy,{children:t&&(0,Pe.jsx)(XE.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:y,children:(0,Pe.jsxs)(XE.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl p-8 w-full max-w-md mx-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,Pe.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Deposit Funds"}),(0,Pe.jsx)("button",{onClick:y,disabled:h,className:"text-gray-400 hover:text-gray-600 transition-colors duration-200 disabled:opacity-50",children:(0,Pe.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Pe.jsxs)("div",{className:"mb-6",children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Select Currency"}),(0,Pe.jsx)("div",{className:"grid grid-cols-2 gap-3",children:p.map(e=>(0,Pe.jsx)("button",{onClick:()=>o(e.symbol),disabled:h,className:"p-4 rounded-lg border-2 transition-all duration-200 ".concat(i===e.symbol?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"," disabled:opacity-50"),children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Pe.jsx)("img",{src:e.logo,alt:e.name,className:"w-8 h-8 rounded-full",onError:e=>{e.target.style.display="none"}}),(0,Pe.jsxs)("div",{className:"text-left",children:[(0,Pe.jsx)("div",{className:"font-medium text-gray-900",children:e.symbol}),(0,Pe.jsx)("div",{className:"text-sm text-gray-500",children:e.name})]})]})},e.symbol))})]}),(0,Pe.jsxs)("div",{className:"mb-6",children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Amount"}),(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("input",{type:"number",value:a,onChange:e=>c(e.target.value),placeholder:"Enter amount in ".concat(i),disabled:h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"}),(0,Pe.jsx)("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 text-sm",children:i})]}),(0,Pe.jsxs)("div",{className:"mt-2 text-sm text-gray-500",children:["Minimum: ",g.minDeposit," ",i]})]}),(0,Pe.jsxs)("div",{className:"mb-6",children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Hash"}),(0,Pe.jsx)("input",{type:"text",value:l,onChange:e=>u(e.target.value),placeholder:"Enter transaction hash from your wallet",disabled:h,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed"}),(0,Pe.jsx)("div",{className:"mt-2 text-sm text-gray-500",children:"Enter the transaction hash from your wallet after sending the funds"})]}),(0,Pe.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[(0,Pe.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Deposit Information"}),(0,Pe.jsxs)("div",{className:"space-y-2 text-sm text-gray-600",children:[(0,Pe.jsxs)("div",{className:"flex justify-between",children:[(0,Pe.jsx)("span",{children:"Currency:"}),(0,Pe.jsx)("span",{className:"font-medium",children:i})]}),(0,Pe.jsxs)("div",{className:"flex justify-between",children:[(0,Pe.jsx)("span",{children:"Network Fee:"}),(0,Pe.jsxs)("span",{className:"font-medium",children:[g.fee," ",i]})]}),(0,Pe.jsxs)("div",{className:"flex justify-between",children:[(0,Pe.jsx)("span",{children:"Estimated Time:"}),(0,Pe.jsx)("span",{className:"font-medium",children:"BTC"===i?"10-30 min":"ETH"===i?"2-5 min":"1-3 min"})]})]})]}),f&&(0,Pe.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 mb-6",children:(0,Pe.jsx)("p",{className:"text-red-800 text-sm",children:f})}),(0,Pe.jsxs)("div",{className:"flex space-x-3",children:[(0,Pe.jsx)("button",{onClick:y,disabled:h,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),(0,Pe.jsx)("button",{onClick:async()=>{if(alert("DepositModal handleDeposit called! Amount: "+a+", Currency: "+i+", TxHash: "+l),!a||parseFloat(a)<parseFloat(g.minDeposit))m("Minimum deposit amount is ".concat(g.minDeposit," ").concat(i));else if(l){d(!0),m("");try{await r(parseFloat(a),i,l),alert("Deposit of ".concat(a," ").concat(i," submitted successfully! It will be reviewed by admin.")),n(),c(""),u("")}catch(f){m(f.message)}finally{d(!1)}}else m("Please enter the transaction hash")},disabled:h||!a,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:h?(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,Pe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Pe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Deposit"})]}),(0,Pe.jsx)("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:(0,Pe.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,Pe.jsx)("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}),(0,Pe.jsxs)("div",{className:"text-sm text-yellow-800",children:[(0,Pe.jsx)("p",{className:"font-medium",children:"Important:"}),(0,Pe.jsxs)("p",{children:["Only send ",i," to this address. Sending other cryptocurrencies may result in permanent loss."]})]})]})})]})})})},SN=e=>{var t,n,r,i,o,a;let{isOpen:c,onClose:l}=e;const[u,h]=(0,s.useState)("deposit"),[d,f]=(0,s.useState)(""),[m,p]=(0,s.useState)("USDC"),[g,y]=(0,s.useState)(""),[v,w]=(0,s.useState)(""),[b,x]=(0,s.useState)(""),[S,E]=(0,s.useState)(!1),[A,N]=(0,s.useState)(""),{createDeposit:T,createWithdrawal:k,user:C}=nA(),I=[{id:"BTC",name:"Bitcoin",symbol:"\u20bf",address:"bc1q009nsstau3mmzgzwz6vkjqw06tw3jukqfd0vhz",type:"Bitcoin"},{id:"ETH",name:"Ethereum",symbol:"\u039e",address:"0xAe7298dDa2AF52388aFde60160cD8ab0805Ed94D",type:"Ethereum"},{id:"USDC",name:"USD Coin",symbol:"$",address:"0xAe7298dDa2AF52388aFde60160cD8ab0805Ed94D",type:"ERC20"},{id:"USDT",name:"Tether",symbol:"$",address:"0xAe7298dDa2AF52388aFde60160cD8ab0805Ed94D",type:"ERC20"}],_=()=>I.find(e=>e.id===m);return c?(0,Pe.jsx)(sy,{children:(0,Pe.jsx)(XE.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",onClick:l,children:(0,Pe.jsxs)(XE.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl p-3 sm:p-4 w-full max-w-sm sm:max-w-md mx-auto max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Pe.jsx)("h2",{className:"text-base sm:text-lg font-bold text-gray-900",children:"Balance Management"}),(0,Pe.jsx)("button",{onClick:l,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Pe.jsxs)("div",{className:"flex mb-3 bg-gray-100 rounded-lg p-1",children:[(0,Pe.jsx)("button",{onClick:()=>h("deposit"),className:"flex-1 py-1 sm:py-2 px-2 sm:px-3 rounded-md font-medium text-xs sm:text-sm transition-colors ".concat("deposit"===u?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Deposit"}),(0,Pe.jsx)("button",{onClick:()=>h("withdrawal"),className:"flex-1 py-1 sm:py-2 px-2 sm:px-3 rounded-md font-medium text-xs sm:text-sm transition-colors ".concat("withdrawal"===u?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"),children:"Withdraw"})]}),(0,Pe.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2 sm:p-3 mb-3",children:[(0,Pe.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Current Balance"}),(0,Pe.jsxs)("div",{className:"text-base sm:text-lg font-bold text-gray-900",children:["$",(null===C||void 0===C||null===(t=C.balance)||void 0===t?void 0:t.toFixed(2))||"0.00"," USD"]})]}),(0,Pe.jsxs)("div",{className:"space-y-3",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Amount (","deposit"===u?"to deposit":"to withdraw",")"]}),(0,Pe.jsx)("input",{type:"number",value:d,onChange:e=>{console.log("Amount input changed:",e.target.value),f(e.target.value)},placeholder:"0.00",className:"w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm [appearance:textfield] [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",min:"0",step:"0.01"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Currency"}),(0,Pe.jsx)("div",{className:"grid grid-cols-2 gap-1",children:I.map(e=>(0,Pe.jsxs)("button",{onClick:()=>{console.log("Currency selected:",e.id),p(e.id)},className:"p-1 sm:p-2 rounded-lg border-2 transition-colors text-xs ".concat(m===e.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:[(0,Pe.jsxs)("div",{className:"font-medium",children:[e.symbol," ",e.id]}),(0,Pe.jsx)("div",{className:"text-xs text-gray-500",children:e.name})]},e.id))})]}),"deposit"===u&&(0,Pe.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-2",children:[(0,Pe.jsxs)("div",{className:"text-xs font-medium text-blue-900 mb-2",children:["Deposit to ",null===(n=_())||void 0===n?void 0:n.name," Address"]}),(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row items-start space-y-2 sm:space-y-0 sm:space-x-2",children:[(0,Pe.jsx)("div",{className:"bg-white p-1 rounded mx-auto sm:mx-0",children:(0,Pe.jsx)(gN,{value:(null===(r=_())||void 0===r?void 0:r.address)||"",size:60,level:"M"})}),(0,Pe.jsxs)("div",{className:"flex-1 w-full",children:[(0,Pe.jsxs)("div",{className:"text-xs text-gray-600 mb-1",children:[null===(i=_())||void 0===i?void 0:i.type," Address:"]}),(0,Pe.jsx)("div",{className:"bg-white border border-gray-200 rounded p-2 mb-2",children:(0,Pe.jsx)("div",{className:"text-xs font-mono text-gray-800 break-all",children:null===(o=_())||void 0===o?void 0:o.address})}),(0,Pe.jsx)("button",{onClick:()=>{var e;return(async(e,t)=>{try{await navigator.clipboard.writeText(e),N(t),setTimeout(()=>N(""),2e3)}catch(n){console.error("Failed to copy: ",n)}})((null===(e=_())||void 0===e?void 0:e.address)||"",m)},className:"w-full py-1 px-2 rounded font-medium text-xs transition-colors flex items-center justify-center space-x-1 ".concat(A===m?"bg-green-100 text-green-700 border border-green-300":"bg-blue-100 text-blue-700 hover:bg-blue-200"),children:A===m?(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,Pe.jsx)("span",{children:"Copied!"})]}):(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),(0,Pe.jsx)("span",{children:"Copy"})]})})]})]}),(0,Pe.jsxs)("div",{className:"mt-2 text-xs text-blue-700",children:[(0,Pe.jsxs)("p",{children:["\u2022 Send only ",null===(a=_())||void 0===a?void 0:a.id," to this address"]}),(0,Pe.jsx)("p",{children:"\u2022 Minimum deposit: $1000 USD equivalent"}),(0,Pe.jsx)("p",{children:"\u2022 Double-check the address before sending"})]})]}),"deposit"===u&&(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Transaction Hash *"}),(0,Pe.jsx)("input",{type:"text",value:g,onChange:e=>{console.log("Transaction hash input changed:",e.target.value),y(e.target.value)},placeholder:"Enter transaction hash",className:"w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),"withdrawal"===u&&(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Withdrawal Address *"}),(0,Pe.jsx)("input",{type:"text",value:v,onChange:e=>w(e.target.value),placeholder:"Enter wallet address",className:"w-full px-2 sm:px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"})]}),b&&(0,Pe.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-2",children:(0,Pe.jsx)("div",{className:"text-red-600 text-xs",children:b})}),(0,Pe.jsx)("button",{onClick:()=>{"deposit"===u?(async()=>{if(alert("BalanceModal handleDeposit called! Amount: "+d+", Currency: "+m+", TxHash: "+g),console.log("BalanceModal - State values:",{amount:d,selectedCurrency:m,txHash:g,activeTab:u,currencies:I.map(e=>e.id)}),d&&g)if(C){console.log("BalanceModal - Deposit data:",{amount:d,selectedCurrency:m,txHash:g}),console.log("BalanceModal - User:",C),E(!0);try{await T(parseFloat(d),m,g),alert("Deposit request submitted successfully!"),l(),f(""),y(""),x("")}catch(b){console.error("BalanceModal - Deposit error:",b),x("Failed to submit deposit request")}finally{E(!1)}}else x("User not found. Please refresh the page.");else x("Please fill in all required fields")})():(async()=>{if(d&&v)if(parseFloat(d)>((null===C||void 0===C?void 0:C.balance)||0))x("Insufficient balance");else{E(!0);try{await k(parseFloat(d),m,v),alert("Withdrawal request submitted successfully!"),l(),f(""),w(""),x("")}catch(b){x("Failed to submit withdrawal request")}finally{E(!1)}}else x("Please fill in all required fields")})()},disabled:S,className:"w-full py-2 sm:py-3 px-3 sm:px-4 rounded-lg font-medium text-xs sm:text-sm transition-colors ".concat("deposit"===u?"bg-green-600 hover:bg-green-700 text-white":"bg-blue-600 hover:bg-blue-700 text-white"," ").concat(S?"opacity-50 cursor-not-allowed":""),children:S?"Processing...":"".concat("deposit"===u?"Submit Deposit":"Submit Withdrawal")})]}),(0,Pe.jsx)("div",{className:"mt-3 text-xs text-gray-500",children:"deposit"===u?(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{children:"\u2022 Deposits are processed after blockchain confirmation"}),(0,Pe.jsx)("p",{children:"\u2022 Minimum deposit: $1000 USD equivalent"}),(0,Pe.jsx)("p",{children:"\u2022 Processing time: 10-30 minutes"})]}):(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{children:"\u2022 Processing time: 1-24 hours"}),(0,Pe.jsx)("p",{children:"\u2022 Network fees may apply"})]})})]})})}):null},EN=()=>{var e;const[t,n]=(0,s.useState)("All orders"),[r,i]=(0,s.useState)(""),[o,a]=(0,s.useState)(!1),[c,l]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),[d,f]=(0,s.useState)(!1),[m,p]=(0,s.useState)(0),[g,y]=(0,s.useState)(!1),[v,w]=(0,s.useState)(0),[b,x]=(0,s.useState)(!1),{t:S}=Oe(),E=ne(),{isConnected:A,account:N,walletType:T,formatAddress:k}=Xf(),{user:C,userTrades:I,updateUserBalance:_}=nA();(0,s.useEffect)(()=>{if(N){var e;const t=(null===N||void 0===N||null===(e=N.slice(-6))||void 0===e?void 0:e.toUpperCase())||"";i(t)}else i("")},[N]),(0,s.useEffect)(()=>{const e=()=>{l(!0)};return window.addEventListener("openDepositModal",e),()=>window.removeEventListener("openDepositModal",e)},[]);const P=(0,s.useCallback)(()=>I&&0!==I.length?I.reduce((e,t)=>{if("completed"===t.status||"closed"===t.status)return e+(t.profit||0);if("Active"===t.status||"active"===t.status){var n,r;const s=t.amount||t.orderAmount||0,i=parseInt(null===(n=t.timeframe)||void 0===n?void 0:n.split(" ")[0])||1,o=null!==(r=t.createdAt)&&void 0!==r&&r.toDate?t.createdAt.toDate():new Date(t.createdAt),a=(new Date-o)/36e5/24;let c=0;return 1===i?c=.05*Math.min(a,1):7===i?c=.35*Math.min(a/7,1):30===i?c=1.5*Math.min(a/30,1):90===i&&(c=4.5*Math.min(a/90,1)),e+s*c}return e},0):0,[I]);(0,s.useEffect)(()=>{const e=async()=>{y(!0);const e=P(),t=e-v;if(t>0&&C&&N)try{await _(N,t,"profit"),console.log("Auto-updated balance: +".concat(t.toFixed(2)," USD from profit")),x(!0),setTimeout(()=>x(!1),3e3)}catch(n){console.error("Error updating balance from profit:",n)}p(e),w(e),setTimeout(()=>y(!1),1e3)};e();const t=setInterval(e,5e3);return()=>clearInterval(t)},[I,C,N,v,P,_]);const j="All orders"===t?I||[]:"Smart"===t?(I||[]).filter(e=>"Smart Trading"===e.type):"Options"===t?(I||[]).filter(e=>"Options"===e.type):"Static Income"===t?(I||[]).filter(e=>"Static Income"===e.type):[],D=m,M=I?I.filter(e=>(e.profit||e.totalRevenue||0)>0).length:0,R=[{name:S("verification"),action:()=>a(!0)},{name:S("inviteFriends"),action:()=>window.location.href="/invite-friends"},{name:S("liveChat"),action:()=>f(!0)},{name:S("helpCenter"),action:()=>window.location.href="/help-center"},{name:S("notifications"),action:()=>window.location.href="/notifications"},{name:S("language"),action:()=>window.location.href="/language-settings"}],O={products:["Markets","Investment & Lending","Smart Trading"],company:["About Us","License Supervision","Help Center","Online Support"],policies:["Terms & Conditions","Privacy Policy"]};return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white pt-16 sm:pt-20",children:[(0,Pe.jsxs)("div",{className:"container-max py-4 sm:py-6 lg:py-8",children:[(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-4 sm:mb-6 lg:mb-8",children:(0,Pe.jsxs)("button",{className:"bg-gray-800 text-white px-3 sm:px-4 py-2 rounded-lg flex items-center space-x-2 hover:bg-gray-700 transition-colors duration-300",children:[(0,Pe.jsx)("span",{className:"font-medium text-sm sm:text-base",children:r}),(0,Pe.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"mb-6 sm:mb-8 lg:mb-12",children:(0,Pe.jsxs)("div",{className:"bg-gray-800 rounded-xl sm:rounded-2xl p-4 sm:p-6 lg:p-8 relative overflow-hidden shadow-2xl",children:[(0,Pe.jsx)("div",{className:"absolute right-0 top-0 w-16 sm:w-24 lg:w-32 h-full bg-gradient-to-l from-green-500/20 to-purple-500/20"}),(0,Pe.jsxs)("div",{className:"relative z-10 mb-4 sm:mb-6 lg:mb-8",children:[(0,Pe.jsxs)("div",{className:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-2 flex flex-col sm:flex-row sm:items-center",children:[(0,Pe.jsx)("span",{children:null!==C&&void 0!==C&&C.balance?"".concat(C.balance.toFixed(2)," USD"):"0.00 USD"}),b&&(0,Pe.jsxs)("div",{className:"mt-2 sm:mt-0 sm:ml-3 flex items-center text-green-400 text-xs sm:text-sm",children:[(0,Pe.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Updated from profit"]})]}),A&&(0,Pe.jsxs)("div",{className:"text-xs sm:text-sm text-gray-300",children:["Connected: ",k(N)," (",T,")"]})]}),(0,Pe.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4 sm:gap-6 relative z-10",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("button",{onClick:()=>h(!0),className:"text-blue-400 text-xs sm:text-sm mb-2 hover:text-blue-300 transition-colors duration-300 cursor-pointer underline hover:no-underline flex items-center space-x-1",children:[(0,Pe.jsxs)("span",{children:[S("balance"),":"]}),(0,Pe.jsx)("svg",{className:"w-2 h-2 sm:w-3 sm:h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),(0,Pe.jsx)("div",{className:"bg-gray-700 px-2 sm:px-3 py-2 rounded-lg text-white font-medium text-sm sm:text-base",children:C?"$".concat((null===(e=C.balance)||void 0===e?void 0:e.toFixed(2))||"0.00"):"0.00 USD"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("button",{onClick:()=>E("/loan"),className:"text-blue-400 text-xs sm:text-sm mb-2 hover:text-blue-300 transition-colors duration-300 cursor-pointer underline hover:no-underline flex items-center space-x-1",children:[(0,Pe.jsx)("span",{children:"Loan:"}),(0,Pe.jsx)("svg",{className:"w-2 h-2 sm:w-3 sm:h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]}),(0,Pe.jsx)("div",{className:"bg-gray-700 px-2 sm:px-3 py-2 rounded-lg text-white font-medium text-sm sm:text-base",children:"0.00 USD"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("div",{className:"text-gray-300 text-xs sm:text-sm mb-2",children:"Margin Used:"}),(0,Pe.jsx)("div",{className:"text-white font-medium text-sm sm:text-base",children:"0.00 USD"})]}),(0,Pe.jsxs)("div",{className:"sm:col-span-2 lg:col-span-1",children:[(0,Pe.jsxs)("div",{className:"text-gray-300 text-xs sm:text-sm mb-2 flex items-center",children:["Total Profit:",g&&(0,Pe.jsx)("div",{className:"ml-2 w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),(0,Pe.jsxs)("div",{className:"font-medium text-sm sm:text-base ".concat(D>=0?"text-green-400":"text-red-400"),children:[D>=0?"+":"",D.toFixed(2)," USD"]}),(0,Pe.jsxs)("div",{className:"text-gray-400 text-xs mt-1",children:[M," profitable trades"]}),(0,Pe.jsx)("div",{className:"text-gray-500 text-xs mt-1",children:b&&(0,Pe.jsx)("span",{className:"text-green-400",children:"\u2022 Balance auto-updated"})})]})]})]})}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-6 sm:mb-8 lg:mb-12",children:[(0,Pe.jsx)("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Order"}),(0,Pe.jsx)("div",{className:"flex flex-wrap gap-1 sm:gap-2 mb-4 sm:mb-6",children:["All orders","Options","Smart","Static Income"].map(e=>(0,Pe.jsx)("button",{onClick:()=>n(e),className:"px-3 sm:px-4 lg:px-6 py-2 sm:py-3 rounded-lg font-medium text-xs sm:text-sm lg:text-base transition-all duration-300 whitespace-nowrap ".concat(t===e?"bg-gray-300 text-gray-900":"bg-gray-800 text-white hover:bg-gray-700"),children:e},e))}),(0,Pe.jsx)("div",{className:"space-y-3 sm:space-y-4",children:j.length>0?j.map((e,t)=>{var n,r,s,i,o,a,c,l;return(0,Pe.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6",children:[(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start mb-3 sm:mb-4 space-y-2 sm:space-y-0",children:[(0,Pe.jsxs)("div",{className:"text-xs sm:text-sm text-gray-500",children:["#",e.id?e.id.slice(-8):"ORDER-".concat(t+1)]}),(0,Pe.jsxs)("div",{className:"text-base sm:text-lg font-semibold text-gray-900",children:[(null===(n=e.amount)||void 0===n?void 0:n.toFixed(2))||"0.00"," USD"]})]}),(0,Pe.jsxs)("div",{className:"space-y-2 sm:space-y-3",children:[(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-2 sm:space-y-0",children:[(0,Pe.jsx)("div",{className:"font-bold text-gray-900 text-sm sm:text-base",children:e.symbol||"N/A"}),(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-1 sm:space-y-0 sm:space-x-2",children:[(0,Pe.jsxs)("span",{className:"text-xs sm:text-sm text-gray-600",children:[e.direction||"Up"," ",e.timeframe||"1 Day"]}),(0,Pe.jsxs)("span",{className:"text-green-600 font-semibold text-sm sm:text-base",children:[(null===(r=e.profit)||void 0===r?void 0:r.toFixed(2))||"0.00"," USD"]})]})]}),(0,Pe.jsxs)("div",{className:"text-xs sm:text-sm text-gray-600 space-y-1",children:[(0,Pe.jsxs)("div",{children:["Open: ",(null===(s=e.openPrice)||void 0===s?void 0:s.toFixed(4))||"0.0000"]}),(0,Pe.jsxs)("div",{children:["Close: ",(null===(i=e.closePrice)||void 0===i?void 0:i.toFixed(4))||"Pending"]}),(0,Pe.jsxs)("div",{children:["Start time: ",e.startTime?new Date(e.startTime).toLocaleString():"N/A"]}),(0,Pe.jsxs)("div",{children:["Expiration time: ",e.endTime?new Date(e.endTime).toLocaleString():"N/A"]}),(0,Pe.jsxs)("div",{children:["Run time: ",e.runTime||"Calculating..."]})]}),"Smart Trading"===e.type&&(0,Pe.jsxs)("div",{className:"mt-3 sm:mt-4 pt-3 sm:pt-4 border-t border-gray-100",children:[(0,Pe.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 text-xs sm:text-sm",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("div",{className:"text-gray-600",children:"Transaction:"}),(0,Pe.jsx)("div",{className:"font-medium",children:e.symbol||"N/A"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("div",{className:"text-gray-600",children:"Cycle:"}),(0,Pe.jsx)("div",{className:"font-medium",children:e.timeframe||"1 Day"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("div",{className:"text-gray-600",children:"Daily Ror:"}),(0,Pe.jsx)("div",{className:"font-medium",children:e.dailyRor||"2.5%-3.0%"})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("div",{className:"text-gray-600",children:"Amount:"}),(0,Pe.jsxs)("div",{className:"font-medium",children:[(null===(o=e.amount)||void 0===o?void 0:o.toFixed(2))||"0.00"," USD"]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("div",{className:"text-gray-600",children:"Today's Earnings:"}),(0,Pe.jsxs)("div",{className:"font-medium text-green-600",children:[(null===(a=e.todayEarnings)||void 0===a?void 0:a.toFixed(2))||"0.00"," USDC"]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("div",{className:"text-gray-600",children:"Total Revenue:"}),(0,Pe.jsxs)("div",{className:"font-medium text-green-600",children:[(null===(c=e.totalRevenue)||void 0===c?void 0:c.toFixed(2))||(null===(l=e.profit)||void 0===l?void 0:l.toFixed(2))||"0.00"," USDC"]})]})]}),(0,Pe.jsx)("div",{className:"mt-3 sm:mt-4 text-xs sm:text-sm",children:(0,Pe.jsxs)("div",{className:"text-gray-600",children:["Status: ",(0,Pe.jsx)("span",{className:"font-medium",children:e.status||"Active"})]})}),(0,Pe.jsx)("div",{className:"mt-3 sm:mt-4 text-center",children:(0,Pe.jsx)("button",{className:"bg-gray-800 text-white px-4 sm:px-6 py-2 rounded-lg font-medium text-xs sm:text-sm hover:bg-gray-700 transition-colors",children:"Recreate Plan"})})]}),(0,Pe.jsx)("div",{className:"flex justify-end",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]},e.id||t)}):(0,Pe.jsx)("div",{className:"bg-white border-2 border-gray-200 rounded-xl sm:rounded-2xl p-6 sm:p-8 text-center",children:(0,Pe.jsx)("div",{className:"text-gray-500 text-base sm:text-lg",children:"No orders found"})})})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"mb-6 sm:mb-8 lg:mb-12",children:[(0,Pe.jsx)("h2",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900 mb-4 sm:mb-6",children:"Settings"}),(0,Pe.jsx)("div",{className:"space-y-2 sm:space-y-3 account-settings-list",children:R.map((e,t)=>(0,Pe.jsxs)(XE.button,{onClick:e.action,initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.4+.1*t},className:"w-full bg-gray-800 text-white px-4 sm:px-6 py-3 sm:py-4 rounded-lg flex items-center justify-between hover:bg-gray-700 transition-colors duration-300 account-settings-item",children:[(0,Pe.jsx)("span",{className:"font-medium text-sm sm:text-base",children:e.name}),(0,Pe.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]},t))})]})]}),(0,Pe.jsx)("footer",{className:"bg-gray-800 text-white",children:(0,Pe.jsxs)("div",{className:"container-max",children:[(0,Pe.jsx)("div",{className:"py-16",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},className:"md:col-span-1",children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-xl font-bold text-white",children:"Tokenize"})]})}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Products"}),(0,Pe.jsx)("ul",{className:"space-y-2",children:O.products.map((e,t)=>(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:e})},t))})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Company"}),(0,Pe.jsx)("ul",{className:"space-y-2",children:O.company.map((e,t)=>(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:e})},t))})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Policies"}),(0,Pe.jsx)("ul",{className:"space-y-2",children:O.policies.map((e,t)=>(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-gray-300 hover:text-white transition-colors duration-300",children:e})},t))})]})]})}),(0,Pe.jsx)("div",{className:"py-8 border-t border-gray-700",children:(0,Pe.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,Pe.jsx)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400",children:["Legal Information","Disclaimer","Risk Warning","Cookie Policy","About Advertising"].map((e,t)=>(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:e},t))}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Pe.jsxs)("div",{className:"flex space-x-4",children:[(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]}),(0,Pe.jsx)("div",{className:"text-gray-400 text-sm",children:"\u2022 2023 UBS. All rights reserved."})]})]})})]})}),(0,Pe.jsx)(yN,{isOpen:o,onClose:()=>a(!1)}),(0,Pe.jsx)(xN,{isOpen:c,onClose:()=>l(!1)}),(0,Pe.jsx)(SN,{isOpen:u,onClose:()=>h(!1)}),(0,Pe.jsx)(vN,{isOpen:d,onClose:()=>f(!1)})]})},AN=e=>{let{data:t,isPositive:n=!1,width:r=80,height:s=30}=e;const i=t||[3,5,2,4,6,3,2,4,5,2,1,3,2,1,2,1],o=Math.max(...i),a=Math.min(...i),c=o-a,l=i.map((e,t)=>{const n=t/(i.length-1)*r,o=s-(e-a)/c*s;return"".concat(n,",").concat(o)}).join(" L"),u="M ".concat(l),h=n?"#14B8A6":"#EF4444";return(0,Pe.jsx)("div",{className:"flex items-center justify-center",children:(0,Pe.jsx)("svg",{width:r,height:s,viewBox:"0 0 ".concat(r," ").concat(s),className:"overflow-visible",children:(0,Pe.jsx)("path",{d:u,fill:"none",stroke:h,strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})})})},NN=()=>{const[e,t]=(0,s.useState)("Forex"),[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)([]),[a,c]=(0,s.useState)([]),[l,u]=(0,s.useState)([]),[h,d]=(0,s.useState)([]),[f,m]=(0,s.useState)(!0),[p,g]=(0,s.useState)(null),[y,v]=(0,s.useState)(null),[w,b]=(0,s.useState)({}),{t:x}=Oe(),S=async()=>{try{var e,t,n,r,s,i,a,c,l;console.log("\ud83d\udd04 Fetching Forex data...");const u=await MA(),h=[{pair:"USD/CHF",country:"Switzerland",flags:["US","CH"],rate:(null===(e=u.rates)||void 0===e?void 0:e.CHF)||.8963,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/ch.png"]},{pair:"USD/JPY",country:"Japan",flags:["US","JP"],rate:(null===(t=u.rates)||void 0===t?void 0:t.JPY)||152,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/jp.png"]},{pair:"USD/EUR",country:"Eurozone",flags:["US","EU"],rate:(null===(n=u.rates)||void 0===n?void 0:n.EUR)||.92,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/eu.png"]},{pair:"USD/GBP",country:"United Kingdom",flags:["US","GB"],rate:(null===(r=u.rates)||void 0===r?void 0:r.GBP)||.79,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/gb.png"]},{pair:"USD/CAD",country:"Canada",flags:["US","CA"],rate:(null===(s=u.rates)||void 0===s?void 0:s.CAD)||1.36,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/ca.png"]},{pair:"USD/AUD",country:"Australia",flags:["US","AU"],rate:(null===(i=u.rates)||void 0===i?void 0:i.AUD)||1.52,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/au.png"]},{pair:"USD/HKD",country:"Hong Kong",flags:["US","HK"],rate:(null===(a=u.rates)||void 0===a?void 0:a.HKD)||7.8,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/hk.png"]},{pair:"USD/SGD",country:"Singapore",flags:["US","SG"],rate:(null===(c=u.rates)||void 0===c?void 0:c.SGD)||1.35,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/sg.png"]},{pair:"USD/CNY",country:"China",flags:["US","CN"],rate:(null===(l=u.rates)||void 0===l?void 0:l.CNY)||7.2,flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/cn.png"]}].map((e,t)=>{const n=Math.random()>.5,r=OA(e.rate,n),s=.002*(Math.random()-.5)*100;return{id:t+1,pair:e.pair,country:e.country,value:BA(e.rate,e.pair.includes("JPY")?2:4),price:BA(e.rate,e.pair.includes("JPY")?2:4),change:VA(s),isPositive:s>=0,flags:e.flags,flagUrls:e.flagUrls,chart:r,sparkline:OA(e.rate,n,12),realTimePrice:e.rate,lastUpdated:u.last_updated||(new Date).toISOString()}});o(h),console.log("\u2705 Forex data updated:",h.length,"pairs")}catch(p){console.error("\u274c Error fetching Forex data:",p)}},E=async()=>{try{console.log("\ud83d\udd04 Fetching Stocks data...");const e=await LA(["AAPL","TSLA","AMZN","GOOGL","MSFT","UNH","AI","BRZE","FLNC","SNOW","BB","EVGO","MQ"]),t=[{symbol:"AAPL",name:"Apple Inc.",logo:"https://logo.clearbit.com/apple.com"},{symbol:"TSLA",name:"Tesla Inc.",logo:"https://logo.clearbit.com/tesla.com"},{symbol:"AMZN",name:"Amazon.com Inc.",logo:"https://logo.clearbit.com/amazon.com"},{symbol:"GOOGL",name:"Alphabet Inc.",logo:"https://logo.clearbit.com/google.com"},{symbol:"MSFT",name:"Microsoft Corporation",logo:"https://logo.clearbit.com/microsoft.com"},{symbol:"UNH",name:"UnitedHealth Group",logo:"https://logo.clearbit.com/unitedhealthgroup.com"},{symbol:"AI",name:"C3.ai Inc.",logo:"https://logo.clearbit.com/c3.ai"},{symbol:"BRZE",name:"Braze Inc.",logo:"https://logo.clearbit.com/braze.com"},{symbol:"FLNC",name:"Fluence Energy Inc.",logo:"https://logo.clearbit.com/fluenceenergy.com"},{symbol:"SNOW",name:"Snowflake Inc.",logo:"https://logo.clearbit.com/snowflake.com"},{symbol:"BB",name:"BlackBerry Limited",logo:"https://logo.clearbit.com/blackberry.com"},{symbol:"EVGO",name:"EVgo Inc.",logo:"https://logo.clearbit.com/evgo.com"},{symbol:"MQ",name:"Marqeta Inc.",logo:"https://logo.clearbit.com/marqeta.com"}].map((t,n)=>{const r=e[t.symbol]||{},s=r.price||500*Math.random()+50,i=r.change||10*(Math.random()-.5),o=i>=0,a=OA(s,o,12);return console.log("\ud83d\udcca [Stocks] Generated sparkline for ".concat(t.symbol,":"),{price:s,change24h:i,isPositive:o,sparklineData:a.length>0?"".concat(a.length," points"):"EMPTY",firstPoint:a[0],lastPoint:a[a.length-1]}),{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),value:BA(s,2),change:VA(i),isPositive:o,flags:["US","US"],logo:t.logo,chart:OA(s,o),sparkline:a,realTimePrice:s,lastUpdated:(new Date).toISOString()}});c(t),console.log("\u2705 Stocks data updated:",t.length,"stocks")}catch(p){console.error("\u274c Error fetching Stocks data:",p)}},A=async()=>{try{console.log("\ud83d\udd04 Fetching ETF data...");const e=await FA(["SPY","QQQ","IWM","VTI","VEA","VWO","AGG","BND","GLD","SLV","USO","UNG"]),t=[{symbol:"SPY",name:"SPDR S&P 500 ETF Trust",logo:"https://logo.clearbit.com/ssga.com"},{symbol:"QQQ",name:"Invesco QQQ Trust",logo:"https://logo.clearbit.com/invesco.com"},{symbol:"IWM",name:"iShares Russell 2000 ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"VTI",name:"Vanguard Total Stock Market ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"VEA",name:"Vanguard FTSE Developed Markets ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"VWO",name:"Vanguard FTSE Emerging Markets ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"AGG",name:"iShares Core U.S. Aggregate Bond ETF",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"BND",name:"Vanguard Total Bond Market ETF",logo:"https://logo.clearbit.com/vanguard.com"},{symbol:"GLD",name:"SPDR Gold Trust",logo:"https://logo.clearbit.com/ssga.com"},{symbol:"SLV",name:"iShares Silver Trust",logo:"https://logo.clearbit.com/ishares.com"},{symbol:"USO",name:"United States Oil Fund",logo:"https://logo.clearbit.com/uscfinvestments.com"},{symbol:"UNG",name:"United States Natural Gas Fund",logo:"https://logo.clearbit.com/uscfinvestments.com"}].map((t,n)=>{const r=e[t.symbol]||{},s=r.price||200*Math.random()+50,i=r.change||5*(Math.random()-.5),o=i>=0,a=r.logoUrl||t.logo,c=OA(s,o,12);return console.log("\ud83d\udcca [ETF] Generated sparkline for ".concat(t.symbol,":"),{price:s,change24h:i,isPositive:o,logoUrl:a,sparklineData:c.length>0?"".concat(c.length," points"):"EMPTY",firstPoint:c[0],lastPoint:c[c.length-1]}),{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),value:BA(s,2),change:VA(i),isPositive:o,flags:["US","US"],logo:a,chart:OA(s,o),sparkline:c,realTimePrice:s,lastUpdated:(new Date).toISOString()}});u(t),console.log("\u2705 ETF data updated:",t.length,"ETFs")}catch(p){console.error("\u274c Error fetching ETF data:",p)}},N=async()=>{try{console.log("\ud83d\udd04 Fetching Futures data...");const e=await UA(["ES","NQ","YM","RTY","GC","SI","CL","NG","ZB","ZN","ZF","ZT"]),t=[{symbol:"ES",name:"E-mini S&P 500",logo:"https://logo.clearbit.com/cme.com"},{symbol:"NQ",name:"E-mini NASDAQ-100",logo:"https://logo.clearbit.com/cme.com"},{symbol:"YM",name:"E-mini Dow Jones",logo:"https://logo.clearbit.com/cme.com"},{symbol:"RTY",name:"E-mini Russell 2000",logo:"https://logo.clearbit.com/cme.com"},{symbol:"GC",name:"Gold Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"SI",name:"Silver Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"CL",name:"Crude Oil Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"NG",name:"Natural Gas Futures",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZB",name:"30-Year Treasury Bond",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZN",name:"10-Year Treasury Note",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZF",name:"5-Year Treasury Note",logo:"https://logo.clearbit.com/cme.com"},{symbol:"ZT",name:"2-Year Treasury Note",logo:"https://logo.clearbit.com/cme.com"}].map((t,n)=>{const r=e[t.symbol]||{},s=r.price||5e3*Math.random()+1e3,i=r.change||3*(Math.random()-.5),o=i>=0,a=r.logoUrl||t.logo,c=OA(s,o,12);return console.log("\ud83d\udcca [Futures] Generated sparkline for ".concat(t.symbol,":"),{price:s,change24h:i,isPositive:o,logoUrl:a,sparklineData:c.length>0?"".concat(c.length," points"):"EMPTY",firstPoint:c[0],lastPoint:c[c.length-1]}),{id:n+1,pair:t.symbol,symbol:t.name,price:BA(s,2),value:BA(s,2),change:VA(i),changeValue:i,isPositive:o,sparkline:c,logoUrl:a}});d(t),console.log("\u2705 Futures data updated:",t.length,"Futures")}catch(p){console.error("\u274c Error fetching Futures data:",p)}},T=[{key:"Forex",label:x("forex")},{key:"Crypto",label:x("crypto")},{key:"Stocks",label:x("stocks")},{key:"ETF",label:x("etf")},{key:"Futures",label:x("futures")}];(0,s.useEffect)(()=>{let t=null,n=null,s=null,i=null;const o=async()=>{try{if(m(!0),g(null),y&&(y.close(),v(null)),"Forex"===e)console.log("\ud83d\udd04 Initializing Forex tab with dedicated data feed"),await S(),t=setInterval(async()=>{await S()},5e3);else if("Stocks"===e)console.log("\ud83d\udd04 Initializing Stocks tab with dedicated data feed"),await E(),n=setInterval(async()=>{await E()},5e3);else if("ETF"===e)console.log("\ud83d\udd04 Initializing ETF tab with dedicated data feed"),await A(),s=setInterval(async()=>{await A()},5e3);else if("Futures"===e)console.log("\ud83d\udd04 Initializing Futures tab with dedicated data feed"),await N(),i=setInterval(async()=>{await N()},5e3);else if("Crypto"===e){console.log("\ud83d\ude80 Initializing Crypto tab with WebSocket-only data");const e=[{id:1,pair:"BTC/USD",country:"Bitcoin",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/1/large/bitcoin.png",chart:OA(0,!0),sparkline:OA(0,!0,12)},{id:2,pair:"ETH/USD",country:"Ethereum",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/279/large/ethereum.png",chart:OA(0,!0),sparkline:OA(0,!0,12)},{id:3,pair:"LTC/USD",country:"Litecoin",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/2/large/litecoin.png",chart:OA(0,!0),sparkline:OA(0,!0,12)},{id:4,pair:"DOT/USD",country:"Polkadot",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/12171/large/polkadot.png",chart:OA(0,!0),sparkline:OA(0,!0,12)},{id:5,pair:"FIL/USD",country:"Filecoin",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/12817/large/filecoin.png",chart:OA(0,!0),sparkline:OA(0,!0,12)},{id:6,pair:"DOGE/USD",country:"Dogecoin",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/5/large/dogecoin.png",chart:OA(0,!0),sparkline:OA(0,!0,12)},{id:7,pair:"XRP/USD",country:"XRP",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png",chart:OA(0,!0),sparkline:OA(0,!0,12)},{id:8,pair:"TRX/USD",country:"TRON",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/1094/large/tron-logo.png",chart:OA(0,!0),sparkline:OA(0,!0,12)},{id:9,pair:"MATIC/USD",country:"Polygon",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/4713/large/matic-token-icon.png",chart:OA(0,!0),sparkline:OA(0,!0,12)},{id:10,pair:"ADA/USD",country:"Cardano",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/975/large/cardano.png",chart:OA(0,!0),sparkline:OA(0,!0,12)},{id:11,pair:"LINK/USD",country:"Chainlink",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/877/large/chainlink-new-logo.png",chart:OA(0,!0),sparkline:OA(0,!0,12)},{id:12,pair:"ATOM/USD",country:"Cosmos",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/1481/large/cosmos_hub.png",chart:OA(0,!0),sparkline:OA(0,!0,12)}];r(e);const t=zA(["bitcoin","ethereum","litecoin","polkadot","filecoin","dogecoin","ripple","tron","polygon","cardano","chainlink","cosmos"],e=>{console.log("\ud83d\udd04 Market component received WebSocket updates:",e),r(t=>t.map(t=>{const n={"BTC/USD":"bitcoin","ETH/USD":"ethereum","LTC/USD":"litecoin","DOT/USD":"polkadot","FIL/USD":"filecoin","DOGE/USD":"dogecoin","XRP/USD":"ripple","TRX/USD":"tron","MATIC/USD":"polygon","ADA/USD":"cardano","LINK/USD":"chainlink","ATOM/USD":"cosmos"}[t.pair]||t.pair.toLowerCase(),r=e[n];return console.log("\ud83d\udd0d Checking ".concat(t.pair," -> ").concat(n,":"),r?"FOUND":"NOT FOUND"),r?(console.log("\ud83d\udcb0 Updating ".concat(t.pair," with price: $").concat(r.price," (").concat(r.change24h,"%)")),b(e=>(0,tt.A)((0,tt.A)({},e),{},{[t.pair]:r.isPositive?"increase":"decrease"})),setTimeout(()=>{b(e=>(0,tt.A)((0,tt.A)({},e),{},{[t.pair]:null}))},1e3),(0,tt.A)((0,tt.A)({},t),{},{value:BA(r.price,2),change:VA(r.change24h),isPositive:r.isPositive,sparkline:r.sparkline,realTimePrice:r.price,lastUpdated:(new Date).toISOString()})):t}))});v(t)}else if("Stocks"===e){var o,a,c,l,u,h,d,f,w,x,T,k,C,I,_,P,j,D,M,R,O,L,F,U,B;let e;try{e=await LA(["AAPL","TSLA","AMZN","GOOGL","MSFT","UNH","AI","BRZE","FLNC","SNOW","BB","EVGO","MQ"])}catch(p){console.warn("Failed to fetch real-time stock data, using fallback:",p),e={AAPL:{price:255.46,change:.54,changePercent:.21},TSLA:{price:440.4,change:2.83,changePercent:.65},AMZN:{price:219.78,change:.32,changePercent:.15},GOOGL:{price:246.54,change:.21,changePercent:.09},MSFT:{price:511.46,change:.27,changePercent:.05},UNH:{price:344.08,change:-1.11,changePercent:-.32},AI:{price:17.14,change:-.93,changePercent:-5.15},BRZE:{price:31.58,change:.22,changePercent:.7},FLNC:{price:11.91,change:3.66,changePercent:30.75},SNOW:{price:224.64,change:1.05,changePercent:.47},BB:{price:4.96,change:6.17,changePercent:124.4},EVGO:{price:4.57,change:-1.32,changePercent:-22.4},MQ:{price:5.36,change:.38,changePercent:7.63}}}const t=[{id:1,pair:"AAPL",country:"Apple Tokenize",value:BA((null===(o=e.AAPL)||void 0===o?void 0:o.price)||255.46,4),change:VA((null===(a=e.AAPL)||void 0===a?void 0:a.changePercent)||.21),isPositive:((null===(c=e.AAPL)||void 0===c?void 0:c.changePercent)||0)>=0,flags:["US","US"],logo:"https://logo.clearbit.com/apple.com",chart:OA((null===(l=e.AAPL)||void 0===l?void 0:l.price)||255.46,((null===(u=e.AAPL)||void 0===u?void 0:u.changePercent)||0)>=0)},{id:2,pair:"TSLA",country:"Tesla Tokenize",value:BA((null===(h=e.TSLA)||void 0===h?void 0:h.price)||440.4,4),change:VA((null===(d=e.TSLA)||void 0===d?void 0:d.changePercent)||.65),isPositive:((null===(f=e.TSLA)||void 0===f?void 0:f.changePercent)||0)>=0,flags:["US","US"],logo:"https://logo.clearbit.com/tesla.com",chart:OA((null===(w=e.TSLA)||void 0===w?void 0:w.price)||440.4,((null===(x=e.TSLA)||void 0===x?void 0:x.changePercent)||0)>=0)},{id:3,pair:"AMZN",country:"Amazon.com",value:BA((null===(T=e.AMZN)||void 0===T?void 0:T.price)||219.78,4),change:VA((null===(k=e.AMZN)||void 0===k?void 0:k.changePercent)||.15),isPositive:((null===(C=e.AMZN)||void 0===C?void 0:C.changePercent)||0)>=0,flags:["US","US"],logo:"https://logo.clearbit.com/amazon.com",chart:OA((null===(I=e.AMZN)||void 0===I?void 0:I.price)||219.78,((null===(_=e.AMZN)||void 0===_?void 0:_.changePercent)||0)>=0)},{id:4,pair:"GOOGL",country:"Alphabet",value:BA(246.5391,4),change:VA(.21),isPositive:!0,flags:["US","US"],logo:"https://logos-world.net/wp-content/uploads/2020/09/Google-Logo.png",chart:OA(246.5391,!0)},{id:5,pair:"MSFT",country:"Microsoft",value:BA(511.4605,4),change:VA(.27),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/microsoft.com",chart:OA(511.4605,!0)},{id:6,pair:"UNH",country:"Unitedhealth Group Inc",value:BA(344.0802,4),change:VA(-1.11),isPositive:!1,flags:["US","US"],logo:"https://logo.clearbit.com/unitedhealthgroup.com",chart:OA(!1)},{id:7,pair:"AI",country:"C3.ai, Inc",value:BA(17.1391,4),change:VA(-.93),isPositive:!1,flags:["US","US"],logo:"https://logo.clearbit.com/c3.ai",chart:OA(!1)},{id:8,pair:"BRZE",country:"Braze, Inc.",value:BA(31.5802,4),change:VA(.22),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/braze.com",chart:OA((null===(P=e.BRZE)||void 0===P?void 0:P.price)||31.58,((null===(j=e.BRZE)||void 0===j?void 0:j.changePercent)||0)>=0)},{id:9,pair:"FLNC",country:"Fluence Energy, Inc.",value:BA(11.9107,4),change:VA(3.66),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/fluenceenergy.com",chart:OA((null===(D=e.FLNC)||void 0===D?void 0:D.price)||11.91,((null===(M=e.FLNC)||void 0===M?void 0:M.changePercent)||0)>=0)},{id:10,pair:"SNOW",country:"Snowflake Inc.",value:BA(224.6404,4),change:VA(1.05),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/snowflake.com",chart:OA((null===(R=e.SNOW)||void 0===R?void 0:R.price)||224.64,((null===(O=e.SNOW)||void 0===O?void 0:O.changePercent)||0)>=0)},{id:11,pair:"BB",country:"BlackBerry Limited",value:BA(4.958,4),change:VA(6.17),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/blackberry.com",chart:OA((null===(L=e.BB)||void 0===L?void 0:L.price)||4.96,((null===(F=e.BB)||void 0===F?void 0:F.changePercent)||0)>=0)},{id:12,pair:"EVGO",country:"EVgo, Inc.",value:BA(4.5691,4),change:VA(-1.32),isPositive:!1,flags:["US","US"],logo:"https://logo.clearbit.com/evgo.com",chart:OA((null===(U=e.EVGO)||void 0===U?void 0:U.price)||4.57,((null===(B=e.EVGO)||void 0===B?void 0:B.changePercent)||0)>=0)},{id:13,pair:"MQ",country:"Marqeta, Inc.",value:BA(5.3602,4),change:VA(.38),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/marqeta.com",chart:OA(5.3602,!0)}];r(t)}else if("ETF"===e){var V,z,G,H,q,W,Q;let e;try{e=await FA(["SPY","QQQ","GLD","VTI","IWM","EFA","VEA","EEM","XLF","XLK","XLE","XLV"])}catch(p){console.warn("Failed to fetch real-time ETF data, using fallback:",p),e={SPY:{price:456.78,change:.85,changePercent:.19},QQQ:{price:389.45,change:1.23,changePercent:.32},GLD:{price:189.67,change:1.45,changePercent:.77},VTI:{price:234.56,change:.67,changePercent:.29},IWM:{price:198.34,change:-.23,changePercent:-.12},EFA:{price:78.91,change:.34,changePercent:.43},VEA:{price:45.23,change:.12,changePercent:.27},EEM:{price:42.15,change:-.56,changePercent:-1.31},XLF:{price:35.67,change:.78,changePercent:2.24},XLK:{price:178.45,change:1.23,changePercent:.69},XLE:{price:89.12,change:-.45,changePercent:-.5},XLV:{price:134.78,change:.67,changePercent:.5}}}const t=[{id:1,pair:"SPY",country:"SPDR S&P 500 ETF",value:BA((null===(V=e.SPY)||void 0===V?void 0:V.price)||456.78,2),change:VA((null===(z=e.SPY)||void 0===z?void 0:z.changePercent)||.19),isPositive:((null===(G=e.SPY)||void 0===G?void 0:G.changePercent)||0)>=0,flags:["US","US"],chart:OA((null===(H=e.SPY)||void 0===H?void 0:H.price)||456.78,((null===(q=e.SPY)||void 0===q?void 0:q.changePercent)||0)>=0)},{id:2,pair:"QQQ",country:"Invesco QQQ Trust",value:BA(389.45,2),change:VA(1.23),isPositive:!0,flags:["US","US"],chart:OA((null===(W=e.QQQ)||void 0===W?void 0:W.price)||389.45,((null===(Q=e.QQQ)||void 0===Q?void 0:Q.changePercent)||0)>=0)},{id:3,pair:"IWM",country:"iShares Russell 2000 ETF",value:BA(198.32,2),change:VA(-.45),isPositive:!1,flags:["US","US"],chart:OA(!1)},{id:4,pair:"VTI",country:"Vanguard Total Stock Market ETF",value:BA(234.67,2),change:VA(.67),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:5,pair:"EFA",country:"iShares MSCI EAFE ETF",value:BA(78.91,2),change:VA(.34),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:6,pair:"VEA",country:"Vanguard FTSE Developed Markets ETF",value:BA(45.23,2),change:VA(-.12),isPositive:!1,flags:["US","US"],chart:OA(!1)},{id:7,pair:"BND",country:"Vanguard Total Bond Market ETF",value:BA(78.45,2),change:VA(.18),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:8,pair:"GLD",country:"SPDR Gold Shares",value:BA(189.67,2),change:VA(1.45),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:9,pair:"SLV",country:"iShares Silver Trust",value:BA(22.34,2),change:VA(2.12),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:10,pair:"XLF",country:"Financial Select Sector SPDR Fund",value:BA(38.92,2),change:VA(-.78),isPositive:!1,flags:["US","US"],chart:OA(!1)},{id:11,pair:"XLK",country:"Technology Select Sector SPDR Fund",value:BA(167.89,2),change:VA(1.56),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:12,pair:"XLE",country:"Energy Select Sector SPDR Fund",value:BA(89.45,2),change:VA(-1.23),isPositive:!1,flags:["US","US"],chart:OA(!1)}];r(t)}else if("Futures"===e){var K,J,Y,Z,X;let e;try{e=await UA(["ES","GC","CL","NQ","YM"])}catch(p){console.warn("Failed to fetch real-time Futures data, using fallback:",p),e={ES:{price:4567.25,change:.92,changePercent:.02},GC:{price:2034.8,change:1.23,changePercent:.06},CL:{price:78.45,change:-1.67,changePercent:-2.08},NQ:{price:15678.9,change:.45,changePercent:0},YM:{price:34567.89,change:-.12,changePercent:0}}}const t=[{id:1,pair:"ES",country:"E-mini S&P 500",value:BA((null===(K=e.ES)||void 0===K?void 0:K.price)||4567.25,2),change:VA((null===(J=e.ES)||void 0===J?void 0:J.changePercent)||0),isPositive:((null===(Y=e.ES)||void 0===Y?void 0:Y.changePercent)||0)>=0,flags:["US","US"],chart:OA((null===(Z=e.ES)||void 0===Z?void 0:Z.price)||4567.25,((null===(X=e.ES)||void 0===X?void 0:X.changePercent)||0)>=0)},{id:2,pair:"NQ",country:"E-mini NASDAQ-100",value:BA(15890.5,2),change:VA(1.34),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:3,pair:"YM",country:"E-mini Dow Jones",value:BA(34567,2),change:VA(.67),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:4,pair:"RTY",country:"E-mini Russell 2000",value:BA(1987.3,2),change:VA(-.45),isPositive:!1,flags:["US","US"],chart:OA(!1)},{id:5,pair:"GC",country:"Gold Futures",value:BA(2034.8,2),change:VA(1.23),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:6,pair:"SI",country:"Silver Futures",value:BA(24.567,3),change:VA(2.45),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:7,pair:"CL",country:"Crude Oil Futures",value:BA(78.45,2),change:VA(-1.67),isPositive:!1,flags:["US","US"],chart:OA(!1)},{id:8,pair:"NG",country:"Natural Gas Futures",value:BA(3.234,3),change:VA(.89),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:9,pair:"ZB",country:"30-Year Treasury Bond",value:BA(118.25,2),change:VA(-.34),isPositive:!1,flags:["US","US"],chart:OA(!1)},{id:10,pair:"ZN",country:"10-Year Treasury Note",value:BA(109.875,3),change:VA(-.12),isPositive:!1,flags:["US","US"],chart:OA(!1)},{id:11,pair:"ZC",country:"Corn Futures",value:BA(4.567,3),change:VA(1.45),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:12,pair:"ZS",country:"Soybean Futures",value:BA(12.89,2),change:VA(.78),isPositive:!0,flags:["US","US"],chart:OA(!0)}];r(t)}else r([])}catch($){console.error("Error fetching market data:",$),g("Failed to fetch market data. Using cached data."),r([])}finally{m(!1)}};o();const a=setInterval(o,3e4);return()=>{clearInterval(a),y&&(y.close(),v(null)),t&&(clearInterval(t),console.log("\ud83e\uddf9 Cleared Forex polling interval")),n&&(clearInterval(n),console.log("\ud83e\uddf9 Cleared Stocks polling interval")),s&&(clearInterval(s),console.log("\ud83e\uddf9 Cleared ETF polling interval")),i&&(clearInterval(i),console.log("\ud83e\uddf9 Cleared Futures polling interval"))}},[e]);const k="Crypto"===e?[{id:1,pair:"BTC/USD",country:"Bitcoin",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/1/large/bitcoin.png"},{id:2,pair:"ETH/USD",country:"Ethereum",value:"$0.00",change:"0.00%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/279/large/ethereum.png"},{id:3,pair:"FIL/USD",country:"Filecoin",value:"$2.1979",change:"1.41%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/12817/large/filecoin.png"},{id:4,pair:"DOGE/USD",country:"Dogecoin",value:"$0.2366",change:"2.94%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/5/large/dogecoin.png"},{id:5,pair:"XRP/USD",country:"XRP",value:"$2.8707",change:"2.14%",isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png"}]:"Stocks"===e?[{id:1,pair:"AAPL",country:"Apple Tokenize",value:"$255.4603",change:"0.54%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/apple.com"},{id:2,pair:"AMZN",country:"Amazon.com",value:"$219.7825",change:"0.32%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/amazon.com"},{id:3,pair:"GOOGL",country:"Alphabet",value:"$246.5391",change:"0.21%",isPositive:!0,flags:["US","US"],logo:"https://logos-world.net/wp-content/uploads/2020/09/Google-Logo.png"},{id:4,pair:"MSFT",country:"Microsoft",value:"$511.4601",change:"0.27%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/microsoft.com"},{id:5,pair:"TSLA",country:"Tesla Tokenize",value:"$440.3997",change:"2.83%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/tesla.com"}]:"ETF"===e?[{id:1,pair:"SPY",country:"SPDR S&P 500 ETF",value:"$456.78",change:"0.85%",isPositive:!0,flags:["US","US"]},{id:2,pair:"QQQ",country:"Invesco QQQ Trust",value:"$389.45",change:"1.23%",isPositive:!0,flags:["US","US"]},{id:3,pair:"GLD",country:"SPDR Gold Shares",value:"$189.67",change:"1.45%",isPositive:!0,flags:["US","US"]},{id:4,pair:"XLK",country:"Technology Select Sector SPDR Fund",value:"$167.89",change:"1.56%",isPositive:!0,flags:["US","US"]},{id:5,pair:"VTI",country:"Vanguard Total Stock Market ETF",value:"$234.67",change:"0.67%",isPositive:!0,flags:["US","US"]}]:"Futures"===e?[{id:1,pair:"ES",country:"E-mini S&P 500",value:"$4567.25",change:"0.92%",isPositive:!0,flags:["US","US"]},{id:2,pair:"GC",country:"Gold Futures",value:"$2034.80",change:"1.23%",isPositive:!0,flags:["US","US"]},{id:3,pair:"NQ",country:"E-mini NASDAQ-100",value:"$15890.50",change:"1.34%",isPositive:!0,flags:["US","US"]},{id:4,pair:"CL",country:"Crude Oil Futures",value:"$78.45",change:"-1.67%",isPositive:!1,flags:["US","US"]},{id:5,pair:"SI",country:"Silver Futures",value:"$24.567",change:"2.45%",isPositive:!0,flags:["US","US"]}]:"Forex"===e?i.length>0?i.slice(0,5):[{id:1,pair:"USD/CHF",country:"Switzerland",value:"0.8963",change:"0.15%",isPositive:!0,flags:["US","CH"],flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/ch.png"]},{id:2,pair:"USD/JPY",country:"Japan",value:"152.00",change:"0.25%",isPositive:!0,flags:["US","JP"],flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/jp.png"]},{id:3,pair:"USD/EUR",country:"Eurozone",value:"0.9200",change:"0.12%",isPositive:!0,flags:["US","EU"],flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/eu.png"]},{id:4,pair:"USD/GBP",country:"United Kingdom",value:"0.7900",change:"0.18%",isPositive:!0,flags:["US","GB"],flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/gb.png"]},{id:5,pair:"USD/CAD",country:"Canada",value:"1.3600",change:"0.22%",isPositive:!0,flags:["US","CA"],flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/ca.png"]}]:"Stocks"===e?a.length>0?a.slice(0,5):[{id:1,pair:"AAPL",country:"Apple Inc.",value:"$255.46",change:"0.54%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/apple.com"},{id:2,pair:"TSLA",country:"Tesla Inc.",value:"$219.78",change:"0.32%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/tesla.com"},{id:3,pair:"AMZN",country:"Amazon.com Inc.",value:"$246.54",change:"0.21%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/amazon.com"},{id:4,pair:"GOOGL",country:"Alphabet Inc.",value:"$246.54",change:"0.21%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/google.com"},{id:5,pair:"MSFT",country:"Microsoft Corporation",value:"$246.54",change:"0.21%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/microsoft.com"}]:"ETF"===e?l.length>0?l.slice(0,5):[{id:1,pair:"SPY",country:"SPDR S&P 500 ETF",value:"$456.78",change:"0.85%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/ssga.com"},{id:2,pair:"QQQ",country:"Invesco QQQ Trust",value:"$389.45",change:"1.23%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/invesco.com"},{id:3,pair:"IWM",country:"iShares Russell 2000 ETF",value:"$198.32",change:"0.67%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/ishares.com"},{id:4,pair:"VTI",country:"Vanguard Total Stock Market ETF",value:"$234.56",change:"0.92%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/vanguard.com"},{id:5,pair:"GLD",country:"SPDR Gold Trust",value:"$189.45",change:"0.45%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/ssga.com"}]:"Futures"===e?h.length>0?h.slice(0,5):[{id:1,pair:"ES",country:"E-mini S&P 500",value:"$4,567.25",change:"0.85%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/cme.com"},{id:2,pair:"NQ",country:"E-mini NASDAQ-100",value:"$15,234.50",change:"1.23%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/cme.com"},{id:3,pair:"GC",country:"Gold Futures",value:"$2,045.80",change:"0.54%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/cme.com"},{id:4,pair:"CL",country:"Crude Oil Futures",value:"$78.45",change:"0.32%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/cme.com"},{id:5,pair:"ZB",country:"30-Year Treasury Bond",value:"$125.67",change:"0.21%",isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/cme.com"}]:[];return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white pt-16 sm:pt-20",children:[(0,Pe.jsxs)("div",{className:"container-max py-6 sm:py-8 lg:py-12",children:[(0,Pe.jsx)(XE.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 text-center mb-6 sm:mb-8 lg:mb-12",children:x("marketTitle")}),(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"flex justify-center mb-6 sm:mb-8 lg:mb-12",children:(0,Pe.jsx)("div",{className:"flex flex-wrap justify-center gap-1 sm:gap-2 bg-gray-100 p-1 sm:p-2 rounded-lg sm:rounded-xl max-w-full overflow-x-auto",children:T.map(n=>(0,Pe.jsx)("button",{onClick:()=>t(n.key),className:"px-3 sm:px-4 lg:px-6 py-2 sm:py-3 rounded-md sm:rounded-lg font-medium text-xs sm:text-sm lg:text-base transition-all duration-300 whitespace-nowrap ".concat(e===n.key?"bg-gray-900 text-white shadow-md":"text-gray-600 hover:text-gray-900"),children:n.label},n.key))})}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-6 sm:mb-8 lg:mb-12",children:[(0,Pe.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 sm:gap-6 overflow-x-auto",children:k.map((t,n)=>(0,Pe.jsx)(XE.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.4,delay:.3+.1*n},className:"rounded-xl sm:rounded-2xl p-4 sm:p-6 hover:shadow-lg transition-all duration-300 min-h-[180px] sm:min-h-[200px] ".concat(0===n?"bg-gradient-to-br from-gray-800 to-gray-900 text-white border-2 border-gray-700":"bg-white border-2 border-gray-200 hover:border-gray-300"),children:(0,Pe.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Pe.jsx)("div",{className:"flex-shrink-0",children:"Crypto"===e?(0,Pe.jsx)("img",{src:t.logo,alt:"".concat(t.pair," logo"),className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full",onError:e=>{e.target.style.display="none"}}):"Stocks"===e?(0,Pe.jsx)("img",{src:t.logo,alt:"".concat(t.pair," logo"),className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="block")}}):"ETF"===e?(0,Pe.jsx)("img",{src:t.logo||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik0xMiAyQzYuNDggMiAyIDYuNDggMiAxMlM2LjQ4IDIyIDEyIDIyUzIyIDE3LjUyIDIyIDEyUzE3LjUyIDIgMTIgMloiIGZpbGw9IiM5Q0EzQUYiLz4KPHN2ZyB4PSI0IiB5PSI0IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik04IDRMMTIgOEw4IDEyTDQgOFoiIGZpbGw9IiM2MzY2RjEiLz4KPC9zdmc+Cjwvc3ZnPgo8L3N2Zz4K",alt:"".concat(t.pair," logo"),className:"w-8 h-8 sm:w-10 sm:h-10 rounded-full",onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHZpZXdCb3g9IjAgMCA0MCA0MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSI4IiB5PSI4IiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik0xMiAyQzYuNDggMiAyIDYuNDggMiAxMlM2LjQ4IDIyIDEyIDIyUzIyIDE3LjUyIDIyIDEyUzE3LjUyIDIgMTIgMloiIGZpbGw9IiM5Q0EzQUYiLz4KPHN2ZyB4PSI0IiB5PSI0IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik04IDRMMTIgOEw4IDEyTDQgOFoiIGZpbGw9IiM2MzY2RjEiLz4KPC9zdmc+Cjwvc3ZnPgo8L3N2Zz4K"}}):(0,Pe.jsx)("div",{className:"flex -space-x-1",children:t.flagUrls?t.flagUrls.map((e,n)=>(0,Pe.jsx)("img",{src:e,alt:"".concat(t.flags[n]," flag"),className:"w-6 h-6 sm:w-7 sm:h-7 rounded-full border border-white",onError:e=>{e.target.style.display="none"}},n)):(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(TA,{countryCode:t.flags[0]}),(0,Pe.jsx)(TA,{countryCode:t.flags[1]})]})})}),(0,Pe.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Pe.jsx)("h3",{className:"text-lg sm:text-xl font-bold truncate ".concat(0===n?"text-white":"text-gray-900"),children:t.pair}),(0,Pe.jsxs)("p",{className:"text-sm truncate ".concat(0===n?"text-gray-300":"text-gray-600"),children:["(",t.country,")"]})]})]}),(0,Pe.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pe.jsxs)("div",{className:"flex flex-col",children:[(0,Pe.jsx)("div",{className:"text-2xl sm:text-3xl font-bold ".concat(0===n?"text-white":"text-gray-900"),children:t.value}),(0,Pe.jsx)("div",{className:"text-sm font-semibold ".concat(0===n?t.isPositive?"text-green-400":"text-red-400":t.isPositive?"text-green-600":"text-red-600"),children:t.change})]}),(0,Pe.jsx)("div",{className:"flex items-center",children:(0,Pe.jsx)(HA,{data:t.sparkline||t.chart,isPositive:t.isPositive,width:80,height:24})})]})]})},t.id))}),(0,Pe.jsx)("div",{className:"hidden lg:flex justify-center mt-6",children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-2 text-gray-400",children:[(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,Pe.jsx)("div",{className:"w-16 h-1 bg-gray-300 rounded-full"}),(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Pe.jsx)("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"bg-white rounded-xl sm:rounded-2xl shadow-lg overflow-hidden",children:[(0,Pe.jsx)("div",{className:"hidden sm:block bg-gray-50 px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-4 gap-4 text-xs sm:text-sm font-medium text-gray-600",children:[(0,Pe.jsx)("div",{className:"text-left",children:"Name"}),(0,Pe.jsx)("div",{className:"text-center",children:"24h%"}),(0,Pe.jsx)("div",{className:"text-center",children:"Chart"}),(0,Pe.jsx)("div",{className:"text-right",children:"Price"})]})}),(0,Pe.jsx)("div",{className:"divide-y divide-gray-200",children:f?(0,Pe.jsx)("div",{className:"px-4 sm:px-6 py-6 sm:py-8 text-center",children:(0,Pe.jsxs)("div",{className:"inline-flex items-center space-x-2 text-gray-500",children:[(0,Pe.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,Pe.jsx)("span",{className:"text-sm sm:text-base",children:x("loadingMarketData")})]})}):p?(0,Pe.jsxs)("div",{className:"px-4 sm:px-6 py-6 sm:py-8 text-center",children:[(0,Pe.jsx)("div",{className:"text-red-500 mb-2 text-sm sm:text-base",children:p}),(0,Pe.jsx)("button",{onClick:()=>window.location.reload(),className:"text-blue-600 hover:text-blue-800 underline text-sm sm:text-base",children:"Retry"})]}):0===("Forex"===e?i:"Stocks"===e?a:"ETF"===e?l:"Futures"===e?h:n).length?(0,Pe.jsxs)("div",{className:"px-4 sm:px-6 py-6 sm:py-8 text-center text-gray-500 text-sm sm:text-base",children:["No data available for ",e]}):("Forex"===e?i:"Stocks"===e?a:"ETF"===e?l:"Futures"===e?h:n).map((t,n)=>(0,Pe.jsxs)(XE.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.5+.05*n},className:"px-4 sm:px-6 py-3 sm:py-4 hover:bg-gray-50 transition-colors duration-200",children:[(0,Pe.jsxs)("div",{className:"sm:hidden",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-2",children:["Crypto"===e?(0,Pe.jsx)("img",{src:t.logo,alt:"".concat(t.pair," logo"),className:"w-6 h-6 rounded-full",onError:e=>{e.target.style.display="none"}}):"Stocks"===e?(0,Pe.jsx)("img",{src:t.logo,alt:"".concat(t.pair," logo"),className:"w-6 h-6 rounded-full",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="block")}}):"ETF"===e?(0,Pe.jsx)("img",{src:t.logo||"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTIiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSI0IiB5PSI0IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik04IDJDNi4yNCAyIDQgNC4yNCA0IDZTNi4yNCAxMCA4IDEwUzEyIDcuNzYgMTIgNlM5Ljc2IDIgOCAyWiIgZmlsbD0iIzlDQTNBRiIvPgo8c3ZnIHg9IjIiIHk9IjIiIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgdmlld0JveD0iMCAwIDEyIDEyIiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTYgM0w5IDZMNiA5TDMgNloiIGZpbGw9IiM2MzY2RjEiLz4KPC9zdmc+Cjwvc3ZnPgo8L3N2Zz4K",alt:"".concat(t.pair," logo"),className:"w-6 h-6 rounded-full",onError:e=>{e.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTIiIGN5PSIxMiIgcj0iMTIiIGZpbGw9IiNGM0Y0RjYiLz4KPHN2ZyB4PSI0IiB5PSI0IiB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSI+CjxwYXRoIGQ9Ik04IDJDNi4yNCAyIDQgNC4yNCA0IDZTNi4yNCAxMCA4IDEwUzEyIDcuNzYgMTIgNlM5Ljc2IDIgOCAyWiIgZmlsbD0iIzlDQTNBRiIvPgo8c3ZnIHg9IjIiIHk9IjIiIHdpZHRoPSIxMiIgaGVpZ2h0PSIxMiIgdmlld0JveD0iMCAwIDEyIDEyIiBmaWxsPSJub25lIj4KPHBhdGggZD0iTTYgM0w5IDZMNiA5TDMgNloiIGZpbGw9IiM2MzY2RjEiLz4KPC9zdmc+Cjwvc3ZnPgo8L3N2Zz4K"}}):(0,Pe.jsx)("div",{className:"flex -space-x-1",children:t.flagUrls?t.flagUrls.map((e,n)=>(0,Pe.jsx)("img",{src:e,alt:"".concat(t.flags[n]," flag"),className:"w-5 h-5 rounded-full border border-white",onError:e=>{e.target.style.display="none"}},n)):(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(TA,{countryCode:t.flags[0]}),(0,Pe.jsx)(TA,{countryCode:t.flags[1]})]})}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:t.pair}),(0,Pe.jsx)("div",{className:"text-xs text-gray-600",children:t.country})]})]}),(0,Pe.jsxs)("div",{className:"text-right",children:[(0,Pe.jsx)("div",{className:"font-medium text-gray-900 text-sm transition-colors duration-1000 ".concat("increase"===w[t.pair]?"bg-green-100":"decrease"===w[t.pair]?"bg-red-100":""),children:t.value}),(0,Pe.jsx)("div",{className:"text-xs font-medium ".concat(t.isPositive?"text-green-600":"text-red-600"),children:t.change})]})]}),(0,Pe.jsx)("div",{className:"flex justify-center",children:(0,Pe.jsx)(HA,{data:t.sparkline||t.chart,isPositive:t.isPositive,width:60,height:20})})]}),(0,Pe.jsxs)("div",{className:"hidden sm:grid grid-cols-4 gap-4 items-center",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-3 text-left",children:["Crypto"===e?(0,Pe.jsx)("img",{src:t.logo,alt:"".concat(t.pair," logo"),className:"w-8 h-8 rounded-full",onError:e=>{e.target.style.display="none"}}):"Stocks"===e?(0,Pe.jsx)("img",{src:t.logo,alt:"".concat(t.pair," logo"),className:"w-8 h-8 rounded-full",onError:e=>{e.target.style.display="none",e.target.nextSibling&&(e.target.nextSibling.style.display="block")}}):(0,Pe.jsx)("div",{className:"flex -space-x-1",children:t.flagUrls?t.flagUrls.map((e,n)=>(0,Pe.jsx)("img",{src:e,alt:"".concat(t.flags[n]," flag"),className:"w-6 h-6 rounded-full border border-white",onError:e=>{e.target.style.display="none"}},n)):(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(TA,{countryCode:t.flags[0]}),(0,Pe.jsx)(TA,{countryCode:t.flags[1]})]})}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("div",{className:"font-medium text-gray-900",children:t.pair}),(0,Pe.jsx)("div",{className:"text-sm text-gray-600",children:t.country})]})]}),(0,Pe.jsx)("div",{className:"font-medium text-center ".concat(t.isPositive?"text-green-600":"text-red-600"),children:t.change}),(0,Pe.jsx)("div",{className:"flex justify-center",children:(0,Pe.jsx)(HA,{data:t.sparkline||t.chart,isPositive:t.isPositive,width:60,height:20})}),(0,Pe.jsx)("div",{className:"font-medium text-gray-900 text-right transition-colors duration-1000 ".concat("increase"===w[t.pair]?"bg-green-100":"decrease"===w[t.pair]?"bg-red-100":""),children:t.value})]})]},t.id))})]})]}),(0,Pe.jsx)("footer",{className:"bg-gray-900 text-white",children:(0,Pe.jsxs)("div",{className:"container-max",children:[(0,Pe.jsx)("div",{className:"py-8 sm:py-10 lg:py-12",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8",children:[(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},className:"sm:col-span-2 lg:col-span-1",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-2 sm:space-x-3 mb-4 sm:mb-6",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-6 sm:h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-lg sm:text-xl font-bold text-white",children:"Tokenize"})]}),(0,Pe.jsx)("p",{className:"text-gray-400 text-xs sm:text-sm leading-relaxed",children:"Advanced trading platform with real-time market data, smart trading algorithms, and comprehensive investment solutions."})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[(0,Pe.jsx)("h3",{className:"text-base sm:text-lg font-semibold mb-4 sm:mb-6",children:"Products"}),(0,Pe.jsxs)("ul",{className:"space-y-2 sm:space-y-3",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)(Ce,{to:"/market",className:"text-gray-300 hover:text-white transition-colors text-sm sm:text-base",children:"Markets"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)(Ce,{to:"/loan",className:"text-gray-300 hover:text-white transition-colors text-sm sm:text-base",children:"Investment & Lending"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)(Ce,{to:"/smart-trading",className:"text-gray-300 hover:text-white transition-colors text-sm sm:text-base",children:"Smart Trading"})})]})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[(0,Pe.jsx)("h3",{className:"text-base sm:text-lg font-semibold mb-4 sm:mb-6",children:"Company"}),(0,Pe.jsxs)("ul",{className:"space-y-2 sm:space-y-3",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#about",className:"text-gray-300 hover:text-white transition-colors text-sm sm:text-base",children:"About Us"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#license",className:"text-gray-300 hover:text-white transition-colors text-sm sm:text-base",children:"License Supervision"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)(Ce,{to:"/help-center",className:"text-gray-300 hover:text-white transition-colors text-sm sm:text-base",children:"Help Center"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#support",className:"text-gray-300 hover:text-white transition-colors text-sm sm:text-base",children:"Online Support"})})]})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[(0,Pe.jsx)("h3",{className:"text-base sm:text-lg font-semibold mb-4 sm:mb-6",children:"Policies"}),(0,Pe.jsxs)("ul",{className:"space-y-2 sm:space-y-3",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#terms",className:"text-gray-300 hover:text-white transition-colors text-sm sm:text-base",children:"Terms & Conditions"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#privacy",className:"text-gray-300 hover:text-white transition-colors text-sm sm:text-base",children:"Privacy Policy"})})]})]})]})}),(0,Pe.jsx)("div",{className:"border-t border-gray-800 py-4 sm:py-6",children:(0,Pe.jsxs)("div",{className:"flex flex-col lg:flex-row justify-between items-center space-y-4 lg:space-y-0",children:[(0,Pe.jsxs)("div",{className:"flex flex-wrap gap-2 sm:gap-4 text-xs sm:text-sm text-gray-400 justify-center lg:justify-start",children:[(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors",children:"Legal Information"}),(0,Pe.jsx)("a",{href:"#disclaimer",className:"hover:text-white transition-colors",children:"Disclaimer"}),(0,Pe.jsx)("a",{href:"#risk",className:"hover:text-white transition-colors",children:"Risk Warning"}),(0,Pe.jsx)("a",{href:"#cookies",className:"hover:text-white transition-colors",children:"Cookie Policy"}),(0,Pe.jsx)("a",{href:"#advertising",className:"hover:text-white transition-colors",children:"About Advertising"})]}),(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-3 sm:space-x-4",children:[(0,Pe.jsx)("a",{href:"#discord",className:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-gray-700 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})}),(0,Pe.jsx)("a",{href:"#twitter",className:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-gray-700 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})})}),(0,Pe.jsx)("a",{href:"#telegram",className:"w-8 h-8 sm:w-10 sm:h-10 bg-gray-800 rounded-full flex items-center justify-center hover:bg-gray-700 transition-colors",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 sm:w-5 sm:h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]}),(0,Pe.jsxs)("div",{className:"text-xs sm:text-sm text-gray-400 text-center lg:text-right",children:["\xa9 ",(new Date).getFullYear()," UBS. All rights reserved."]})]})]})})]})})]})},TN=()=>{const[e,t]=(0,s.useState)(!1),n=[{number:1,title:"Register",description:"Fill in the online form and open a trading account.",icon:(0,Pe.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})},{number:2,title:"Fund",description:"Deposit funds into your account to start trading.",icon:(0,Pe.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})},{number:3,title:"Trade",description:"Start trading with our award-winning trading platform.",icon:(0,Pe.jsx)("svg",{className:"w-8 h-8",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7h8m0 0v8m0-8l-8 8-4-4-6 6"})})}];return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white account-container pt-20",style:{minWidth:"1200px"},children:[(0,Pe.jsx)("div",{className:"bg-gray-50 py-4",children:(0,Pe.jsx)("div",{className:"container-max",children:(0,Pe.jsxs)("nav",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,Pe.jsx)(Ce,{to:"/",className:"hover:text-gray-900",children:"UBS"}),(0,Pe.jsx)("span",{children:">"}),(0,Pe.jsx)(Ce,{to:"/account",className:"hover:text-gray-900",children:"Account"}),(0,Pe.jsx)("span",{children:">"}),(0,Pe.jsx)("span",{className:"text-gray-900",children:"Invite friends"})]})})}),(0,Pe.jsx)("div",{className:"container-max py-16",children:(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center max-w-4xl mx-auto",children:[(0,Pe.jsx)("h1",{className:"text-5xl font-bold text-gray-900 mb-8",children:"Invite your friends"}),(0,Pe.jsxs)("div",{className:"flex justify-center items-center space-x-4 mb-8",children:[(0,Pe.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),(0,Pe.jsx)("div",{className:"w-20 h-20 bg-blue-100 border-4 border-blue-300 rounded-full flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-10 h-10 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),(0,Pe.jsx)("div",{className:"w-16 h-16 bg-gray-200 rounded-full flex items-center justify-center",children:(0,Pe.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})})]}),(0,Pe.jsx)("p",{className:"text-xl text-gray-600 mb-16 leading-relaxed",children:"Invite your friends and family to join us, and reap the rewards together while embarking on a journey towards financial prosperity!"}),(0,Pe.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-16",children:n.map((e,t)=>(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1+.2*t},className:"text-center",children:[(0,Pe.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-600 to-purple-600 rounded-full flex items-center justify-center text-white mx-auto mb-6 shadow-lg",children:e.icon}),(0,Pe.jsxs)("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:[e.title," #",e.number]}),(0,Pe.jsx)("p",{className:"text-gray-600 leading-relaxed",children:e.description})]},e.number))}),(0,Pe.jsx)(XE.button,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.7},onClick:async()=>{try{await navigator.clipboard.writeText("https://tokenize.com/invite/ref123456"),t(!0),setTimeout(()=>t(!1),2e3)}catch(e){console.error("Failed to copy: ",e)}},className:"px-12 py-4 rounded-xl font-semibold text-lg transition-all duration-300 transform hover:scale-105 ".concat(e?"bg-green-600 text-white":"bg-gray-900 text-white hover:bg-gray-800"),children:e?(0,Pe.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Pe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,Pe.jsx)("span",{children:"Copied!"})]}):"Copy link"}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"mt-16 grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"0"}),(0,Pe.jsx)("div",{className:"text-gray-600",children:"Friends Invited"})]}),(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"$0.00"}),(0,Pe.jsx)("div",{className:"text-gray-600",children:"Total Rewards"})]}),(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsx)("div",{className:"text-3xl font-bold text-gray-900 mb-2",children:"0"}),(0,Pe.jsx)("div",{className:"text-gray-600",children:"Active Referrals"})]})]})]})}),(0,Pe.jsx)("footer",{className:"bg-gray-800 text-white",children:(0,Pe.jsxs)("div",{className:"container-max",children:[(0,Pe.jsx)("div",{className:"py-16",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},className:"md:col-span-1",children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-xl font-bold text-white",children:"Tokenize"})]})}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Products"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Markets"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Investment & Lending"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Smart Trading"})})]})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Company"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"About Us"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"License Supervision"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Help Center"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Online Support"})})]})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Policies"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Terms & Conditions"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Privacy Policy"})})]})]})]})}),(0,Pe.jsx)("div",{className:"py-8 border-t border-gray-700",children:(0,Pe.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,Pe.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400",children:[(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Legal Information"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Disclaimer"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Risk Warning"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Cookie Policy"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"About Advertising"})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Pe.jsxs)("div",{className:"flex space-x-4",children:[(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]}),(0,Pe.jsx)("div",{className:"text-gray-400 text-sm",children:"\u2022 2023 UBS. All rights reserved."})]})]})})]})})]})},kN=()=>{const[e,t]=(0,s.useState)("General"),[n,r]=(0,s.useState)(""),i={General:[{question:"What is UBS?",answer:"UBS is a leading financial services platform that provides advanced trading tools, real-time market data, and comprehensive investment solutions for both beginners and experienced traders."},{question:"How do I get started?",answer:"To get started, simply create an account, complete the verification process, deposit funds, and start trading. Our platform is designed to be user-friendly for all experience levels."},{question:"Is UBS regulated?",answer:"Yes, UBS operates under strict regulatory compliance and is licensed in multiple jurisdictions. We maintain the highest standards of security and regulatory adherence."}],Account:[{question:"How do I verify my account?",answer:"Account verification involves submitting your personal information, identity documents, and proof of address. This process typically takes 1-3 business days to complete."},{question:"What documents do I need for verification?",answer:"You will need a government-issued ID (passport, driver's license, or national ID), proof of address (utility bill or bank statement), and in some cases, additional documentation for enhanced verification."},{question:"Can I have multiple accounts?",answer:"No, each user is allowed only one account per person. Multiple accounts are not permitted and may result in account suspension."}],Trading:[{question:"What trading pairs are available?",answer:"We offer a wide range of trading pairs including major cryptocurrencies (BTC, ETH, etc.), forex pairs, stocks, ETFs, and futures contracts."},{question:"What are the trading fees?",answer:"Our trading fees are competitive and vary based on your trading volume and account type. Maker fees start at 0.1% and taker fees start at 0.2%."},{question:"How do I place a trade?",answer:"To place a trade, select your desired trading pair, choose your order type (market, limit, stop), enter the amount, and confirm your trade. Always review your order before confirming."}],Deposits:[{question:"How do I deposit funds?",answer:"You can deposit funds via bank transfer, credit/debit card, or cryptocurrency. Navigate to the deposit section in your account dashboard and follow the instructions."},{question:"Are there deposit fees?",answer:"Deposit fees vary by method. Bank transfers are usually free, while card deposits may have a small fee. Cryptocurrency deposits are typically free."},{question:"How long do deposits take?",answer:"Deposit times vary by method: bank transfers (1-3 business days), card deposits (instant), cryptocurrency deposits (10-30 minutes depending on network congestion)."}],Withdrawals:[{question:"How do I withdraw funds?",answer:"To withdraw funds, go to the withdrawal section in your account, select your preferred method, enter the amount, and confirm your withdrawal request."},{question:"What are the withdrawal limits?",answer:"Withdrawal limits depend on your account verification level. Basic accounts have lower limits, while fully verified accounts have higher limits."},{question:"How long do withdrawals take?",answer:"Withdrawal processing times vary: bank transfers (1-3 business days), card withdrawals (1-2 business days), cryptocurrency withdrawals (10-30 minutes)."}],Security:[{question:"How secure is my account?",answer:"We use bank-level security including SSL encryption, two-factor authentication, cold storage for cryptocurrencies, and regular security audits."},{question:"What is two-factor authentication?",answer:"Two-factor authentication (2FA) adds an extra layer of security by requiring a second verification step, typically through an authenticator app or SMS."},{question:"What should I do if I suspect unauthorized access?",answer:"If you suspect unauthorized access, immediately change your password, enable 2FA if not already active, and contact our support team immediately."}],Technical:[{question:"What browsers are supported?",answer:"We support all modern browsers including Chrome, Firefox, Safari, and Edge. For the best experience, we recommend using the latest version of Chrome."},{question:"Is there a mobile app?",answer:"Yes, we have mobile apps for both iOS and Android devices. You can download them from the App Store or Google Play Store."},{question:"What if I experience technical issues?",answer:"If you experience technical issues, try refreshing your browser, clearing cache and cookies, or using a different browser. If problems persist, contact our technical support."}]}[e].filter(e=>e.question.toLowerCase().includes(n.toLowerCase())||e.answer.toLowerCase().includes(n.toLowerCase()));return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white account-container pt-20",style:{minWidth:"1200px"},children:[(0,Pe.jsx)("div",{className:"bg-gray-50 py-4",children:(0,Pe.jsx)("div",{className:"container-max",children:(0,Pe.jsxs)("nav",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[(0,Pe.jsx)(Ce,{to:"/",className:"hover:text-gray-900",children:"UBS"}),(0,Pe.jsx)("span",{children:">"}),(0,Pe.jsx)(Ce,{to:"/account",className:"hover:text-gray-900",children:"Account"}),(0,Pe.jsx)("span",{children:">"}),(0,Pe.jsx)("span",{className:"text-gray-900",children:"Help Center (FAQ)"})]})})}),(0,Pe.jsxs)("div",{className:"container-max py-12",children:[(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-center mb-12",children:[(0,Pe.jsx)("h1",{className:"text-5xl font-bold text-gray-900 mb-6",children:"Help Center (FAQ)"}),(0,Pe.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"Find answers to common questions and get the support you need"}),(0,Pe.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,Pe.jsxs)("div",{className:"relative",children:[(0,Pe.jsx)("input",{type:"text",value:n,onChange:e=>r(e.target.value),placeholder:"Search for help...",className:"w-full px-6 py-4 pl-12 border-2 border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg"}),(0,Pe.jsx)("svg",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]}),(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"flex justify-center mb-12",children:(0,Pe.jsx)("div",{className:"flex flex-wrap gap-2 bg-gray-100 p-2 rounded-xl",children:["General","Account","Trading","Deposits","Withdrawals","Security","Technical"].map(n=>(0,Pe.jsx)("button",{onClick:()=>t(n),className:"px-6 py-3 rounded-lg font-medium transition-all duration-300 ".concat(e===n?"bg-white text-gray-900 shadow-md":"text-gray-600 hover:text-gray-900"),children:n},n))})}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"max-w-4xl mx-auto",children:[(0,Pe.jsx)("div",{className:"space-y-4",children:i.map((e,t)=>(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.3+.1*t},className:"bg-white border-2 border-gray-200 rounded-xl p-6 hover:border-gray-300 transition-colors duration-300",children:[(0,Pe.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:e.question}),(0,Pe.jsx)("p",{className:"text-gray-600 leading-relaxed",children:e.answer})]},t))}),0===i.length&&(0,Pe.jsxs)("div",{className:"text-center py-12",children:[(0,Pe.jsx)("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.29-1.009-5.824-2.709M15 12a3 3 0 11-6 0 3 3 0 016 0z"})}),(0,Pe.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No results found"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Try adjusting your search terms or browse different categories."})]})]}),(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"text-center mt-16",children:(0,Pe.jsxs)("div",{className:"bg-gray-50 rounded-2xl p-8",children:[(0,Pe.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Still need help?"}),(0,Pe.jsx)("p",{className:"text-gray-600 mb-6",children:"Our support team is here to assist you 24/7"}),(0,Pe.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,Pe.jsx)("button",{className:"bg-blue-600 text-white px-8 py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors duration-300",children:"Contact Support"}),(0,Pe.jsx)("button",{className:"border-2 border-gray-300 text-gray-700 px-8 py-3 rounded-lg font-semibold hover:border-gray-400 transition-colors duration-300",children:"Live Chat"})]})]})})]}),(0,Pe.jsx)("footer",{className:"bg-gray-800 text-white",children:(0,Pe.jsxs)("div",{className:"container-max",children:[(0,Pe.jsx)("div",{className:"py-16",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},className:"md:col-span-1",children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-xl font-bold text-white",children:"Tokenize"})]})}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Products"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Markets"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Investment & Lending"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Smart Trading"})})]})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Company"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"About Us"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"License Supervision"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Help Center"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Online Support"})})]})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Policies"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Terms & Conditions"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Privacy Policy"})})]})]})]})}),(0,Pe.jsx)("div",{className:"py-8 border-t border-gray-700",children:(0,Pe.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,Pe.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400",children:[(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Legal Information"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Disclaimer"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Risk Warning"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Cookie Policy"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"About Advertising"})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Pe.jsxs)("div",{className:"flex space-x-4",children:[(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]}),(0,Pe.jsx)("div",{className:"text-gray-400 text-sm",children:"\u2022 2023 UBS. All rights reserved."})]})]})})]})})]})},CN=()=>{const{t:e}=Oe(),[t,n]=(0,s.useState)(""),[r,i]=(0,s.useState)(7),[o,a]=(0,s.useState)("USD"),[c,l]=(0,s.useState)(!1),[u]=(0,s.useState)(.1),[h,d]=(0,s.useState)(0),f=5e6;(0,s.useEffect)(()=>{if(t&&t>0){const e=parseFloat(t);d(e*u/100*r)}else d(0)},[t,r,u]);return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white account-container pt-20",style:{minWidth:"1200px"},children:[(0,Pe.jsx)("div",{className:"container-max py-16",children:(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-2xl mx-auto",children:[(0,Pe.jsxs)("div",{className:"text-center mb-12",children:[(0,Pe.jsxs)(XE.h1,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.1},className:"text-6xl font-bold text-gray-900 mb-4",children:[f.toLocaleString()," ",o]}),(0,Pe.jsx)(XE.p,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"text-xl text-gray-600 mb-8",children:e("loanSubtitle")}),(0,Pe.jsx)(XE.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},onClick:()=>l(!0),className:"bg-gray-900 text-white px-8 py-4 rounded-xl font-semibold text-lg hover:bg-gray-800 transition-colors duration-300 transform hover:scale-105",children:e("verification")})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"bg-white border-2 border-gray-200 rounded-2xl p-8 shadow-lg",children:[(0,Pe.jsxs)("div",{className:"mb-8",children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:e("loanAmount")}),(0,Pe.jsxs)("div",{className:"flex",children:[(0,Pe.jsx)("input",{type:"text",value:t,onChange:e=>{const t=e.target.value;(""===t||/^\d*\.?\d*$/.test(t))&&n(t)},placeholder:"I want to borrow...",className:"flex-1 px-4 py-4 border-2 border-gray-300 rounded-l-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent text-lg"}),(0,Pe.jsx)("select",{value:o,onChange:e=>a(e.target.value),className:"px-6 py-4 bg-gray-800 text-white border-2 border-l-0 border-gray-300 rounded-r-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:["USD","EUR","GBP","JPY","CHF"].map(e=>(0,Pe.jsx)("option",{value:e,children:e},e))})]}),t&&parseFloat(t)>f&&(0,Pe.jsxs)("p",{className:"text-red-500 text-sm mt-2",children:["Maximum loan amount is ",f.toLocaleString()," ",o]})]}),(0,Pe.jsxs)("div",{className:"mb-8",children:[(0,Pe.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:e("loanTerm")}),(0,Pe.jsxs)("div",{className:"flex",children:[(0,Pe.jsx)("input",{type:"text",value:"".concat(r," Days"),readOnly:!0,className:"flex-1 px-4 py-4 border-2 border-gray-300 rounded-l-xl bg-gray-50 text-lg"}),(0,Pe.jsx)("select",{value:r,onChange:e=>i(parseInt(e.target.value)),className:"px-6 py-4 bg-gray-800 text-white border-2 border-l-0 border-gray-300 rounded-r-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[7,14,30,60,90,180,365].map(e=>(0,Pe.jsxs)("option",{value:e,children:[e," Days"]},e))})]})]}),(0,Pe.jsxs)("div",{className:"bg-gray-50 rounded-xl p-6 mb-8",children:[(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("p",{className:"text-gray-600 mb-2",children:[e("interestRate"),":"]}),(0,Pe.jsxs)("p",{className:"text-3xl font-bold text-gray-900",children:[u,"%"]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("p",{className:"text-gray-600 mb-2",children:"Total interest amount:"}),(0,Pe.jsx)("p",{className:"text-3xl font-bold text-gray-900",children:(m=h,new Intl.NumberFormat("en-US",{style:"currency",currency:o,minimumFractionDigits:2,maximumFractionDigits:2}).format(m))})]})]}),(0,Pe.jsx)("div",{className:"mt-6 pt-6 border-t border-gray-200",children:(0,Pe.jsxs)("p",{className:"text-gray-600 text-sm",children:["No interest need to pay within ",r," days of the loan, after that, interest is payable."]})})]}),(0,Pe.jsx)(XE.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{!t||parseFloat(t)<=0?alert("Please enter a valid loan amount"):parseFloat(t)>f?alert("Maximum loan amount is ".concat(f.toLocaleString()," ").concat(o)):alert("Loan application submitted for ".concat(t," ").concat(o," for ").concat(r," days"))},className:"w-full bg-gray-900 text-white py-4 rounded-xl font-semibold text-lg hover:bg-gray-800 transition-colors duration-300",children:e("getStarted")})]}),(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"mt-12 text-center",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsx)("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Pe.jsx)("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})})}),(0,Pe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Low Interest Rates"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Competitive rates starting from 0.1% daily"})]}),(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Pe.jsx)("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),(0,Pe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Fast Approval"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Get approved within minutes"})]}),(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsx)("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Pe.jsx)("svg",{className:"w-8 h-8 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),(0,Pe.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Secure & Safe"}),(0,Pe.jsx)("p",{className:"text-gray-600",children:"Bank-level security for your transactions"})]})]})})]})}),(0,Pe.jsx)("footer",{className:"bg-gray-800 text-white",children:(0,Pe.jsxs)("div",{className:"container-max",children:[(0,Pe.jsx)("div",{className:"py-16",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},className:"md:col-span-1",children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-xl font-bold text-white",children:"Tokenize"})]})}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Products"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Markets"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Investment & Lending"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Smart Trading"})})]})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Company"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"About Us"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"License Supervision"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Help Center"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Online Support"})})]})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Policies"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Terms & Conditions"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Privacy Policy"})})]})]})]})}),(0,Pe.jsx)("div",{className:"py-8 border-t border-gray-700",children:(0,Pe.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,Pe.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400",children:[(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Legal Information"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Disclaimer"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Risk Warning"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Cookie Policy"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"About Advertising"})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Pe.jsxs)("div",{className:"flex space-x-4",children:[(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]}),(0,Pe.jsx)("div",{className:"text-gray-400 text-sm",children:"\u2022 2023 UBS. All rights reserved."})]})]})})]})}),(0,Pe.jsx)(yN,{isOpen:c,onClose:()=>l(!1)})]});var m},IN=()=>{const[e,t]=(0,s.useState)("Stocks"),[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)(!0),[a,c]=(0,s.useState)(null),[l,u]=(0,s.useState)(!1),[h,d]=(0,s.useState)(""),{t:f}=Oe(),{user:m}=nA(),p=[{key:"Forex",label:f("forex")},{key:"Crypto",label:f("crypto")},{key:"Stocks",label:f("stocks")},{key:"ETF",label:f("etf")},{key:"Futures",label:f("futures")}];(0,s.useEffect)(()=>{const t=async()=>{try{if(o(!0),c(null),"Forex"===e){const e=[{id:1,pair:"USD/CHF",country:"Switzerland",value:BA(.7963,4),change:VA(.09),isPositive:!0,flags:["US","CH"],flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/ch.png"],chart:OA(!0)},{id:2,pair:"USD/JPY",country:"Japan",value:BA(149.19,4),change:VA(.09),isPositive:!0,flags:["US","JP"],flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/jp.png"],chart:OA(!0)},{id:3,pair:"USD/EUR",country:"Eurozone",value:BA(.85,4),change:VA(.04),isPositive:!0,flags:["US","EU"],flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/eu.png"],chart:OA(!0)},{id:4,pair:"USD/GBP",country:"United Kingdom",value:BA(.73,4),change:VA(-.02),isPositive:!1,flags:["US","GB"],flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/gb.png"],chart:OA(!1)},{id:5,pair:"USD/CAD",country:"Canada",value:BA(1.25,4),change:VA(.03),isPositive:!0,flags:["US","CA"],flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/ca.png"],chart:OA(!0)},{id:6,pair:"USD/AUD",country:"Australia",value:BA(1.35,4),change:VA(-.05),isPositive:!1,flags:["US","AU"],flagUrls:["https://flagcdn.com/w20/us.png","https://flagcdn.com/w20/au.png"],chart:OA(!1)}];r(e)}else if("Crypto"===e){var t,n,s,i,a,l,u,h,d,f,m,p,g,y,v,w,b,x,S,E;const e=await DA(["bitcoin","ethereum","filecoin","dogecoin","ripple"]),o=[{id:1,pair:"BTC/USD",country:"Bitcoin",value:BA((null===(t=e.bitcoin)||void 0===t?void 0:t.usd)||0,2),change:VA((null===(n=e.bitcoin)||void 0===n?void 0:n.usd_24h_change)||0),isPositive:((null===(s=e.bitcoin)||void 0===s?void 0:s.usd_24h_change)||0)>=0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/1/large/bitcoin.png",chart:OA(((null===(i=e.bitcoin)||void 0===i?void 0:i.usd_24h_change)||0)>=0)},{id:2,pair:"ETH/USD",country:"Ethereum",value:BA((null===(a=e.ethereum)||void 0===a?void 0:a.usd)||0,2),change:VA((null===(l=e.ethereum)||void 0===l?void 0:l.usd_24h_change)||0),isPositive:((null===(u=e.ethereum)||void 0===u?void 0:u.usd_24h_change)||0)>=0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/279/large/ethereum.png",chart:OA(((null===(h=e.ethereum)||void 0===h?void 0:h.usd_24h_change)||0)>=0)},{id:3,pair:"FIL/USD",country:"Filecoin",value:BA((null===(d=e.filecoin)||void 0===d?void 0:d.usd)||2.2,4),change:VA((null===(f=e.filecoin)||void 0===f?void 0:f.usd_24h_change)||1.41),isPositive:((null===(m=e.filecoin)||void 0===m?void 0:m.usd_24h_change)||0)>=0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/12817/large/filecoin.png",chart:OA(((null===(p=e.filecoin)||void 0===p?void 0:p.usd_24h_change)||0)>=0)},{id:4,pair:"DOGE/USD",country:"Dogecoin",value:BA((null===(g=e.dogecoin)||void 0===g?void 0:g.usd)||.24,4),change:VA((null===(y=e.dogecoin)||void 0===y?void 0:y.usd_24h_change)||2.94),isPositive:((null===(v=e.dogecoin)||void 0===v?void 0:v.usd_24h_change)||0)>=0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/5/large/dogecoin.png",chart:OA(((null===(w=e.dogecoin)||void 0===w?void 0:w.usd_24h_change)||0)>=0)},{id:5,pair:"XRP/USD",country:"XRP",value:BA((null===(b=e.ripple)||void 0===b?void 0:b.usd)||2.87,4),change:VA((null===(x=e.ripple)||void 0===x?void 0:x.usd_24h_change)||2.13),isPositive:((null===(S=e.ripple)||void 0===S?void 0:S.usd_24h_change)||0)>=0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/44/large/xrp-symbol-white-128.png",chart:OA(((null===(E=e.ripple)||void 0===E?void 0:E.usd_24h_change)||0)>=0)},{id:6,pair:"LTC/USD",country:"Litecoin",value:BA(107.11,2),change:VA(2.44),isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/2/large/litecoin.png",chart:OA(!0)},{id:7,pair:"DOT/USD",country:"Polkadot",value:BA(3.98,4),change:VA(3),isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/12171/large/polkadot.png",chart:OA(!0)},{id:8,pair:"TRX/USD",country:"TRON",value:BA(.08,4),change:VA(2.3),isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/1094/large/tron-logo.png",chart:OA(!0)},{id:9,pair:"MATIC/USD",country:"Polygon",value:BA(.89,4),change:VA(1.8),isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/4713/large/matic-token-icon.png",chart:OA(!0)},{id:10,pair:"ADA/USD",country:"Cardano",value:BA(.45,4),change:VA(.9),isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/975/large/cardano.png",chart:OA(!0)},{id:11,pair:"LINK/USD",country:"Chainlink",value:BA(14.67,4),change:VA(3.2),isPositive:!0,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/877/large/chainlink-new-logo.png",chart:OA(!0)},{id:12,pair:"ATOM/USD",country:"Cosmos",value:BA(8.23,4),change:VA(-.5),isPositive:!1,flags:["US","US"],logo:"https://assets.coingecko.com/coins/images/1481/large/cosmos_hub.png",chart:OA(!1)}];r(o)}else if("Stocks"===e){const e=[{id:1,pair:"AAPL",country:"Apple Tokenize",value:BA(255.4603,4),change:VA(.54),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/apple.com",chart:OA(!0)},{id:2,pair:"TSLA",country:"Tesla Tokenize",value:BA(440.3997,4),change:VA(2.83),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/tesla.com",chart:OA(!0)},{id:3,pair:"AMZN",country:"Amazon.com",value:BA(219.7825,4),change:VA(.32),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/amazon.com",chart:OA(!0)},{id:4,pair:"GOOGL",country:"Alphabet",value:BA(246.5391,4),change:VA(.21),isPositive:!0,flags:["US","US"],logo:"https://logos-world.net/wp-content/uploads/2020/09/Google-Logo.png",chart:OA(!0)},{id:5,pair:"MSFT",country:"Microsoft",value:BA(511.4605,4),change:VA(.27),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/microsoft.com",chart:OA(!0)},{id:6,pair:"UNH",country:"Unitedhealth Group Inc",value:BA(344.0802,4),change:VA(-1.11),isPositive:!1,flags:["US","US"],logo:"https://logo.clearbit.com/unitedhealthgroup.com",chart:OA(!1)},{id:7,pair:"AI",country:"C3.ai, Inc",value:BA(17.1391,4),change:VA(-.93),isPositive:!1,flags:["US","US"],logo:"https://logo.clearbit.com/c3.ai",chart:OA(!1)},{id:8,pair:"BRZE",country:"Braze, Inc.",value:BA(31.5802,4),change:VA(.22),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/braze.com",chart:OA(!0)},{id:9,pair:"FLNC",country:"Fluence Energy, Inc.",value:BA(11.9107,4),change:VA(3.66),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/fluenceenergy.com",chart:OA(!0)},{id:10,pair:"SNOW",country:"Snowflake Inc.",value:BA(224.6404,4),change:VA(1.05),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/snowflake.com",chart:OA(!0)},{id:11,pair:"BB",country:"BlackBerry Limited",value:BA(4.958,4),change:VA(6.17),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/blackberry.com",chart:OA(!0)},{id:12,pair:"EVGO",country:"EVgo, Inc.",value:BA(4.5691,4),change:VA(-1.32),isPositive:!1,flags:["US","US"],logo:"https://logo.clearbit.com/evgo.com",chart:OA(!1)},{id:13,pair:"MQ",country:"Marqeta, Inc.",value:BA(5.3602,4),change:VA(.38),isPositive:!0,flags:["US","US"],logo:"https://logo.clearbit.com/marqeta.com",chart:OA(!0)}];r(e)}else if("ETF"===e){const e=[{id:1,pair:"SPY",country:"SPDR S&P 500 ETF",value:BA(456.78,2),change:VA(.85),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:2,pair:"QQQ",country:"Invesco QQQ Trust",value:BA(389.45,2),change:VA(1.23),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:3,pair:"GLD",country:"SPDR Gold Shares",value:BA(189.67,2),change:VA(1.45),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:4,pair:"VTI",country:"Vanguard Total Stock Market ETF",value:BA(234.56,2),change:VA(.67),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:5,pair:"IWM",country:"iShares Russell 2000 ETF",value:BA(198.34,2),change:VA(-.23),isPositive:!1,flags:["US","US"],chart:OA(!1)},{id:6,pair:"EFA",country:"iShares MSCI EAFE ETF",value:BA(78.91,2),change:VA(.34),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:7,pair:"VEA",country:"Vanguard FTSE Developed Markets ETF",value:BA(45.23,2),change:VA(.12),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:8,pair:"EEM",country:"iShares MSCI Emerging Markets ETF",value:BA(42.15,2),change:VA(-.56),isPositive:!1,flags:["US","US"],chart:OA(!1)},{id:9,pair:"XLF",country:"Financial Select Sector SPDR Fund",value:BA(35.67,2),change:VA(.78),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:10,pair:"XLK",country:"Technology Select Sector SPDR Fund",value:BA(178.45,2),change:VA(1.23),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:11,pair:"XLE",country:"Energy Select Sector SPDR Fund",value:BA(89.12,2),change:VA(-.45),isPositive:!1,flags:["US","US"],chart:OA(!1)},{id:12,pair:"XLV",country:"Health Care Select Sector SPDR Fund",value:BA(134.78,2),change:VA(.67),isPositive:!0,flags:["US","US"],chart:OA(!0)}];r(e)}else if("Futures"===e){const e=[{id:1,pair:"ES",country:"E-mini S&P 500",value:BA(4567.25,2),change:VA(.92),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:2,pair:"GC",country:"Gold Futures",value:BA(2034.8,2),change:VA(1.23),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:3,pair:"CL",country:"Crude Oil Futures",value:BA(78.45,2),change:VA(-1.67),isPositive:!1,flags:["US","US"],chart:OA(!1)},{id:4,pair:"NQ",country:"E-mini NASDAQ 100",value:BA(15678.9,2),change:VA(.45),isPositive:!0,flags:["US","US"],chart:OA(!0)},{id:5,pair:"YM",country:"E-mini Dow Jones",value:BA(34567.89,2),change:VA(-.12),isPositive:!1,flags:["US","US"],chart:OA(!1)}];r(e)}o(!1)}catch(A){console.error("Error fetching market data:",A),c("Failed to fetch market data. Using cached data."),o(!1)}};t();const n=setInterval(t,3e4);return()=>clearInterval(n)},[e]);const g=e=>{d(e),u(!0)};return(0,Pe.jsxs)("div",{className:"min-h-screen bg-white pt-16 sm:pt-20",children:[(0,Pe.jsxs)("div",{className:"container-max py-6 sm:py-8 lg:py-12",children:[(0,Pe.jsx)(XE.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 text-center mb-6 sm:mb-8 lg:mb-12",children:f("smartTradingTitle")}),(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},className:"flex justify-center mb-6 sm:mb-8 lg:mb-12",children:(0,Pe.jsx)("div",{className:"flex flex-wrap justify-center gap-1 sm:gap-2 bg-gray-100 p-1 sm:p-2 rounded-lg sm:rounded-xl max-w-full overflow-x-auto",children:p.map(n=>(0,Pe.jsx)("button",{onClick:()=>t(n.key),className:"px-3 sm:px-4 lg:px-6 py-2 sm:py-3 rounded-md sm:rounded-lg font-medium text-xs sm:text-sm lg:text-base transition-all duration-300 whitespace-nowrap ".concat(e===n.key?"bg-gray-900 text-white shadow-md":"text-gray-600 hover:text-gray-900"),children:n.label},n.key))})}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-xl sm:rounded-2xl shadow-lg overflow-hidden",children:[(0,Pe.jsx)("div",{className:"hidden sm:block bg-gray-50 px-4 sm:px-6 py-3 sm:py-4 border-b border-gray-200",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-5 gap-4 text-xs sm:text-sm font-medium text-gray-600",children:[(0,Pe.jsx)("div",{className:"text-left",children:"Name"}),(0,Pe.jsx)("div",{className:"text-center",children:f("spotPrice")}),(0,Pe.jsx)("div",{className:"text-center",children:"24h%"}),(0,Pe.jsx)("div",{className:"text-center",children:f("chart")}),(0,Pe.jsx)("div",{className:"text-right"})]})}),(0,Pe.jsx)("div",{className:"divide-y divide-gray-200",children:i?(0,Pe.jsx)("div",{className:"px-4 sm:px-6 py-6 sm:py-8 text-center",children:(0,Pe.jsxs)("div",{className:"inline-flex items-center space-x-2 text-gray-500",children:[(0,Pe.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600"}),(0,Pe.jsx)("span",{className:"text-sm sm:text-base",children:"Loading market data..."})]})}):a?(0,Pe.jsxs)("div",{className:"px-4 sm:px-6 py-6 sm:py-8 text-center",children:[(0,Pe.jsx)("div",{className:"text-red-500 mb-2 text-sm sm:text-base",children:a}),(0,Pe.jsx)("button",{onClick:()=>window.location.reload(),className:"text-blue-600 hover:text-blue-800 underline text-sm sm:text-base",children:"Retry"})]}):0===n.length?(0,Pe.jsxs)("div",{className:"px-4 sm:px-6 py-6 sm:py-8 text-center text-gray-500 text-sm sm:text-base",children:["No data available for ",e]}):n.map((t,n)=>(0,Pe.jsx)(Ce,{to:"/trading/".concat(e.toLowerCase(),"/").concat(t.pair),className:"block",children:(0,Pe.jsxs)(XE.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.3+.05*n},className:"px-4 sm:px-6 py-3 sm:py-4 hover:bg-gray-50 transition-colors duration-200 cursor-pointer",children:[(0,Pe.jsxs)("div",{className:"sm:hidden",children:[(0,Pe.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-2",children:["Crypto"===e&&t.logo||"Stocks"===e&&t.logo?(0,Pe.jsx)("img",{src:t.logo,alt:"".concat(t.pair," logo"),className:"w-6 h-6 rounded-full",onError:e=>{e.target.style.display="none"}}):"Forex"===e&&t.flagUrls?(0,Pe.jsx)("div",{className:"flex -space-x-1",children:t.flagUrls.map((e,n)=>(0,Pe.jsx)("img",{src:e,alt:"".concat(t.flags[n]," flag"),className:"w-5 h-5 rounded-full",onError:e=>{e.target.style.display="none"}},n))}):(0,Pe.jsxs)("div",{className:"flex -space-x-1",children:[(0,Pe.jsx)(TA,{countryCode:t.flags[0]}),(0,Pe.jsx)(TA,{countryCode:t.flags[1]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:t.pair}),(0,Pe.jsx)("div",{className:"text-xs text-gray-600",children:t.country})]})]}),(0,Pe.jsxs)("div",{className:"text-right",children:[(0,Pe.jsx)("div",{className:"font-medium text-gray-900 text-sm",children:t.value}),(0,Pe.jsx)("div",{className:"text-xs font-medium ".concat(t.isPositive?"text-green-600":"text-red-600"),children:t.change})]})]}),(0,Pe.jsx)("div",{className:"flex justify-center mb-2",children:(0,Pe.jsx)(AN,{data:t.chart,isPositive:t.isPositive})}),(0,Pe.jsx)("div",{className:"flex justify-end",children:(0,Pe.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),g(t.pair)},className:"w-6 h-6 bg-gray-200 hover:bg-gray-300 rounded-full flex items-center justify-center transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-3 h-3 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})})]}),(0,Pe.jsxs)("div",{className:"hidden sm:grid grid-cols-5 gap-4 items-center",children:[(0,Pe.jsxs)("div",{className:"flex items-center space-x-3 text-left",children:["Crypto"===e&&t.logo||"Stocks"===e&&t.logo?(0,Pe.jsx)("img",{src:t.logo,alt:"".concat(t.pair," logo"),className:"w-8 h-8 rounded-full",onError:e=>{e.target.style.display="none"}}):"Forex"===e&&t.flagUrls?(0,Pe.jsx)("div",{className:"flex -space-x-1",children:t.flagUrls.map((e,n)=>(0,Pe.jsx)("img",{src:e,alt:"".concat(t.flags[n]," flag"),className:"w-6 h-6 rounded-full",onError:e=>{e.target.style.display="none"}},n))}):(0,Pe.jsxs)("div",{className:"flex -space-x-1",children:[(0,Pe.jsx)(TA,{countryCode:t.flags[0]}),(0,Pe.jsx)(TA,{countryCode:t.flags[1]})]}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("div",{className:"font-medium text-gray-900",children:t.pair}),(0,Pe.jsx)("div",{className:"text-sm text-gray-600",children:t.country})]})]}),(0,Pe.jsx)("div",{className:"font-medium text-gray-900 text-center",children:t.value}),(0,Pe.jsx)("div",{className:"font-medium text-center ".concat(t.isPositive?"text-green-600":"text-red-600"),children:t.change}),(0,Pe.jsx)("div",{className:"flex justify-center",children:(0,Pe.jsx)(AN,{data:t.chart,isPositive:t.isPositive})}),(0,Pe.jsx)("div",{className:"flex justify-end",children:(0,Pe.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),g(t.pair)},className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded-full flex items-center justify-center transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})})]})]})},t.id))})]})]}),(0,Pe.jsx)("footer",{className:"bg-gray-800 text-white",children:(0,Pe.jsxs)("div",{className:"container-max",children:[(0,Pe.jsx)("div",{className:"py-16",children:(0,Pe.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[(0,Pe.jsx)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6},className:"md:col-span-1",children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-3 mb-6",children:[(0,Pe.jsx)("img",{src:"https://www.ubs.com/etc/designs/fit/img/UBS_Logo_Semibold.svg",alt:"UBS Logo",className:"h-8 w-auto"}),(0,Pe.jsx)("span",{className:"text-xl font-bold text-white",children:"Tokenize"})]})}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Products"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Markets"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Investment & Lending"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#products",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Smart Trading"})})]})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Company"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"About Us"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"License Supervision"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Help Center"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#company",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Online Support"})})]})]}),(0,Pe.jsxs)(XE.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[(0,Pe.jsx)("h4",{className:"text-lg font-semibold mb-4",children:"Policies"}),(0,Pe.jsxs)("ul",{className:"space-y-2",children:[(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Terms & Conditions"})}),(0,Pe.jsx)("li",{children:(0,Pe.jsx)("a",{href:"#legal",className:"text-gray-300 hover:text-white transition-colors duration-300",children:"Privacy Policy"})})]})]})]})}),(0,Pe.jsx)("div",{className:"py-8 border-t border-gray-700",children:(0,Pe.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[(0,Pe.jsxs)("div",{className:"flex flex-wrap gap-4 text-sm text-gray-400",children:[(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Legal Information"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Disclaimer"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Risk Warning"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"Cookie Policy"}),(0,Pe.jsx)("a",{href:"#legal",className:"hover:text-white transition-colors duration-300",children:"About Advertising"})]}),(0,Pe.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Pe.jsxs)("div",{className:"flex space-x-4",children:[(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.419 2.157-2.419 1.21 0 2.176 1.096 2.157 2.42 0 1.333-.946 2.418-2.157 2.418z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),(0,Pe.jsx)(XE.a,{whileHover:{scale:1.1},href:"#",className:"w-8 h-8 bg-gray-700 rounded-full flex items-center justify-center hover:bg-gray-600 transition-colors duration-300",children:(0,Pe.jsx)("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{d:"M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"})})})]}),(0,Pe.jsx)("div",{className:"text-gray-400 text-sm",children:"\u2022 2023 UBS. All rights reserved."})]})]})})]})}),(0,Pe.jsx)(WA,{isOpen:l,onClose:()=>u(!1),symbol:h,availableBalance:(null===m||void 0===m?void 0:m.balance)||0})]})},_N=()=>{const{showSignMessageModal:e,setShowSignMessageModal:t,account:n,signer:r,signMessage:i}=Xf(),[o,a]=(0,s.useState)(!1),c=()=>{t(!1)};return(0,Pe.jsx)(sy,{children:e&&(0,Pe.jsx)(XE.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center z-50 p-4",onClick:c,children:(0,Pe.jsxs)(XE.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-gray-800 rounded-lg p-4 sm:p-6 w-full max-w-sm sm:max-w-md mx-auto shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,Pe.jsx)("div",{className:"text-center mb-4 sm:mb-6",children:(0,Pe.jsx)("h2",{className:"text-white text-lg sm:text-xl font-bold mb-2",children:"Sign Message for Login"})}),(0,Pe.jsx)("div",{className:"mb-4 sm:mb-6",children:(0,Pe.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3 sm:p-4",children:[(0,Pe.jsx)("div",{className:"text-gray-300 text-xs sm:text-sm mb-2",children:"Account:"}),(0,Pe.jsx)("div",{className:"text-white font-mono text-xs sm:text-sm break-all",children:n||"0x0000000000000000000000000000000000000000"})]})}),(0,Pe.jsx)("div",{className:"mb-4 sm:mb-6",children:(0,Pe.jsxs)("div",{className:"bg-gray-700 rounded-lg p-3 sm:p-4",children:[(0,Pe.jsx)("div",{className:"text-gray-300 text-xs sm:text-sm mb-2",children:"Origin:"}),(0,Pe.jsx)("div",{className:"text-white font-mono text-xs sm:text-sm",children:window.location.origin})]})}),(0,Pe.jsx)("div",{className:"text-center mb-4 sm:mb-6",children:(0,Pe.jsx)("p",{className:"text-gray-300 text-xs sm:text-sm",children:"Connect to Wallet"})}),(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3",children:[(0,Pe.jsx)("button",{onClick:c,className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white py-2 sm:py-3 px-3 sm:px-4 rounded-lg font-medium transition-colors text-sm sm:text-base",disabled:o,children:"Cancel"}),(0,Pe.jsx)("button",{onClick:async()=>{if(!r||!n)try{return await window.ethereum.request({method:"eth_requestAccounts"}),void window.location.reload()}catch(e){return console.error("Failed to connect wallet:",e),void alert("Please install MetaMask or Coinbase Wallet to continue.")}a(!0);try{await i(),t(!1)}catch(e){console.error("Failed to sign message:",e),alert("Failed to sign message. Please try again.")}finally{a(!1)}},className:"flex-1 bg-white hover:bg-gray-100 text-black py-2 sm:py-3 px-3 sm:px-4 rounded-lg font-medium transition-colors text-sm sm:text-base",disabled:o,children:o?"Signing...":"Sign Message"})]})]})})})},PN=()=>{const[e,t]=(0,s.useState)("users"),[n,r]=(0,s.useState)([]),[i,o]=(0,s.useState)([]),[a,c]=(0,s.useState)([]),[l,u]=(0,s.useState)([]),[h,d]=(0,s.useState)([]),[f,m]=(0,s.useState)([]),[p,g]=(0,s.useState)(null),[y,v]=(0,s.useState)(""),[w,b]=(0,s.useState)(!1),[x,S]=(0,s.useState)(!1),E=(0,s.useCallback)(async()=>{b(!0);try{switch(console.log("Loading data for tab:",e),e){case"users":const t=await(async()=>{try{return(await(0,em.GG)((0,em.rJ)(tm.db,"users"))).docs.map(e=>(0,tt.A)({id:e.id},e.data()))}catch(e){throw console.error("Error getting all users:",e),e}})();console.log("Users data:",t),r(t);break;case"deposits":const n=await(async()=>{try{const e=(0,em.P)((0,em.rJ)(tm.db,"deposits"),(0,em.My)("createdAt","desc"));return(await(0,em.GG)(e)).docs.map(e=>(0,tt.A)({id:e.id},e.data()))}catch(e){throw console.error("Error getting all deposits:",e),e}})();console.log("Deposits data:",n),o(n);break;case"withdrawals":const s=await(async()=>{try{const e=(0,em.P)((0,em.rJ)(tm.db,"withdrawals"),(0,em.My)("createdAt","desc"));return(await(0,em.GG)(e)).docs.map(e=>(0,tt.A)({id:e.id},e.data()))}catch(e){throw console.error("Error getting all withdrawals:",e),e}})();console.log("Withdrawals data:",s),c(s);break;case"trades":const i=await(async()=>{try{const e=(0,em.P)((0,em.rJ)(tm.db,"trades"),(0,em.My)("createdAt","desc"));return(await(0,em.GG)(e)).docs.map(e=>(0,tt.A)({id:e.id},e.data()))}catch(e){throw console.error("Error getting all trades:",e),e}})();console.log("Trades data:",i),u(i);break;case"chat":const a=await(async()=>{try{const e=(0,em.P)((0,em.rJ)(tm.db,"chatMessages"));return(await(0,em.GG)(e)).docs.map(e=>(0,tt.A)({id:e.id},e.data())).sort((e,t)=>{var n,r;const s=null!==(n=e.createdAt)&&void 0!==n&&n.toDate?e.createdAt.toDate():new Date(e.createdAt||0);return(null!==(r=t.createdAt)&&void 0!==r&&r.toDate?t.createdAt.toDate():new Date(t.createdAt||0))-s})}catch(e){throw console.error("Error getting all chat messages:",e),e}})();console.log("Chat data:",a),d(a);break;default:console.log("Unknown tab:",e)}}catch(t){console.error("Error loading data:",t)}finally{b(!1)}},[e]);(0,s.useEffect)(()=>{E()},[e,E]),(0,s.useEffect)(()=>{if("chat"===e){console.log("=== ADMIN CHAT SUBSCRIPTION SETUP ==="),console.log("Users data:",n);const e=(e=>{try{const t=(0,em.P)((0,em.rJ)(tm.db,"chatMessages"));return(0,em.aQ)(t,t=>{const n={};t.docs.forEach(e=>{const t=e.data();if(!t.userId)return;const r=t.userId;n[r]||(n[r]={userId:r,lastMessage:"",lastMessageTime:null,unreadCount:0,isAdmin:!1}),t.isAdmin?n[r].isAdmin=!0:(n[r].lastMessage=t.message,n[r].lastMessageTime=t.createdAt,n[r].isAdmin=!1),t.isAdmin||t.read||n[r].unreadCount++});const r=Object.values(n).filter(e=>e.lastMessage);r.sort((e,t)=>{var n,r;const s=null!==(n=e.lastMessageTime)&&void 0!==n&&n.toDate?e.lastMessageTime.toDate():new Date(e.lastMessageTime||0);return(null!==(r=t.lastMessageTime)&&void 0!==r&&r.toDate?t.lastMessageTime.toDate():new Date(t.lastMessageTime||0))-s}),e(r)},e=>{console.error("Error in subscribeToConversations:",e)})}catch(t){return console.error("Error setting up subscribeToConversations:",t),()=>{}}})(e=>{console.log("=== ADMIN CONVERSATIONS UPDATE ==="),console.log("Raw conversation list:",e);const t=e.map(async e=>{const t=n.find(t=>t.id===e.userId);return console.log("Conversation ".concat(e.userId," - Found user data:"),t),(0,tt.A)((0,tt.A)({},e),{},{walletAddress:(null===t||void 0===t?void 0:t.walletAddress)||e.userId,userData:t})});Promise.all(t).then(e=>{console.log("Enhanced conversations:",e),m(e)})});return()=>e()}},[e,n]),(0,s.useEffect)(()=>{if(p){console.log("=== ADMIN SELECTED CONVERSATION SUBSCRIPTION ==="),console.log("Selected conversation:",p),console.log("User ID:",p.userId);const e=Lg(p.userId,e=>{console.log("=== ADMIN MESSAGES UPDATE ==="),console.log("Snapshot docs count:",e.docs.length),console.log("Snapshot docs:",e.docs.map(e=>(0,tt.A)({id:e.id},e.data())));const t=e.docs.map(e=>(0,tt.A)({id:e.id},e.data())).sort((e,t)=>{var n,r;return(null!==(n=e.createdAt)&&void 0!==n&&n.toDate?e.createdAt.toDate():new Date(e.createdAt||0))-(null!==(r=t.createdAt)&&void 0!==r&&r.toDate?t.createdAt.toDate():new Date(t.createdAt||0))});console.log("Processed messages (sorted):",t),d(t)});return()=>e()}},[p]);const A=async e=>{try{await(async(e,t)=>{try{const n=(0,em.H9)(tm.db,"deposits",e);return await(0,em.c4)(tm.db,async e=>{const r=await e.get(n);if(!r.exists())throw new Error("Deposit not found");const s=r.data(),i=(0,em.H9)(tm.db,"users",s.userId);e.update(n,{status:"approved",approvedAt:(0,em.O5)(),approvedBy:t}),e.update(i,{balance:(0,em.GV)(s.amount),totalDeposits:(0,em.GV)(s.amount),lastUpdated:(0,em.O5)()})}),console.log("Deposit approved successfully with transaction"),!0}catch(n){throw console.error("Error approving deposit:",n),n}})(e,"admin"),alert("Deposit approved successfully!"),E()}catch(t){alert("Error approving deposit: "+t.message)}},N=async e=>{const t=prompt("Enter rejection reason:");if(t)try{await(async(e,t,n)=>{try{const r=(0,em.H9)(tm.db,"deposits",e);return await(0,em.mZ)(r,{status:"rejected",rejectedAt:(0,em.O5)(),rejectedBy:t,rejectionReason:n}),!0}catch(r){throw console.error("Error rejecting deposit:",r),r}})(e,"admin",t),alert("Deposit rejected successfully!"),E()}catch(n){alert("Error rejecting deposit: "+n.message)}},T=async e=>{try{await(async(e,t)=>{try{const n=(0,em.H9)(tm.db,"withdrawals",e),r=await(0,em.x7)(n);if(!r.exists())throw new Error("Withdrawal not found");const s=r.data();return await(0,em.mZ)(n,{status:"approved",approvedAt:(0,em.O5)(),approvedBy:t}),await Ng(s.userId,-s.amount,"withdrawal"),!0}catch(n){throw console.error("Error approving withdrawal:",n),n}})(e,"admin"),alert("Withdrawal approved successfully!"),E()}catch(t){alert("Error approving withdrawal: "+t.message)}},k=async e=>{const t=prompt("Enter rejection reason:");if(t)try{await(async(e,t,n)=>{try{const r=(0,em.H9)(tm.db,"withdrawals",e);return await(0,em.mZ)(r,{status:"rejected",rejectedAt:(0,em.O5)(),rejectedBy:t,rejectionReason:n}),!0}catch(r){throw console.error("Error rejecting withdrawal:",r),r}})(e,"admin",t),alert("Withdrawal rejected successfully!"),E()}catch(n){alert("Error rejecting withdrawal: "+n.message)}},C=e=>{if(!e)return"N/A";return(e.toDate?e.toDate():new Date(e)).toLocaleString()},I=e=>e?e.startsWith("0x")?"".concat(e.slice(0,6),"...").concat(e.slice(-4)):"".concat(e.slice(0,6),"..."):"N/A",_=async e=>{g(e),await(async e=>{try{const t=(0,em.P)((0,em.rJ)(tm.db,"chatMessages"),(0,em._M)("userId","==",e),(0,em._M)("read","==",!1)),n=(await(0,em.GG)(t)).docs.map(e=>(0,em.mZ)(e.ref,{read:!0,readAt:(0,em.O5)()}));return await Promise.all(n),!0}catch(t){throw console.error("Error marking conversation as read:",t),t}})(e.userId)},P=async e=>{if(e.preventDefault(),y.trim()&&p&&!x){S(!0);try{await Rg(p.userId,y.trim()),v("")}catch(t){console.error("Error sending message:",t),alert("Error sending message: "+t.message)}finally{S(!1)}}},j=e=>{if(!e)return"";try{return(e.toDate?e.toDate():new Date(e)).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("Error formatting time:",t),""}};return(0,Pe.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,Pe.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:[(0,Pe.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,Pe.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900",children:"Admin Panel"}),(0,Pe.jsx)("p",{className:"text-gray-600 mt-2 text-sm sm:text-base",children:"Manage users, deposits, withdrawals, and trades"})]}),(0,Pe.jsx)("div",{className:"bg-white rounded-lg shadow-sm border mb-4 sm:mb-6",children:(0,Pe.jsx)("div",{className:"flex flex-wrap sm:flex-nowrap space-x-2 sm:space-x-8 px-3 sm:px-6 overflow-x-auto",children:[{id:"users",name:"Users",icon:"\ud83d\udc65"},{id:"deposits",name:"Deposits",icon:"\ud83d\udcb0"},{id:"withdrawals",name:"Withdrawals",icon:"\ud83d\udcb8"},{id:"trades",name:"Trades",icon:"\ud83d\udcc8"},{id:"chat",name:"Live Chat",icon:"\ud83d\udcac"}].map(n=>(0,Pe.jsxs)("button",{onClick:()=>t(n.id),className:"py-3 sm:py-4 px-2 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap ".concat(e===n.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,Pe.jsx)("span",{className:"mr-1 sm:mr-2",children:n.icon}),n.name]},n.id))})}),(0,Pe.jsx)("div",{className:"bg-white rounded-lg shadow-sm border",children:(0,Pe.jsx)("div",{className:"p-3 sm:p-6",children:w?(0,Pe.jsx)("div",{className:"flex justify-center items-center py-8 sm:py-12",children:(0,Pe.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 sm:h-8 sm:w-8 border-b-2 border-blue-600"})}):(0,Pe.jsxs)(Pe.Fragment,{children:["users"===e&&(0,Pe.jsx)("div",{className:"space-y-3 sm:space-y-4",children:n.map(e=>{var t,n,r;return(0,Pe.jsx)("div",{className:"bg-white rounded-lg p-4 sm:p-6 shadow-sm border",children:(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-3 sm:space-y-0",children:[(0,Pe.jsxs)("div",{className:"flex-1",children:[(0,Pe.jsx)("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:I(e.walletAddress)}),(0,Pe.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["Wallet Type: ",e.walletType]}),(0,Pe.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["IP: ",e.ipAddress]}),(0,Pe.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["Joined: ",C(e.createdAt)]})]}),(0,Pe.jsxs)("div",{className:"text-left sm:text-right",children:[(0,Pe.jsxs)("p",{className:"text-base sm:text-lg font-bold text-green-600",children:["$",(null===(t=e.balance)||void 0===t?void 0:t.toFixed(2))||"0.00"]}),(0,Pe.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["Total Deposits: $",(null===(n=e.totalDeposits)||void 0===n?void 0:n.toFixed(2))||"0.00"]}),(0,Pe.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["Total Profit: $",(null===(r=e.totalProfit)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]})]})},e.id)})}),"deposits"===e&&(0,Pe.jsx)("div",{className:"space-y-3 sm:space-y-4",children:i.map(e=>(0,Pe.jsx)("div",{className:"bg-white rounded-lg p-4 sm:p-6 shadow-sm border",children:(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-3 sm:space-y-0",children:[(0,Pe.jsxs)("div",{className:"flex-1",children:[(0,Pe.jsxs)("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:[e.amount," ",e.currency]}),(0,Pe.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["User: ",I(e.userId)]}),(0,Pe.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["TX Hash: ",e.txHash]}),(0,Pe.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["Date: ",C(e.createdAt)]})]}),(0,Pe.jsxs)("div",{className:"flex flex-col sm:items-end space-y-2",children:[(0,Pe.jsx)("span",{className:"px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status}),"pending"===e.status&&(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-1 sm:space-y-0 sm:space-x-2",children:[(0,Pe.jsx)("button",{onClick:()=>A(e.id),className:"px-2 sm:px-3 py-1 bg-green-600 text-white rounded text-xs sm:text-sm hover:bg-green-700",children:"Approve"}),(0,Pe.jsx)("button",{onClick:()=>N(e.id),className:"px-2 sm:px-3 py-1 bg-red-600 text-white rounded text-xs sm:text-sm hover:bg-red-700",children:"Reject"})]})]})]})},e.id))}),"withdrawals"===e&&(0,Pe.jsx)("div",{className:"space-y-3 sm:space-y-4",children:a.map(e=>(0,Pe.jsx)("div",{className:"bg-white rounded-lg p-4 sm:p-6 shadow-sm border",children:(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start space-y-3 sm:space-y-0",children:[(0,Pe.jsxs)("div",{className:"flex-1",children:[(0,Pe.jsxs)("h3",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:[e.amount," ",e.currency]}),(0,Pe.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["User: ",I(e.userId)]}),(0,Pe.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["To: ",I(e.walletAddress)]}),(0,Pe.jsxs)("p",{className:"text-xs sm:text-sm text-gray-500",children:["Date: ",C(e.createdAt)]})]}),(0,Pe.jsxs)("div",{className:"flex flex-col sm:items-end space-y-2",children:[(0,Pe.jsx)("span",{className:"px-2 sm:px-3 py-1 rounded-full text-xs sm:text-sm font-medium ".concat("pending"===e.status?"bg-yellow-100 text-yellow-800":"approved"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status}),"pending"===e.status&&(0,Pe.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-1 sm:space-y-0 sm:space-x-2",children:[(0,Pe.jsx)("button",{onClick:()=>T(e.id),className:"px-2 sm:px-3 py-1 bg-green-600 text-white rounded text-xs sm:text-sm hover:bg-green-700",children:"Approve"}),(0,Pe.jsx)("button",{onClick:()=>k(e.id),className:"px-2 sm:px-3 py-1 bg-red-600 text-white rounded text-xs sm:text-sm hover:bg-red-700",children:"Reject"})]})]})]})},e.id))}),"trades"===e&&(0,Pe.jsx)("div",{className:"space-y-4",children:l.map(e=>{var t,n,r;return(0,Pe.jsx)("div",{className:"bg-white rounded-lg p-6 shadow-sm border",children:(0,Pe.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Pe.jsxs)("div",{children:[(0,Pe.jsxs)("h3",{className:"font-semibold text-gray-900",children:[e.asset," - ",e.tradeType]}),(0,Pe.jsxs)("p",{className:"text-sm text-gray-500",children:["Amount: ",e.amount]}),(0,Pe.jsxs)("p",{className:"text-sm text-gray-500",children:["Leverage: ",e.leverage,"x"]}),(0,Pe.jsxs)("p",{className:"text-sm text-gray-500",children:["Entry Price: $",null===(t=e.entryPrice)||void 0===t?void 0:t.toFixed(2)]}),(0,Pe.jsxs)("p",{className:"text-sm text-gray-500",children:["Current Price: $",null===(n=e.currentPrice)||void 0===n?void 0:n.toFixed(2)]}),(0,Pe.jsxs)("p",{className:"text-sm text-gray-500",children:["Date: ",C(e.createdAt)]})]}),(0,Pe.jsxs)("div",{className:"text-right",children:[(0,Pe.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("open"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.status}),(0,Pe.jsxs)("p",{className:"text-lg font-bold mt-2 ".concat(e.profit>=0?"text-green-600":"text-red-600"),children:["$",(null===(r=e.profit)||void 0===r?void 0:r.toFixed(2))||"0.00"]}),e.isSmartTrade&&(0,Pe.jsx)("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded",children:"Smart Trade"})]})]})},e.id)})}),"chat"===e&&(0,Pe.jsxs)("div",{className:"flex h-[600px] border border-gray-200 rounded-lg overflow-hidden",children:[(0,Pe.jsxs)("div",{className:"w-1/3 border-r border-gray-200 bg-gray-50",children:[(0,Pe.jsxs)("div",{className:"p-4 border-b border-gray-200",children:[(0,Pe.jsx)("h3",{className:"font-semibold text-gray-900",children:"Conversations"}),(0,Pe.jsxs)("p",{className:"text-sm text-gray-500",children:[(null===f||void 0===f?void 0:f.length)||0," active chats"]})]}),(0,Pe.jsx)("div",{className:"overflow-y-auto",children:f&&0!==f.length?f.map(e=>(0,Pe.jsx)("div",{onClick:()=>_(e),className:"p-4 border-b border-gray-200 cursor-pointer hover:bg-gray-100 transition-colors ".concat((null===p||void 0===p?void 0:p.userId)===e.userId?"bg-blue-50 border-blue-200":""),children:(0,Pe.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Pe.jsxs)("div",{className:"flex-1",children:[(0,Pe.jsx)("p",{className:"font-medium text-gray-900",children:I(e.walletAddress||e.userId)}),(0,Pe.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.lastMessage||"No message"}),(0,Pe.jsx)("p",{className:"text-xs text-gray-500",children:j(e.lastMessageTime)})]}),e.unreadCount>0&&(0,Pe.jsx)("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 min-w-[20px] text-center",children:e.unreadCount})]})},e.userId)):(0,Pe.jsx)("div",{className:"p-4 text-center text-gray-500",children:(0,Pe.jsx)("p",{children:"No conversations yet"})})})]}),(0,Pe.jsx)("div",{className:"flex-1 flex flex-col",children:p?(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)("div",{className:"p-4 border-b border-gray-200 bg-white",children:(0,Pe.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Pe.jsx)("div",{className:"w-10 h-10 bg-blue-500 rounded-full flex items-center justify-center",children:(0,Pe.jsx)("span",{className:"text-white font-medium",children:I(p.walletAddress||p.userId).slice(0,2)})}),(0,Pe.jsxs)("div",{children:[(0,Pe.jsx)("h3",{className:"font-semibold text-gray-900",children:I(p.walletAddress||p.userId)}),(0,Pe.jsx)("p",{className:"text-sm text-gray-500",children:"User Support"})]})]})}),(0,Pe.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:0===h.length?(0,Pe.jsx)("div",{className:"text-center text-gray-500 mt-8",children:(0,Pe.jsx)("p",{children:"No messages yet"})}):h.map(e=>(0,Pe.jsx)("div",{className:"flex ".concat(e.isAdmin?"justify-end":"justify-start"),children:(0,Pe.jsxs)("div",{className:"max-w-xs lg:max-w-md px-4 py-2 rounded-lg ".concat(e.isAdmin?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"),children:[(0,Pe.jsx)("p",{className:"text-sm",children:e.message}),(0,Pe.jsxs)("div",{className:"text-xs mt-1 flex items-center justify-between ".concat(e.isAdmin?"text-blue-100":"text-gray-500"),children:[(0,Pe.jsx)("span",{children:j(e.createdAt)}),e.isAutoReply&&(0,Pe.jsx)("span",{className:"text-xs opacity-75",children:"\ud83e\udd16 Auto"})]})]})},e.id))}),(0,Pe.jsx)("div",{className:"border-t border-gray-200 p-4 bg-white",children:(0,Pe.jsxs)("form",{onSubmit:P,className:"flex space-x-3",children:[(0,Pe.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:x}),(0,Pe.jsx)("button",{type:"submit",disabled:!y.trim()||x,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:x?(0,Pe.jsxs)("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[(0,Pe.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,Pe.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,Pe.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})})})]})})]}):(0,Pe.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-500",children:(0,Pe.jsxs)("div",{className:"text-center",children:[(0,Pe.jsx)("svg",{className:"w-16 h-16 mx-auto mb-4 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Pe.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,Pe.jsx)("p",{children:"Select a conversation to start chatting"})]})})})]})]})})})]})})};const jN=function(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:768;const t=()=>"undefined"!==typeof window&&(window.matchMedia?window.matchMedia("(max-width: ".concat(e,"px)")).matches:window.innerWidth<=e),[n,r]=(0,s.useState)(t());return(0,s.useEffect)(()=>{const n=window.matchMedia("(max-width: ".concat(e,"px)")),s=()=>r(t());return n.addEventListener?n.addEventListener("change",s):n.addListener(s),window.addEventListener("resize",s),()=>{n.removeEventListener?n.removeEventListener("change",s):n.removeListener(s),window.removeEventListener("resize",s)}},[e]),n}();return(0,Pe.jsx)(Re,{children:(0,Pe.jsx)($f,{children:(0,Pe.jsx)(rA,{children:(0,Pe.jsx)(iA,{children:(0,Pe.jsx)(Ne,{children:(0,Pe.jsxs)("div",{className:"App",children:[(0,Pe.jsxs)(we,{children:[(0,Pe.jsx)(ye,{path:"/",element:e?(0,Pe.jsx)(NA,{}):(0,Pe.jsx)(EA,{})}),(0,Pe.jsx)(ye,{path:"/market",element:e?(0,Pe.jsx)(qA,{}):(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(aA,{}),(0,Pe.jsx)(NN,{})]})}),(0,Pe.jsx)(ye,{path:"/smart-trading",element:e?(0,Pe.jsx)(QA,{}):(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(aA,{}),(0,Pe.jsx)(IN,{})]})}),(0,Pe.jsx)(ye,{path:"/admin",element:(0,Pe.jsx)(PN,{})}),(0,Pe.jsx)(ye,{path:"/account",element:e?(0,Pe.jsx)(wN,{}):(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(aA,{}),(0,Pe.jsx)(EN,{})]})}),(0,Pe.jsx)(ye,{path:"/invite-friends",element:(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(aA,{}),(0,Pe.jsx)(TN,{})]})}),(0,Pe.jsx)(ye,{path:"/help-center",element:(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(aA,{}),(0,Pe.jsx)(kN,{})]})}),(0,Pe.jsx)(ye,{path:"/loan",element:e?(0,Pe.jsx)(KA,{}):(0,Pe.jsxs)(Pe.Fragment,{children:[(0,Pe.jsx)(aA,{}),(0,Pe.jsx)(CN,{})]})}),(0,Pe.jsx)(ye,{path:"/notifications",element:(0,Pe.jsx)(bN,{})})]}),(0,Pe.jsx)(_N,{}),(0,Pe.jsx)(eA,{})]})})})})})})};o.createRoot(document.getElementById("root")).render((0,Pe.jsx)(s.StrictMode,{children:(0,Pe.jsx)(jN,{})}))})()})();
//# sourceMappingURL=main.ab4e6cb4.js.map